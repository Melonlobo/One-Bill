!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"22jQ":function(t,e,o){var n,i,s;s=function(t){function e(t,e,o,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,o))}e(t=t?t._modules:{},"Series/SolidGaugeSeries.js",[t["Core/Series/Series.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Mixins/LegendSymbol.js"],t["Core/Utilities.js"]],(function(t,e,o,n,i){var s,a=e.parse,r=i.clamp,c=i.extend,l=i.isNumber,u=i.merge,h=i.pick,p=i.pInt;return(e=i.wrap)(o.Renderer.prototype.symbols,"arc",(function(t,e,o,n,i,s){return t=t(e,o,n,i,s),s.rounded&&(n=((s.r||n)-(s.innerR||0))/2,s=t[2],"M"===(e=t[0])[0]&&"L"===s[0]&&(e=["A",n,n,0,1,1,e[1],e[2]],t[2]=["A",n,n,0,1,1,s[1],s[2]],t[4]=e)),t})),function(t){var e={initDataClasses:function(t){var e,o=this.chart,n=0,i=this.options;this.dataClasses=e=[],t.dataClasses.forEach((function(s,r){s=u(s),e.push(s),s.color||("category"===i.dataClassColor?(s.color=(r=o.options.colors)[n++],n===r.length&&(n=0)):s.color=a(i.minColor).tweenTo(a(i.maxColor),r/(t.dataClasses.length-1)))}))},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],this.stops.forEach((function(t){t.color=a(t[1])}))},toColor:function(t,e){var o,n=this.stops,i=this.dataClasses;if(i)for(o=i.length;o--;){var s=i[o],a=s.from;if(n=s.to,(void 0===a||t>=a)&&(void 0===n||t<=n)){var r=s.color;e&&(e.dataClass=o);break}}else{for(this.logarithmic&&(t=this.val2lin(t)),t=1-(this.max-t)/(this.max-this.min),o=n.length;o--&&!(t>n[o][0]););r=(a=n[o]||n[o+1]).color.tweenTo((n=n[o+1]||a).color,t=1-(n[0]-t)/(n[0]-a[0]||1))}return r}};t.init=function(t){c(t,e)}}(s||(s={})),t.seriesType("solidgauge","gauge",{colorByPoint:!0,dataLabels:{y:0}},{drawLegendSymbol:n.drawRectangle,translate:function(){var t=this.yAxis;s.init(t),!t.dataClasses&&t.options.dataClasses&&t.initDataClasses(t.options),t.initStops(t.options),o.seriesTypes.gauge.prototype.translate.call(this)},drawPoints:function(){var t,e=this,o=e.yAxis,n=o.center,i=e.options,s=e.chart.renderer,a=i.overshoot,u=l(a)?a/180*Math.PI:0;l(i.threshold)&&(t=o.startAngleRad+o.translate(i.threshold,null,null,null,!0)),this.thresholdAngleRad=h(t,o.startAngleRad),e.points.forEach((function(t){if(!t.isNull){var a=t.graphic,l=o.startAngleRad+o.translate(t.y,null,null,null,!0),d=p(h(t.options.radius,i.radius,100))*n[2]/200,g=p(h(t.options.innerRadius,i.innerRadius,60))*n[2]/200,C=o.toColor(t.y,t),f=Math.min(o.startAngleRad,o.endAngleRad),m=Math.max(o.startAngleRad,o.endAngleRad);"none"===C&&(C=t.color||e.color||"none"),"none"!==C&&(t.color=C),l=r(l,f-u,m+u),!1===i.wrap&&(l=r(l,f,m)),f=Math.min(l,e.thresholdAngleRad),(l=Math.max(l,e.thresholdAngleRad))-f>2*Math.PI&&(l=f+2*Math.PI),t.shapeArgs=g={x:n[0],y:n[1],r:d,innerR:g,start:f,end:l,rounded:i.rounded},t.startR=d,a?(d=g.d,a.animate(c({fill:C},g)),d&&(g.d=d)):t.graphic=a=s.arc(g).attr({fill:C,"sweep-flag":0}).add(e.group),e.chart.styledMode||("square"!==i.linecap&&a.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),a.attr({stroke:i.borderColor||"none","stroke-width":i.borderWidth||0})),a&&a.addClass(t.getClassName(),!0)}}))},animate:function(t){t||(this.startAngleRad=this.thresholdAngleRad,o.seriesTypes.pie.prototype.animate.call(this,t))}}),s})),e(t,"masters/modules/solid-gauge.src.js",[],(function(){}))},t.exports?(s.default=s,t.exports=s):(n=[o("6n/F"),o("M8aS")],void 0===(i=(function(t){return s(t),s.Highcharts=t,s}).apply(e,n))||(t.exports=i))},zRPS:function(o,n,i){"use strict";i.r(n),i.d(n,"EmsDashboardModule",(function(){return Ot}));var s=i("ofXK"),a=i("3Pt+"),r=i("tyNb"),c=i("Ku73"),l=i("nStZ"),u=i("JX19"),h=i("6n/F"),p=i("rjUY"),d=i.n(p),g=i("22jQ"),C=i.n(g),f=i("Z9Wc"),m=i.n(f),b=i("jtHE"),y=i("1Z3b"),v=i("cFdI"),x=i("+0xr"),w=i("Dh3D"),S=i("pLZG"),T=i("KHMF"),P=i("sXtk"),O=i("fXoL"),M=i("dNgK"),k=i("Nm8O"),L=i("b6Qw"),E=i("xBcV"),_=i("rvYj"),D=i("XiUz"),R=i("jaxi"),F=i("Wp6s"),G=i("NFeN"),I=i("Qu3c");function W(t,e){if(1&t&&(O.Tb(0,"mat-button-toggle",38),O.Rc(1),O.Sb()),2&t){var o=e.$implicit,n=e.index;O.nc("id",o),O.nc("value",o),O.mc("checked",0===n),O.Cb(1),O.Sc(o)}}function j(t,e){if(1&t&&(O.Tb(0,"span",39),O.Rc(1),O.Sb()),2&t){var o=O.fc();O.Cb(1),O.Tc(" ",o.currentCostGain,"% ")}}function z(t,e){if(1&t&&(O.Tb(0,"span",40),O.Rc(1),O.Sb()),2&t){var o=O.fc();O.Cb(1),O.Tc(" ",o.currentCostGain,"% ")}}function N(t,e){if(1&t&&(O.Tb(0,"mat-icon",41),O.Rc(1,"arrow_upward"),O.Sb()),2&t){var o=O.fc();O.nc("matTooltip",o.toolTip)}}function A(t,e){if(1&t&&(O.Tb(0,"mat-icon",42),O.Rc(1,"arrow_downward"),O.Sb()),2&t){var o=O.fc();O.nc("matTooltip",o.toolTip)}}function V(t,e){if(1&t&&(O.Tb(0,"span",39),O.Rc(1),O.Sb()),2&t){var o=O.fc();O.Cb(1),O.Tc(" ",o.previousCostGain,"% ")}}function Y(t,e){if(1&t&&(O.Tb(0,"span",40),O.Rc(1),O.Sb()),2&t){var o=O.fc();O.Cb(1),O.Tc(" ",o.previousCostGain,"% ")}}function H(t,e){if(1&t&&(O.Tb(0,"mat-icon",41),O.Rc(1,"arrow_upward"),O.Sb()),2&t){var o=O.fc();O.nc("matTooltip",o.toolTip)}}function B(t,e){if(1&t&&(O.Tb(0,"mat-icon",42),O.Rc(1,"arrow_downward"),O.Sb()),2&t){var o=O.fc();O.nc("matTooltip",o.toolTip)}}function $(t,e){if(1&t&&(O.Tb(0,"span",39),O.Rc(1),O.Sb()),2&t){var o=O.fc();O.Cb(1),O.Tc(" ",o.forecastCostGain,"% ")}}function Q(t,e){if(1&t&&(O.Tb(0,"span",40),O.Rc(1),O.Sb()),2&t){var o=O.fc();O.Cb(1),O.Tc(" ",o.forecastCostGain,"% ")}}function U(t,e){1&t&&(O.Tb(0,"mat-icon",43),O.Rc(1,"arrow_upward"),O.Sb())}function K(t,e){1&t&&(O.Tb(0,"mat-icon",44),O.Rc(1,"arrow_downward"),O.Sb())}function q(t,e){if(1&t&&(O.Tb(0,"th",49),O.Rc(1),O.Sb()),2&t){var o=O.fc(2).$implicit;O.Cb(1),O.Tc(" ",o.name,"")}}function J(t,e){if(1&t&&(O.Tb(0,"td",50),O.Rc(1),O.Sb()),2&t){var o=e.$implicit,n=O.fc(2).$implicit;O.Cb(1),O.Tc(" ",o[n.property]," ")}}function X(t,e){if(1&t&&(O.Rb(0,46),O.Pc(1,q,2,1,"th",47),O.Pc(2,J,2,1,"td",48),O.Qb()),2&t){var o=O.fc().$implicit;O.mc("matColumnDef",o.property)}}function Z(t,e){if(1&t&&(O.Rb(0),O.Pc(1,X,3,1,"ng-container",45),O.Qb()),2&t){var o=e.$implicit;O.Cb(1),O.mc("ngIf",o.isModelProperty)}}function tt(t,e){1&t&&(O.Tb(0,"th",51),O.Rc(1,"Consumption"),O.Sb())}function et(t,e){if(1&t&&(O.Tb(0,"td",52),O.Rc(1),O.Sb()),2&t){var o=e.$implicit;O.Cb(1),O.Tc(" ",o.currentConsumption," ")}}function ot(t,e){1&t&&(O.Tb(0,"th",51),O.Rc(1,"Difference"),O.Sb())}function nt(t,e){if(1&t&&(O.Tb(0,"td",52),O.Rc(1),O.Sb()),2&t){var o=e.$implicit;O.Cb(1),O.Tc(" ",o.consumptionDifference,"% ")}}function it(t,e){1&t&&O.Ob(0,"th",51)}function st(t,e){1&t&&(O.Tb(0,"mat-icon",39),O.Rc(1,"arrow_upward"),O.Sb())}function at(t,e){1&t&&(O.Tb(0,"mat-icon",40),O.Rc(1,"arrow_downward"),O.Sb())}function rt(t,e){if(1&t&&(O.Tb(0,"td",52),O.Pc(1,st,2,0,"mat-icon",12),O.Pc(2,at,2,0,"mat-icon",13),O.Sb()),2&t){var o=e.$implicit;O.Cb(1),O.mc("ngIf",1==o.status),O.Cb(1),O.mc("ngIf",0==o.status)}}function ct(t,e){1&t&&O.Ob(0,"tr",53)}function lt(t,e){1&t&&O.Ob(0,"tr",54)}m()(h),d()(h),C()(h),i("Tos5")(h);var ut,ht,pt,dt=[{path:"",component:(ut=function(){function o(e,n,i,s,a,r,c){var l;t(this,o),this.emsDashboardService=e,this.snackbar=n,this.generalDashBoardService=i,this.dashBoardService=s,this.jwtHelperService=a,this.cookieService=r,this.envService=c,this.subject$=new b.a(1),this.data$=this.subject$.asObservable(),this.displayedColumns=[{name:"Group Name",property:"groupName",visible:!0,isModelProperty:!0},{name:"Consumption",property:"currentConsumption",visible:!0,isModelProperty:!1},{name:"Difference",property:"consumptionDifference ",visible:!0,isModelProperty:!1},{name:" ",property:"status",visible:!0,isModelProperty:!1}],this.pageSize=8,this.columnsProps=this.displayedColumns.map((function(t){return t.property})),this.showSpinner=!1,this.role="",this.energyCostComparison=[],this.costComparisonChart=[],this.currentEnergyCost=0,this.previousEnergyCost=0,this.forecastEnergyCost=0,this.lastPreviousTotalCost=0,this.previousforecastTotalCost=0,this.consumptionData=[],this.consumptionChartData=[],this.consumptionSeriesData=[],this.lineChartOptions={},this.btuConsumptionData=[],this.electricityConsumptionData=[],this.waterConsumptionData=[],this.gasConsumptionData=[],this.frequency=["Daily","Weekly","Monthly","Yearly"],this.meterTypes=[],this.costLabelComparison="",this.previousCostLabelComparison="",this.forecastCostLabelComparison="",this.isPreviousCostGain=!1,this.isCurrentCostGain=!1,this.isForecastCostGain=!1,this.currentCostGain=0,this.previousCostGain=0,this.forecastCostGain=0,this.noStackData=!0,this._gap=16,this.gap=this._gap+"px",this.col2="1 1 calc(50% - ".concat(this._gap/2,"px)"),this.col3="1 1 calc(33.3333% - ".concat(this._gap/1.5,"px)"),this.gaugeChartOptions={},this.solidgaugeChartoptions={},this.data=[80],this.clientId="0",this.pieChartOptions={},this.utilityTypeDatas=[],this.electricityConsumption="",this.btuConsumption="",this.waterConsumption="",this.gasConsumption="",this.electricityYesterdayConsumption="",this.btuYesterdayConsumption="",this.waterYesterdayConsumption="",this.gasYesterdayConsumption="",this.electricityForecastConsumption="",this.btuForecastConsumption="",this.waterForecastConsumption="",this.gasForecastConsumption="",this.electricityCost="",this.btuCost="",this.waterCost="",this.gasCost="",this.electricityYesterdayCost="",this.btuYesterdayCost="",this.waterYesterdayCost="",this.gasYesterdayCost="",this.electricityForecastCost="",this.btuForecastCost="",this.waterForecastCost="",this.gasForecastCost="",this.electricityMeterCount="",this.btuMeterCount="",this.waterMeterCount="",this.gasMeterCount="",this.consumptionLabel="",this.previousConsumptionLabel="",this.forecastConsumptionLabel="",this.costLabel="",this.previousCostLabel="",this.forecastCostLabel="",this.currency="",this.estidamaChart={},this.countStats=[],this.currentChartFileName="",this.previousChartFileName="",this.forecastChartFileName="",this.currency=null!==(l=Object(T.e)("Currency"))&&void 0!==l?l:c.currencyFormat}var n,i,s;return n=o,(i=[{key:"ngOnInit",value:function(){this.cookieService.set("ownerId","0"),this.getClientId(),this.currentChartFileName="assets/img/Green.png",this.previousChartFileName="assets/img/Yellow.png",this.forecastChartFileName="assets/img/Blue.png",this.getUtilities(),this.selectedValue="Daily",this.setConsumptionLables()}},{key:"getClientId",value:function(){var t=this.cookieService.get("access_token"),e=this.jwtHelperService.decodeToken(t);if(e&&(this.role=e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]),this.role&&"ems"==this.role.toLowerCase()){var o=this.cookieService.get("filterData");if(o){var n=JSON.parse(o);this.clientId=""==n.strClientId?"0":n.strClientId}}else this.clientId=this.cookieService.get("globalClientId")}},{key:"getEnergyCost",value:function(){var t=this;this.showSpinner=!1;var e={chartName:"",chartValues:[],percentage:[]};this.energyCostComparison=[],this.costComparisonChart=[];var o=[];this.currentEnergyCost=0,this.previousEnergyCost=0,this.forecastEnergyCost=0,this.lastPreviousTotalCost=0,this.currentCostGain=0,this.previousCostGain=0,this.forecastCostGain=0,this.isCurrentCostGain=!1,this.isPreviousCostGain=!1,this.isForecastCostGain=!1,this.pieChartOptions=this.setPieChart(e);var n=document.getElementById("gdcontainer3");n&&h.chart("gdcontainer3",this.pieChartOptions),this.stackedBarChartOptions=this.setStackedCostComparisonChart(this.energyCostComparison,this.costComparisonChart);var i=document.getElementById("gdcontainer5");if(i&&h.chart("gdcontainer5",this.stackedBarChartOptions),this.meterTypes&&this.meterTypes.length>0){var s=this.meterTypes.join(",");this.emsDashboardService.getGroupWiseEnergyCost(this.clientId,s,this.selectedValue).subscribe({next:function(s){s?(t.groupWiseEnergyCost=s,t.showSpinner=!1,t.currentEnergyCost=t.groupWiseEnergyCost.currentTotalCost,t.previousEnergyCost=t.groupWiseEnergyCost.previousTotalCost,t.forecastEnergyCost=t.groupWiseEnergyCost.forecastTotalCost,t.lastPreviousTotalCost=t.groupWiseEnergyCost.lastPreviousTotalCost,t.currentCostGain=t.groupWiseEnergyCost.currentCostGain,t.previousCostGain=t.groupWiseEnergyCost.previousCostGain,t.forecastCostGain=t.groupWiseEnergyCost.forecastCostGain,t.isCurrentCostGain=t.currentCostGain>0,t.isPreviousCostGain=t.previousCostGain>0,t.isForecastCostGain=t.forecastCostGain>0,e.chartValues=[],t.groupWiseEnergyCost.currentEnergyCost.forEach((function(t){e.chartValues.push([t.utilityType,t.currentConsumption])})),t.pieChartOptions=t.setPieChart(e),(n=document.getElementById("gdcontainer3"))&&h.chart("gdcontainer3",t.pieChartOptions),t.groupWiseEnergyCost=t.groupWiseEnergyCost.groupWiseEnergyCost,t.groupWiseEnergyCost.forEach((function(t){t.currentConsumption=t.currentConsumption+t.unit,t.costDifference=null==t.costDifference?"0":t.costDifference})),t.dataSource=new x.k(t.groupWiseEnergyCost),t.subject$.next(t.groupWiseEnergyCost),t.dataSource=new x.k(t.groupWiseEnergyCost),t.data$.pipe(Object(S.a)((function(t){return!!t}))).subscribe((function(e){t.groupWiseEnergyCost=e,t.dataSource.data=e})),t.energyCostComparison.push(s.previousEnergyCost),t.energyCostComparison.push(s.currentEnergyCost),t.costComparisonChart=[],t.meterTypes.forEach((function(e){t.energyCostComparison.forEach((function(o){o.forEach((function(o){o.utilityType==e&&t.costComparisonChart.push(o.currentConsumption)}))})),o.push({name:e,data:t.costComparisonChart}),t.costComparisonChart=[]})),t.stackedBarChartOptions=t.setStackedCostComparisonChart(t.energyCostComparison,o),(i=document.getElementById("gdcontainer5"))&&h.chart("gdcontainer5",t.stackedBarChartOptions)):t.showSpinner=!1},error:function(e){t.showSpinner=!1}}),this.ngAfterViewInit()}else this.showSpinner=!1}},{key:"getUtilities",value:function(){var t=this;this.generalDashBoardService.getUtilities(this.clientId).subscribe((function(e){e&&(t.meterTypes=[],e.forEach((function(e){t.meterTypes.push(e.description),t.meterTypes.sort((function(t,e){return e.localeCompare(t)})).reverse()})),t.getConsumptionData(),t.getEnergyCost())}))}},{key:"notificationMessage",value:function(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}},{key:"getGroupWiseEnergyCost",value:function(){var t=this;this.groupWiseEnergyCost=[];var e=this.meterTypes.join(",");this.emsDashboardService.getGroupWiseEnergyCost(this.clientId,e,this.selectedValue).subscribe({next:function(e){t.groupWiseEnergyCost=e.GroupWiseEnergyCost,t.groupWiseEnergyCost.forEach((function(e){e.currentCost=t.currency+" "+e.currentCost,e.costDifference=null==e.costDifference?"0%":e.costDifference})),t.dataSource=new x.k(t.groupWiseEnergyCost),t.subject$.next(t.groupWiseEnergyCost)},error:function(e){t.notificationMessage("Group-Wise Energy Cost Not Found.","red-snackbar")}}),this.dataSource=new x.k(this.groupWiseEnergyCost),this.data$.pipe(Object(S.a)((function(t){return!!t}))).subscribe((function(e){t.groupWiseEnergyCost=e,t.dataSource.data=e})),this.ngAfterViewInit()}},{key:"ngAfterViewInit",value:function(){null!=this.dataSource&&(this.dataSource.sort=this.sort)}},{key:"getConsumptionData",value:function(){var t=this;this.showSpinner=!1,this.consumptionData=[];var e=[],o=0;this.consumptionChartData=[],this.consumptionSeriesData=[],this.lineChartOptions=this.setLineChart(e,this.consumptionChartData,this.consumptionSeriesData);var n=document.getElementById("gdcontainer2");n&&h.chart("gdcontainer2",this.lineChartOptions);var i=this.meterTypes.join(","),s=["#1fd286","#1e5eff","#ffda44","#d80027","#808080","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"];this.meterTypes&&this.meterTypes.length>0?this.emsDashboardService.getConsumptionData(this.clientId,i,this.selectedValue).subscribe({next:function(i){if(i){t.showSpinner=!1;var a=i;t.consumptionData=a.consumptionData,t.consumptionData.forEach((function(e){t.consumptionChartData.push({labels:{format:"{value}"+e.unit,style:{color:s[o]}},title:{text:e.utilityType,style:{color:s[o]}},opposite:o%2!=0}),t.consumptionSeriesData.push({name:e.utilityType,type:"spline",yAxis:o,data:e.data,marker:{enabled:!1},title:{text:e.utilityType,style:{color:s[o]}},opposite:o%2!=0}),o++})),e=a.consumptionData[0]&&null!=a.consumptionData[0].label?a.consumptionData[0].label:[],t.lineChartOptions=t.setLineChart(e,t.consumptionChartData,t.consumptionSeriesData),(n=document.getElementById("gdcontainer2"))&&h.chart("gdcontainer2",t.lineChartOptions),t.showSpinner=!1}else t.showSpinner=!1},error:function(e){t.showSpinner=!1}}):this.showSpinner=!1}},{key:"setStackedCostComparisonChart",value:function(){var t=arguments.length>1?arguments[1]:void 0,e="",o="",n=new Date,i=new Date;return"Monthly"==this.selectedValue?(i.setDate(1),i.setMonth(i.getMonth()-1),e=n.toLocaleString("en-us",{month:"long"}),o=i.toLocaleString("en-us",{month:"long"})):"Daily"==this.selectedValue?(e="Today",o="Yesterday"):"Weekly"==this.selectedValue?(e="This Week",o="Last Week"):"Yearly"==this.selectedValue&&(e=n.getFullYear().toString(),i.setFullYear(i.getFullYear()-1),o=i.getFullYear().toString()),{chart:{type:"column",marginLeft:130},title:{text:"Energy Cost Comparison",style:{fontWeight:"bolder",fontFamily:"Roboto"}},credits:{enabled:!1},colors:["#1fd286","#1e5eff","#ffda44","#d80027","#808080","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],xAxis:{categories:[o,e],visible:!0},yAxis:{title:{text:"Total Cost"}},legend:{align:"center",x:30,verticalAlign:"bottom",y:20,floating:!1,backgroundColor:h.defaultOptions.legend.backgroundColor||"white",shadow:!1},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: "+this.currency+" {point.y}<br/>Total: "+this.currency+" {point.stackTotal}"},plotOptions:{series:{pointWidth:50},column:{pointWidth:50,stacking:"normal",dataLabels:{enabled:!1}}},series:t}}},{key:"setPieChart",value:function(t){var e=this,o={chart:{height:390,type:"pie",options3d:{enabled:!1,alpha:45}},title:{text:this.selectedValue+" Energy Cost",align:"left",style:{fontFamily:"Roboto",fontWeight:"bolder"}},credits:{enabled:!1},exporting:{enabled:!1},noData:{style:{fontWeight:"bold",fontSize:"15px"}},legend:{floating:!1,align:"left",verticalAlign:"bottom",layout:"horizontal",fontFamily:"Roboto"},plotOptions:{series:{shadow:!1},pointPadding:.25,pie:{innerSize:150,depth:25,colors:["#1fd286","#1e5eff","#ffda44","#d80027","#808080","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]}},series:[{name:"Amount in "+this.currency,type:"pie",allowPointSelect:!0,dataLabels:{enabled:!1},keys:["name","y","selected","sliced"],data:t.chartValues,showInLegend:!0}]},n=o.series[0].data;return n.forEach((function(t){t[0]=t[0]+":  "+e.currency+" "+t[1]})),o.series[0].data=n,o}},{key:"onValChange",value:function(t){null!=t&&(this.selectedValue=t.value),this.setConsumptionLables(t.value),this.getConsumptionData(),this.getEnergyCost()}},{key:"selectButton",value:function(){var t;t=null==this.selectedValue?"Daily":this.selectedValue;var e=document.getElementById(t);this.frequency.forEach((function(t){document.getElementById(t).className="inactive"})),e.className="active"}},{key:"setConsumptionLables",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Daily";this.consumptionLabel="",this.previousConsumptionLabel="",this.forecastConsumptionLabel="",this.costLabel="",this.previousCostLabel="",this.forecastCostLabel="","Daily"===t?(this.costLabel="Today's Energy Cost",this.previousCostLabel="Yesterday's Energy Cost",this.forecastCostLabel="Forecast Energy Cost",this.costLabelComparison=" than yesterday",this.previousCostLabelComparison=" than day before yesterday",this.forecastCostLabelComparison=" than today"):"Weekly"===t?(this.costLabel="Current Week Energy Cost",this.previousCostLabel="Last Week Energy Cost",this.forecastCostLabel="Forecast Energy Cost",this.costLabelComparison=" than last week",this.previousCostLabelComparison=" than last week",this.forecastCostLabelComparison=" than current week"):"Monthly"===t?(this.costLabel="Current Month Energy Cost",this.previousCostLabel="Last Month Energy Cost",this.forecastCostLabel="Forecast Energy Cost",this.costLabelComparison=" than last month",this.previousCostLabelComparison=" than last month",this.forecastCostLabelComparison=" than current month"):(this.costLabel="Current Year Energy Cost",this.previousCostLabel="Last Year Energy Cost",this.forecastCostLabel="Forecast Energy Cost",this.costLabelComparison=" than last year",this.previousCostLabelComparison=" than last year",this.forecastCostLabelComparison=" than current year")}},{key:"reset",value:function(){this.electricityConsumption="",this.electricityYesterdayConsumption="",this.electricityForecastConsumption="",this.btuConsumption="",this.btuYesterdayConsumption="",this.btuForecastConsumption="",this.waterConsumption="",this.waterYesterdayConsumption="",this.waterForecastConsumption="",this.gasConsumption="",this.gasYesterdayConsumption="",this.gasForecastConsumption="",this.electricityCost="",this.btuCost="",this.waterCost="",this.gasCost="",this.electricityYesterdayCost="",this.btuYesterdayCost="",this.waterYesterdayCost="",this.gasYesterdayCost="",this.electricityForecastCost="",this.btuForecastCost="",this.waterForecastCost="",this.gasForecastCost=""}},{key:"setLineChart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{chart:{zoomType:"xy"},colors:["#1fd286","#1e5eff","#ffda44","#d80027","#808080","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],credits:{enabled:!1},title:{text:this.selectedValue+" Consumption",align:"left",style:{fontWeight:"bold",fontFamily:"Roboto"}},xAxis:[{categories:0==isNaN(null==t?void 0:t[0])?this.formatLabel(t):t,crosshair:!0}],yAxis:e,tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"top",floating:!0,backgroundColor:h.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.25)"},series:o,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{floating:!1,layout:"horizontal",align:"center",verticalAlign:"bottom",x:0,y:0},yAxis:[{labels:{align:"right",x:0,y:-6},showLastLabel:!1},{labels:{align:"left",x:0,y:-6},showLastLabel:!1},{visible:!1}]}}]}}}},{key:"formatLabel",value:function(t){var e=this;return null!=t&&(t=t.map((function(t){return t.length>3&&"Monthly"==e.selectedValue&&(t=t.slice(0,3)),t}))),t}},{key:"visibleColumns",get:function(){return this.displayedColumns.filter((function(t){return t.visible})).map((function(t){return t.property}))}},{key:"content",set:function(t){this.sort=t,this.sort&&this.dataSource&&(this.dataSource.sort=this.sort)}}])&&e(n.prototype,i),s&&e(n,s),o}(),ut.\u0275fac=function(t){return new(t||ut)(O.Nb(u.a),O.Nb(M.b),O.Nb(v.a),O.Nb(y.a),O.Nb(k.a),O.Nb(L.a),O.Nb(P.a))},ut.\u0275cmp=O.Hb({type:ut,selectors:[["fury-ems-general-dashboard"]],viewQuery:function(t,e){var o;1&t&&O.Vc(w.a,!0),2&t&&O.zc(o=O.cc())&&(e.content=o.first)},inputs:{displayedColumns:"displayedColumns"},decls:84,vars:33,consts:[["mode","card"],["fxLayout","column",1,"content"],[1,"toolBar"],[1,"example-spacer"],["name","fontStyle","aria-label","Font Style",1,"buttons",2,"font-size","small","float","right",3,"value","change"],["style","padding: 0px;",3,"id","checked","value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutGap","10px",1,"content",2,"padding","0% 0% 1% 0%"],["fxFlex","",1,"mat-elevation-z4"],["fxFlex","60%"],[1,"topPadding"],[1,"tileHeading"],[1,"energyCost"],["class","gain",4,"ngIf"],["class","loss",4,"ngIf"],["class","gain",3,"matTooltip",4,"ngIf"],["class","loss",3,"matTooltip",4,"ngIf"],[2,"font-size","small"],["fxFlex","40%"],["width","100%","height","40%",2,"padding-top","70px",3,"src"],["class","gain","style","padding-top: 10px;",4,"ngIf"],["class","loss","style","padding-top: 10px;",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column",1,"content",2,"padding","0% 0% 0.25% 0.20%"],["id","gdcontainer2"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutGap","1%",1,"content",2,"padding","0% 0.25% 1% 0.25%","width","100%"],["fxFlex","33%",1,"mat-elevation-z4"],["id","gdcontainer3"],[2,"font-size","large","margin-top","5px","font-weight","bolder"],[2,"width","100%","height","340px","float","left","overflow","auto","overflow-x","visible"],["mat-table","","matSort","",1,"table-sparkline",2,"width","100%",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","currentConsumption"],["mat-header-cell","","class","header-align-right",4,"matHeaderCellDef"],["mat-cell","","class","header-align-right",4,"matCellDef"],["matColumnDef","consumptionDifference "],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],["id","gdcontainer5"],[2,"padding","0px",3,"id","checked","value"],[1,"gain"],[1,"loss"],[1,"gain",3,"matTooltip"],[1,"loss",3,"matTooltip"],[1,"gain",2,"padding-top","10px"],[1,"loss",2,"padding-top","10px"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"header-align-right"],["mat-cell","",1,"header-align-right"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(O.Tb(0,"fury-page-layout",0),O.Tb(1,"fury-page-layout-content",1),O.Tb(2,"div"),O.Tb(3,"span",2),O.Rc(4,"Dashboard"),O.Sb(),O.Ob(5,"span",3),O.Tb(6,"mat-button-toggle-group",4),O.bc("change",(function(t){return e.onValChange(t)})),O.Pc(7,W,2,4,"mat-button-toggle",5),O.Sb(),O.Sb(),O.Tb(8,"div",6),O.Tb(9,"mat-card",7),O.Tb(10,"div",8),O.Ob(11,"span",9),O.Tb(12,"span",10),O.Rc(13),O.Sb(),O.Tb(14,"p",11),O.Rc(15),O.Sb(),O.Pc(16,j,2,1,"span",12),O.Pc(17,z,2,1,"span",13),O.Tb(18,"span"),O.Pc(19,N,2,1,"mat-icon",14),O.Pc(20,A,2,1,"mat-icon",15),O.Sb(),O.Tb(21,"span",16),O.Rc(22),O.Sb(),O.Sb(),O.Tb(23,"div",17),O.Ob(24,"img",18),O.Sb(),O.Sb(),O.Tb(25,"mat-card",7),O.Tb(26,"div",8),O.Ob(27,"span",9),O.Tb(28,"span",10),O.Rc(29),O.Sb(),O.Ob(30,"span",9),O.Tb(31,"p",11),O.Rc(32),O.Sb(),O.Pc(33,V,2,1,"span",12),O.Pc(34,Y,2,1,"span",13),O.Tb(35,"span"),O.Pc(36,H,2,1,"mat-icon",14),O.Pc(37,B,2,1,"mat-icon",15),O.Sb(),O.Tb(38,"span",16),O.Rc(39),O.Sb(),O.Sb(),O.Tb(40,"div",17),O.Ob(41,"img",18),O.Sb(),O.Sb(),O.Tb(42,"mat-card",7),O.Tb(43,"div",8),O.Ob(44,"span",9),O.Tb(45,"span",10),O.Rc(46),O.Sb(),O.Ob(47,"span",9),O.Tb(48,"p",11),O.Rc(49),O.Sb(),O.Pc(50,$,2,1,"span",12),O.Pc(51,Q,2,1,"span",13),O.Tb(52,"span"),O.Pc(53,U,2,0,"mat-icon",19),O.Pc(54,K,2,0,"mat-icon",20),O.Sb(),O.Tb(55,"span",16),O.Rc(56),O.Sb(),O.Sb(),O.Tb(57,"div",17),O.Ob(58,"img",18),O.Sb(),O.Sb(),O.Sb(),O.Tb(59,"div",21),O.Tb(60,"mat-card",7),O.Ob(61,"div",22),O.Sb(),O.Sb(),O.Tb(62,"div",23),O.Tb(63,"mat-card",24),O.Ob(64,"div",25),O.Sb(),O.Tb(65,"mat-card",24),O.Tb(66,"p",26),O.Rc(67,"Group-wise Energy Consumption"),O.Sb(),O.Tb(68,"div",27),O.Tb(69,"table",28),O.Pc(70,Z,2,1,"ng-container",29),O.Rb(71,30),O.Pc(72,tt,2,0,"th",31),O.Pc(73,et,2,1,"td",32),O.Qb(),O.Rb(74,33),O.Pc(75,ot,2,0,"th",31),O.Pc(76,nt,2,1,"td",32),O.Qb(),O.Rb(77,34),O.Pc(78,it,1,0,"th",31),O.Pc(79,rt,3,2,"td",32),O.Qb(),O.Pc(80,ct,1,0,"tr",35),O.Pc(81,lt,1,0,"tr",36),O.Sb(),O.Sb(),O.Sb(),O.Tb(82,"mat-card",24),O.Ob(83,"div",37),O.Sb(),O.Sb(),O.Sb(),O.Sb()),2&t&&(O.Cb(6),O.mc("value",e.selectedValue),O.Cb(1),O.mc("ngForOf",e.frequency),O.Cb(6),O.Sc(e.costLabel),O.Cb(2),O.Uc("",e.currency," ",e.currentEnergyCost," "),O.Cb(1),O.mc("ngIf",1==e.isCurrentCostGain),O.Cb(1),O.mc("ngIf",0==e.isCurrentCostGain),O.Cb(2),O.mc("ngIf",1==e.isCurrentCostGain),O.Cb(1),O.mc("ngIf",0==e.isCurrentCostGain),O.Cb(2),O.Tc(" ",e.costLabelComparison," "),O.Cb(2),O.nc("src",e.currentChartFileName,O.Gc),O.Cb(5),O.Sc(e.previousCostLabel),O.Cb(3),O.Uc("",e.currency," ",e.previousEnergyCost," "),O.Cb(1),O.mc("ngIf",1==e.isPreviousCostGain),O.Cb(1),O.mc("ngIf",0==e.isPreviousCostGain),O.Cb(2),O.mc("ngIf",1==e.isPreviousCostGain),O.Cb(1),O.mc("ngIf",0==e.isPreviousCostGain),O.Cb(2),O.Tc(" ",e.previousCostLabelComparison," "),O.Cb(2),O.nc("src",e.previousChartFileName,O.Gc),O.Cb(5),O.Sc(e.forecastCostLabel),O.Cb(3),O.Uc("",e.currency," ",e.forecastEnergyCost," "),O.Cb(1),O.mc("ngIf",1==e.isForecastCostGain),O.Cb(1),O.mc("ngIf",0==e.isForecastCostGain),O.Cb(2),O.mc("ngIf",1==e.isForecastCostGain),O.Cb(1),O.mc("ngIf",0==e.isForecastCostGain),O.Cb(2),O.Tc(" ",e.forecastCostLabelComparison," "),O.Cb(2),O.nc("src",e.forecastChartFileName,O.Gc),O.Cb(11),O.mc("dataSource",e.dataSource),O.Cb(1),O.mc("ngForOf",e.displayedColumns),O.Cb(10),O.mc("matHeaderRowDef",e.visibleColumns),O.Cb(1),O.mc("matRowDefColumns",e.visibleColumns))},directives:[E.a,_.a,D.d,R.b,s.n,D.e,F.a,D.b,s.o,x.j,w.a,x.c,x.e,x.b,x.g,x.i,R.a,G.a,I.a,x.d,w.b,x.a,x.f,x.h],styles:['.padding[_ngcontent-%COMP%]{padding:0 0 24px}.content[_ngcontent-%COMP%]{margin-top:1%}ul[_ngcontent-%COMP%]{margin:20px}.label-color[_ngcontent-%COMP%]{position:relative}.label-color[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:20px}.label-color[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{width:10px;height:10px;display:inline-block;background-color:#ccc;position:absolute;left:5px;top:5px}.heading[_ngcontent-%COMP%]{background:#1976d2;font-size:17px;height:0}.img-style[_ngcontent-%COMP%]{width:32px}.common-buttons[_ngcontent-%COMP%]{height:50%}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#0051b4;color:#fff!important}.mat-card[class*=mat-elevation-z].consumption[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px #ff4500,0 1px 1px 0 #ff4500,0 1px 3px 0 #ff4500}.mat-card[class*=mat-elevation-z].average[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px #2bbb18,0 1px 1px 0 #2bbb18,0 1px 3px 0 #2bbb18}.mat-card[class*=mat-elevation-z].peak[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px red,0 1px 1px 0 red,0 1px 3px 0 red}.card-height[_ngcontent-%COMP%]{min-width:26%}.consumption-icon[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff}.average-icon[_ngcontent-%COMP%]{background-color:#2bbb18;color:#fff}.peak-icon[_ngcontent-%COMP%]{background-color:red;color:#fff}.myInput[_ngcontent-%COMP%]{height:50px!important;padding:10px!important}.electricityReminder[_ngcontent-%COMP%]{background:#d32e44;color:#fff;max-width:100%}.waterReminder[_ngcontent-%COMP%]{background:#72a81b;color:#fff;max-width:100%}.btuReminder[_ngcontent-%COMP%]{background:#03a9f4;color:#fff;max-width:100%}.gasReminder[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;max-width:100%}.datacounter[_ngcontent-%COMP%]{margin:0;padding-left:10%}.datacounter[_ngcontent-%COMP%], .fontSize[_ngcontent-%COMP%]{font-size:large;vertical-align:middle;font-weight:700}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.customRowFlexContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.customColumnFlexContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;padding:5px;justify-content:space-evenly}.customCardHeader[_ngcontent-%COMP%]{font-size:small}.customCardHeader[_ngcontent-%COMP%], .customCardHighHeader[_ngcontent-%COMP%]{flex-direction:row;flex:auto;justify-content:flex-end;align-items:flex-end;color:#636e72}.customCardHighHeader[_ngcontent-%COMP%]{font-size:medium;font-size:small}.customCardHeaderValue[_ngcontent-%COMP%]{font-size:medium;color:#094b97}.customCardHeaderValue[_ngcontent-%COMP%], .customCardHighHeaderValue[_ngcontent-%COMP%]{flex-direction:row;flex:auto;justify-content:flex-end;align-items:flex-end;font-weight:700;padding:5px;min-width:1fr}.customCardHighHeaderValue[_ngcontent-%COMP%]{font-size:large;color:#fd7272;font-size:25px}.customUtilityType[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin:10px}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.toolBar[_ngcontent-%COMP%]{font-size:x-large;font-weight:700;line-height:50px}.customMatToolbar[_ngcontent-%COMP%]{font-weight:35px;font-size:larger;margin-left:20px;margin-bottom:-20px}h6[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#40407a!important}.energyCost[_ngcontent-%COMP%]{font-size:x-large;vertical-align:middle;margin:0;padding:25px 0 10px;font-weight:700}.gain[_ngcontent-%COMP%]{color:#5cb85c}.gain[_ngcontent-%COMP%], .loss[_ngcontent-%COMP%]{padding:0 10px;font-weight:bolder;font-size:large}.loss[_ngcontent-%COMP%]{color:#d9534f}.alignRight[_ngcontent-%COMP%]{float:right}.topPadding[_ngcontent-%COMP%]{padding-top:20px}.tileHeading[_ngcontent-%COMP%]{font-weight:700}#result[_ngcontent-%COMP%]{text-align:right;color:grey;min-height:2em}.table-sparkline[_ngcontent-%COMP%]{margin:0 auto;border-collapse:collapse}.mat-cell[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid silver;height:20px}.mat-header-cell[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%]{padding:15px;height:20px;font-weight:bolder;text-align:left;border-top:2px solid grey;border-bottom:2px solid grey;color:#000}.highcharts-tooltip[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background:#fff;border:1px solid silver;border-radius:3px;box-shadow:1px 1px 2px #888;padding:8px}.header-align-right[_ngcontent-%COMP%]{text-align:right}.loading-indicator[_ngcontent-%COMP%]{position:fixed;z-index:999;height:2em;width:2em;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0}.loading-indicator[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3)}'],data:{animation:[l.a,c.a]}}),ut)}],gt=((ht=function e(){t(this,e)}).\u0275mod=O.Lb({type:ht}),ht.\u0275inj=O.Kb({factory:function(t){return new(t||ht)},imports:[[r.j.forChild(dt)],r.j]}),ht),Ct=i("qFsG"),ft=i("/t3+"),mt=i("kmnG"),bt=i("VE2z"),yt=i("KthW"),vt=i("WCGO"),xt=i("QMK6"),wt=i("q8Jb"),St=i("0jmt"),Tt=i("0IaG"),Pt=i("STbY"),Ot=((pt=function e(){t(this,e)}).\u0275mod=O.Lb({type:pt}),pt.\u0275inj=O.Kb({factory:function(t){return new(t||pt)},providers:[s.f,s.g],imports:[[s.c,gt,a.l,yt.a,vt.a,a.w,xt.a,bt.a,St.a,wt.a,mt.f,Ct.c,R.c,G.b,Pt.c,ft.b,I.b,Tt.g]]}),pt)}}])}();