(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{N0MT:function(t,e,a){"use strict";a.r(e),a.d(e,"EstidamaChartModule",(function(){return Q}));var r=a("ofXK"),i=a("tyNb"),o=a("dDrv"),s=a("wd/R"),n=a("6n/F"),h=a("i680"),l=(a("DaQG"),a("wOnQ")),c=a.n(l),p=a("zSPf"),m=a("WFQN"),d=a("KHMF"),g=a("sXtk"),u=a("fXoL"),f=a("3Pt+"),b=a("b6Qw"),C=a("XiUz"),M=a("/t3+"),D=a("znSr"),y=a("Wp6s"),T=a("kmnG"),v=a("d3UM"),I=a("qFsG"),L=a("f0Cb"),S=a("FKr1"),x=a("bTqV"),F=a("NFeN"),k=a("iadO"),w=a("bSwM");const N=["allMetersSelected"];function O(t,e){1&t&&(u.Tb(0,"div",30),u.Ob(1,"mat-progress-spinner",31),u.Sb())}function P(t,e){if(1&t&&(u.Tb(0,"mat-option",32),u.Rc(1),u.Sb()),2&t){const t=e.$implicit;u.mc("value",t.meterTypeName),u.Cb(1),u.Tc("",t.meterTypeName," ")}}function Y(t,e){if(1&t&&(u.Tb(0,"mat-option",32),u.Rc(1),u.Sb()),2&t){const t=e.$implicit;u.mc("value",t.id),u.Cb(1),u.Sc(t.description)}}function G(t,e){if(1&t){const t=u.Ub();u.Tb(0,"mat-option",14),u.bc("click",(function(){u.Ec(t);const e=u.fc(),a=u.Ac(20);return e.toggleMeterPerOne(a.viewValue)})),u.Rc(1),u.Sb()}if(2&t){const t=e.$implicit;u.mc("value",t.id),u.Cb(1),u.Tc(" ",t.deviceName," ")}}function R(t,e){if(1&t&&(u.Tb(0,"mat-option",32),u.Rc(1),u.Sb()),2&t){const t=e.$implicit;u.mc("value",t.value),u.Cb(1),u.Sc(t.value)}}function E(t,e){if(1&t&&(u.Tb(0,"mat-option",32),u.Rc(1),u.Sb()),2&t){const t=e.$implicit;u.mc("value",t.value),u.Cb(1),u.Sc(t.value)}}function U(t,e){if(1&t&&(u.Tb(0,"mat-option",32),u.Rc(1),u.Sb()),2&t){const t=e.$implicit;u.mc("value",t.value),u.Cb(1),u.Sc(t.value)}}function W(t,e){if(1&t){const t=u.Ub();u.Tb(0,"mat-form-field"),u.Tb(1,"mat-select",33),u.bc("ngModelChange",(function(e){return u.Ec(t),u.fc().toYear=e})),u.Pc(2,U,2,2,"mat-option",8),u.Sb(),u.Sb()}if(2&t){const t=u.fc();u.Cb(1),u.mc("ngModel",t.toYear),u.Cb(1),u.mc("ngForOf",t.lstToYear)}}function z(t,e){if(1&t&&(u.Tb(0,"mat-option",32),u.Rc(1),u.Sb()),2&t){const t=e.$implicit;u.mc("value",t.name),u.Cb(1),u.Sc(t.value)}}function B(t,e){if(1&t){const t=u.Ub();u.Tb(0,"mat-form-field"),u.Tb(1,"mat-select",34),u.bc("ngModelChange",(function(e){return u.Ec(t),u.fc().fromMonth=e})),u.Pc(2,z,2,2,"mat-option",8),u.Sb(),u.Sb()}if(2&t){const t=u.fc();u.Cb(1),u.mc("ngModel",t.fromMonth),u.Cb(1),u.mc("ngForOf",t.lstFromMonth)}}function V(t,e){if(1&t&&(u.Tb(0,"mat-option",32),u.Rc(1),u.Sb()),2&t){const t=e.$implicit;u.mc("value",t.name),u.Cb(1),u.Sc(t.value)}}function A(t,e){if(1&t){const t=u.Ub();u.Tb(0,"mat-form-field"),u.Tb(1,"mat-select",35),u.bc("ngModelChange",(function(e){return u.Ec(t),u.fc().toMonth=e})),u.Pc(2,V,2,2,"mat-option",8),u.Sb(),u.Sb()}if(2&t){const t=u.fc();u.Cb(1),u.mc("ngModel",t.toMonth),u.Cb(1),u.mc("ngForOf",t.lstToMonth)}}function H(t,e){if(1&t){const t=u.Ub();u.Tb(0,"mat-form-field"),u.Tb(1,"mat-label"),u.Rc(2,"Date"),u.Sb(),u.Tb(3,"input",36),u.bc("ngModelChange",(function(e){return u.Ec(t),u.fc().fromDate=e})),u.Sb(),u.Ob(4,"mat-datepicker-toggle",37),u.Ob(5,"mat-datepicker",null,38),u.Sb()}if(2&t){const t=u.Ac(6),e=u.fc();u.Cb(3),u.mc("matDatepicker",t)("ngModel",e.fromDate),u.Cb(1),u.mc("for",t)}}function _(t,e){if(1&t){const t=u.Ub();u.Tb(0,"mat-form-field"),u.Tb(1,"mat-label"),u.Rc(2,"Compare Date"),u.Sb(),u.Tb(3,"input",36),u.bc("ngModelChange",(function(e){return u.Ec(t),u.fc().toDate=e})),u.Sb(),u.Ob(4,"mat-datepicker-toggle",37),u.Ob(5,"mat-datepicker",null,39),u.Sb()}if(2&t){const t=u.Ac(6),e=u.fc();u.Cb(3),u.mc("matDatepicker",t)("ngModel",e.toDate),u.Cb(1),u.mc("for",t)}}function j(t,e){if(1&t){const t=u.Ub();u.Tb(0,"mat-checkbox",40),u.bc("ngModelChange",(function(e){return u.Ec(t),u.fc().blnCompare=e})),u.Rc(1,"Compare"),u.Sb()}if(2&t){const t=u.fc();u.mc("ngModel",t.blnCompare)}}a("Tos5")(n);const X=[{path:"",component:(()=>{class t{constructor(t,e,a,r,i,o,s,h){var l,c;this.estidamaChartService=t,this.date=e,this.fb=a,this.masterService=r,this.decimalPipe=i,this.meterReplacementService=o,this.cookieService=s,this.envService=h,this.blnToDate=!1,this.blnToYear=!1,this.blnFromMonth=!1,this.blnToMonth=!1,this.blnFromDate=!1,this.peak="",this.consumption="",this.average="",this.showSpinner=!1,this.Highcharts1=n,this.chartConstructor1="chart",this.barChartOptions={},this.blnCompare=!1,this.meterType="",this.meterTypeId=0,this.lstMeterType=[],this.meterGroup=null,this.lstMeterGroup=[],this.meterId="",this.lstMeterName=[],this.lstFilterMeterName=[],this.reportType=null,this.lstReportType=[],this.fromYear=null,this.lstFromYear=[],this.toYear=null,this.lstToYear=[],this.fromMonth=null,this.fromMonthName="",this.lstFromMonth=[],this.toMonth=null,this.toMonthName="",this.lstToMonth=[],this.fromDate=new Date,this.toDate=new Date,this.selectedMeters=[],this.estidamaChart={},this.clientId="",this.meterGroupList=[],this.dateFormat="",this.roundOffFormat="",this.chartData={},this.dateFormat=null!==(l=Object(d.e)("DateFormat"))&&void 0!==l?l:h.dateFormat,this.roundOffFormat=null!==(c=Object(d.e)("RoundOff"))&&void 0!==c?c:h.roundOffFormat}ngOnInit(){this.form=this.fb.group({meters:[""]});const t=this.cookieService.get("filterData");if(t){let e=JSON.parse(t);this.clientId=""==e.strClientId?"0":e.strClientId}this.getMeterTypes(),this.getDeviceGroups()}getMeterTypes(){this.lstMeterType=[],this.meterGroupList=[],this.lstMeterGroup=[],this.lstMeterName=[],this.estidamaChartService.getMeterTypes().subscribe(t=>{t&&(this.lstMeterType=t.meterTypeList,this.meterType=this.lstMeterType[0].meterTypeName,this.meterTypeId=this.lstMeterType[0].meterTypeID,this.meterGroupList=t.meterGroupList,this.lstReportType=t.reportTypeList,this.lstReportType.length>0&&(this.reportType=this.lstReportType[0].value),this.lstFromYear=t.fromYearList,this.lstFromYear.length>0&&(this.fromYear=this.lstFromYear[0].value),this.lstToYear=t.toYearList,this.lstToYear.length>0&&(this.toYear=this.lstToYear[0].value),this.lstFromMonth=t.fromWeekList,this.lstFromMonth.length>0&&(this.fromMonth=this.lstFromMonth[0].name),this.lstToMonth=t.toWeekList,this.lstToMonth.length>0&&(this.toMonth=this.lstToMonth[0].name),this.getMeters())})}getDeviceGroups(){this.lstMeterGroup=[],this.masterService.getUserMasterdata(71,0).subscribe(t=>{this.lstMeterGroup=t,this.lstMeterGroup.splice(0,0,{id:0,description:"All"}),this.meterGroup=0,this.getMeters()})}onMeterTypeChange(t){var e;this.meterType=t,this.meterTypeId=null===(e=this.lstMeterType.find(e=>e.meterTypeName===t))||void 0===e?void 0:e.meterTypeID,this.getMeters()}onMeterGroupChange(t){this.meterGroup=t,this.meterGroup=0,this.getMeters()}getMeters(){var t,e;this.lstMeterName=[],this.meterId="",this.selectedMeters=[],this.meterReplacementService.getV1DeviceGroupMeterList(null!==(t=this.meterTypeId)&&void 0!==t?t:0,null!==(e=this.meterGroup)&&void 0!==e?e:0,this.clientId).subscribe(t=>{t&&(this.lstMeterName=this.lstFilterMeterName=t)})}onReportTypeChange(t){"Yearly"==this.reportType&&(this.blnCompare=!1)}viewEstidamaChart(){this.showSpinner=!0;let t="",e="";"Hourly"!=this.reportType&&"Daily"!=this.reportType||(t=null==this.fromDate?"":s(this.fromDate).format("YYYY-MM-DD"),e=null==this.toDate?"":s(this.toDate).format("YYYY-MM-DD")),this.lstFromMonth.find(t=>{t.name==this.fromMonth&&(this.fromMonthName=t.value)}),this.lstToMonth.find(t=>{t.name==this.toMonth&&(this.toMonthName=t.value)});let a={labels:[],datas:[],comparisonDatas:[]};this.barChartOptions=this.setBarChart(a),document.getElementById("echacontainer")&&n.chart("echacontainer",this.barChartOptions);let r=this.selectedMeters.findIndex(t=>0==t);r>=0&&this.selectedMeters.splice(r,1),this.meterId=this.selectedMeters.join(","),""!=this.meterId&&""!=this.meterType&&null!=this.reportType&&null!=this.fromYear&&(this.estidamaChart.MeterId=this.meterId,this.estidamaChart.GroupId=this.meterGroup.toString(),this.estidamaChart.MeterTypeName=this.meterType,this.estidamaChart.ClientId=this.clientId,this.estidamaChart.ReportType=this.reportType,this.estidamaChart.FromYear=this.fromYear,this.estidamaChart.ToYear=this.toYear,this.estidamaChart.FromDate=t,this.estidamaChart.ToDate=e,this.estidamaChart.FromMonth=this.fromMonth,this.estidamaChart.ToMonth=this.toMonth,this.estidamaChart.BlnCompare=this.blnCompare,this.estidamaChartService.viewEstidamaChart(this.estidamaChart).subscribe({next:t=>{if(t){this.peak=t.peak,this.average=t.average,this.consumption=t.consumption;let e="Estidama Dashboard "+this.reportType;if(t){this.chartData=t;let r=t.graphItemList[0].fromDate,i=t.graphItemList[0].toDate;t.graphItemList&&t.graphItemList.length&&t.graphItemList.forEach(t=>{a.labels.push(t.name),a.datas.push(Number(t.value));let e=t.fromDate,o=t.toDate;r=e<r?e:r,i=o>i?o:i}),t.graphItemComparisonList&&t.graphItemComparisonList.length&&t.graphItemComparisonList.forEach(t=>{a.comparisonDatas.push(Number(t.value))}),e=e+" "+this.date.transform(r,this.dateFormat.toString())+"-"+this.date.transform(i,this.dateFormat.toString())}this.barChartOptions=this.setBarChart(a,this.blnCompare?"line":"column",e,this.chartData.graphItemList[0].benchMark),document.getElementById("echacontainer")&&n.chart("echacontainer",this.barChartOptions),this.showSpinner=!1}else this.showSpinner=!1},error:t=>{this.showSpinner=!1}}))}setBarChart(t,e="column",a="Estidama Dashboard",r=0){return{lang:{noData:"No data to display"},noData:{style:{fontWeight:"bold",fontSize:"15px"}},chart:{height:325,width:1e3,type:e},credits:{enabled:!1},title:{text:a,style:{fontFamily:"Roboto",fontWeight:10}},subtitle:{text:null},xAxis:{categories:t.labels},yAxis:{min:0,title:{text:"Consumption in KWH",style:{fontSize:"12px",fontFamily:"Roboto"}},plotLines:[{value:r,color:"red",dashStyle:"shortdash",width:2,label:{text:"Bench Mark"}}]},legend:{itemStyle:{color:"#000000",fontWeight:"normal",fontFamily:"Roboto"},layout:"horizontal",align:"center",verticalAlign:"top",x:0,y:0,floating:!1,shadow:!1},tooltip:{formatter:function(){return this.x+": "+this.y}},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:10}},series:[{name:"Hourly"===this.reportType?this.date.transform(this.fromDate,this.dateFormat.toString()):"Daily"===this.reportType?this.fromMonthName:"Weekly"===this.reportType||"Monthly"===this.reportType?this.fromYear:"Consumption Chart",data:t.datas,type:e,color:"#008ECC"},{name:t.comparisonDatas&&t.comparisonDatas.length?"Hourly"===this.reportType?this.date.transform(this.toDate,this.dateFormat.toString()):"Daily"===this.reportType?this.toMonthName:"Weekly"===this.reportType||"Monthly"===this.reportType?this.toYear:"Consumption Chart":"",data:t.comparisonDatas,type:e,color:t.comparisonDatas&&t.comparisonDatas.length?"#87556f":"#FFFFFF"}]}}generarPDF(){const t=document.getElementById("echacontainer");c()(t,{background:"white",scale:3}).then(t=>{var e=new Image;e.src=t.toDataURL("image/PNG");var a=new h.default({orientation:"portrait",unit:"pt",format:"letter"});const r=a.getImageProperties(e),i=a.internal.pageSize.getWidth()-10,o=r.height*i/r.width;a.addImage(e,"PNG",5,5,i,o,void 0,"FAST");let s=[],n=[],l=[],c=0,p=0;if("Hourly"===this.reportType){if(s=this.blnCompare?["Date","Compare Date","Hours","Value","Compare Value","BenchMark"]:["Date","Hours","Value","BenchMark"],this.chartData&&this.chartData.graphItemList&&this.chartData.graphItemList.length){for(let t=0;t<this.chartData.graphItemList.length;t++){if(l.push(this.date.transform(this.fromDate,this.dateFormat.toString())),this.blnCompare&&l.push(this.date.transform(this.toDate,this.dateFormat.toString())),l.push(this.chartData.graphItemList[t].name),l.push(this.chartData.graphItemList[t].value),this.blnCompare&&this.chartData.graphItemComparisonList&&this.chartData.graphItemComparisonList.length){const e=this.chartData.graphItemComparisonList.find(e=>e.name===this.chartData.graphItemList[t].name);e&&l.push(e.value)}l.push(this.chartData.graphItemList[t].benchMark),n.push(l),l=[]}this.chartData.graphItemList.forEach(t=>{c+=Number(t.value)}),this.chartData.graphItemComparisonList.forEach(t=>{p+=Number(t.value)})}}else if("Daily"===this.reportType){if(s=this.blnCompare?["Date","Compare Month","Month","Value","Compare Value","BenchMark"]:["Date","Month","Value","BenchMark"],this.chartData&&this.chartData.graphItemList&&this.chartData.graphItemList.length){for(let t=0;t<this.chartData.graphItemList.length;t++){if(l.push(this.date.transform(this.chartData.graphItemList[t].fromDate,this.dateFormat.toString())),this.blnCompare&&this.chartData.graphItemComparisonList&&this.chartData.graphItemComparisonList.length){const e=this.chartData.graphItemComparisonList.find(e=>e.name===this.chartData.graphItemList[t].name);e&&l.push(this.date.transform(e.fromDate,this.dateFormat.toString()))}if(l.push(this.chartData.graphItemList[t].name),l.push(this.chartData.graphItemList[t].value),this.blnCompare&&this.chartData.graphItemComparisonList&&this.chartData.graphItemComparisonList.length){const e=this.chartData.graphItemComparisonList.find(e=>e.name===this.chartData.graphItemList[t].name);e&&l.push(e.value)}l.push(this.chartData.graphItemList[t].benchMark),n.push(l),l=[]}this.chartData.graphItemList.forEach(t=>{c+=Number(t.value)}),this.chartData.graphItemComparisonList.forEach(t=>{p+=Number(t.value)})}}else if("Weekly"===this.reportType){if(s=this.blnCompare?["Date","Compare Date","Weeks","Value","Compare Value","BenchMark"]:["Date","Weeks","Value","BenchMark"],this.chartData&&this.chartData.graphItemList&&this.chartData.graphItemList.length){for(let t=0;t<this.chartData.graphItemList.length;t++){const e=this.date.transform(this.chartData.graphItemList[t].fromDate,this.dateFormat.toString()),a=this.date.transform(this.chartData.graphItemList[t].toDate,this.dateFormat.toString());if(l.push(e+" - "+a),this.blnCompare&&this.chartData.graphItemComparisonList&&this.chartData.graphItemComparisonList.length){const e=this.chartData.graphItemComparisonList.find(e=>e.name===this.chartData.graphItemList[t].name);if(e){const t=this.date.transform(e.fromDate,this.dateFormat.toString()),a=this.date.transform(e.toDate,this.dateFormat.toString());l.push(t+" - "+a)}}if(l.push(this.chartData.graphItemList[t].name),l.push(this.chartData.graphItemList[t].value),this.blnCompare&&this.chartData.graphItemComparisonList&&this.chartData.graphItemComparisonList.length){const e=this.chartData.graphItemComparisonList.find(e=>e.name===this.chartData.graphItemList[t].name);e&&l.push(e.value)}l.push(this.chartData.graphItemList[t].benchMark),n.push(l),l=[]}this.chartData.graphItemList.forEach(t=>{c+=Number(t.value)}),this.chartData.graphItemComparisonList.forEach(t=>{p+=Number(t.value)})}}else if("Monthly"===this.reportType){if(s=this.blnCompare?["Date","Compare Date","Months","Value","Compare Value","BenchMark"]:["Date","Months","Value","BenchMark"],this.chartData&&this.chartData.graphItemList&&this.chartData.graphItemList.length){for(let t=0;t<this.chartData.graphItemList.length;t++){const e=this.date.transform(this.chartData.graphItemList[t].fromDate,this.dateFormat.toString()),a=this.date.transform(this.chartData.graphItemList[t].toDate,this.dateFormat.toString());if(l.push(e+" - "+a),this.blnCompare&&this.chartData.graphItemComparisonList&&this.chartData.graphItemComparisonList.length){const e=this.chartData.graphItemComparisonList.find(e=>e.name===this.chartData.graphItemList[t].name);if(e){const t=this.date.transform(e.fromDate,this.dateFormat.toString()),a=this.date.transform(e.toDate,this.dateFormat.toString());l.push(t+" - "+a)}}if(l.push(this.chartData.graphItemList[t].name),l.push(this.chartData.graphItemList[t].value),this.blnCompare&&this.chartData.graphItemComparisonList&&this.chartData.graphItemComparisonList.length){const e=this.chartData.graphItemComparisonList.find(e=>e.name===this.chartData.graphItemList[t].name);e&&l.push(e.value)}l.push(this.chartData.graphItemList[t].benchMark),n.push(l),l=[]}this.chartData.graphItemList.forEach(t=>{c+=Number(t.value)}),this.chartData.graphItemComparisonList.forEach(t=>{p+=Number(t.value)})}}else if(s=["Year","Value","BenchMark"],this.chartData&&this.chartData.graphItemList&&this.chartData.graphItemList.length){for(let t=0;t<this.chartData.graphItemList.length;t++)l.push(this.chartData.graphItemList[t].name),l.push(this.chartData.graphItemList[t].value),l.push(this.chartData.graphItemList[t].benchMark),n.push(l),l=[];this.chartData.graphItemList.forEach(t=>{c+=Number(t.value)})}return"Yearly"!==this.reportType&&l.push(""),this.blnCompare&&l.push(""),l.push("Total"),l.push(this.decimalPipe.transform(c,this.roundOffFormat.toString()).replace(",","")),this.blnCompare&&l.push(this.decimalPipe.transform(p,this.roundOffFormat.toString()).replace(",","")),l.push(""),n.push(l),a.autoTable(s,n,{startX:50,startY:o+20,didDrawPage:function(t){var e="Page "+t.pageCount;"function"==typeof a.putTotalPages&&a.rect(5,5,a.internal.pageSize.width-10,a.internal.pageSize.height-10,"S"),a.setFontSize(9);var r=a.internal.pageSize.height||a.internal.pageSize.getHeight();a.text(e,t.settings.margin.left,r-10)},styles:{overflow:"linebreak",cellWidth:"wrap",fontSize:9,cellPadding:6,overflowColumns:"linebreak",lineColor:[0,0,0]},margin:{left:50},theme:"grid",tableWidth:"auto",cellWidth:"wrap",columnStyles:{0:{cellWidth:this.blnCompare?110:150,halign:"center"},1:{cellWidth:this.blnCompare?110:120,halign:"center"},2:{cellWidth:this.blnCompare?65:120,halign:"center"},3:{cellWidth:this.blnCompare?65:120,halign:"center"},4:{cellWidth:80,halign:"center"},5:{cellWidth:80,halign:"center"}},headStyles:{lineWidth:.1,lineColor:[0,0,0],halign:"center",fillColor:[25,118,210]}}),a}).then(t=>{t.save("Estidama Chart.pdf")})}search(t){let e=this.select(t);this.lstMeterName=e}select(t){let e=[];if(t)for(let a of this.lstFilterMeterName)a.deviceName.toLowerCase().indexOf(t)>-1&&e.push(a);else e=this.lstFilterMeterName;return e}toggleMetersAllSelection(){this.form.controls.meters.patchValue(this.allMetersSelected.selected?[...this.lstMeterName.map(t=>t.id),0]:[])}toggleMeterPerOne(t){if(this.allMetersSelected.selected)return this.allMetersSelected.deselect(),!1;this.form.controls.meters.value.length==this.lstMeterName.length&&this.allMetersSelected.select()}}return t.\u0275fac=function(e){return new(e||t)(u.Nb(o.a),u.Nb(r.f),u.Nb(f.f),u.Nb(p.a),u.Nb(r.g),u.Nb(m.a),u.Nb(b.a),u.Nb(g.a))},t.\u0275cmp=u.Hb({type:t,selectors:[["fury-estidama-chart"]],viewQuery:function(t,e){var a;1&t&&u.Vc(N,!0),2&t&&u.zc(a=u.cc())&&(e.allMetersSelected=a.first)},decls:64,vars:23,consts:[["fxLayout","column",2,"padding","27px"],["class","loading-indicator",4,"ngIf"],["color","primary",1,"position-fixed"],["src","assets/img/fav-icon.png",1,"img-style",3,"fxHide.xs"],["fxLayout","row","fxLayout.xs","column"],["fxLayout","column","fxLayoutGap","2%"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","2%"],["name","meterType","id","meterTypeId","placeholder","Meter Type",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex",""],["name","meterGroup","id","meterGroupId","placeholder","Meter Group",3,"ngModel","ngModelChange","selectionChange"],["multiple","","placeholder","Select a Meter",1,"multiSelectCustom",3,"ngModel","formControl","ngModelChange"],["matInput","","focused","'true'","type","text","autocomplete","off","placeholder","search",1,"myInput",3,"keyup"],["myInput",""],[3,"value","click"],["allMetersSelected",""],[3,"value","click",4,"ngFor","ngForOf"],["name","reportType","id","reportTypeId","placeholder","Report Type",3,"ngModel","ngModelChange","selectionChange"],["name","fromYear","id","fromYearId","placeholder","FromYear",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["color","primary","mat-raised-button","",1,"common-buttons",3,"click"],["fxLayout","row","fxLayoutGap","10%"],["fxLayoutGap","75px","fxFlexLayout","column",1,"mat-elevation-z4","card-height","consumption"],[1,"consumption-icon"],["fxLayoutGap","75px","fxFlexLayout","column",1,"mat-elevation-z4","card-height","average"],[1,"average-icon"],["fxLayoutGap","35px","fxFlexLayout","column",1,"mat-elevation-z4","card-height","peak"],[1,"peak-icon"],["id","echacontainer"],[1,"loading-indicator"],["mode","indeterminate","color","accent"],[3,"value"],["name","toYear","id","toYearId","placeholder","To Year",3,"ngModel","ngModelChange"],["name","fromMonth","id","fromMonthId","placeholder","From Month",3,"ngModel","ngModelChange"],["name","toMonth","id","toMonthId","placeholder","To Month",3,"ngModel","ngModelChange"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["fromDat",""],["toDat",""],[3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(u.Tb(0,"div",0),u.Pc(1,O,2,0,"div",1),u.Tb(2,"mat-toolbar",2),u.Ob(3,"img",3),u.Tb(4,"span",4),u.Rc(5,"Energy Report"),u.Sb(),u.Sb(),u.Tb(6,"mat-card",5),u.Tb(7,"div",6),u.Tb(8,"mat-form-field"),u.Tb(9,"mat-select",7),u.bc("ngModelChange",(function(t){return e.meterType=t}))("selectionChange",(function(t){return e.onMeterTypeChange(t.value)})),u.Pc(10,P,2,2,"mat-option",8),u.Sb(),u.Sb(),u.Tb(11,"mat-form-field",9),u.Tb(12,"mat-select",10),u.bc("ngModelChange",(function(t){return e.meterGroup=t}))("selectionChange",(function(t){return e.onMeterGroupChange(t.value)})),u.Pc(13,Y,2,2,"mat-option",8),u.Sb(),u.Sb(),u.Tb(14,"mat-form-field",9),u.Tb(15,"mat-select",11),u.bc("ngModelChange",(function(t){return e.selectedMeters=t})),u.Tb(16,"input",12,13),u.bc("keyup",(function(t){return e.search(t.target.value)})),u.Sb(),u.Ob(18,"mat-divider"),u.Tb(19,"mat-option",14,15),u.bc("click",(function(){return e.toggleMetersAllSelection()})),u.Rc(21,"Select All"),u.Sb(),u.Pc(22,G,2,2,"mat-option",16),u.Sb(),u.Sb(),u.Tb(23,"mat-form-field",9),u.Tb(24,"mat-select",17),u.bc("ngModelChange",(function(t){return e.reportType=t}))("selectionChange",(function(t){return e.onReportTypeChange(t.value)})),u.Pc(25,R,2,2,"mat-option",8),u.Sb(),u.Sb(),u.Tb(26,"mat-form-field",9),u.Tb(27,"mat-select",18),u.bc("ngModelChange",(function(t){return e.fromYear=t})),u.Pc(28,E,2,2,"mat-option",8),u.Sb(),u.Sb(),u.Sb(),u.Tb(29,"div",6),u.Pc(30,W,3,2,"mat-form-field",19),u.Pc(31,B,3,2,"mat-form-field",19),u.Pc(32,A,3,2,"mat-form-field",19),u.Pc(33,H,7,3,"mat-form-field",19),u.Pc(34,_,7,3,"mat-form-field",19),u.Pc(35,j,2,1,"mat-checkbox",20),u.Tb(36,"button",21),u.bc("click",(function(){return e.viewEstidamaChart()})),u.Rc(37," APPLY "),u.Sb(),u.Tb(38,"button",21),u.bc("click",(function(){return e.generarPDF()})),u.Rc(39," PRINT "),u.Sb(),u.Sb(),u.Sb(),u.Tb(40,"mat-card",22),u.Tb(41,"mat-card",23),u.Tb(42,"mat-icon",24),u.Rc(43,"pages"),u.Sb(),u.Tb(44,"h3",9),u.Rc(45," Consumption "),u.Tb(46,"b"),u.Rc(47),u.Sb(),u.Sb(),u.Sb(),u.Tb(48,"mat-card",25),u.Tb(49,"mat-icon",26),u.Rc(50,"pages"),u.Sb(),u.Tb(51,"h3",9),u.Rc(52," Average "),u.Tb(53,"b"),u.Rc(54),u.Sb(),u.Sb(),u.Sb(),u.Tb(55,"mat-card",27),u.Tb(56,"mat-icon",28),u.Rc(57,"pages"),u.Sb(),u.Tb(58,"h3",9),u.Rc(59," Peak "),u.Tb(60,"b"),u.Rc(61),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Tb(62,"mat-card",22),u.Ob(63,"div",29),u.Sb(),u.Sb()),2&t&&(u.Cb(1),u.mc("ngIf",e.showSpinner),u.Cb(2),u.mc("fxHide.xs",!0),u.Cb(6),u.mc("ngModel",e.meterType),u.Cb(1),u.mc("ngForOf",e.lstMeterType),u.Cb(2),u.mc("ngModel",e.meterGroup),u.Cb(1),u.mc("ngForOf",e.lstMeterGroup),u.Cb(2),u.mc("ngModel",e.selectedMeters)("formControl",e.form.controls.meters),u.Cb(4),u.mc("value",0),u.Cb(3),u.mc("ngForOf",e.lstMeterName),u.Cb(2),u.mc("ngModel",e.reportType),u.Cb(1),u.mc("ngForOf",e.lstReportType),u.Cb(2),u.mc("ngModel",e.fromYear),u.Cb(1),u.mc("ngForOf",e.lstFromYear),u.Cb(2),u.mc("ngIf",("Weekly"==e.reportType||"Monthly"==e.reportType)&&e.blnCompare),u.Cb(1),u.mc("ngIf","Daily"==e.reportType),u.Cb(1),u.mc("ngIf","Daily"==e.reportType&&e.blnCompare),u.Cb(1),u.mc("ngIf","Hourly"==e.reportType),u.Cb(1),u.mc("ngIf","Hourly"==e.reportType&&e.blnCompare),u.Cb(1),u.mc("ngIf","Yearly"!=e.reportType),u.Cb(12),u.Tc(" ",e.consumption,""),u.Cb(7),u.Sc(e.average),u.Cb(7),u.Sc(e.peak))},directives:[C.d,r.o,M.a,D.b,y.a,C.e,T.d,v.a,f.q,f.t,r.n,C.b,f.h,I.b,L.a,S.n,x.a,F.a,T.h,k.b,f.c,k.d,T.j,k.a,w.a],styles:['.heading[_ngcontent-%COMP%]{background:#1976d2;font-size:17px;height:0}.img-style[_ngcontent-%COMP%]{width:32px}.common-buttons[_ngcontent-%COMP%]{height:50%}.mat-card[class*=mat-elevation-z].consumption[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px #ff4500,0 1px 1px 0 #ff4500,0 1px 3px 0 #ff4500}.mat-card[class*=mat-elevation-z].average[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px #2bbb18,0 1px 1px 0 #2bbb18,0 1px 3px 0 #2bbb18}.mat-card[class*=mat-elevation-z].peak[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px red,0 1px 1px 0 red,0 1px 3px 0 red}.card-height[_ngcontent-%COMP%]{min-width:26%}.consumption-icon[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff}.average-icon[_ngcontent-%COMP%]{background-color:#2bbb18;color:#fff}.peak-icon[_ngcontent-%COMP%]{background-color:red;color:#fff}.myInput[_ngcontent-%COMP%]{height:50px!important;padding:10px!important}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}.loading-indicator[_ngcontent-%COMP%]{position:fixed;z-index:999;height:2em;width:2em;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0}.loading-indicator[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3)}']}),t})()}];let $=(()=>{class t{}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(X)],i.j]}),t})();var K=a("YUcS");let Q=(()=>{class t{}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},providers:[r.f,r.g],imports:[[r.c,$,f.l,f.w,K.a,x.b,I.c,T.f,v.b,S.o,M.b,y.g,w.b,k.c,F.b,L.b]]}),t})()},Tos5:function(t,e,a){var r,i,o;o=function(t){function e(t,e,a,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,a))}e(t=t?t._modules:{},"Extensions/NoDataToDisplay.js",[t["Core/Chart/Chart.js"],t["Core/Utilities.js"]],(function(t,e){var a=e.addEvent,r=e.extend,i=e.getOptions;e=t.prototype,i=i(),r(i.lang,{noData:"No data to display"}),i.noData={attr:{zIndex:1},position:{x:0,y:0,align:"center",verticalAlign:"middle"},style:{fontWeight:"bold",fontSize:"12px",color:"#666666"}},e.showNoData=function(t){var e=this.options;t=t||e&&e.lang.noData,e=e&&(e.noData||{}),this.renderer&&(this.noDataLabel||(this.noDataLabel=this.renderer.label(t,0,0,void 0,void 0,void 0,e.useHTML,void 0,"no-data").add()),this.styledMode||this.noDataLabel.attr(e.attr).css(e.style||{}),this.noDataLabel.align(r(this.noDataLabel.getBBox(),e.position||{}),!1,"plotBox"))},e.hideNoData=function(){this.noDataLabel&&(this.noDataLabel=this.noDataLabel.destroy())},e.hasData=function(){for(var t=this.series||[],e=t.length;e--;)if(t[e].hasData()&&!t[e].options.isInternal)return!0;return this.loadingShown},a(t,"render",(function(){this.hasData()?this.hideNoData():this.showNoData()}))})),e(t,"masters/modules/no-data-to-display.src.js",[],(function(){}))},t.exports?(o.default=o,t.exports=o):(r=[a("6n/F")],void 0===(i=(function(t){return o(t),o.Highcharts=t,o}).apply(e,r))||(t.exports=i))},WFQN:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var r=a("tk/3"),i=a("sXtk"),o=a("fXoL");let s=(()=>{class t{constructor(t,e){this.http=t,this.envService=e,this.baseUrl="",this.baseUrl=e.backend}getReplacedMeters(t){return this.http.get(this.baseUrl+"/devicelistreplacements/clientId/"+t)}createMeterReplacement(t){return this.http.post(this.baseUrl+"/devicelistreplacements/",t)}GetUtilityTypes(t){let e=new r.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/UtilityTypes",{params:e})}getAllUnits(t,e){let a=new r.f;return a=a.append("clientId",""+t),a=a.append("utilityTypeId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/Units",{params:a})}GetActiveDevices(t,e){let a=new r.f;return a=a.append("clientId",""+t),a=a.append("utilityTypeId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/ActiveDevices",{params:a})}getMeterErrorDetails(t){return this.http.post(this.baseUrl+"/devicelistreplacements/MeterError",t)}GetParametersList(){return this.http.get(this.baseUrl+"/devicelistreplacements/Parameters")}getDeviceDataDetails(t){return this.http.post(this.baseUrl+"/devicelistreplacements/DeviceData",t)}GetMeterList(t){let e=new r.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/MeterList",{params:e})}getDeviceGroupMeterList(t,e,a="0"){let i=new r.f;return i=i.append("meterTypeId",""+t),i=i.append("groupId",""+e),i=i.append("clientId",""+a),this.http.get(this.baseUrl+"/devicelistreplacements/type/group/meterList",{params:i})}getV1DeviceGroupMeterList(t,e,a="0"){let i=new r.f;return i=i.append("meterTypeId",""+t),i=i.append("groupId",""+e),i=i.append("clientId",""+a),this.http.get(this.baseUrl+"/devicelistreplacements/v1/type/group/meterListFilterByClient",{params:i})}getV1DeviceGroupMeterListWithoutFlowTypeFilter(t,e,a="0"){let i=new r.f;return i=i.append("meterTypeId",""+t),i=i.append("groupId",""+e),i=i.append("clientId",""+a),this.http.get(this.baseUrl+"/devicelistreplacements/V1/type/group/meterListFilterByClientWithoutFlowTypeFilter",{params:i})}getV1MeterList(t=0){let e=new r.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterListFilterByClient",{params:e})}getClients(){return this.http.get(this.baseUrl+"/devicelistreplacements/v1/clients")}getV1MeterGroupList(t=0){let e=new r.f;return e=e.append("meterTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterGroups",{params:e})}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(r.c),o.Xb(i.a))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);