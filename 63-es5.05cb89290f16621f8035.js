!function(){function t(t,n){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){a&&(t=a);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,l=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw l}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"7d4Y":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var r=a("tk/3"),l=a("sXtk"),o=a("fXoL"),s=function(){var t=function(){function t(e,a){n(this,t),this.http=e,this.envService=a,this.baseUrl="",this.baseUrl=a.backend}return i(t,[{key:"getTenantsDetails",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.http.get("".concat(this.baseUrl,"/billsettlement/tenants/").concat(t,"/").concat(e))}},{key:"getUnits",value:function(t){return this.http.get(this.baseUrl+"/billsettlement/units/"+t)}},{key:"getAccountNumbers",value:function(t){return this.http.get(this.baseUrl+"/billsettlement/AccountNumbers/"+t)}},{key:"getPaymentModes",value:function(){return this.http.get(this.baseUrl+"/billsettlement/paymentmodes")}},{key:"getBanks",value:function(t){var e=new r.f;return t&&(e=(e=(e=e.append("unitNumber",""+t.unitNumber)).append("tenantId",""+t.tenantId)).append("phoneNumber",""+t.phoneNumber)),this.http.get(this.baseUrl+"/billsettlement/banks",{params:e})}},{key:"getBillSettlementDetails",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=(e=(e=e.append("unitNumber",""+t.unitNumber)).append("tenantId",""+t.tenantId)).append("billPeriodId",""+t.billPeriodId)).append("settlementDate",""+t.settlementDate)).append("billType",""+t.billType)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/finalsettlement/details",{params:e})}},{key:"getBillDetails",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=e.append("utilityTypeId",""+t.utilityTypeId)).append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)).append("tenantId",""+t.tenantId)),this.http.get(this.baseUrl+"/billsettlement/unbilledconsumption",{params:e})}},{key:"generateBillDetails",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/generate/unbilledconsumption",t)}},{key:"getOutStandingBillDetails",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=(e=(e=e.append("unitNumber",""+t.unitNumber)).append("tenantId",""+t.tenantId)).append("billPeriodId",""+t.billPeriodId)).append("settlementDate",""+t.settlementDate)).append("billType",""+t.billType)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/outstandingbills",{params:e})}},{key:"getTenantBillDetails",value:function(t){var e=new r.f;return e=e.append("tenantId",""+t),this.http.get(this.baseUrl+"/billsettlement/outstandingbills",{params:e})}},{key:"saveUnBilledConsumptions",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/unbilledconsumption",t)}},{key:"saveOutstandingBills",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/outstandingbills",t)}},{key:"saveBillPayments",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/billpayments",t)}},{key:"getInvoiceBillDetails",value:function(t){var e=new r.f;return t&&(e=e.append("billMasterId",""+t)),this.http.get(this.baseUrl+"/template/billmasterdetails",{params:e})}},{key:"getReceiptDetails",value:function(t){var e=new r.f;return t&&(e=e.append("paymentId",""+t)),this.http.get(this.baseUrl+"/template/paymentdetails",{params:e})}},{key:"saveRefund",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/refund",t)}},{key:"getBillFailDetails",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=(e=(e=(e=(e=e.append("consumptionType",""+t.consumptionTypeId)).append("utilityTypeId",""+t.utilityTypeId)).append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("days",""+t.days)).append("percentage",""+t.percentage)).append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/failed/bills",{params:e})}},{key:"saveConsumptionRange",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/consumption/range",t)}},{key:"updateFaileBillsStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/failed/bills/update",t)}},{key:"updateBillMasterSyncStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/sync/bills/update",t)}},{key:"updatePaymentSyncStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/sync/payment/update",t)}},{key:"updateRefundSyncStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/sync/refund/update",t)}},{key:"updateCreditNoteSyncStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/sync/creditnote/update",t)}},{key:"deleteConsumptionAlert",value:function(t,e){return this.http.put(this.baseUrl+"/billsettlement/consumptionAlert/delete/"+t,e)}},{key:"invoiceGeneration",value:function(t){return this.http.post(this.baseUrl+"/file/report/invoice/generate",t)}},{key:"updateBillMasterApprovedStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/approved/bills/update",t)}},{key:"regenerateRejectedBillMasters",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/regenerate/billmasters",t)}},{key:"generateOtherTypeInvoiceDetail",value:function(t,e){var n=new r.f;return n=(n=n.append("clientId",""+t)).append("contractId",""+e),this.http.post("".concat(this.baseUrl,"/billsettlement/contract/invoice/billmaster/").concat(t,"/").concat(e),null)}},{key:"updateOtherTypeConsumption",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/othertype/consumption/update",t)}},{key:"updatBillMasterRejectedStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/rejected/bills/update",t)}},{key:"saveCreditNote",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/creditnote",t)}},{key:"getCreditNoteDetails",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/creditnote/history",{params:e})}},{key:"getConsumptioSavedAlertDetails",value:function(t){var e,n,a=new r.f;return t&&(a=(a=(a=a.append("consumptionTypeId",""+(null!==(e=t.consumptionTypeId)&&void 0!==e?e:0))).append("utilityTypeId",""+(null!==(n=t.utilityTypeId)&&void 0!==n?n:0))).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/saved/consumption/range/details",{params:a})}},{key:"getConumptionAlertDetails",value:function(t){var e,n,a,i,l,o=new r.f;return t&&(o=(o=(o=(o=(o=(o=(o=(o=(o=o.append("consumptionTypeId",""+t.consumptionTypeId)).append("utilityTypeId",""+t.utilityTypeId)).append("fromDate",""+(null!==(e=t.fromDate)&&void 0!==e?e:""))).append("startDate",""+(null!==(n=t.startDate)&&void 0!==n?n:""))).append("endDate",""+(null!==(a=t.endDate)&&void 0!==a?a:""))).append("percentage",""+t.percentage)).append("fromBillPeriodId",""+(null!==(i=t.fromBillPeriodId)&&void 0!==i?i:0))).append("toBillPeriodId",""+(null!==(l=t.toBillPeriodId)&&void 0!==l?l:0))).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/consumption/alert",{params:o})}},{key:"getRefundAmount",value:function(t,e){var n=new r.f;return t&&(n=(n=n.append("ownerId",""+t)).append("paymentId",""+e)),this.http.get(this.baseUrl+"/billsettlement/refundAmount",{params:n})}},{key:"creditNoteSummaryView",value:function(t){return this.http.post(this.baseUrl+"/file/report/creditnote/summary",t)}},{key:"creditNoteView",value:function(t){return this.http.post(this.baseUrl+"/file/report/creditnote",t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Xb(r.c),o.Xb(l.a))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},RzHG:function(e,a,r){"use strict";r.r(a),r.d(a,"AdvancePaymentModule",(function(){return it}));var l=r("3Pt+"),o=r("9xt4"),s=r("y/v/"),c=r("ofXK"),u=r("KthW"),p=r("WCGO"),d=r("QMK6"),m=r("VE2z"),h=r("q8Jb"),b=r("kmnG"),f=r("qFsG"),y=r("jaxi"),v=r("NFeN"),g=r("STbY"),I=r("0jmt"),k=r("/t3+"),D=r("Qu3c"),w=r("tyNb"),S=r("Ku73"),T=r("nStZ"),U=r("lW2b"),P=r("fXoL"),C=r("wd/R"),N=r("dNgK"),A=r("Nm8O"),M=r("b6Qw"),x=r("0IaG"),B=r("XiUz"),O=r("iadO"),F=r("bTqV"),j=r("d3UM"),R=r("f0Cb"),Y=r("FKr1");function E(t,e){if(1&t&&(P.Tb(0,"mat-option",15),P.Rc(1),P.Sb()),2&t){var n=e.$implicit;P.mc("value",n.id),P.Cb(1),P.Tc("",n.ownerName," ")}}function H(t,e){if(1&t){var n=P.Ub();P.Tb(0,"mat-form-field",2),P.Tb(1,"mat-label"),P.Rc(2,"Owner or Tenant"),P.Sb(),P.Tb(3,"mat-select",11),P.bc("valueChange",(function(t){return P.Ec(n),P.fc().tenantId=t})),P.Tb(4,"input",12,13),P.bc("keydown",(function(t){return P.Ec(n),P.fc().handleInput(t)}))("keyup",(function(t){return P.Ec(n),P.fc().search(t.target.value)})),P.Sb(),P.Ob(6,"mat-divider"),P.Pc(7,E,2,2,"mat-option",14),P.Sb(),P.Sb()}if(2&t){var a=P.fc();P.Cb(3),P.mc("value",a.tenantId),P.Cb(4),P.mc("ngForOf",a.allTenants)}}var _,L,V,X,G=((_=function(){function e(t,a,i,r){n(this,e),this.snackbar=t,this.date=a,this.jwtHelperService=i,this.cookieService=r,this.searchClicked=new P.o,this.manageParams={},this.allTenants=[],this.fliterTenants=[],this.fromDate="",this.toDate="",this.tenantId=0,this.tenant="",this.clientId=0,this.role="",this.ownerId=0,this.fliterTenants=this.tenants}return i(e,[{key:"ngOnInit",value:function(){var t,e=this.cookieService.get("access_token"),n=this.jwtHelperService.decodeToken(e);n&&(this.role=n["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]),this.ownerId=null!==(t=parseInt(this.cookieService.get("ownerId")))&&void 0!==t?t:0,this.clientId=parseInt(this.cookieService.get("globalClientId"))}},{key:"onSearch",value:function(){this.fromDate&&this.toDate||this.tenantId?(this.manageParams={fromDate:""+(""==this.fromDate?"":C(this.fromDate).format("YYYY-MM-DD")),toDate:""+(""==this.toDate?"":C(this.toDate).format("YYYY-MM-DD")),tenantId:""+this.tenantId,clientId:this.clientId},this.searchClicked.emit(this.manageParams)):this.snackbar.open("Invalid search parameters",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:["yellow-snackbar"]})}},{key:"search",value:function(t){var e=this.select(t.toLowerCase());this.allTenants=e}},{key:"select",value:function(e){var n=[];if(e){var a,i=t(this.fliterTenants);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.ownerName.toLowerCase().indexOf(e)>-1&&n.push(r)}}catch(l){i.e(l)}finally{i.f()}}else n=this.fliterTenants;return n}},{key:"handleInput",value:function(t){t.stopPropagation()}},{key:"tenants",get:function(){return this.allTenants},set:function(t){this.allTenants=this.fliterTenants=t}}]),e}()).\u0275fac=function(t){return new(t||_)(P.Nb(N.b),P.Nb(c.f),P.Nb(A.a),P.Nb(M.a))},_.\u0275cmp=P.Hb({type:_,selectors:[["app-advance-payment-toolbar"]],inputs:{tenants:"tenants"},outputs:{searchClicked:"searchClicked"},decls:23,vars:7,consts:[[1,"person","padding-bottom"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","8px"],["color","primary",1,"result"],["id","fromDate","name","fromDate","matInput","","readonly","",3,"ngModel","matDatepicker","click","ngModelChange","focus"],["matSuffix","",3,"for"],["formDatepickerRef1",""],["id","toDate","name","toDate","matInput","","readonly","",3,"ngModel","matDatepicker","click","ngModelChange","focus"],["formDatepickerRef2",""],["class","result","color","primary",4,"ngIf"],[1,"fury-flex-form-field"],["mat-icon-button","",3,"click"],["id","tenant","name","tenant",3,"value","valueChange"],["matInput","","focused","'true'","type","text","autocomplete","off","placeholder","search",1,"myInput",3,"keydown","keyup"],["myInput",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t){var n=P.Ub();P.Tb(0,"mat-dialog-content"),P.Tb(1,"div",0),P.Tb(2,"form"),P.Tb(3,"div",1),P.Tb(4,"mat-form-field",2),P.Tb(5,"mat-label"),P.Rc(6,"From Date"),P.Sb(),P.Tb(7,"input",3),P.bc("click",(function(){return P.Ec(n),P.Ac(10).open()}))("ngModelChange",(function(t){return e.fromDate=t}))("focus",(function(){return P.Ec(n),P.Ac(10).open()})),P.Sb(),P.Ob(8,"mat-datepicker-toggle",4),P.Ob(9,"mat-datepicker",null,5),P.Sb(),P.Tb(11,"mat-form-field",2),P.Tb(12,"mat-label"),P.Rc(13,"To Date"),P.Sb(),P.Tb(14,"input",6),P.bc("click",(function(){return P.Ec(n),P.Ac(17).open()}))("ngModelChange",(function(t){return e.toDate=t}))("focus",(function(){return P.Ec(n),P.Ac(17).open()})),P.Sb(),P.Ob(15,"mat-datepicker-toggle",4),P.Ob(16,"mat-datepicker",null,7),P.Sb(),P.Pc(18,H,8,2,"mat-form-field",8),P.Tb(19,"div",9),P.Tb(20,"button",10),P.bc("click",(function(){return e.onSearch()})),P.Tb(21,"mat-icon"),P.Rc(22,"search"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb()}if(2&t){var a=P.Ac(10),i=P.Ac(17);P.Cb(7),P.mc("ngModel",e.fromDate)("matDatepicker",a),P.Cb(1),P.mc("for",a),P.Cb(6),P.mc("ngModel",e.toDate)("matDatepicker",i),P.Cb(1),P.mc("for",i),P.Cb(3),P.mc("ngIf",0==e.ownerId)}},directives:[x.f,l.z,l.r,l.s,B.d,B.e,b.d,b.h,f.b,l.c,O.b,l.q,l.t,O.d,b.j,O.a,c.o,F.a,v.a,j.a,R.a,c.n,Y.n],styles:[".button[_ngcontent-%COMP%]{line-height:50px}.myInput[_ngcontent-%COMP%]{height:50px!important;padding:10px!important}"]}),_),z=r("EUZL"),K=r("7d4Y"),W=r("KHMF"),J=r("a8hA"),q=r("sXtk"),Q=r("xBcV"),Z=r("rvYj"),$=r("4FRi"),tt=r("uxLP"),et=["htmlData"],nt=[{path:"",component:(L=function(){function t(e,a,i,r,l,o,s,c,u,p){var d,m,h;n(this,t),this.billService=e,this.date=a,this.currency=i,this.snackbar=r,this.decimalPipe=l,this.billSettlementService=o,this.jwtHelperService=s,this.clientSelectionService=c,this.cookieService=u,this.envService=p,this.role="",this._gap=16,this.gap=this._gap+"px",this.col2="1 1 calc(50% - ".concat(this._gap/2,"px)"),this.col3="1 1 calc(33.3333% - ".concat(this._gap/1.5,"px)"),this.advancePayments=[],this.selectedRows=[],this.tenants=[],this.columns=[],this.manageParams={},this.columnNames=[],this.dateFormat="",this.currencyFormat="",this.roundFormat="",this.visibleButtons=[],this.advanceDateColumnName="Date",this.advanceAmountColumnName="Advance Amount",this.accountNumber="Account Number",this.ownerNameColumnName="Owner/Tenant",this.paymentNumberColumnName="Payment No",this.dateFormat=null!==(d=Object(W.e)("DateFormat"))&&void 0!==d?d:p.dateFormat,this.currencyFormat=null!==(m=Object(W.e)("Currency"))&&void 0!==m?m:p.currencyFormat,this.roundFormat=null!==(h=Object(W.e)("RoundOff"))&&void 0!==h?h:p.roundOffFormat}return i(t,[{key:"addVisibleButtons",value:function(){this.visibleButtons=[{property:"advanceAdjust"}]}},{key:"ngOnInit",value:function(){this.clientSelectionService.setIsClientVisible(!0);var t=this.cookieService.get("access_token"),e=this.jwtHelperService.decodeToken(t);e&&(this.role=e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]),this.getTenants(),this.createColumnNames(),this.createGridColumns(),this.addVisibleButtons(),this.clientId=parseInt(this.cookieService.get("globalClientId"))}},{key:"createGridColumns",value:function(){this.columns=["advanceDatelocal","paymentNumber","accountNumber","ownerName","advanceAmountLocal","action"]}},{key:"createColumnNames",value:function(){this.columnNames=[{name:this.advanceDateColumnName,property:"advanceDatelocal"},{name:this.paymentNumberColumnName,property:"paymentNumber"},{name:this.accountNumber,property:"accountNumber"},{name:this.ownerNameColumnName,property:"ownerName"},{name:this.advanceAmountColumnName,property:"advanceAmountLocal",columnAlign:{"text-align":"right"}},{name:"Actions",property:"actions"}]}},{key:"getAdvancePaymentDetails",value:function(t){var e=this;this.manageParams=t,this.advancePayments=[],t.fromDate=""==t.fromDate?"":C(t.fromDate).format("YYYY-MM-DD"),t.toDate=""==t.toDate?"":C(t.toDate).format("YYYY-MM-DD"),this.billService.getAdvancePaymentDetails(t).subscribe((function(t){e.dateFormat=Object(W.e)("DateFormat"),e.roundFormat=Object(W.e)("RoundOff"),e.currencyFormat=Object(W.e)("Currency"),t.forEach((function(t){t.advanceDatelocal=e.date.transform(t.advanceDate.toString(),e.dateFormat.toString()),t.advanceAmountLocal=e.currency.transform(t.advanceAmount,e.currencyFormat.toString(),!0,e.roundFormat)})),e.advancePayments=t}))}},{key:"adjustBillsWithAdvance",value:function(){var t=this,e=parseInt(this.manageParams.tenantId);this.billService.adjustBillsWithAdvance(e).subscribe({next:function(e){1==e?t.notificationMessage("Advance Adjustments Successful.","green-snackbar"):t.notificationMessage("Advance Adjustments already done.","yellow-snackbar")},error:function(e){t.notificationMessage(e,"red-snackbar")}})}},{key:"getTenants",value:function(){var t=this;this.clientId=parseInt(this.cookieService.get("globalClientId")),this.billSettlementService.getTenantsDetails(this.clientId).subscribe((function(e){t.tenants=e}))}},{key:"getJsonData",value:function(){var t=this;this.tableData=[],null!=this.advancePayments&&this.advancePayments.forEach((function(e){var n={AdvanceDate:t.date.transform(e.advanceDate,"yyyy-MM-dd"),PaymentNumber:e.paymentNumber,AccountNumber:e.accountNumber,OwnerName:e.ownerName,AdvanceAmount:t.currency.transform(e.advanceAmount,t.currencyFormat.toString(),!0,t.roundFormat)};t.tableData.push(n)}))}},{key:"notificationMessage",value:function(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}},{key:"onExport",value:function(){if(this.advancePayments&&this.advancePayments.length>0){if(this.getJsonData(),null!=this.tableData&&this.tableData.length>0){var t=z.utils.json_to_sheet(this.tableData),e=z.utils.book_new();z.utils.book_append_sheet(e,t,"Sheet1"),z.writeFile(e,"AdvancePayment.xlsx")}}else this.notificationMessage("No Data to Export","yellow-snackbar")}},{key:"visibleColumns",get:function(){return this.columns.filter((function(t){return t.visible})).map((function(t){return t.property}))}}]),t}(),L.\u0275fac=function(t){return new(t||L)(P.Nb(U.a),P.Nb(c.f),P.Nb(c.d),P.Nb(N.b),P.Nb(c.g),P.Nb(K.a),P.Nb(A.a),P.Nb(J.a),P.Nb(M.a),P.Nb(q.a))},L.\u0275cmp=P.Hb({type:L,selectors:[["fury-advance-payment"]],viewQuery:function(t,e){var n;1&t&&(P.Vc(et,!0),P.Jc(G,!0)),2&t&&(P.zc(n=P.cc())&&(e.htmlData=n.first),P.zc(n=P.cc())&&(e.advancePaymentToolbarComponent=n.first))},decls:15,vars:6,consts:[["mode","card",2,"margin-top","27px"],["fxLayout","column"],["color","primary",1,"position-fixed"],["src","assets/img/fav-icon.png",1,"img-style"],[1,"toolbar-spacer"],["matTooltip","Export","mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],["fxFlex","grow",1,"basic-forms","route-animations-elements"],["fxLayout","column",1,"result","padding-top"],[3,"tenants","searchClicked"],[3,"tableData","columnsToDisplay","visibleButtons","columnNames","advanceAdjustedRow"]],template:function(t,e){1&t&&(P.Tb(0,"fury-page-layout",0),P.Tb(1,"fury-page-layout-content",1),P.Tb(2,"mat-toolbar",2),P.Ob(3,"img",3),P.Tb(4,"span"),P.Rc(5,"Advance Payment"),P.Sb(),P.Ob(6,"span",4),P.Tb(7,"button",5),P.bc("click",(function(){return e.onExport()})),P.Tb(8,"mat-icon"),P.Rc(9,"import_export"),P.Sb(),P.Sb(),P.Sb(),P.Tb(10,"fury-card",6),P.Tb(11,"fury-card-content",1),P.Tb(12,"div",7),P.Tb(13,"app-advance-payment-toolbar",8),P.bc("searchClicked",(function(t){return e.getAdvancePaymentDetails(t)})),P.Sb(),P.Tb(14,"fury-expandable-table-structure",9),P.bc("advanceAdjustedRow",(function(){return e.adjustBillsWithAdvance()})),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&t&&(P.Cb(10),P.mc("@fadeInUp",void 0),P.Cb(3),P.mc("tenants",e.tenants),P.Cb(1),P.mc("tableData",e.advancePayments)("columnsToDisplay",e.columns)("visibleButtons",e.visibleButtons)("columnNames",e.columnNames))},directives:[Q.a,Z.a,B.d,k.a,F.a,D.a,v.a,$.a,B.b,$.c,G,tt.a],styles:[".toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.button[_ngcontent-%COMP%]{line-height:50px}.img-style[_ngcontent-%COMP%]{width:32px}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}"],data:{animation:[T.a,S.a]}}),L)}],at=((X=function t(){n(this,t)}).\u0275mod=P.Lb({type:X}),X.\u0275inj=P.Kb({factory:function(t){return new(t||X)},imports:[[w.j.forChild(nt)],w.j]}),X),it=((V=function t(){n(this,t)}).\u0275mod=P.Lb({type:V}),V.\u0275inj=P.Kb({factory:function(t){return new(t||V)},providers:[c.f,c.g],imports:[[c.c,at,l.l,o.a,s.a,u.a,p.a,l.w,d.a,m.a,I.a,h.a,b.f,f.c,y.c,v.b,g.c,k.b,D.b]]}),V)},lW2b:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var r=a("tk/3"),l=a("sXtk"),o=a("fXoL"),s=function(){var t=function(){function t(e,a){n(this,t),this.http=e,this.envService=a,this.baseUrl="",this.baseUrl=a.backend}return i(t,[{key:"getUtilityTypes",value:function(){return this.http.get(this.baseUrl+"/bills/utilitytypes")}},{key:"getBillPeriods",value:function(t){return this.http.get(this.baseUrl+"/bills/billperiods/"+t)}},{key:"saveAdvancePayment",value:function(t){return this.http.post(this.baseUrl+"/bills/advancepayment",t)}},{key:"getBillHistory",value:function(t){var e=new r.f;return t&&(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate),t.billPeriodId&&(e=e.append("billPeriodId",""+t.billPeriodId)),t.billFeeType&&(e=e.append("billFeeType",""+t.billFeeType)),t.billType&&(e=e.append("billType",""+t.billType)),t.tenantId&&(e=e.append("ownerId",""+t.tenantId)),t.clientId&&(e=e.append("clientId",""+t.clientId))),this.http.get(this.baseUrl+"/bills/billhistory",{params:e})}},{key:"getAccountStatement",value:function(t){var e=new r.f;return t&&(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate),t.tenantId&&(e=e.append("ownerId",""+t.tenantId)),t.clientId&&(e=e.append("clientId",""+t.clientId))),this.http.get(this.baseUrl+"/bills/account/statement",{params:e})}},{key:"getPaymentHistory",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("paymentMode",""+t.paymentMode)).append("paymentId",""+t.paymentId)).append("ownerId",""+t.tenantId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/paymenthistory",{params:e})}},{key:"getPaymentDetail",value:function(t,e){var n=new r.f;return t&&(n=n.append("paymentId",""+t)),e&&(n=n.append("clientId",""+e)),this.http.get(this.baseUrl+"/bills/payment/detail",{params:n})}},{key:"cancelBillHistory",value:function(t){var e={headers:new r.e({"Content-Type":"application/json"}),body:t};return this.http.delete(this.baseUrl+"/billsettlement/CancelBillHistory",e)}},{key:"getBillCancelledHistory",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/billcancelhistory",{params:e})}},{key:"cancelPaymentHistory",value:function(t){var e={headers:new r.e({"Content-Type":"application/json"}),body:t};return this.http.delete(this.baseUrl+"/billsettlement/CancelPaymentHistory",e)}},{key:"getPaymentCancelHistory",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("paymentMode",""+t.paymentMode)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/paymentcancelhistory",{params:e})}},{key:"getUtilities",value:function(t){return this.http.get(this.baseUrl+"/dashboard/"+t+"/Utilities")}},{key:"GetPaymentDue",value:function(t,e,n,a,i){var l=new r.f;return l=(l=(l=(l=(l=l.append("fromDate",""+t)).append("toDate",""+e)).append("billPeriodId",""+n)).append("ownerId",""+a)).append("clientId",""+i),this.http.get(this.baseUrl+"/bills/paymentdue",{params:l})}},{key:"GetRefundReport",value:function(t,e,n,a){var i=new r.f;return i=(i=(i=(i=i.append("fromDate",""+t)).append("toDate",""+e)).append("ownerId",""+n)).append("clientId",""+a),this.http.get(this.baseUrl+"/bills/refund",{params:i})}},{key:"getInvoiceAgingReport",value:function(t,e){var n=new r.f;return n=(n=n.append("clientId",""+t)).append("toDate",""+e),this.http.get(this.baseUrl+"/bills/invoiceAging",{params:n})}},{key:"getConsolidatedData",value:function(t,e){var n=new r.f;return n=(n=n.append("clientId",""+t)).append("billPeriodId",""+e),this.http.get(this.baseUrl+"/bills/consolidatedReport",{params:n})}},{key:"getAdvancePaymentDetails",value:function(t){var e=new r.f;return t&&(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("ownerId",""+t.tenantId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/advancePaymentDetails",{params:e})}},{key:"adjustBillsWithAdvance",value:function(t){var e=new r.f;return e=e.append("ownerId",""+t),this.http.put("".concat(this.baseUrl,"/billsettlement/adjustBillsWithAdvance/").concat(t),null)}},{key:"getAdvanceInHandForOwnerTenant",value:function(t){var e=new r.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/bills/advanceInHandForOwnerTenant",{params:e})}},{key:"updateIsFailedStatusInBills",value:function(t){return this.http.put(this.baseUrl+"/bills/isFailed/update",t)}},{key:"UpdateIsBillFailedStatusInBillMaster",value:function(t){return this.http.put(this.baseUrl+"/bills/isBillFailed/update/billMaster",t)}},{key:"invoiceView",value:function(t){return this.http.post(this.baseUrl+"/file/report/invoice",t)}},{key:"receiptView",value:function(t){return this.http.post(this.baseUrl+"/file/report/receipt",t)}},{key:"sdReceiptView",value:function(t){return this.http.post(this.baseUrl+"/file/report/sdreceipt",t)}},{key:"accountStatementView",value:function(t){return this.http.post(this.baseUrl+"/file/report/account/statement",t)}},{key:"accountStatementSummaryView",value:function(t){return this.http.post(this.baseUrl+"/file/report/account/statement/summary",t)}},{key:"billSummaryView",value:function(t){return this.http.post(this.baseUrl+"/file/report/bill/summary",t)}},{key:"billConsumptionDetails",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new r.f;return t&&(n=(n=(n=(n=(n=n.append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)).append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("isApproved",""+e)),this.http.get(this.baseUrl+"/bills/consumption/details",{params:n})}},{key:"invoicePreview",value:function(t){return this.http.post(this.baseUrl+"/file/report/invoice/preview",t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Xb(r.c),o.Xb(l.a))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();