(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"/tVO":function(e,t,r){"use strict";r.r(t),r.d(t,"CreateAlertSettingsEMSModule",(function(){return Ge}));var s=r("ofXK"),i=r("3Pt+"),o=r("q8Jb"),a=r("0jmt"),l=r("KthW"),n=r("tyNb"),c=r("Ku73"),m=r("nStZ");class d{constructor(e){this.id=e.id||0,this.alarmId=e.alarmId||0,this.meterId=e.meterId||0}}class h{constructor(e){this.id=e.id||0,this.alarmTypeId=e.alarmTypeId||0,this.alarmType=e.alarmType||"",this.alarmName=e.alarmName||"",this.weekDayId=e.weekDayId||0,this.weekDay=e.weekDay||"",this.dateId=e.dateId||0,this.date=e.date||"",this.hourId=e.hourId||0,this.hour=e.hour||"",this.minuteId=e.minuteId||0,this.minutes=e.minutes||"",this.feederId=e.feederId||0,this.feeder=e.feeder||"",this.meterName=e.meterName||"",this.parameterId=e.parameterId||0,this.parameter=e.parameter||"",this.parameterName=e.parameterName||"",this.parameterValue=e.parameterValue||"",this.conditionId=e.conditionId||0,this.condition=e.condition||"",this.conditionValue=e.conditionValue||0,this.isSms=e.isSms||!1,this.isWhatsapp=e.isWhatsapp||!1,this.sMSMobileNumber=e.sMSMobileNumber||"",this.isEmail=e.isEmail||!1,this.emailId=e.emailId||"",this.isWhatsAppGroup=e.isWhatsAppGroup||!1,this.whatsAppGroupName=e.whatsAppGroupName||"",this.whatsAppGroupAdminNumber=e.whatsAppGroupAdminNumber||"",this.isNotify=e.isNotify||!1,this.clientId=e.clientId||0,this.alarmMeters=(e.alarmMeters||[]).map(e=>new d(e))}}var u=r("/sTe"),f=r("zSPf"),p=r("+0xr"),b=r("M9IT"),g=r("Dh3D"),y=r("jtHE"),I=r("pLZG"),T=r("dDrv"),S=r("Nr/g"),v=r("WFQN"),C=r("tB66"),M=r("fXoL"),w=r("dNgK"),A=r("0IaG"),x=r("b6Qw"),k=r("xBcV"),N=r("rvYj"),E=r("XiUz"),R=r("/t3+"),V=r("bTqV"),P=r("Qu3c"),G=r("NFeN");let O=(()=>{class e{constructor(){this.saveClicked=new M.o}ngOnInit(){}onSave(){this.saveClicked.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=M.Hb({type:e,selectors:[["app-create-alert-settings-ems-footer-toolbar"]],outputs:{saveClicked:"saveClicked"},decls:6,vars:0,consts:[[1,"person"],["matTooltip","Save","mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"]],template:function(e,t){1&e&&(M.Tb(0,"mat-dialog-content"),M.Tb(1,"div",0),M.Tb(2,"form"),M.Tb(3,"button",1),M.bc("click",(function(){return t.onSave()})),M.Tb(4,"mat-icon"),M.Rc(5,"save"),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb())},directives:[A.f,i.z,i.r,i.s,V.a,P.a,G.a],styles:[""]}),e})();var L=r("4FRi"),D=r("kmnG"),F=r("d3UM"),U=r("YaQ2"),q=r("qFsG"),W=r("bSwM"),$=r("a+RD"),z=r("FKr1"),_=r("f0Cb"),H=r("STbY");const j=["allMeterTypesSelected"];function X(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Sc(e.description)}}function Q(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Tc(" ",e.description,"")}}function K(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Tc("",e.description," ")}}function Y(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-form-field",12),M.Tb(1,"mat-label"),M.Rc(2,"Day"),M.Sb(),M.Tb(3,"mat-select",38),M.bc("selectionChange",(function(t){return M.Ec(e),M.fc().onChangeDay(t)})),M.Pc(4,K,2,2,"mat-option",14),M.Sb(),M.Ob(5,"app-show-errors",16),M.Tb(6,"mat-hint"),M.Rc(7,"Please select Day."),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(4),M.mc("ngForOf",e.days),M.Cb(1),M.mc("ctrl",null==e.form?null:e.form.get("weekDayId"))}}function Z(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Tc("",e.description," ")}}function B(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-form-field",12),M.Tb(1,"mat-label"),M.Rc(2,"Date"),M.Sb(),M.Tb(3,"mat-select",39),M.bc("selectionChange",(function(t){return M.Ec(e),M.fc().onChangeDate(t)})),M.Pc(4,Z,2,2,"mat-option",14),M.Sb(),M.Ob(5,"app-show-errors",16),M.Tb(6,"mat-hint"),M.Rc(7,"Please select Date."),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(4),M.mc("ngForOf",e.dates),M.Cb(1),M.mc("ctrl",null==e.form?null:e.form.get("dateId"))}}function J(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Tc("",e.description," ")}}function ee(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-form-field",12),M.Tb(1,"mat-label"),M.Rc(2,"Hour"),M.Sb(),M.Tb(3,"mat-select",40),M.bc("selectionChange",(function(t){return M.Ec(e),M.fc().onChangeHour(t)})),M.Pc(4,J,2,2,"mat-option",14),M.Sb(),M.Tb(5,"mat-hint"),M.Rc(6,"Please select Hour."),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(4),M.mc("ngForOf",e.hours)}}function te(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Tc(" ",e.description,"")}}function re(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-form-field",12),M.Tb(1,"mat-label"),M.Rc(2,"Minutes"),M.Sb(),M.Tb(3,"mat-select",41),M.bc("selectionChange",(function(t){return M.Ec(e),M.fc().onChangeMinutes(t)})),M.Pc(4,te,2,2,"mat-option",14),M.Sb(),M.Tb(5,"mat-hint"),M.Rc(6,"Please select Minutes."),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(4),M.mc("ngForOf",e.minutes)}}function se(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.description),M.Cb(1),M.Sc(e.description)}}function ie(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-form-field"),M.Tb(1,"mat-select",42),M.bc("ngModelChange",(function(t){return M.Ec(e),M.fc().meterTypeName=t}))("selectionChange",(function(t){return M.Ec(e),M.fc().onMeterTypeChange(t)})),M.Pc(2,se,2,2,"mat-option",14),M.Sb(),M.Tb(3,"mat-hint"),M.Rc(4,"Please select Meter Type."),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(1),M.mc("ngModel",e.meterTypeName),M.Cb(1),M.mc("ngForOf",e.meterTypes)}}function oe(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-option",46),M.bc("click",(function(){M.Ec(e),M.fc();const t=M.Ac(8);return M.fc().toggleMeterTypesPerOne(t.viewValue)})),M.Rc(1),M.Sb()}if(2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Tc(" ",e.deviceName,"")}}function ae(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-form-field",12),M.Tb(1,"mat-label"),M.Rc(2,"Select Feeder"),M.Sb(),M.Tb(3,"mat-select",43),M.bc("ngModelChange",(function(t){return M.Ec(e),M.fc().selectedMeters=t}))("selectionChange",(function(t){return M.Ec(e),M.fc().onChangeFeeder(t)})),M.Tb(4,"input",44,45),M.bc("keyup",(function(t){return M.Ec(e),M.fc().searchMeterType(t.target.value)})),M.Sb(),M.Ob(6,"mat-divider"),M.Tb(7,"mat-option",46,47),M.bc("click",(function(){return M.Ec(e),M.fc().toggleMeterTypesAllSelection()})),M.Rc(9,"Select All "),M.Sb(),M.Pc(10,oe,2,2,"mat-option",48),M.Sb(),M.Ob(11,"app-show-errors",16),M.Tb(12,"mat-hint"),M.Rc(13,"Please select Feeder."),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(3),M.mc("ngModel",e.selectedMeters),M.Cb(4),M.mc("value",0),M.Cb(3),M.mc("ngForOf",e.feeders),M.Cb(1),M.mc("ctrl",null==e.form?null:e.form.get("feederId"))}}function le(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Tc(" ",e.description,"")}}function ne(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-form-field",12),M.Tb(1,"mat-label"),M.Rc(2,"Select Parameter"),M.Sb(),M.Tb(3,"mat-select",49),M.bc("selectionChange",(function(t){return M.Ec(e),M.fc().onChangeParameter(t)})),M.Pc(4,le,2,2,"mat-option",14),M.Sb(),M.Ob(5,"app-show-errors",16),M.Tb(6,"mat-hint"),M.Rc(7,"Please select Parameter."),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(4),M.mc("ngForOf",e.parameters),M.Cb(1),M.mc("ctrl",null==e.form?null:e.form.get("parameterId"))}}function ce(e,t){if(1&e&&(M.Tb(0,"mat-option",37),M.Rc(1),M.Sb()),2&e){const e=t.$implicit;M.mc("value",e.id),M.Cb(1),M.Tc(" ",e.description,"")}}function me(e,t){if(1&e){const e=M.Ub();M.Tb(0,"mat-form-field",12),M.Tb(1,"mat-label"),M.Rc(2,"Condition"),M.Sb(),M.Tb(3,"mat-select",50),M.bc("selectionChange",(function(t){return M.Ec(e),M.fc().onChangeCondition(t)})),M.Pc(4,ce,2,2,"mat-option",14),M.Sb(),M.Tb(5,"mat-hint"),M.Rc(6,"Please select Condition."),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(4),M.mc("ngForOf",e.conditions)}}function de(e,t){1&e&&(M.Tb(0,"mat-form-field",12),M.Tb(1,"mat-label"),M.Rc(2,"Check Value"),M.Sb(),M.Ob(3,"input",51),M.Tb(4,"mat-hint"),M.Rc(5,"Please enter Condition Value."),M.Sb(),M.Sb())}function he(e,t){1&e&&(M.Tb(0,"mat-hint"),M.Rc(1,"Please enter Mobile Number."),M.Sb())}function ue(e,t){if(1&e){const e=M.Ub();M.Tb(0,"div",9),M.Tb(1,"div",19),M.Tb(2,"div",23),M.Tb(3,"div",52),M.Tb(4,"label"),M.Rc(5,"SMS"),M.Sb(),M.Tb(6,"mat-checkbox",53),M.bc("change",(function(){M.Ec(e);const t=M.fc();return t.toggleSMS(t.isSms)})),M.Sb(),M.Tb(7,"label"),M.Rc(8,"Whatsapp"),M.Sb(),M.Tb(9,"mat-checkbox",54),M.bc("change",(function(){M.Ec(e);const t=M.fc();return t.toggleWhatsapp(t.isWhatsapp)})),M.Sb(),M.Sb(),M.Tb(10,"mat-form-field",25),M.Tb(11,"mat-label"),M.Rc(12,"Mobile"),M.Sb(),M.Ob(13,"input",55),M.Pc(14,he,2,0,"mat-hint",21),M.Ob(15,"app-show-errors",16),M.Sb(),M.Sb(),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(14),M.mc("ngIf",e.isSms||e.isWhatsapp),M.Cb(1),M.mc("ctrl",null==e.form?null:e.form.get("sMSMobileNumber"))}}function fe(e,t){1&e&&(M.Tb(0,"mat-hint"),M.Rc(1,"Please enter Group Name."),M.Sb())}function pe(e,t){1&e&&(M.Tb(0,"mat-hint"),M.Rc(1,"Please enter Group Admin Number."),M.Sb())}function be(e,t){if(1&e){const e=M.Ub();M.Tb(0,"div",9),M.Tb(1,"div",10),M.Tb(2,"div",23),M.Tb(3,"label"),M.Rc(4,"Whatsapp Group"),M.Sb(),M.Tb(5,"mat-checkbox",56),M.bc("change",(function(){M.Ec(e);const t=M.fc();return t.toggleWhatsappGroup(t.isGroup)})),M.Sb(),M.Tb(6,"mat-form-field",57),M.Tb(7,"mat-label"),M.Rc(8,"Group Name"),M.Sb(),M.Ob(9,"input",58),M.Pc(10,fe,2,0,"mat-hint",21),M.Ob(11,"app-show-errors",16),M.Sb(),M.Tb(12,"mat-form-field",59),M.Tb(13,"mat-label"),M.Rc(14,"Group Admin Number"),M.Sb(),M.Ob(15,"input",60),M.Pc(16,pe,2,0,"mat-hint",21),M.Ob(17,"app-show-errors",16),M.Sb(),M.Sb(),M.Sb(),M.Sb()}if(2&e){const e=M.fc();M.Cb(10),M.mc("ngIf",e.isGroup),M.Cb(1),M.mc("ctrl",null==e.form?null:e.form.get("whatsAppGroupName")),M.Cb(5),M.mc("ngIf",e.isGroup),M.Cb(1),M.mc("ctrl",null==e.form?null:e.form.get("whatsAppGroupAdminNumber"))}}function ge(e,t){1&e&&(M.Tb(0,"mat-hint"),M.Rc(1,"Please enter Email Id."),M.Sb())}function ye(e,t){if(1&e&&(M.Tb(0,"th",65),M.Rc(1),M.Sb()),2&e){const e=M.fc(2).$implicit;M.Cb(1),M.Tc(" ",e.name,"")}}function Ie(e,t){if(1&e&&(M.Tb(0,"td",66),M.Rc(1),M.Sb()),2&e){const e=t.$implicit,r=M.fc(2).$implicit;M.Cb(1),M.Tc(" ",e[r.property]," ")}}function Te(e,t){if(1&e&&(M.Rb(0,62),M.Pc(1,ye,2,1,"th",63),M.Pc(2,Ie,2,1,"td",64),M.Qb()),2&e){const e=M.fc().$implicit;M.mc("matColumnDef",e.property)}}function Se(e,t){if(1&e&&(M.Rb(0),M.Pc(1,Te,3,1,"ng-container",61),M.Qb()),2&e){const e=t.$implicit;M.Cb(1),M.mc("ngIf",e.isModelProperty)}}function ve(e,t){1&e&&M.Ob(0,"th",67)}function Ce(e,t){if(1&e){const e=M.Ub();M.Tb(0,"td",68),M.Tb(1,"button",69),M.bc("click",(function(t){return M.Ec(e),t.stopPropagation()})),M.Tb(2,"mat-icon"),M.Rc(3,"more_horiz"),M.Sb(),M.Sb(),M.Tb(4,"mat-menu",70,71),M.Tb(6,"button",72),M.bc("click",(function(){M.Ec(e);const r=t.$implicit;return M.fc().deleteAlertSetting(r)})),M.Tb(7,"span"),M.Rc(8,"Delete"),M.Sb(),M.Sb(),M.Sb(),M.Sb()}if(2&e){const e=M.Ac(5);M.Cb(1),M.mc("matMenuTriggerFor",e)}}function Me(e,t){1&e&&M.Ob(0,"tr",73)}function we(e,t){1&e&&M.Ob(0,"tr",74)}const Ae=[{path:"",component:(()=>{class e{constructor(e,t,r,s,i,o,a,l,n){this.fb=e,this.snackbar=t,this.masterService=r,this.dialog=s,this.estidamaChartService=i,this.parameterChartService=o,this.meterReplacementService=a,this.alertSettingsEmsService=l,this.cookieService=n,this._gap=16,this.gap=this._gap+"px",this.col2=`1 1 calc(50% - ${this._gap/2}px)`,this.col3=`1 1 calc(33.3333% - ${this._gap/1.5}px)`,this.mode="create",this.alarmTypeId=0,this.weekDayId=0,this.dateId=0,this.hourId=0,this.minuteId=0,this.feederId=0,this.parameterId=0,this.conditionId=0,this.isHide=!1,this.isSms=!1,this.isWhatsapp=!1,this.isGroup=!1,this.isEmail=!1,this.selectedMeters=[],this.selectedUserMeter=[],this.filterMeterType=[],this.meterType="",this.clients=[],this.client=0,this.subject$=new y.a(1),this.data$=this.subject$.asObservable(),this.displayedColumns=[{name:"Alarm Type",property:"alarmType",visible:!0,isModelProperty:!0},{name:"Alarm Name",property:"alarmName",visible:!0,isModelProperty:!0},{name:"Week Day",property:"weekDay",visible:!0,isModelProperty:!0},{name:"Date",property:"date",visible:!0,isModelProperty:!0},{name:"Hour",property:"hour",visible:!0,isModelProperty:!0},{name:"Minute",property:"minutes",visible:!0,isModelProperty:!0},{name:"Parameter",property:"parameterName",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=8,this.columnsProps=this.displayedColumns.map(e=>e.property)}get visibleColumns(){return this.displayedColumns.filter(e=>e.visible).map(e=>e.property)}set content(e){this.sort=e,this.sort&&(this.dataSource.sort=this.sort)}ngOnInit(){this.defaults=new h({});const t=this.cookieService.get("filterData");if(t){let e=JSON.parse(t);this.clientId=""==e.strClientId?"0":e.strClientId}this.masterService.getSystemMasterdata(66,0).subscribe(e=>{this.alarmTypes=e}),this.masterService.getSystemMasterdata(32,0).subscribe(e=>{this.days=e}),this.masterService.getSystemMasterdata(70,0).subscribe(e=>{this.dates=e}),this.masterService.getSystemMasterdata(67,0).subscribe(e=>{this.hours=e}),this.masterService.getSystemMasterdata(68,0).subscribe(e=>{this.minutes=e}),this.masterService.getSystemMasterdata(69,0).subscribe(e=>{this.conditions=e}),this.form=this.fb.group({id:[this.defaults.id||e.id++],clientId:[this.defaults.clientId||"",i.y.required],alarmTypeId:[this.defaults.alarmTypeId||"",i.y.required],alarmType:[this.defaults.alarmType||""],alarmName:[this.defaults.alarmName||"",i.y.required],dateId:[this.defaults.dateId||""],date:[this.defaults.date||""],weekDayId:[this.defaults.weekDayId||""],weekDay:[this.defaults.weekDay||""],hourId:[this.defaults.hourId||""],hour:[this.defaults.hour||""],minuteId:[this.defaults.minuteId||""],minutes:[this.defaults.minutes||""],meterTypeId:[""],meterType:[""],feederId:[this.defaults.feederId||"",i.y.required],feeder:[this.defaults.feeder||""],parameterId:[this.defaults.parameterId||""],parameter:[this.defaults.parameter||""],conditionId:[this.defaults.conditionId],condition:[this.defaults.condition],conditionValue:[this.defaults.conditionValue],sMSMobileNumber:[this.defaults.sMSMobileNumber||""],emailId:[this.defaults.emailId||""],whatsAppGroupName:[this.defaults.whatsAppGroupName||""],whatsAppGroupAdminNumber:[this.defaults.whatsAppGroupAdminNumber||""],isSms:[this.defaults.isSms||""],isWhatsapp:[this.defaults.isWhatsapp||""],isWhatsAppGroup:[this.defaults.isWhatsAppGroup||""],isEmail:[this.defaults.isEmail||""]}),this.getClients(),this.getAlertSettingsEMS(),this.getMeterTypes()}getMeterTypes(){this.meterTypes=[],this.estidamaChartService.getMeterTypes().subscribe(e=>{if(e){const t=e.meterTypeList;t&&t.forEach(e=>{this.meterTypes.push({id:e.meterTypeID,description:e.meterTypeName})}),this.meterTypeId=this.meterTypes[0].id,this.meterTypeName=this.meterTypes[0].description,this.onMeterTypeChange()}})}onMeterTypeChange(e=null){e&&(this.meterTypeName=e.value),this.meterTypes.find(e=>{e.description==this.meterTypeName&&(this.meterTypeId=e.id)}),this.getMeters(),this.getParameters()}getClients(){this.clients=[],this.meterReplacementService.getClients().subscribe(e=>{e&&(this.clients=e)})}onChangeClient(e){this.getMeters()}getMeters(){var e;this.feeders=[],this.selectedMeters=[],this.filterMeterType=[],null!=this.client&&0!=this.client&&this.meterReplacementService.getV1DeviceGroupMeterList(null!==(e=this.meterTypeId)&&void 0!==e?e:0,0,this.client.toString()).subscribe(e=>{e&&(this.feeders=this.filterMeterType=e)})}getParameters(){this.parameters=[],this.parameterChartService.getParameters(this.meterTypeName).subscribe(e=>{e&&(this.parameters=e)})}setValidators(){""==this.form.controls.clientId.value||null==this.form.controls.clientId.value?(this.form.controls.clientId.setErrors({required:!0}),this.form.controls.clientId.markAsTouched()):this.form.controls.clientId.clearValidators(),""==this.form.controls.alarmTypeId.value||null==this.form.controls.alarmTypeId.value?(this.form.controls.alarmTypeId.setErrors({required:!0}),this.form.controls.alarmTypeId.markAsTouched()):this.form.controls.alarmTypeId.clearValidators(),""==this.form.controls.alarmName.value||null==this.form.controls.alarmName.value?(this.form.controls.alarmName.setErrors({required:!0}),this.form.controls.alarmName.markAsTouched()):this.form.controls.alarmName.clearValidators(),this.alarmType&&"hourly"==this.alarmType.toLowerCase()?(""==this.form.controls.minuteId.value||null==this.form.controls.minuteId.value?(this.form.controls.minuteId.setErrors({required:!0}),this.form.controls.minuteId.markAsTouched()):this.form.controls.minuteId.clearValidators(),""==this.form.controls.feederId.value||null==this.form.controls.feederId.value?(this.form.controls.feederId.setErrors({required:!0}),this.form.controls.feederId.markAsTouched()):this.form.controls.feederId.clearValidators(),""==this.form.controls.parameterId.value||null==this.form.controls.parameterId.value?(this.form.controls.parameterId.setErrors({required:!0}),this.form.controls.parameterId.markAsTouched()):this.form.controls.parameterId.clearValidators()):this.alarmType&&"daily"==this.alarmType.toLowerCase()?(""==this.form.get("hourId").value||null==this.form.get("hourId").value?(this.form.get("hourId").setErrors({required:!0}),this.form.get("hourId").markAsTouched()):this.form.get("hourId").clearValidators(),""==this.form.get("minuteId").value||null==this.form.get("minuteId").value?(this.form.get("minuteId").setErrors({required:!0}),this.form.get("minuteId").markAsTouched()):this.form.get("minuteId").clearValidators(),""==this.form.controls.feederId.value||null==this.form.controls.feederId.value?(this.form.controls.feederId.setErrors({required:!0}),this.form.controls.feederId.markAsTouched()):this.form.controls.feederId.clearValidators(),""==this.form.get("parameterId").value||null==this.form.get("parameterId").value?(this.form.get("parameterId").setErrors({required:!0}),this.form.get("parameterId").markAsTouched()):this.form.get("parameterId").clearValidators()):this.alarmType&&"weekly"==this.alarmType.toLowerCase()?(""==this.form.controls.weekDayId.value||null==this.form.controls.weekDayId.value?(this.form.controls.weekDayId.setErrors({required:!0}),this.form.controls.weekDayId.markAsTouched()):this.form.controls.weekDayId.clearValidators(),""==this.form.controls.hourId.value||null==this.form.controls.hourId.value?(this.form.controls.hourId.setErrors({required:!0}),this.form.controls.hourId.markAsTouched()):this.form.controls.hourId.clearValidators(),""==this.form.controls.minuteId.value||null==this.form.controls.minuteId.value?(this.form.controls.minuteId.setErrors({required:!0}),this.form.controls.minuteId.markAsTouched()):this.form.controls.minuteId.clearValidators(),""==this.form.controls.feederId.value||null==this.form.controls.feederId.value?(this.form.controls.feederId.setErrors({required:!0}),this.form.controls.feederId.markAsTouched()):this.form.controls.feederId.clearValidators(),""==this.form.controls.parameterId.value||null==this.form.controls.parameterId.value?(this.form.controls.parameterId.setErrors({required:!0}),this.form.controls.parameterId.markAsTouched()):this.form.controls.parameterId.clearValidators()):this.alarmType&&"monthly"==this.alarmType.toLowerCase()?(""==this.form.controls.dateId.value||null==this.form.controls.dateId.value?(this.form.controls.dateId.setErrors({required:!0}),this.form.controls.dateId.markAsTouched()):this.form.controls.dateId.clearValidators(),""==this.form.controls.hourId.value||null==this.form.controls.hourId.value?(this.form.controls.hourId.setErrors({required:!0}),this.form.controls.hourId.markAsTouched()):this.form.controls.hourId.clearValidators(),""==this.form.controls.minuteId.value||null==this.form.controls.minuteId.value?(this.form.controls.minuteId.setErrors({required:!0}),this.form.controls.minuteId.markAsTouched()):this.form.controls.minuteId.clearValidators(),""==this.form.controls.feederId.value||null==this.form.controls.feederId.value?(this.form.controls.feederId.setErrors({required:!0}),this.form.controls.feederId.markAsTouched()):this.form.controls.feederId.clearValidators(),""==this.form.controls.parameterId.value||null==this.form.controls.parameterId.value?(this.form.controls.parameterId.setErrors({required:!0}),this.form.controls.parameterId.markAsTouched()):this.form.controls.parameterId.clearValidators()):this.alarmType&&"offline"==this.alarmType.toLowerCase()?""==this.form.controls.feederId.value||null==this.form.controls.feederId.value?(this.form.controls.feederId.setErrors({required:!0}),this.form.controls.feederId.markAsTouched()):this.form.controls.feederId.clearValidators():this.alarmType&&"realtime"==this.alarmType.toLowerCase()&&(""==this.form.controls.feederId.value||null==this.form.controls.feederId.value?(this.form.controls.feederId.setErrors({required:!0}),this.form.controls.feederId.markAsTouched()):this.form.controls.feederId.clearValidators(),""==this.form.controls.parameterId.value||null==this.form.controls.parameterId.value?(this.form.controls.parameterId.setErrors({required:!0}),this.form.controls.parameterId.markAsTouched()):this.form.controls.parameterId.clearValidators(),""==this.form.controls.conditionId.value||null==this.form.controls.conditionId.value?(this.form.controls.conditionId.setErrors({required:!0}),this.form.controls.conditionId.markAsTouched()):this.form.controls.conditionId.clearValidators(),""==this.form.controls.conditionValue.value||null==this.form.controls.conditionValue.value?(this.form.controls.conditionValue.setErrors({required:!0}),this.form.controls.conditionValue.markAsTouched()):this.form.controls.conditionValue.clearValidators()),this.isGroup&&(""==this.form.controls.whatsAppGroupName.value||null==this.form.controls.whatsAppGroupName.value?(this.form.controls.whatsAppGroupName.setErrors({required:!0}),this.form.controls.whatsAppGroupName.markAsTouched()):this.form.controls.whatsAppGroupName.clearValidators(),""==this.form.controls.whatsAppGroupAdminNumber.value||null==this.form.controls.whatsAppGroupAdminNumber.value?(this.form.controls.whatsAppGroupAdminNumber.setErrors({required:!0}),this.form.controls.whatsAppGroupAdminNumber.markAsTouched()):this.form.controls.whatsAppGroupAdminNumber.clearValidators()),!this.isEmail||""!=this.form.controls.emailId.value&&null!=this.form.controls.emailId.value?this.form.controls.emailId.clearValidators():(this.form.controls.emailId.setErrors({required:!0}),this.form.controls.emailId.markAsTouched()),!this.isWhatsapp||""!=this.form.controls.sMSMobileNumber.value&&null!=this.form.controls.sMSMobileNumber.value?this.form.controls.sMSMobileNumber.clearValidators():(this.form.controls.sMSMobileNumber.setErrors({required:!0}),this.form.controls.sMSMobileNumber.markAsTouched()),!this.isSms||""!=this.form.controls.sMSMobileNumber.value&&null!=this.form.controls.sMSMobileNumber.value?this.form.controls.sMSMobileNumber.clearValidators():(this.form.controls.sMSMobileNumber.setErrors({required:!0}),this.form.controls.sMSMobileNumber.markAsTouched()),this.alarmType&&"mismatch reading"==this.alarmType.toLowerCase()&&(""==this.form.controls.meterTypeId.value||null==this.form.controls.meterTypeId.value?(this.form.controls.meterTypeId.setErrors({required:!0}),this.form.controls.meterTypeId.markAsTouched()):this.form.controls.meterTypeId.clearValidators(),""==this.form.controls.feederId.value||null==this.form.controls.feederId.value?(this.form.controls.feederId.setErrors({required:!0}),this.form.controls.feederId.markAsTouched()):this.form.controls.feederId.clearValidators()),!this.alarmType||"meter reading report"!=this.alarmType.toLowerCase()&&"meter health report"!=this.alarmType.toLowerCase()||(""==this.form.controls.emailId.value||null==this.form.controls.emailId.value?(this.form.controls.emailId.setErrors({required:!0}),this.form.controls.emailId.markAsTouched()):this.form.controls.emailId.clearValidators(),this.isSms=!1,this.isWhatsapp=!1,this.isGroup=!1,this.form.controls.meterTypeId.setValue(!1),this.form.controls.feederId.setValue(!1),this.form.controls.parameterId.setValue(!1),this.form.controls.isSms.setValue(!1),this.form.controls.isWhatsapp.setValue(!1),this.form.controls.isWhatsAppGroup.setValue(!1),this.form.controls.meterTypeId.clearValidators(),this.form.controls.feederId.clearValidators(),this.form.controls.parameterId.clearValidators(),this.form.controls.sMSMobileNumber.clearValidators(),this.form.controls.whatsAppGroupName.clearValidators(),this.form.controls.whatsAppGroupAdminNumber.clearValidators())}ngAfterViewInit(){null!=this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}getAlertSettingsEMS(){this.alertSettingsEmsService.getv1AlertSettings(this.clientId).subscribe(e=>{this.alertSettingsEMS=e,this.subject$.next(e)}),this.dataSource=new p.k(this.alertSettingsEMS),this.data$.pipe(Object(I.a)(e=>!!e)).subscribe(e=>{this.alertSettingsEMS=e,this.dataSource.data=e}),this.ngAfterViewInit()}onSave(){this.setValidators(),this.isSms||this.isWhatsapp||this.isEmail||this.isGroup?this.form.valid&&this.createAlertSettingsEMS():this.notificationMessage("Please select Notification Type","red-snackbar")}createAlertSettingsEMS(){Object.assign(this.defaults,this.form.value),this.defaults.id=0;for(let e=0;e<this.selectedMeters.length;e++)0!=this.selectedMeters[e]&&this.selectedUserMeter.push({alarmId:this.defaults.id,meterId:this.selectedMeters[e]});this.defaults.weekDayId=""==this.form.controls.weekDayId.value||null==this.form.controls.weekDayId.value?0:this.defaults.weekDayId,this.defaults.dateId=""==this.form.controls.dateId.value||null==this.form.controls.dateId.value?0:this.defaults.dateId,this.defaults.hourId=""==this.form.controls.hourId.value||null==this.form.controls.hourId.value?0:this.defaults.hourId,this.defaults.minuteId=""==this.form.controls.minuteId.value||null==this.form.controls.minuteId.value?0:this.defaults.minuteId,this.defaults.parameterId=""==this.form.controls.parameterId.value||null==this.form.controls.parameterId.value?0:this.defaults.parameterId,this.defaults.conditionId=""==this.form.controls.conditionId.value||null==this.form.controls.conditionId.value?0:this.defaults.conditionId,this.defaults.conditionValue=""==this.form.controls.conditionValue.value||null==this.form.controls.conditionValue.value?0:this.defaults.conditionValue,this.defaults.alarmMeters=this.selectedUserMeter,this.defaults.isSms=""!=this.form.controls.isSms.value&&null!=this.form.controls.isSms.value&&this.form.controls.isSms.value,this.defaults.isWhatsapp=""!=this.form.controls.isWhatsapp.value&&null!=this.form.controls.isWhatsapp.value&&this.form.controls.isWhatsapp.value,this.defaults.isWhatsAppGroup=""!=this.form.controls.isWhatsAppGroup.value&&null!=this.form.controls.isWhatsAppGroup.value&&this.form.controls.isWhatsAppGroup.value,this.defaults.isEmail=""!=this.form.controls.isEmail.value&&null!=this.form.controls.isEmail.value&&this.form.controls.isEmail.value,this.defaults.clientId=this.client,this.alarmType&&"hourly"==this.alarmType.toLowerCase()?(this.defaults.weekDayId=0,this.defaults.dateId=0,this.defaults.hourId=0,this.defaults.conditionId=0):this.alarmType&&"daily"==this.alarmType.toLowerCase()?(this.defaults.weekDayId=0,this.defaults.dateId=0,this.defaults.conditionId=0):this.alarmType&&"weekly"==this.alarmType.toLowerCase()?(this.defaults.dateId=0,this.defaults.conditionId=0):this.alarmType&&"monthly"==this.alarmType.toLowerCase()?(this.defaults.weekDayId=0,this.defaults.conditionId=0):this.alarmType&&"offline"==this.alarmType.toLowerCase()?(this.defaults.hourId=0,this.defaults.minuteId=0,this.defaults.weekDayId=0,this.defaults.dateId=0,this.defaults.conditionId=0):this.alarmType&&"realtime"==this.alarmType.toLowerCase()?(this.defaults.hourId=0,this.defaults.minuteId=0,this.defaults.weekDayId=0,this.defaults.dateId=0):!this.alarmType||"meter reading report"!=this.alarmType.toLowerCase()&&"mismatch reading"!=this.alarmType.toLowerCase()&&"meter health report"!=this.alarmType.toLowerCase()||(this.defaults.hourId=0,this.defaults.minuteId=0,this.defaults.weekDayId=0,this.defaults.dateId=0,this.defaults.weekDayId=0,this.defaults.conditionId=0,this.defaults.conditionValue=0),!this.alarmType||"meter reading report"!=this.alarmType.toLowerCase()&&"meter health report"!=this.alarmType.toLowerCase()||(this.defaults.feederId=0,this.defaults.parameterId=0),this.alertSettingsEmsService.createAlertSettingsEMS(this.defaults).subscribe(e=>{this.notificationMessage("Alert Settings Created Successfully","green-snackbar"),this.resetControls(),this.getAlertSettingsEMS()})}notificationMessage(e,t){this.snackbar.open(e,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[t]})}resetControls(){this.selectedMeters=[],this.selectedUserMeter=[],this.alarmType="",this.client=0,this.isSms=!1,this.isWhatsapp=!1,this.isGroup=!1,this.isEmail=!1,setTimeout(()=>this.formGroupDirective.resetForm(),0),this.getMeterTypes(),this.getClients()}onChangeAlarmType(e){this.alarmTypes.filter(t=>{t.id===e.value&&(this.alarmType=t.description,this.alarmTypeId=t.id)}),this.form.controls.weekDayId.clearValidators(),this.form.controls.weekDayId.markAsUntouched(),this.form.controls.dateId.clearValidators(),this.form.controls.dateId.markAsUntouched(),this.form.controls.hourId.clearValidators(),this.form.controls.hourId.markAsUntouched(),this.form.controls.minuteId.clearValidators(),this.form.controls.minuteId.markAsUntouched(),this.form.controls.feederId.clearValidators(),this.form.controls.feederId.markAsUntouched(),this.form.controls.parameterId.clearValidators(),this.form.controls.parameterId.markAsUntouched(),this.form.controls.conditionId.clearValidators(),this.form.controls.conditionId.markAsUntouched(),this.form.controls.conditionValue.clearValidators(),this.form.controls.conditionValue.markAsUntouched(),this.form.controls.whatsAppGroupName.clearValidators(),this.form.controls.whatsAppGroupName.markAsUntouched(),this.form.controls.whatsAppGroupAdminNumber.clearValidators(),this.form.controls.whatsAppGroupAdminNumber.markAsUntouched(),this.form.controls.emailId.clearValidators(),this.form.controls.emailId.markAsUntouched(),this.form.controls.sMSMobileNumber.clearValidators(),this.form.controls.sMSMobileNumber.markAsUntouched(),!this.alarmType||"meter reading report"!=this.alarmType.toLowerCase()&&"meter health report"!=this.alarmType.toLowerCase()||(this.form.controls.sMSMobileNumber.setValue(""),this.form.controls.whatsAppGroupName.setValue(""),this.form.controls.whatsAppGroupAdminNumber.setValue(""),this.form.controls.isSms.setValue(!1),this.form.controls.isWhatsapp.setValue(!1),this.form.controls.isWhatsAppGroup.setValue(!1))}onChangeDay(e){this.days.filter(t=>{t.id==e.value&&(this.weekDayId=t.id)})}onChangeDate(e){this.dates.filter(t=>{t.id==e.value&&(this.dateId=t.id)})}onChangeHour(e){this.hours.filter(t=>{t.id==e.value&&(this.hourId=t.id)})}onChangeMinutes(e){this.minutes.filter(t=>{t.id==e.value&&(this.minuteId=t.id)})}onChangeFeeder(e){this.feeders.filter(t=>{t.id==e.value&&(this.feederId=t.id)})}onChangeParameter(e){this.parameters.filter(t=>{t.id==e.value&&(this.parameterId=t.id)})}onChangeCondition(e){this.conditions.filter(t=>{t.id==e.value&&(this.conditionId=t.id)})}selectDays(e){this.days.filter(t=>{e.value==t.id&&(this.weekDayId=t.id)})}toggleSMS(e){this.isSms=!e,!this.isSms||""!=this.form.controls.sMSMobileNumber.value&&null!=this.form.controls.sMSMobileNumber.value?this.isWhatsapp||(this.form.controls.sMSMobileNumber.clearValidators(),this.form.controls.sMSMobileNumber.markAsUntouched()):this.form.controls.sMSMobileNumber.setErrors({required:!0})}toggleWhatsapp(e){this.isWhatsapp=!e,!this.isWhatsapp||""!=this.form.controls.sMSMobileNumber.value&&null!=this.form.controls.sMSMobileNumber.value?this.isSms||(this.form.controls.sMSMobileNumber.clearValidators(),this.form.controls.sMSMobileNumber.markAsUntouched()):this.form.controls.sMSMobileNumber.setErrors({required:!0})}toggleWhatsappGroup(e){this.isGroup=!e,this.isGroup?(""!=this.form.controls.whatsAppGroupName.value&&null!=this.form.controls.whatsAppGroupName.value||this.form.controls.whatsAppGroupName.setErrors({required:!0}),""!=this.form.controls.whatsAppGroupAdminNumber.value&&null!=this.form.controls.whatsAppGroupAdminNumber.value||this.form.controls.whatsAppGroupAdminNumber.setErrors({required:!0})):(this.form.controls.whatsAppGroupName.clearValidators(),this.form.controls.whatsAppGroupName.markAsUntouched(),this.form.controls.whatsAppGroupAdminNumber.clearValidators(),this.form.controls.whatsAppGroupAdminNumber.markAsUntouched())}toggleEmail(e){this.isEmail=!e,!this.isEmail||""!=this.form.controls.emailId.value&&null!=this.form.controls.emailId.value?(this.form.controls.emailId.clearValidators(),this.form.controls.emailId.markAsUntouched()):this.form.controls.emailId.setErrors({required:!0})}deleteAlertSetting(e){this.dialog.open(C.a).afterClosed().subscribe(t=>{t&&e&&this.alertSettingsEmsService.deleteAlertSettings(e.id).subscribe(e=>{this.notificationMessage("Alert Settings deleted successfully.","green-snackbar"),this.getAlertSettingsEMS()})})}toggleMeterTypesAllSelection(){this.form.controls.feederId.patchValue(this.allMeterTypesSelected.selected?[...this.feeders.map(e=>e.id),0]:[])}toggleMeterTypesPerOne(e){if(this.allMeterTypesSelected.selected)return this.allMeterTypesSelected.deselect(),!1;this.form.controls.feederId.value.length==this.feeders.length&&this.allMeterTypesSelected.select()}searchMeterType(e){let t=this.selectMeterType(e);this.feeders=t}selectMeterType(e){let t=[];for(let r of this.filterMeterType)r.deviceName&&r.deviceName.toLowerCase().indexOf(e)>-1&&t.push(r);return t}onFilterChange(e){this.dataSource&&(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}}return e.id=1e3,e.\u0275fac=function(t){return new(t||e)(M.Nb(i.f),M.Nb(w.b),M.Nb(f.a),M.Nb(A.b),M.Nb(T.a),M.Nb(S.a),M.Nb(v.a),M.Nb(u.a),M.Nb(x.a))},e.\u0275cmp=M.Hb({type:e,selectors:[["fury-create-alert-settings-ems"]],viewQuery:function(e,t){var r;1&e&&(M.Jc(b.a,!0),M.Vc(g.a,!0),M.Vc(i.k,!0),M.Vc(j,!0)),2&e&&(M.zc(r=M.cc())&&(t.paginator=r.first),M.zc(r=M.cc())&&(t.content=r.first),M.zc(r=M.cc())&&(t.formGroupDirective=r.first),M.zc(r=M.cc())&&(t.allMeterTypesSelected=r.first))},inputs:{displayedColumns:"displayedColumns"},decls:71,vars:26,consts:[["mode","card",1,"padding-top"],["fxLayout","column"],["color","primary",1,"position-fixed"],["src","assets/img/fav-icon.png",1,"img-style"],[1,"toolbar-spacer"],[3,"saveClicked"],["fxFlex","grow",1,"basic-forms","route-animations-elements",3,"fxFlex.gt-sm"],["fxLayout","column",1,"padding-top"],[3,"formGroup"],["fxLayout","column",1,"result"],[1,"person"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","48px"],["fxFlex",""],["name","clientId","id","clientId","placeholder","Client","formControlName","clientId",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["id","alarmType","name","alarmType","formControlName","alarmTypeId",3,"selectionChange"],[3,"ctrl"],["type","text","formControlName","alarmName","matInput",""],["fxFlex","",4,"ngIf"],[1,"person","top-padding"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","25px"],[4,"ngIf"],["class","result","fxLayout","column",4,"ngIf"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign","end center","fxLayoutGap.gt-sm","20px"],["formControlName","isEmail","fxFlexLayoutAlign","end center",3,"change"],["fxFlex","80%"],["type","text","formControlName","emailId","maxlength","100","matInput",""],["fxLayout","column",1,"card-width",2,"margin-top","20px"],["name","View Alarm Settings",3,"filterChange"],["mat-table","","matSort","","align","center",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"value"],["formControlName","weekDayId",3,"selectionChange"],["formControlName","dateId",3,"selectionChange"],["formControlName","hourId",3,"selectionChange"],["formControlName","minuteId",3,"selectionChange"],["name","meterType","id","meterTypeId","placeholder","Select a Meter Type","formControlName","meterTypeId",3,"ngModel","ngModelChange","selectionChange"],["formControlName","feederId","multiple","",1,"multiSelectCustom",3,"ngModel","ngModelChange","selectionChange"],["matInput","","focused","'true'","type","text","autocomplete","off","placeholder","search",1,"myInput",3,"keyup"],["myInput",""],[3,"value","click"],["allMeterTypesSelected",""],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","parameterId",3,"selectionChange"],["formControlName","conditionId",3,"selectionChange"],["type","Number","formControlName","conditionValue","matInput",""],["fxLayout","row","fxLayoutGap.gt-sm","20px"],["formControlName","isSms","fxFlexLayoutAlign","end center",3,"change"],["formControlName","isWhatsapp","fxFlexLayoutAlign","end center",3,"change"],["type","text","formControlName","sMSMobileNumber","maxlength","100","matInput",""],["formControlName","isWhatsAppGroup","fxFlexLayoutAlign","end center",3,"change"],["fxFlex","39.25%"],["type","text","formControlName","whatsAppGroupName","maxlength","200","matInput",""],["fxFlex","39%"],["type","text","formControlName","whatsAppGroupAdminNumber","maxlength","200","matInput",""],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(e,t){1&e&&(M.Tb(0,"fury-page-layout",0),M.Tb(1,"fury-page-layout-content",1),M.Tb(2,"mat-toolbar",2),M.Ob(3,"img",3),M.Tb(4,"span"),M.Rc(5,"Alarm Settings - EMS"),M.Sb(),M.Ob(6,"span",4),M.Tb(7,"app-create-alert-settings-ems-footer-toolbar",5),M.bc("saveClicked",(function(){return t.onSave()})),M.Sb(),M.Sb(),M.Tb(8,"fury-card",6),M.Tb(9,"fury-card-content",7),M.Tb(10,"div",8),M.Tb(11,"div",9),M.Tb(12,"div",10),M.Tb(13,"div",11),M.Tb(14,"mat-form-field",12),M.Tb(15,"mat-label"),M.Rc(16,"Client"),M.Sb(),M.Tb(17,"mat-select",13),M.bc("ngModelChange",(function(e){return t.client=e}))("selectionChange",(function(e){return t.onChangeClient(e)})),M.Pc(18,X,2,2,"mat-option",14),M.Sb(),M.Tb(19,"mat-hint"),M.Rc(20,"Please select Client."),M.Sb(),M.Sb(),M.Tb(21,"mat-form-field",12),M.Tb(22,"mat-label"),M.Rc(23,"Alarm Type"),M.Sb(),M.Tb(24,"mat-select",15),M.bc("selectionChange",(function(e){return t.onChangeAlarmType(e)})),M.Pc(25,Q,2,2,"mat-option",14),M.Sb(),M.Ob(26,"app-show-errors",16),M.Tb(27,"mat-hint"),M.Rc(28,"Please select Alarm Type."),M.Sb(),M.Sb(),M.Tb(29,"mat-form-field",12),M.Tb(30,"mat-label"),M.Rc(31,"Alarm Name"),M.Sb(),M.Ob(32,"input",17),M.Ob(33,"app-show-errors",16),M.Tb(34,"mat-hint"),M.Rc(35,"Please enter Alarm Name."),M.Sb(),M.Sb(),M.Pc(36,Y,8,2,"mat-form-field",18),M.Pc(37,B,8,2,"mat-form-field",18),M.Sb(),M.Sb(),M.Tb(38,"div",19),M.Tb(39,"div",20),M.Pc(40,ee,7,1,"mat-form-field",18),M.Pc(41,re,7,1,"mat-form-field",18),M.Pc(42,ie,5,2,"mat-form-field",21),M.Pc(43,ae,14,4,"mat-form-field",18),M.Pc(44,ne,8,2,"mat-form-field",18),M.Pc(45,me,7,1,"mat-form-field",18),M.Pc(46,de,6,0,"mat-form-field",18),M.Sb(),M.Sb(),M.Pc(47,ue,16,2,"div",22),M.Pc(48,be,18,4,"div",22),M.Tb(49,"div",9),M.Tb(50,"div",19),M.Tb(51,"div",23),M.Tb(52,"mat-label"),M.Rc(53,"Email"),M.Sb(),M.Tb(54,"mat-checkbox",24),M.bc("change",(function(){return t.toggleEmail(t.isEmail)})),M.Sb(),M.Tb(55,"mat-form-field",25),M.Tb(56,"mat-label"),M.Rc(57,"Email"),M.Sb(),M.Ob(58,"input",26),M.Pc(59,ge,2,0,"mat-hint",21),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(60,"fury-page-layout-content",27),M.Tb(61,"fury-card-content"),M.Tb(62,"fury-list",28),M.bc("filterChange",(function(e){return t.onFilterChange(e)})),M.Tb(63,"table",29),M.Pc(64,Se,2,1,"ng-container",30),M.Rb(65,31),M.Pc(66,ve,1,0,"th",32),M.Pc(67,Ce,9,1,"td",33),M.Qb(),M.Pc(68,Me,1,0,"tr",34),M.Pc(69,we,1,0,"tr",35),M.Sb(),M.Ob(70,"mat-paginator",36),M.Sb(),M.Sb(),M.Sb(),M.Sb()),2&e&&(M.Cb(8),M.mc("fxFlex.gt-sm",t.col2)("@fadeInUp",void 0),M.Cb(2),M.mc("formGroup",t.form),M.Cb(7),M.mc("ngModel",t.client),M.Cb(1),M.mc("ngForOf",t.clients),M.Cb(7),M.mc("ngForOf",t.alarmTypes),M.Cb(1),M.mc("ctrl",null==t.form?null:t.form.get("alarmTypeId")),M.Cb(7),M.mc("ctrl",t.form.get("alarmName")),M.Cb(3),M.mc("ngIf","Weekly"==t.alarmType),M.Cb(1),M.mc("ngIf","Monthly"==t.alarmType),M.Cb(3),M.mc("ngIf","Hourly"!=t.alarmType&&"RealTime"!=t.alarmType&&"Offline"!=t.alarmType&&"Mismatch Reading"!=t.alarmType&&"Meter Reading Report"!=t.alarmType&&"Meter Health Report"!=t.alarmType),M.Cb(1),M.mc("ngIf","RealTime"!=t.alarmType&&"Offline"!=t.alarmType&&"Mismatch Reading"!=t.alarmType&&"Meter Reading Report"!=t.alarmType&&"Meter Health Report"!=t.alarmType),M.Cb(1),M.mc("ngIf","Meter Health Report"!=t.alarmType&&"Meter Reading Report"!=t.alarmType),M.Cb(1),M.mc("ngIf","Meter Health Report"!=t.alarmType&&"Meter Reading Report"!=t.alarmType),M.Cb(1),M.mc("ngIf","Offline"!=t.alarmType&&"Meter Health Report"!=t.alarmType&&"Meter Reading Report"!=t.alarmType&&"Mismatch Reading"!=t.alarmType),M.Cb(1),M.mc("ngIf","RealTime"==t.alarmType),M.Cb(1),M.mc("ngIf","RealTime"==t.alarmType),M.Cb(1),M.mc("ngIf","Meter Reading Report"!=t.alarmType&&"Meter Health Report"!=t.alarmType),M.Cb(1),M.mc("ngIf","Meter Reading Report"!=t.alarmType&&"Meter Health Report"!=t.alarmType),M.Cb(11),M.mc("ngIf",t.isEmail),M.Cb(2),M.mc("@fadeInUp",void 0),M.Cb(2),M.mc("dataSource",t.dataSource),M.Cb(1),M.mc("ngForOf",t.displayedColumns),M.Cb(4),M.mc("matHeaderRowDef",t.visibleColumns),M.Cb(1),M.mc("matRowDefColumns",t.visibleColumns),M.Cb(1),M.mc("pageSize",t.pageSize))},directives:[k.a,N.a,E.d,R.a,O,L.a,E.b,L.c,i.r,i.k,E.e,D.d,D.h,F.a,i.q,i.i,s.n,D.g,U.a,i.c,q.b,s.o,E.c,W.a,i.m,$.a,p.j,g.a,p.c,p.e,p.b,p.g,p.i,b.a,z.n,_.a,i.u,p.d,g.b,p.a,V.a,H.d,G.a,H.e,H.b,p.f,p.h],styles:[".padding[_ngcontent-%COMP%]{padding:10px 0 35px}.mat-checkbox[_ngcontent-%COMP%]{padding-left:5px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.img-style[_ngcontent-%COMP%]{width:32px}.myInput[_ngcontent-%COMP%]{height:50px!important;padding:10px!important}.card-width[_ngcontent-%COMP%]{width:100%;padding:0}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}.top-padding[_ngcontent-%COMP%]{padding-top:.75%}"],data:{animation:[c.a,m.a]}}),e})()}];let xe=(()=>{class e{}return e.\u0275mod=M.Lb({type:e}),e.\u0275inj=M.Kb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(Ae)],n.j]}),e})();var ke=r("WCGO"),Ne=r("YUcS"),Ee=r("VE2z"),Re=r("QibW"),Ve=r("wZkO"),Pe=r("GiUZ");let Ge=(()=>{class e{}return e.\u0275mod=M.Lb({type:e}),e.\u0275inj=M.Kb({factory:function(t){return new(t||e)},imports:[[s.c,xe,i.l,i.w,l.a,ke.a,Ne.a,Ee.a,a.a,V.b,G.b,q.c,Re.c,F.b,Ve.c,o.a,Pe.a]]}),e})()},WFQN:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var s=r("tk/3"),i=r("sXtk"),o=r("fXoL");let a=(()=>{class e{constructor(e,t){this.http=e,this.envService=t,this.baseUrl="",this.baseUrl=t.backend}getReplacedMeters(e){return this.http.get(this.baseUrl+"/devicelistreplacements/clientId/"+e)}createMeterReplacement(e){return this.http.post(this.baseUrl+"/devicelistreplacements/",e)}GetUtilityTypes(e){let t=new s.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/UtilityTypes",{params:t})}getAllUnits(e,t){let r=new s.f;return r=r.append("clientId",""+e),r=r.append("utilityTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/Units",{params:r})}GetActiveDevices(e,t){let r=new s.f;return r=r.append("clientId",""+e),r=r.append("utilityTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/ActiveDevices",{params:r})}getMeterErrorDetails(e){return this.http.post(this.baseUrl+"/devicelistreplacements/MeterError",e)}GetParametersList(){return this.http.get(this.baseUrl+"/devicelistreplacements/Parameters")}getDeviceDataDetails(e){return this.http.post(this.baseUrl+"/devicelistreplacements/DeviceData",e)}GetMeterList(e){let t=new s.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/MeterList",{params:t})}getDeviceGroupMeterList(e,t,r="0"){let i=new s.f;return i=i.append("meterTypeId",""+e),i=i.append("groupId",""+t),i=i.append("clientId",""+r),this.http.get(this.baseUrl+"/devicelistreplacements/type/group/meterList",{params:i})}getV1DeviceGroupMeterList(e,t,r="0"){let i=new s.f;return i=i.append("meterTypeId",""+e),i=i.append("groupId",""+t),i=i.append("clientId",""+r),this.http.get(this.baseUrl+"/devicelistreplacements/v1/type/group/meterListFilterByClient",{params:i})}getV1DeviceGroupMeterListWithoutFlowTypeFilter(e,t,r="0"){let i=new s.f;return i=i.append("meterTypeId",""+e),i=i.append("groupId",""+t),i=i.append("clientId",""+r),this.http.get(this.baseUrl+"/devicelistreplacements/V1/type/group/meterListFilterByClientWithoutFlowTypeFilter",{params:i})}getV1MeterList(e=0){let t=new s.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterListFilterByClient",{params:t})}getClients(){return this.http.get(this.baseUrl+"/devicelistreplacements/v1/clients")}getV1MeterGroupList(e=0){let t=new s.f;return t=t.append("meterTypeId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterGroups",{params:t})}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(s.c),o.Xb(i.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},YaQ2:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var s=r("fXoL"),i=r("ofXK");function o(e,t){if(1&e&&(s.Tb(0,"small"),s.Rc(1),s.Ob(2,"br"),s.Sb()),2&e){const e=t.$implicit;s.Cb(1),s.Tc(" ",e," ")}}function a(e,t){if(1&e&&(s.Tb(0,"div"),s.Pc(1,o,3,1,"small",1),s.Sb()),2&e){const e=s.fc();s.Cb(1),s.mc("ngForOf",e.listOfErrors())}}let l=(()=>{class e{constructor(){this.PATTERN_ERROR_MESSAGE={"/^[a-zA-Z ]*$/":"Accepts only alphabets with spaces","/^[a-zA-Z0-9]*$/":"Accepts only alphanumeric values with no spaces","/^[a-zA-Z0-9 ]*$/":"Accepts only alphanumeric values with spaces","/^[0-9]*$/":"Accepts only numbers","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{3,4}$":"Enter valid email address of format test@mail.com"},this.ERROR_MESSAGE={required:()=>"This field is required",minlength:e=>`Min ${e.requiredLength} chars is required but got only ${e.actualLength}`,maxlength:e=>`Max chars allowed is ${e.requiredLength} but got ${e.actualLength}`,pattern:e=>""+this.PATTERN_ERROR_MESSAGE[e.requiredPattern],email:()=>"Enter valid email address of format test@mail.com"}}ngOnInit(){}shouldShowErrors(){return this.ctrl&&this.ctrl.errors&&this.ctrl.touched}listOfErrors(){return Object.keys(this.ctrl.errors).map(e=>this.ERROR_MESSAGE[e](this.ctrl.getError(e)))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Hb({type:e,selectors:[["app-show-errors"]],inputs:{ctrl:"ctrl"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&s.Pc(0,a,2,1,"div",0),2&e&&s.mc("ngIf",t.shouldShowErrors())},directives:[i.o,i.n],styles:["small[_ngcontent-%COMP%]{color:red}"]}),e})()},"a+RD":function(e,t,r){"use strict";r.d(t,"a",(function(){return T}));var s=r("fXoL"),i=r("xgIS"),o=r("/uUt"),a=r("Kj3r"),l=r("ofXK"),n=r("STbY"),c=r("XiUz"),m=r("NFeN"),d=r("bTqV"),h=r("bSwM"),u=r("3Pt+");const f=["filter"];function p(e,t){if(1&e&&(s.Tb(0,"button",12),s.Tb(1,"mat-icon"),s.Rc(2,"filter_list"),s.Sb(),s.Sb()),2&e){s.fc(2);const e=s.Ac(3);s.mc("matMenuTriggerFor",e)}}function b(e,t){if(1&e&&(s.Tb(0,"div",5),s.Tb(1,"div",6),s.Rc(2),s.Sb(),s.Tb(3,"div",7),s.Tb(4,"mat-icon",8),s.Rc(5,"search"),s.Sb(),s.Ob(6,"input",9,10),s.Sb(),s.Pc(8,p,3,1,"button",11),s.kc(9,1),s.Sb()),2&e){const e=s.fc();s.Cb(2),s.Sc(e.name),s.Cb(6),s.mc("ngIf",!e.hideFilter)}}function g(e,t){if(1&e){const e=s.Ub();s.Tb(0,"button",13),s.bc("click",(function(r){s.Ec(e);const i=t.$implicit;return s.fc().toggleColumnVisibility(i,r)})),s.Tb(1,"mat-checkbox",14,15),s.bc("ngModelChange",(function(r){return s.Ec(e),t.$implicit.visible=r}))("click",(function(t){return s.Ec(e),t.stopPropagation()})),s.Rc(3),s.Sb(),s.Sb()}if(2&e){const e=t.$implicit;s.Cb(1),s.mc("ngModel",e.visible),s.Cb(2),s.Tc(" ",e.name," ")}}const y=["*",[["",8,"actions"]]],I=["*",".actions"];let T=(()=>{class e{constructor(){this.filterChange=new s.o}ngAfterViewInit(){this.hideHeader||Object(i.a)(this.filter.nativeElement,"keyup").pipe(Object(o.a)(),Object(a.a)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(e,t){t.stopPropagation(),t.stopImmediatePropagation(),e.visible=!e.visible}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Hb({type:e,selectors:[["fury-list"]],viewQuery:function(e,t){var r;1&e&&s.Vc(f,!0),2&e&&s.zc(r=s.cc())&&(t.filter=r.first)},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader",hideFilter:"hideFilter"},outputs:{filterChange:"filterChange"},ngContentSelectors:I,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["class","fury-column-filter","type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(e,t){1&e&&(s.lc(y),s.Tb(0,"div",0),s.Pc(1,b,10,2,"div",1),s.Tb(2,"mat-menu",2,3),s.Pc(4,g,4,2,"button",4),s.Sb(),s.kc(5),s.Sb()),2&e&&(s.Cb(1),s.mc("ngIf",!t.hideHeader),s.Cb(3),s.mc("ngForOf",t.columns))},directives:[l.o,n.e,l.n,c.d,c.c,c.e,c.b,m.a,d.a,n.d,h.a,u.q,u.t],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width:599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width:599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}"],encapsulation:2}),e})()},tB66:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var s=r("fXoL"),i=r("0IaG"),o=r("XiUz"),a=r("bTqV");let l=(()=>{class e{constructor(e){this.dialogRef=e,this.confirmMessage="Are you sure you want to Delete?",e.disableClose=!0}getConfirmation(e){this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(i.h))},e.\u0275cmp=s.Hb({type:e,selectors:[["fury-user-confirmation-popup"]],decls:9,vars:1,consts:[[1,"heading"],[1,"mat-dlg-content","contentStyle"],["fxLayout","row","fxLayoutAlign","end center",1,"bottomPadding"],["mat-button","",3,"click"],["mat-button","",1,"buttonStyle",3,"click"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Rc(1," Confirm Action "),s.Sb(),s.Tb(2,"div",1),s.Rc(3),s.Sb(),s.Tb(4,"mat-dialog-actions",2),s.Tb(5,"button",3),s.bc("click",(function(){return t.getConfirmation(!1)})),s.Rc(6,"NO"),s.Sb(),s.Tb(7,"button",4),s.bc("click",(function(){return t.getConfirmation(!0)})),s.Rc(8,"YES"),s.Sb(),s.Sb()),2&e&&(s.Cb(3),s.Sc(t.confirmMessage))},directives:[i.c,o.d,o.c,a.a],styles:[".buttonStyle[_ngcontent-%COMP%]{background:#1976d2;color:#fff;padding-right:10px}.headingStyle[_ngcontent-%COMP%]{text-align:center;color:red;background-color:silver;border-radius:50%;width:100px;height:100px}.heading[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-top:10px}mat-icon[_ngcontent-%COMP%]{font-size:56px;height:56px;width:56px;line-height:56px;justify-content:center}.contentStyle[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:30px;padding-right:30px}.rightAlign[_ngcontent-%COMP%]{text-align:right}.bottomPadding[_ngcontent-%COMP%]{padding-bottom:20px}"]}),e})()}}]);