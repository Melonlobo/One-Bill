(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{YaQ2:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL"),a=i("ofXK");function l(t,e){if(1&t&&(n.Tb(0,"small"),n.Rc(1),n.Ob(2,"br"),n.Sb()),2&t){const t=e.$implicit;n.Cb(1),n.Tc(" ",t," ")}}function c(t,e){if(1&t&&(n.Tb(0,"div"),n.Pc(1,l,3,1,"small",1),n.Sb()),2&t){const t=n.fc();n.Cb(1),n.mc("ngForOf",t.listOfErrors())}}let s=(()=>{class t{constructor(){this.PATTERN_ERROR_MESSAGE={"/^[a-zA-Z ]*$/":"Accepts only alphabets with spaces","/^[a-zA-Z0-9]*$/":"Accepts only alphanumeric values with no spaces","/^[a-zA-Z0-9 ]*$/":"Accepts only alphanumeric values with spaces","/^[0-9]*$/":"Accepts only numbers","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{3,4}$":"Enter valid email address of format test@mail.com"},this.ERROR_MESSAGE={required:()=>"This field is required",minlength:t=>`Min ${t.requiredLength} chars is required but got only ${t.actualLength}`,maxlength:t=>`Max chars allowed is ${t.requiredLength} but got ${t.actualLength}`,pattern:t=>""+this.PATTERN_ERROR_MESSAGE[t.requiredPattern],email:()=>"Enter valid email address of format test@mail.com"}}ngOnInit(){}shouldShowErrors(){return this.ctrl&&this.ctrl.errors&&this.ctrl.touched}listOfErrors(){return Object.keys(this.ctrl.errors).map(t=>this.ERROR_MESSAGE[t](this.ctrl.getError(t)))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Hb({type:t,selectors:[["app-show-errors"]],inputs:{ctrl:"ctrl"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&n.Pc(0,c,2,1,"div",0),2&t&&n.mc("ngIf",e.shouldShowErrors())},directives:[a.o,a.n],styles:["small[_ngcontent-%COMP%]{color:red}"]}),t})()},"a+RD":function(t,e,i){"use strict";i.d(e,"a",(function(){return C}));var n=i("fXoL"),a=i("xgIS"),l=i("/uUt"),c=i("Kj3r"),s=i("ofXK"),o=i("STbY"),r=i("XiUz"),u=i("NFeN"),d=i("bTqV"),b=i("bSwM"),m=i("3Pt+");const f=["filter"];function h(t,e){if(1&t&&(n.Tb(0,"button",12),n.Tb(1,"mat-icon"),n.Rc(2,"filter_list"),n.Sb(),n.Sb()),2&t){n.fc(2);const t=n.Ac(3);n.mc("matMenuTriggerFor",t)}}function p(t,e){if(1&t&&(n.Tb(0,"div",5),n.Tb(1,"div",6),n.Rc(2),n.Sb(),n.Tb(3,"div",7),n.Tb(4,"mat-icon",8),n.Rc(5,"search"),n.Sb(),n.Ob(6,"input",9,10),n.Sb(),n.Pc(8,h,3,1,"button",11),n.kc(9,1),n.Sb()),2&t){const t=n.fc();n.Cb(2),n.Sc(t.name),n.Cb(6),n.mc("ngIf",!t.hideFilter)}}function g(t,e){if(1&t){const t=n.Ub();n.Tb(0,"button",13),n.bc("click",(function(i){n.Ec(t);const a=e.$implicit;return n.fc().toggleColumnVisibility(a,i)})),n.Tb(1,"mat-checkbox",14,15),n.bc("ngModelChange",(function(i){return n.Ec(t),e.$implicit.visible=i}))("click",(function(e){return n.Ec(t),e.stopPropagation()})),n.Rc(3),n.Sb(),n.Sb()}if(2&t){const t=e.$implicit;n.Cb(1),n.mc("ngModel",t.visible),n.Cb(2),n.Tc(" ",t.name," ")}}const y=["*",[["",8,"actions"]]],S=["*",".actions"];let C=(()=>{class t{constructor(){this.filterChange=new n.o}ngAfterViewInit(){this.hideHeader||Object(a.a)(this.filter.nativeElement,"keyup").pipe(Object(l.a)(),Object(c.a)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(t,e){e.stopPropagation(),e.stopImmediatePropagation(),t.visible=!t.visible}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Hb({type:t,selectors:[["fury-list"]],viewQuery:function(t,e){var i;1&t&&n.Vc(f,!0),2&t&&n.zc(i=n.cc())&&(e.filter=i.first)},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader",hideFilter:"hideFilter"},outputs:{filterChange:"filterChange"},ngContentSelectors:S,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["class","fury-column-filter","type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,e){1&t&&(n.lc(y),n.Tb(0,"div",0),n.Pc(1,p,10,2,"div",1),n.Tb(2,"mat-menu",2,3),n.Pc(4,g,4,2,"button",4),n.Sb(),n.kc(5),n.Sb()),2&t&&(n.Cb(1),n.mc("ngIf",!e.hideHeader),n.Cb(3),n.mc("ngForOf",e.columns))},directives:[s.o,o.e,s.n,r.d,r.c,r.e,r.b,u.a,d.a,o.d,b.a,m.q,m.t],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width:599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width:599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}"],encapsulation:2}),t})()},nST0:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("tk/3"),a=i("sXtk"),l=i("fXoL");let c=(()=>{class t{constructor(t,e){this.http=t,this.envService=e,this.baseUrl="",this.baseUrl=e.backend}getClients(){return this.http.get(this.baseUrl+"/clients")}getRoles(){return this.http.get(this.baseUrl+"/clients/roles")}saveUserClients(t){return this.http.post(this.baseUrl+"/clients/userclients",t)}getClientImageProperties(t){let e=new n.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/clients/image/properties",{params:e})}getUtilityTypes(t){let e=new n.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/clients/utilityType",{params:e})}}return t.\u0275fac=function(e){return new(e||t)(l.Xb(n.c),l.Xb(a.a))},t.\u0275prov=l.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},tB66:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL"),a=i("0IaG"),l=i("XiUz"),c=i("bTqV");let s=(()=>{class t{constructor(t){this.dialogRef=t,this.confirmMessage="Are you sure you want to Delete?",t.disableClose=!0}getConfirmation(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(a.h))},t.\u0275cmp=n.Hb({type:t,selectors:[["fury-user-confirmation-popup"]],decls:9,vars:1,consts:[[1,"heading"],[1,"mat-dlg-content","contentStyle"],["fxLayout","row","fxLayoutAlign","end center",1,"bottomPadding"],["mat-button","",3,"click"],["mat-button","",1,"buttonStyle",3,"click"]],template:function(t,e){1&t&&(n.Tb(0,"div",0),n.Rc(1," Confirm Action "),n.Sb(),n.Tb(2,"div",1),n.Rc(3),n.Sb(),n.Tb(4,"mat-dialog-actions",2),n.Tb(5,"button",3),n.bc("click",(function(){return e.getConfirmation(!1)})),n.Rc(6,"NO"),n.Sb(),n.Tb(7,"button",4),n.bc("click",(function(){return e.getConfirmation(!0)})),n.Rc(8,"YES"),n.Sb(),n.Sb()),2&t&&(n.Cb(3),n.Sc(e.confirmMessage))},directives:[a.c,l.d,l.c,c.a],styles:[".buttonStyle[_ngcontent-%COMP%]{background:#1976d2;color:#fff;padding-right:10px}.headingStyle[_ngcontent-%COMP%]{text-align:center;color:red;background-color:silver;border-radius:50%;width:100px;height:100px}.heading[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-top:10px}mat-icon[_ngcontent-%COMP%]{font-size:56px;height:56px;width:56px;line-height:56px;justify-content:center}.contentStyle[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:30px;padding-right:30px}.rightAlign[_ngcontent-%COMP%]{text-align:right}.bottomPadding[_ngcontent-%COMP%]{padding-bottom:20px}"]}),t})()},v0aG:function(t,e,i){"use strict";i.r(e),i.d(e,"CreateAnnouncementModule",(function(){return yt}));var n=i("ofXK"),a=i("3Pt+"),l=i("q8Jb"),c=i("0jmt"),s=i("KthW"),o=i("tyNb"),r=i("M9IT"),u=i("Dh3D"),d=i("+0xr"),b=i("jtHE"),m=i("pLZG"),f=i("Ku73"),h=i("nStZ"),p=i("0IaG"),g=i("sOHO");class y{constructor(t){this.id=t.id||0,this.announcementId=t.announcementId||"",this.clientId=t.clientId||""}}class S{constructor(t){this.id=t.id||0,this.validTill=t.validTill||"",this.title=t.title||"",this.content=t.content||"",this.clients=(t.clients||[]).map(t=>new y(t))}}var C=i("5cYQ"),v=i("nST0"),T=i("xXXn"),x=i("fXoL"),w=i("/t3+"),A=i("bTqV"),k=i("NFeN"),R=i("MutI"),O=i("4FRi"),P=i("XiUz"),M=i("kmnG"),I=i("qFsG"),D=i("YaQ2"),E=i("iadO"),F=i("d3UM"),N=i("FKr1");const L=["allSelected"];function z(t,e){1&t&&(x.Tb(0,"small"),x.Rc(1,"Valid Till should not be a past date."),x.Sb())}function U(t,e){if(1&t){const t=x.Ub();x.Tb(0,"mat-option",26),x.bc("click",(function(){x.Ec(t);const e=x.fc(),i=x.Ac(37);return e.togglePerOne(i.viewValue)})),x.Rc(1),x.Sb()}if(2&t){const t=e.$implicit;x.mc("optionSelected",t.selected)("value",t.value),x.Cb(1),x.Tc(" ",t.label," ")}}function $(t,e){if(1&t&&(x.Tb(0,"button",27),x.Rc(1,"CREATE ANNOUNCEMENT"),x.Sb()),2&t){const t=x.fc();x.mc("disabled",!t.form.valid||!t.validateDates())}}function V(t,e){if(1&t&&(x.Tb(0,"button",27),x.Rc(1,"UPDATE ANNOUNCEMENT"),x.Sb()),2&t){const t=x.fc();x.mc("disabled",!t.form.valid||!t.validateDates())}}let j=(()=>{class t{constructor(t,e,i,n,a,l,c,s){this.defaults=t,this.fb=e,this.datePipe=i,this.dialog=n,this.metadataService=a,this.clientService=l,this.announcementService=c,this.dialogRef=s,this.mode="create",this.selectedClients=[],this.clients=[],this.selectedAnnouncementClients=[],this.isValidDate=!1,this.isCancel=!1,s.disableClose=!0}ngOnInit(){let e=new Date,i=("0"+e.getDate()).slice(-2),n=("0"+(e.getMonth()+1)).slice(-2),l=e.getFullYear();if(this.minDate=new Date(n+"/"+i+"/"+l),this.defaults){this.mode="update";for(let t=0;t<this.defaults.clients.length;t++)this.selectedClients[t]=this.defaults.clients[t].clientId}else this.defaults=new S({});this.getClients(),this.form=this.fb.group({id:[this.defaults.id||t.id++],title:[this.defaults.title||"",a.y.required],content:[this.defaults.content||"",a.y.required],validTill:[this.defaults.validTill||"",a.y.required],clientSelect:["",a.y.required],clients:[this.defaults.clients]})}save(){this.isCancel?(this.isCancel=!1,this.dialog.open(T.a,{data:{label:"Are you sure you want to Cancel?",selected:!1}}).afterClosed().subscribe(t=>{t&&this.dialogRef.close()})):this.validateDates()&&("create"===this.mode?this.createAnnouncement():"update"===this.mode&&this.updateAnnouncement())}isCreateMode(){return"create"===this.mode}isUpdateMode(){return"update"===this.mode}createAnnouncement(){Object.assign(this.defaults,this.form.value),this.defaults.validTill=this.datePipe.transform(this.defaults.validTill,"yyyy-MM-dd");for(let t=0;t<this.selectedClients.length;t++)0!=this.selectedClients[t]&&this.selectedAnnouncementClients.push({announcementId:this.defaults.id,clientId:this.selectedClients[t]});this.defaults.clients=this.selectedAnnouncementClients,this.dialogRef.close(new S(this.defaults))}updateAnnouncement(){Object.assign(this.defaults,this.form.value),this.defaults.validTill=this.datePipe.transform(this.defaults.validTill,"yyyy-MM-dd");for(let t=0;t<this.selectedClients.length;t++)0!=this.selectedClients[t]&&this.selectedAnnouncementClients.push({announcementId:this.defaults.id,clientId:this.selectedClients[t]});this.defaults.clients=this.selectedAnnouncementClients,this.dialogRef.close(new S(this.defaults))}getClients(){this.clients=[],this.announcementService.getClients().subscribe(t=>{t&&t.forEach(t=>{this.clients.push({label:t.clientName,value:t.id})})})}onChangeClients(t){this.selectedClients.indexOf(t[0])<0&&this.selectedClients.push(t[0])}toggleAllSelection(){this.form.controls.clientSelect.patchValue(this.allSelected.selected?[...this.clients.map(t=>t.value),0]:[])}togglePerOne(t){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.form.controls.clientSelect.value.length==this.clients.length&&this.allSelected.select()}validateDates(){this.validTill=this.datePipe.transform(this.form.get("validTill").value,"MM-dd-yyyy");let t=new Date,e=("0"+t.getDate()).slice(-2),i=("0"+(t.getMonth()+1)).slice(-2)+"-"+e+"-"+t.getFullYear();this.isValidDate=!0;let n=new Date(this.validTill).getFullYear();var a=new Date(i).getFullYear();return 1970==n||1970==a?this.isValidDate:n<a?this.isValidDate=!1:null!=this.validTill||""!=this.validTill?(this.validTill<i&&(this.isValidDate=!1),this.isValidDate):void 0}close(){this.dialogRef.close()}closeDialog(){this.isCancel=!0}}return t.id=100,t.\u0275fac=function(e){return new(e||t)(x.Nb(p.a),x.Nb(a.f),x.Nb(n.f),x.Nb(p.b),x.Nb(g.a),x.Nb(v.a),x.Nb(C.a),x.Nb(p.h))},t.\u0275cmp=x.Hb({type:t,selectors:[["fury-announcement-create-update"]],viewQuery:function(t,e){var i;1&t&&x.Vc(L,!0),2&t&&x.zc(i=x.cc())&&(e.allSelected=i.first)},decls:51,vars:13,consts:[["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"fx-spacer"],["mat-icon-button","",3,"click"],["title","Close","mat-list-icon",""],[3,"formGroup","ngSubmit"],[1,"padding-top"],[1,"person"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","48px"],["fxFlex",""],["type","text","formControlName","title","matInput","","required",""],[3,"ctrl"],["formControlName","validTill","matInput","","required","",3,"min","matDatepicker","click","focus"],["matSuffix","",3,"for"],["formDatepickerRef",""],[4,"ngIf"],["multiple","","formControlName","clientSelect",3,"ngModel","ngModelChange"],[3,"value","click"],["allSelected",""],[3,"optionSelected","value","click",4,"ngFor","ngForOf"],["fxLayout","row",1,"padding-top"],["maxlength","\u200b160","rows","10","cols","100","formControlName","content","placeholder","Enter text here....",1,"textId"],["textId",""],["fxLayout","row","fxLayoutAlign","end center"],["mat-button","",3,"click"],["mat-button","",3,"disabled",4,"ngIf"],[3,"optionSelected","value","click"],["mat-button","",3,"disabled"]],template:function(t,e){if(1&t){const t=x.Ub();x.Tb(0,"div",0),x.Tb(1,"mat-toolbar",1),x.Tb(2,"span"),x.Rc(3,"Announcement"),x.Sb(),x.Ob(4,"span",2),x.Tb(5,"button",3),x.bc("click",(function(){return e.close()})),x.Tb(6,"mat-icon",4),x.Rc(7,"close"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(8,"form",5),x.bc("ngSubmit",(function(){return e.save()})),x.Tb(9,"mat-dialog-content"),x.Tb(10,"fury-card"),x.Tb(11,"fury-card-content",6),x.Tb(12,"div",7),x.Tb(13,"div",8),x.Tb(14,"mat-form-field",9),x.Tb(15,"mat-label"),x.Rc(16,"Title"),x.Sb(),x.Ob(17,"input",10),x.Tb(18,"mat-hint"),x.Rc(19,"This will be Title."),x.Sb(),x.Ob(20,"app-show-errors",11),x.Sb(),x.Tb(21,"mat-form-field",9),x.Tb(22,"mat-label"),x.Rc(23,"Valid Till"),x.Sb(),x.Tb(24,"input",12),x.bc("click",(function(){return x.Ec(t),x.Ac(27).open()}))("focus",(function(){return x.Ec(t),x.Ac(27).open()})),x.Sb(),x.Ob(25,"mat-datepicker-toggle",13),x.Ob(26,"mat-datepicker",null,14),x.Tb(28,"mat-hint"),x.Rc(29,"Please enter valid till date."),x.Sb(),x.Ob(30,"app-show-errors",11),x.Pc(31,z,2,0,"small",15),x.Sb(),x.Tb(32,"mat-form-field",9),x.Tb(33,"mat-label"),x.Rc(34,"Clients"),x.Sb(),x.Tb(35,"mat-select",16),x.bc("ngModelChange",(function(t){return e.selectedClients=t})),x.Tb(36,"mat-option",17,18),x.bc("click",(function(){return e.toggleAllSelection()})),x.Rc(38,"Select All"),x.Sb(),x.Pc(39,U,2,3,"mat-option",19),x.Sb(),x.Tb(40,"mat-hint"),x.Rc(41,"Please select clients."),x.Sb(),x.Ob(42,"app-show-errors",11),x.Sb(),x.Sb(),x.Sb(),x.Tb(43,"div",20),x.Ob(44,"textarea",21,22),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(46,"mat-dialog-actions",23),x.Tb(47,"button",24),x.bc("click",(function(){return e.closeDialog()})),x.Rc(48,"CANCEL"),x.Sb(),x.Pc(49,$,2,1,"button",25),x.Pc(50,V,2,1,"button",25),x.Sb(),x.Sb()}if(2&t){const t=x.Ac(27);x.Cb(8),x.mc("formGroup",e.form),x.Cb(12),x.mc("ctrl",e.form.get("title")),x.Cb(4),x.mc("min",e.minDate)("matDatepicker",t),x.Cb(1),x.mc("for",t),x.Cb(5),x.mc("ctrl",e.form.get("validTill")),x.Cb(1),x.mc("ngIf",!e.validateDates()),x.Cb(4),x.mc("ngModel",e.selectedClients),x.Cb(1),x.mc("value",0),x.Cb(3),x.mc("ngForOf",e.clients),x.Cb(3),x.mc("ctrl",e.form.get("clientSelect")),x.Cb(7),x.mc("ngIf",e.isCreateMode()),x.Cb(1),x.mc("ngIf",e.isUpdateMode())}},directives:[p.i,w.a,A.a,k.a,R.c,a.z,a.r,a.k,p.f,O.a,O.c,P.d,P.e,M.d,P.b,M.h,a.c,I.b,a.q,a.i,a.x,M.g,D.a,E.b,E.d,M.j,E.a,n.o,F.a,N.n,n.n,a.m,p.c,P.c],styles:["small[_ngcontent-%COMP%]{color:red}.task-header[_ngcontent-%COMP%]{background-color:transparent;padding:0 5px;height:20px}.fx-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t})();var q=i("tB66"),_=i("KHMF"),G=i("a8hA"),H=i("sXtk"),X=i("dNgK"),K=i("b6Qw"),Y=i("xBcV"),Q=i("Hbgg"),Z=i("rnAf"),B=i("rvYj"),J=i("a+RD"),W=i("STbY");function tt(t,e){if(1&t&&(x.Tb(0,"th",17),x.Rc(1),x.Sb()),2&t){const t=x.fc(2).$implicit;x.Cb(1),x.Tc(" ",t.name,"")}}function et(t,e){if(1&t&&(x.Tb(0,"td",18),x.Rc(1),x.Sb()),2&t){const t=e.$implicit,i=x.fc(2).$implicit;x.Cb(1),x.Tc(" ",t[i.property]," ")}}function it(t,e){if(1&t&&(x.Rb(0,14),x.Pc(1,tt,2,1,"th",15),x.Pc(2,et,2,1,"td",16),x.Qb()),2&t){const t=x.fc().$implicit;x.mc("matColumnDef",t.property)}}function nt(t,e){if(1&t&&(x.Rb(0),x.Pc(1,it,3,1,"ng-container",13),x.Qb()),2&t){const t=e.$implicit;x.Cb(1),x.mc("ngIf",t.isModelProperty)}}function at(t,e){1&t&&x.Ob(0,"th",19)}function lt(t,e){if(1&t){const t=x.Ub();x.Tb(0,"td",20),x.Tb(1,"button",21),x.bc("click",(function(e){return x.Ec(t),e.stopPropagation()})),x.Tb(2,"mat-icon"),x.Rc(3,"more_horiz"),x.Sb(),x.Sb(),x.Tb(4,"mat-menu",22,23),x.Tb(6,"button",24),x.bc("click",(function(){x.Ec(t);const i=e.$implicit;return x.fc().updateAnnouncement(i)})),x.Tb(7,"span"),x.Rc(8,"Modify"),x.Sb(),x.Sb(),x.Tb(9,"button",24),x.bc("click",(function(){x.Ec(t);const i=e.$implicit;return x.fc().deleteAnnouncement(i)})),x.Tb(10,"span"),x.Rc(11,"Delete"),x.Sb(),x.Sb(),x.Sb(),x.Sb()}if(2&t){const t=x.Ac(5);x.Cb(1),x.mc("matMenuTriggerFor",t)}}function ct(t,e){1&t&&x.Ob(0,"tr",25)}function st(t,e){1&t&&x.Ob(0,"tr",26)}const ot=function(){return[]},rt=[{path:"",component:(()=>{class t{constructor(t,e,i,n,a,l,c){var s;this.dialog=t,this.snackbar=e,this.date=i,this.announcementService=n,this.clientSelectionService=a,this.cookieService=l,this.envService=c,this.subject$=new b.a(1),this.data$=this.subject$.asObservable(),this.dateFormat="",this.displayedColumns=[{name:"Title",property:"title",visible:!0,isModelProperty:!0},{name:"Content",property:"content",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=8,this.dateFormat=null!==(s=Object(_.e)("DateFormat"))&&void 0!==s?s:c.dateFormat}set content(t){this.sort=t,this.sort&&(this.dataSource.sort=this.sort)}get visibleColumns(){return this.displayedColumns.filter(t=>t.visible).map(t=>t.property)}ngOnInit(){this.clientSelectionService.setIsClientVisible(!1),this.getAnnouncements()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createAnnouncement(){this.dialog.open(j).afterClosed().subscribe(t=>{t&&this.announcementService.createAnnouncement(t).subscribe({next:t=>{this.snackbar.open("Announcement created successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),this.getAnnouncements()},error:t=>{this.notificationMessage("Announcement creation failed.","red-snackbar")}})})}updateAnnouncement(t){this.dialog.open(j,{data:t}).afterClosed().subscribe(t=>{t&&this.announcementService.updateAnnouncementById(t.id,t).subscribe({next:t=>{this.snackbar.open("Announcement updated successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),this.getAnnouncements()},error:t=>{this.notificationMessage("Announcement updation failed.","red-snackbar")}})})}deleteAnnouncement(t){this.dialog.open(q.a).afterClosed().subscribe(e=>{e&&this.announcementService.deleteAnnouncementById(t.id,t).subscribe({next:t=>{this.snackbar.open("Announcement deleted successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),this.getAnnouncements()},error:t=>{this.notificationMessage("Announcement deletion failed.","red-snackbar")}})})}getAnnouncements(){this.clientId=parseInt(this.cookieService.get("globalClientId")),this.announcementService.getAnnouncements(this.clientId).subscribe(t=>{t=t.map(t=>new S(t)),this.announcements=t,this.subject$.next(t)}),this.dataSource=new d.k(this.announcements),this.data$.pipe(Object(m.a)(t=>!!t)).subscribe(t=>{this.announcements=t,t.forEach(t=>{t.validTillLocal=this.date.transform(t.validTill.toString(),this.dateFormat.toString())}),this.dataSource.data=t}),this.ngAfterViewInit()}notificationMessage(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}onFilterChange(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(x.Nb(p.b),x.Nb(X.b),x.Nb(n.f),x.Nb(C.a),x.Nb(G.a),x.Nb(K.a),x.Nb(H.a))},t.\u0275cmp=x.Hb({type:t,selectors:[["fury-create-announcement"]],viewQuery:function(t,e){var i;1&t&&(x.Jc(r.a,!0),x.Vc(u.a,!0)),2&t&&(x.zc(i=x.cc())&&(e.paginator=i.first),x.zc(i=x.cc())&&(e.content=i.first))},inputs:{displayedColumns:"displayedColumns"},decls:17,vars:10,consts:[["mode","card"],["current","Announcements",3,"crumbs"],["name","Announcements",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(x.Tb(0,"fury-page-layout",0),x.Tb(1,"fury-page-layout-header"),x.Ob(2,"fury-breadcrumbs",1),x.Sb(),x.Tb(3,"fury-page-layout-content"),x.Tb(4,"fury-list",2),x.bc("filterChange",(function(t){return e.onFilterChange(t)})),x.Tb(5,"div",3),x.Tb(6,"button",4),x.bc("click",(function(){return e.createAnnouncement()})),x.Tb(7,"mat-icon"),x.Rc(8,"add"),x.Sb(),x.Sb(),x.Sb(),x.Tb(9,"table",5),x.Pc(10,nt,2,1,"ng-container",6),x.Rb(11,7),x.Pc(12,at,1,0,"th",8),x.Pc(13,lt,12,1,"td",9),x.Qb(),x.Pc(14,ct,1,0,"tr",10),x.Pc(15,st,1,0,"tr",11),x.Sb(),x.Ob(16,"mat-paginator",12),x.Sb(),x.Sb(),x.Sb()),2&t&&(x.Cb(2),x.mc("@fadeInRight",void 0)("crumbs",x.qc(9,ot)),x.Cb(1),x.mc("@fadeInUp",void 0),x.Cb(1),x.mc("columns",e.displayedColumns),x.Cb(5),x.mc("dataSource",e.dataSource),x.Cb(1),x.mc("ngForOf",e.displayedColumns),x.Cb(4),x.mc("matHeaderRowDef",e.visibleColumns),x.Cb(1),x.mc("matRowDefColumns",e.visibleColumns),x.Cb(1),x.mc("pageSize",e.pageSize))},directives:[Y.a,Q.a,Z.a,B.a,J.a,A.a,k.a,d.j,u.a,n.n,d.c,d.e,d.b,d.g,d.i,r.a,n.o,d.d,u.b,d.a,W.d,W.e,W.b,d.f,d.h],styles:[""],data:{animation:[f.a,h.a]}}),t})()}];let ut=(()=>{class t{}return t.\u0275mod=x.Lb({type:t}),t.\u0275inj=x.Kb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(rt)],o.j]}),t})();var dt=i("YUcS"),bt=i("VE2z"),mt=i("QibW"),ft=i("wZkO"),ht=i("GiUZ");let pt=(()=>{class t{}return t.\u0275mod=x.Lb({type:t}),t.\u0275inj=x.Kb({factory:function(e){return new(e||t)},imports:[[n.c,a.l,bt.a,c.a,a.w,dt.a,s.a,p.g,I.c,A.b,k.b,mt.c,F.b,ft.c,ht.a]]}),t})();var gt=i("WCGO");let yt=(()=>{class t{}return t.\u0275mod=x.Lb({type:t}),t.\u0275inj=x.Kb({factory:function(e){return new(e||t)},imports:[[n.c,ut,a.l,s.a,gt.a,c.a,pt,l.a]]}),t})()}}]);