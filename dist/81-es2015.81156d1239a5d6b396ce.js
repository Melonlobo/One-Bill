(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{Nm0R:function(e,t,s){"use strict";s.r(t),s.d(t,"MeterGroupModule",(function(){return O}));var i=s("ofXK"),r=s("0jmt"),n=s("KthW"),l=s("tyNb"),c=s("dDrv"),o=s("/sTe"),a=s("zSPf"),p=s("WFQN"),d=s("fXoL"),h=s("3Pt+"),b=s("dNgK"),u=s("b6Qw"),m=s("XiUz"),g=s("/t3+"),f=s("znSr"),M=s("bTqV"),v=s("Qu3c"),y=s("NFeN"),T=s("Wp6s"),S=s("kmnG"),C=s("d3UM"),I=s("FKr1");function G(e,t){if(1&e&&(d.Tb(0,"mat-option",19),d.Rc(1),d.Sb()),2&e){const e=t.$implicit;d.mc("value",e.id),d.Cb(1),d.Sc(e.description)}}function x(e,t){if(1&e&&(d.Tb(0,"mat-option",19),d.Rc(1),d.Sb()),2&e){const e=t.$implicit;d.mc("value",e.description),d.Cb(1),d.Sc(e.description)}}function L(e,t){if(1&e&&(d.Tb(0,"mat-option",19),d.Rc(1),d.Sb()),2&e){const e=t.$implicit;d.mc("value",e.id),d.Cb(1),d.Sc(e.description)}}function w(e,t){if(1&e){const e=d.Ub();d.Tb(0,"li",20),d.bc("click",(function(){d.Ec(e);const s=t.$implicit;return d.fc().toggleSelection(s,1)})),d.Rc(1),d.Sb()}if(2&e){const e=t.$implicit;d.Fb("item-selected",e.selected),d.Cb(1),d.Tc(" ",e.label,"")}}function k(e,t){if(1&e){const e=d.Ub();d.Tb(0,"li",20),d.bc("click",(function(){d.Ec(e);const s=t.$implicit;return d.fc().toggleSelection(s,2)})),d.Rc(1),d.Sb()}if(2&e){const e=t.$implicit;d.Fb("item-selected",e.selected),d.Cb(1),d.Tc(" ",e.label,"")}}const U=[{path:"",component:(()=>{class e{constructor(e,t,s,i,r,n,l){this.masterService=e,this.alertSettingsEmsService=t,this.estidamaChartService=s,this.fb=i,this.snackbar=r,this.meterReplacementService=n,this.cookieService=l,this.clientId="0",this.lstMeters=[],this.selectedlstMeters=[],this.deviceGroups=[],this.clients=[],this.client=0}ngOnInit(){this.getClients(),this.getMeterTypes()}getMeterTypes(){this.lstMeterType=[],this.estidamaChartService.getMeterTypes().subscribe(e=>{if(e){const t=e.meterTypeList;t&&t.forEach(e=>{this.lstMeterType.push({id:e.meterTypeID,description:e.meterTypeName})}),this.lstMeterType&&this.lstMeterType.length>0&&(this.meterTypeId=this.lstMeterType[0].id,this.meterTypeName=this.lstMeterType[0].description,this.getDeviceGroups()),this.getMeterList()}})}getDeviceGroups(){this.meterGroupId=0,this.lstMeterGroup=[],this.meterReplacementService.getV1MeterGroupList(this.meterTypeId).subscribe(e=>{this.lstMeterGroup=e})}getMeterList(){this.lstMeters=[],this.selectedlstMeters=[],"0"!=this.clientId&&this.alertSettingsEmsService.getv1MeterList(this.clientId,this.meterTypeId,null==this.meterGroupId?0:this.meterGroupId).subscribe(e=>{e.forEach(e=>{e.defaultValue&&"1"===e.defaultValue?this.selectedlstMeters.push({label:e.description,value:e.id,selected:!1}):this.lstMeters.push({label:e.description,value:e.id,selected:!1})}),this.lstMeters.sort((e,t)=>e.label.localeCompare(t.label)),this.selectedlstMeters.sort((e,t)=>e.label.localeCompare(t.label))})}onMeterTypeChange(){this.lstMeterType.find(e=>{e.description==this.meterTypeName&&(this.meterTypeId=e.id),this.getDeviceGroups()}),this.getMeterList()}onMeterGroupChange(){this.getMeterList()}getClients(){this.clients=[],this.meterReplacementService.getClients().subscribe(e=>{e&&(this.clients=e)})}onChangeClient(e){this.getMeterList()}toggleSelection(e,t){e.selected=!e.selected}moveSelected(e){"left"===e?(this.selectedlstMeters.forEach(e=>{e.selected&&this.lstMeters.push(e)}),this.selectedlstMeters=this.selectedlstMeters.filter(e=>!e.selected),this.lstMeters.sort((e,t)=>e.label.localeCompare(t.label))):(this.lstMeters.forEach(e=>{e.selected&&this.selectedlstMeters.push(e)}),this.lstMeters=this.lstMeters.filter(e=>!e.selected),this.selectedlstMeters.sort((e,t)=>e.label.localeCompare(t.label)))}moveAll(e){"left"===e?(this.lstMeters=[...this.lstMeters,...this.selectedlstMeters],this.lstMeters.sort((e,t)=>e.label.localeCompare(t.label)),this.selectedlstMeters=[]):(this.selectedlstMeters=[...this.selectedlstMeters,...this.lstMeters],this.selectedlstMeters.sort((e,t)=>e.label.localeCompare(t.label)),this.lstMeters=[])}onSave(){this.deviceGroups=[];let e=!0;this.meterTypeId&&this.meterTypeId>0&&this.meterGroupId&&this.meterGroupId>0?(this.alertSettingsEmsService.deleteMeterGroup(this.meterTypeId,this.meterGroupId).subscribe(t=>{e=!!t}),this.meterTypeId&&this.meterGroupId&&this.selectedlstMeters&&this.selectedlstMeters.length&&this.selectedlstMeters.forEach(e=>{const t={meterTypeId:Number(this.meterTypeId),groupId:Number(this.meterGroupId),meterId:Number(e.value)};this.deviceGroups.push(t)}),null!=this.deviceGroups&&this.deviceGroups.length&&this.alertSettingsEmsService.saveCreateMeterGroup(this.deviceGroups).subscribe(t=>{e=!!t}),1==e?this.notificationMessage("Meter group saved successfully","green-snackbar"):this.notificationMessage("Meter group save failed","red-snackbar")):this.notificationMessage("Please select Meter Type and Meter Group.","red-snackbar")}notificationMessage(e,t){this.snackbar.open(e,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[t]})}}return e.\u0275fac=function(t){return new(t||e)(d.Nb(a.a),d.Nb(o.a),d.Nb(c.a),d.Nb(h.f),d.Nb(b.b),d.Nb(p.a),d.Nb(u.a))},e.\u0275cmp=d.Hb({type:e,selectors:[["fury-meter-group"]],decls:47,vars:9,consts:[["fxLayout","column","fxLayoutGap","2%",2,"padding","27px"],["color","primary","fxLayout","row","fxLayout.xs","column",1,"position-fixed"],["src","assets/img/fav-icon.png",1,"img-style",3,"fxHide.xs"],["fxLayout","row","fxLayout.xs","column"],[1,"toolbar-spacer"],[1,"fury-flex-form-field"],["matTooltip","Save","mat-icon-button","",1,"material-icons",3,"click"],["fxLayout","column","fxLayoutGap","2%"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","2%"],["fxFlex",""],["name","clientId","id","clientId","placeholder","Client",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["name","meterType","id","meterTypeId","placeholder","Meter Type",3,"ngModel","ngModelChange"],["name","meterGroup","id","meterGroupId","placeholder","Meter Group",3,"ngModel","ngModelChange"],["fxLayout","column","fxLayoutGap","5%"],[1,"container"],[3,"item-selected","click",4,"ngFor","ngForOf"],[1,"buttons-container"],["mat-icon-button","",1,"material-icons",3,"click"],[3,"value"],[3,"click"]],template:function(e,t){1&e&&(d.Tb(0,"div",0),d.Tb(1,"mat-toolbar",1),d.Ob(2,"img",2),d.Tb(3,"span",3),d.Rc(4,"Meter Group "),d.Sb(),d.Ob(5,"span",4),d.Tb(6,"div",5),d.Tb(7,"button",6),d.bc("click",(function(){return t.onSave()})),d.Tb(8,"mat-icon"),d.Rc(9,"save"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(10,"mat-card"),d.Tb(11,"div",7),d.Tb(12,"div",8),d.Tb(13,"mat-form-field",9),d.Tb(14,"mat-label"),d.Rc(15,"Client"),d.Sb(),d.Tb(16,"mat-select",10),d.bc("ngModelChange",(function(e){return t.clientId=e}))("selectionChange",(function(e){return t.onChangeClient(e)})),d.Pc(17,G,2,2,"mat-option",11),d.Sb(),d.Tb(18,"mat-hint"),d.Rc(19,"Please select Client."),d.Sb(),d.Sb(),d.Tb(20,"mat-form-field",9),d.Tb(21,"mat-select",12),d.bc("ngModelChange",(function(e){return t.meterTypeName=e}))("ngModelChange",(function(){return t.onMeterTypeChange()})),d.Pc(22,x,2,2,"mat-option",11),d.Sb(),d.Sb(),d.Tb(23,"mat-form-field",9),d.Tb(24,"mat-select",13),d.bc("ngModelChange",(function(e){return t.meterGroupId=e}))("ngModelChange",(function(){return t.onMeterGroupChange()})),d.Pc(25,L,2,2,"mat-option",11),d.Sb(),d.Sb(),d.Sb(),d.Tb(26,"div",14),d.Tb(27,"div",15),d.Tb(28,"ul"),d.Rc(29," Meters "),d.Pc(30,w,2,3,"li",16),d.Sb(),d.Tb(31,"div",17),d.Tb(32,"button",18),d.bc("click",(function(){return t.moveSelected("right")})),d.Tb(33,"mat-icon"),d.Rc(34,"arrow_right"),d.Sb(),d.Sb(),d.Tb(35,"button",18),d.bc("click",(function(){return t.moveAll("right")})),d.Tb(36,"mat-icon"),d.Rc(37,"fast_forward"),d.Sb(),d.Sb(),d.Tb(38,"button",18),d.bc("click",(function(){return t.moveSelected("left")})),d.Tb(39,"mat-icon"),d.Rc(40,"arrow_left"),d.Sb(),d.Sb(),d.Tb(41,"button",18),d.bc("click",(function(){return t.moveAll("left")})),d.Tb(42,"mat-icon"),d.Rc(43,"fast_rewind"),d.Sb(),d.Sb(),d.Sb(),d.Tb(44,"ul"),d.Rc(45," Selected Meters "),d.Pc(46,k,2,3,"li",16),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&e&&(d.Cb(2),d.mc("fxHide.xs",!0),d.Cb(14),d.mc("ngModel",t.clientId),d.Cb(1),d.mc("ngForOf",t.clients),d.Cb(4),d.mc("ngModel",t.meterTypeName),d.Cb(1),d.mc("ngForOf",t.lstMeterType),d.Cb(2),d.mc("ngModel",t.meterGroupId),d.Cb(1),d.mc("ngForOf",t.lstMeterGroup),d.Cb(5),d.mc("ngForOf",t.lstMeters),d.Cb(16),d.mc("ngForOf",t.selectedlstMeters))},directives:[m.d,m.e,g.a,f.b,M.a,v.a,y.a,T.a,S.d,m.b,S.h,C.a,h.q,h.t,i.n,S.g,I.n],styles:["ul[_ngcontent-%COMP%]{list-style:none;width:200px;border:1px solid #1976d2;height:200px;display:inline-block;padding:5px;overflow:auto}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{background:#b2d3f5;color:#000;border:1px solid #c7dff8;padding:8px}.container[_ngcontent-%COMP%]{height:200px;align-items:center}.buttons-container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.buttons-container[_ngcontent-%COMP%]{height:90%;flex-direction:column}.item-selected[_ngcontent-%COMP%]{background:#68d368!important;color:#fff!important}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.img-style[_ngcontent-%COMP%]{width:32px}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}"]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=d.Lb({type:e}),e.\u0275inj=d.Kb({factory:function(t){return new(t||e)},imports:[[l.j.forChild(U)],l.j]}),e})();var F=s("WCGO"),N=s("q8Jb");let O=(()=>{class e{}return e.\u0275mod=d.Lb({type:e}),e.\u0275inj=d.Kb({factory:function(t){return new(t||e)},imports:[[i.c,P,n.a,F.a,r.a,h.l,h.w,N.a]]}),e})()},WFQN:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s("tk/3"),r=s("sXtk"),n=s("fXoL");let l=(()=>{class e{constructor(e,t){this.http=e,this.envService=t,this.baseUrl="",this.baseUrl=t.backend}getReplacedMeters(e){return this.http.get(this.baseUrl+"/devicelistreplacements/clientId/"+e)}createMeterReplacement(e){return this.http.post(this.baseUrl+"/devicelistreplacements/",e)}GetUtilityTypes(e){let t=new i.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/UtilityTypes",{params:t})}getAllUnits(e,t){let s=new i.f;return s=s.append("clientId",""+e),s=s.append("utilityTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/Units",{params:s})}GetActiveDevices(e,t){let s=new i.f;return s=s.append("clientId",""+e),s=s.append("utilityTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/ActiveDevices",{params:s})}getMeterErrorDetails(e){return this.http.post(this.baseUrl+"/devicelistreplacements/MeterError",e)}GetParametersList(){return this.http.get(this.baseUrl+"/devicelistreplacements/Parameters")}getDeviceDataDetails(e){return this.http.post(this.baseUrl+"/devicelistreplacements/DeviceData",e)}GetMeterList(e){let t=new i.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/MeterList",{params:t})}getDeviceGroupMeterList(e,t,s="0"){let r=new i.f;return r=r.append("meterTypeId",""+e),r=r.append("groupId",""+t),r=r.append("clientId",""+s),this.http.get(this.baseUrl+"/devicelistreplacements/type/group/meterList",{params:r})}getV1DeviceGroupMeterList(e,t,s="0"){let r=new i.f;return r=r.append("meterTypeId",""+e),r=r.append("groupId",""+t),r=r.append("clientId",""+s),this.http.get(this.baseUrl+"/devicelistreplacements/v1/type/group/meterListFilterByClient",{params:r})}getV1DeviceGroupMeterListWithoutFlowTypeFilter(e,t,s="0"){let r=new i.f;return r=r.append("meterTypeId",""+e),r=r.append("groupId",""+t),r=r.append("clientId",""+s),this.http.get(this.baseUrl+"/devicelistreplacements/V1/type/group/meterListFilterByClientWithoutFlowTypeFilter",{params:r})}getV1MeterList(e=0){let t=new i.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterListFilterByClient",{params:t})}getClients(){return this.http.get(this.baseUrl+"/devicelistreplacements/v1/clients")}getV1MeterGroupList(e=0){let t=new i.f;return t=t.append("meterTypeId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterGroups",{params:t})}}return e.\u0275fac=function(t){return new(t||e)(n.Xb(i.c),n.Xb(r.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);