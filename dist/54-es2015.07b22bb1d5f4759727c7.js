(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"9+Ko":function(t,e,i){"use strict";i.r(e),i.d(e,"AcceptanceReportModule",(function(){return q}));var a=i("ofXK"),n=i("0jmt"),r=i("KthW"),c=i("tyNb"),o=i("M9IT"),l=i("Dh3D"),s=i("+0xr"),u=i("jtHE"),m=i("pLZG"),b=i("Ku73"),p=i("nStZ"),h=i("Y0L5"),f=i("EUZL"),d=i("i680"),g=(i("DaQG"),i("nST0")),y=i("wd/R"),S=i("KHMF"),x=i("a8hA"),C=i("sXtk"),w=i("fXoL"),v=i("dNgK"),T=i("b6Qw"),D=i("xBcV"),P=i("Hbgg"),k=i("rnAf"),A=i("rvYj"),L=i("a+RD"),I=i("bTqV"),R=i("Qu3c"),F=i("NFeN"),N=i("bSwM");function O(t,e){if(1&t){const t=w.Ub();w.Tb(0,"th",20),w.Tb(1,"mat-checkbox",21),w.bc("click",(function(e){return w.Ec(t),e.stopPropagation()})),w.Sb(),w.Sb()}}function U(t,e){if(1&t){const t=w.Ub();w.Tb(0,"td",22),w.Tb(1,"mat-checkbox",21),w.bc("click",(function(e){return w.Ec(t),e.stopPropagation()})),w.Sb(),w.Sb()}}function z(t,e){1&t&&w.Ob(0,"th",23)}function M(t,e){if(1&t&&(w.Tb(0,"td",24),w.Ob(1,"img",25),w.Sb()),2&t){const t=e.$implicit;w.Cb(1),w.oc("src","http://i.pravatar.cc/30?u=",t.name,"",w.Gc)}}function j(t,e){if(1&t&&(w.Tb(0,"th",30),w.Rc(1),w.Sb()),2&t){const t=w.fc(2).$implicit;w.Cb(1),w.Tc(" ",t.name," ")}}function E(t,e){if(1&t&&(w.Tb(0,"td",31),w.Rc(1),w.Sb()),2&t){const t=e.$implicit,i=w.fc(2).$implicit;w.Cb(1),w.Tc(" ",t[i.property]," ")}}function H(t,e){if(1&t&&(w.Rb(0,27),w.Pc(1,j,2,1,"th",28),w.Pc(2,E,2,1,"td",29),w.Qb()),2&t){const t=w.fc().$implicit;w.mc("matColumnDef",t.property)}}function $(t,e){if(1&t&&(w.Rb(0),w.Pc(1,H,3,1,"ng-container",26),w.Qb()),2&t){const t=e.$implicit;w.Cb(1),w.mc("ngIf",t.isModelProperty)}}function W(t,e){1&t&&(w.Tb(0,"th",32),w.Rc(1,"IS ACCEPTED"),w.Sb())}function X(t,e){if(1&t&&(w.Tb(0,"td",33),w.Rc(1),w.Sb()),2&t){const t=e.$implicit;w.Cb(1),w.Tc(" ",1==t.isAccepted?"Yes":"No"," ")}}function Y(t,e){1&t&&w.Ob(0,"tr",34)}function V(t,e){1&t&&w.Ob(0,"tr",35)}const G=function(){return[]},K=[{path:"",component:(()=>{class t{constructor(t,e,i,a,n,r,c){var o;this.loginReportService=t,this.date=e,this.snackbar=i,this.cookieService=a,this.clientSelectionService=n,this.clientService=r,this.envService=c,this.subject$=new u.a(1),this.data$=this.subject$.asObservable(),this.filePath="",this.imageProperties=[],this.columns=[{name:"Account Number",property:"accountNumber",visible:!0,isModelProperty:!0},{name:"Owner Name",property:"ownerName",visible:!0,isModelProperty:!0},{name:"Is Accepted",property:"isAccepted",visible:!0,isModelProperty:!1},{name:"Last Updated On",property:"createdDate",visible:!0,isModelProperty:!0}],this.pageSize=8,this.dateFormat="",this.filePath=c.backendForFiles,this.dateFormat=null!==(o=Object(S.e)("DateFormat"))&&void 0!==o?o:c.dateFormat,this.clientId=parseInt(this.cookieService.get("globalClientId"))}set content(t){this.sort=t,this.sort&&(this.dataSource.sort=this.sort)}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}ngOnInit(){this.clientSelectionService.setIsClientVisible(!0),this.userid=this.cookieService.get("userId"),this.GetAllUserAcceptanceLogDetails()}GetAllUserAcceptanceLogDetails(){this.loginReportService.getAllUserAcceptanceLogDetails(this.clientId).subscribe(t=>{t.forEach(t=>{t.createdDateLocal=this.date.transform(t.createdDate.toString(),this.dateFormat.toString())}),this.subject$.next(t)}),this.dataSource=new s.k,this.data$.pipe(Object(m.a)(t=>!!t)).subscribe(t=>{this.userAcceptanceLogDetails=t,this.dataSource.data=t}),this.ngAfterViewInit()}onFilterChange(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){}getJsonData(){this.tableData=[],this.userAcceptanceLogDetails.forEach(t=>{this.tableData.push({AccountNumber:t.accountNumber,OwnerName:t.ownerName,IsAccepted:1==t.isAccepted?"Yes":"No",LastUpdatedOn:t.createdDate})})}notificationMessage(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}onExport(){if(this.userAcceptanceLogDetails&&this.userAcceptanceLogDetails.length>0){this.getJsonData();const t=f.utils.json_to_sheet(this.tableData),e=f.utils.book_new();f.utils.book_append_sheet(e,t,"Sheet1"),f.writeFile(e,"AcceptanceReport.xlsx")}else this.notificationMessage("No Data to Export","yellow-snackbar")}onPrint(){this.getClientImageProperties()}getClientImageProperties(){this.imageProperties=[],this.clientService.getClientImageProperties(this.clientId).subscribe({next:t=>{t&&t.length&&(this.imageProperties=t,this.userAcceptanceLogDetails&&this.userAcceptanceLogDetails.length&&this.downloadSummary(this.userAcceptanceLogDetails))},error(){this.notificationMessage("Image properties not found. To see image on print, please configure image properties","red-snackbar"),this.userAcceptanceLogDetails&&this.userAcceptanceLogDetails.length&&this.downloadSummary(this.userAcceptanceLogDetails)}})}downloadSummary(t){let e=[],i=[];for(let a=0;a<t.length;a++)e.push(a+1),e.push(t[a].accountNumber),e.push(t[a].ownerName),e.push(1==t[a].isAccepted?"Yes":"No"),e.push(t[a].createdDate),i.push(e),e=[];this.getSummaryReport(t,["SL No","Account Number","Owner Name","Is Accepted","Last Updated On"],i,"TNC Acceptance Report")}getSummaryReport(t,e,i,a){var n;const r=this.imageProperties;var c=new Image;c.src=this.filePath+"/uploads/"+(null===(n=this.imageProperties[0])||void 0===n?void 0:n.photo);let o=new d.default({orientation:"portrait",unit:"pt",format:"letter"});const l=y().format("M/D/YYYY hh:mm:ss a");o.autoTable(e,i,{startX:10,startY:70,didDrawPage:function(t){if(o.setFontSize(30),c&&t&&r&&r.length){const t=r.find(t=>"portrait"===t.imageType.trim().toLowerCase());t&&(c.onload=function(){o.addImage(c,t.imgX,t.imgY,t.imgW,t.imgH)})}o.setTextColor(0,0,0),o.setFontSize(14),o.setFont("Cambria"),o.text(a,260,60),o.setFont("Cambria","normal"),o.setFontSize(9),o.text("Print Date: "+l,o.internal.pageSize.width-150,20);var e="Page "+t.pageCount;"function"==typeof o.putTotalPages&&(o.setTextColor(0,0,0),o.rect(5,5,o.internal.pageSize.width-10,o.internal.pageSize.height-10,"S")),o.setFontSize(9);var i=o.internal.pageSize.height||o.internal.pageSize.getHeight();o.text(e,t.settings.margin.left,i-10)},styles:{overflow:"linebreak",cellWidth:"wrap",fontSize:9,cellPadding:6,overflowColumns:"linebreak",lineColor:[0,0,0]},margin:{top:60,left:20},theme:"grid",tableWidth:"auto",cellWidth:"wrap",columnStyles:{0:{cellWidth:40,halign:"center"},1:{cellWidth:100,halign:"center"},2:{cellWidth:230,halign:"center"},3:{cellWidth:70,halign:"center"},4:{cellWidth:130,halign:"center"}},headStyles:{lineWidth:.1,lineColor:[0,0,0],halign:"center",fillColor:[25,118,210]}});var s=o.output("blob");window.open(URL.createObjectURL(s))}}return t.\u0275fac=function(e){return new(e||t)(w.Nb(h.a),w.Nb(a.f),w.Nb(v.b),w.Nb(T.a),w.Nb(x.a),w.Nb(g.a),w.Nb(C.a))},t.\u0275cmp=w.Hb({type:t,selectors:[["app-acceptance-report"]],viewQuery:function(t,e){var i;1&t&&(w.Jc(o.a,!0),w.Vc(l.a,!0)),2&t&&(w.zc(i=w.cc())&&(e.paginator=i.first),w.zc(i=w.cc())&&(e.content=i.first))},inputs:{columns:"columns"},decls:26,vars:10,consts:[["mode","card"],["current","TNC Acceptance Report",3,"crumbs"],["name","TNC Acceptance Report",3,"columns","filterChange"],[1,"actions"],["matTooltip","Export","mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],["matTooltip","Print","mat-icon-button","",1,"example-icon",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","isAccepted"],["mat-header-cell","","class","header-align-right",4,"matHeaderCellDef"],["mat-cell","","class","header-align-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"header-align-right"],["mat-cell","",1,"header-align-right"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(w.Tb(0,"fury-page-layout",0),w.Tb(1,"fury-page-layout-header"),w.Ob(2,"fury-breadcrumbs",1),w.Sb(),w.Tb(3,"fury-page-layout-content"),w.Tb(4,"fury-list",2),w.bc("filterChange",(function(t){return e.onFilterChange(t)})),w.Tb(5,"div",3),w.Tb(6,"button",4),w.bc("click",(function(){return e.onExport()})),w.Tb(7,"mat-icon"),w.Rc(8,"import_export"),w.Sb(),w.Sb(),w.Tb(9,"button",5),w.bc("click",(function(){return e.onPrint()})),w.Tb(10,"mat-icon"),w.Rc(11,"print"),w.Sb(),w.Sb(),w.Sb(),w.Tb(12,"table",6),w.Rb(13,7),w.Pc(14,O,2,0,"th",8),w.Pc(15,U,2,0,"td",9),w.Qb(),w.Rb(16,10),w.Pc(17,z,1,0,"th",11),w.Pc(18,M,2,1,"td",12),w.Qb(),w.Pc(19,$,2,1,"ng-container",13),w.Rb(20,14),w.Pc(21,W,2,0,"th",15),w.Pc(22,X,2,1,"td",16),w.Qb(),w.Pc(23,Y,1,0,"tr",17),w.Pc(24,V,1,0,"tr",18),w.Sb(),w.Ob(25,"mat-paginator",19),w.Sb(),w.Sb(),w.Sb()),2&t&&(w.Cb(2),w.mc("@fadeInRight",void 0)("crumbs",w.qc(9,G)),w.Cb(1),w.mc("@fadeInUp",void 0),w.Cb(1),w.mc("columns",e.columns),w.Cb(8),w.mc("dataSource",e.dataSource),w.Cb(7),w.mc("ngForOf",e.columns),w.Cb(4),w.mc("matHeaderRowDef",e.visibleColumns),w.Cb(1),w.mc("matRowDefColumns",e.visibleColumns),w.Cb(1),w.mc("pageSize",e.pageSize))},directives:[D.a,P.a,k.a,A.a,L.a,I.a,R.a,F.a,s.j,l.a,s.c,s.e,s.b,a.n,s.g,s.i,o.a,s.d,N.a,s.a,a.o,l.b,s.f,s.h],styles:[""],data:{animation:[b.a,p.a]}}),t})()}];let Q=(()=>{class t{}return t.\u0275mod=w.Lb({type:t}),t.\u0275inj=w.Kb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(K)],c.j]}),t})();var J=i("WCGO"),_=i("q8Jb");let q=(()=>{class t{}return t.\u0275mod=w.Lb({type:t}),t.\u0275inj=w.Kb({factory:function(e){return new(e||t)},imports:[[a.c,Q,r.a,J.a,n.a,_.a]]}),t})()},"a+RD":function(t,e,i){"use strict";i.d(e,"a",(function(){return x}));var a=i("fXoL"),n=i("xgIS"),r=i("/uUt"),c=i("Kj3r"),o=i("ofXK"),l=i("STbY"),s=i("XiUz"),u=i("NFeN"),m=i("bTqV"),b=i("bSwM"),p=i("3Pt+");const h=["filter"];function f(t,e){if(1&t&&(a.Tb(0,"button",12),a.Tb(1,"mat-icon"),a.Rc(2,"filter_list"),a.Sb(),a.Sb()),2&t){a.fc(2);const t=a.Ac(3);a.mc("matMenuTriggerFor",t)}}function d(t,e){if(1&t&&(a.Tb(0,"div",5),a.Tb(1,"div",6),a.Rc(2),a.Sb(),a.Tb(3,"div",7),a.Tb(4,"mat-icon",8),a.Rc(5,"search"),a.Sb(),a.Ob(6,"input",9,10),a.Sb(),a.Pc(8,f,3,1,"button",11),a.kc(9,1),a.Sb()),2&t){const t=a.fc();a.Cb(2),a.Sc(t.name),a.Cb(6),a.mc("ngIf",!t.hideFilter)}}function g(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",13),a.bc("click",(function(i){a.Ec(t);const n=e.$implicit;return a.fc().toggleColumnVisibility(n,i)})),a.Tb(1,"mat-checkbox",14,15),a.bc("ngModelChange",(function(i){return a.Ec(t),e.$implicit.visible=i}))("click",(function(e){return a.Ec(t),e.stopPropagation()})),a.Rc(3),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit;a.Cb(1),a.mc("ngModel",t.visible),a.Cb(2),a.Tc(" ",t.name," ")}}const y=["*",[["",8,"actions"]]],S=["*",".actions"];let x=(()=>{class t{constructor(){this.filterChange=new a.o}ngAfterViewInit(){this.hideHeader||Object(n.a)(this.filter.nativeElement,"keyup").pipe(Object(r.a)(),Object(c.a)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(t,e){e.stopPropagation(),e.stopImmediatePropagation(),t.visible=!t.visible}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["fury-list"]],viewQuery:function(t,e){var i;1&t&&a.Vc(h,!0),2&t&&a.zc(i=a.cc())&&(e.filter=i.first)},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader",hideFilter:"hideFilter"},outputs:{filterChange:"filterChange"},ngContentSelectors:S,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["class","fury-column-filter","type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,e){1&t&&(a.lc(y),a.Tb(0,"div",0),a.Pc(1,d,10,2,"div",1),a.Tb(2,"mat-menu",2,3),a.Pc(4,g,4,2,"button",4),a.Sb(),a.kc(5),a.Sb()),2&t&&(a.Cb(1),a.mc("ngIf",!e.hideHeader),a.Cb(3),a.mc("ngForOf",e.columns))},directives:[o.o,l.e,o.n,s.d,s.c,s.e,s.b,u.a,m.a,l.d,b.a,p.q,p.t],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width:599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width:599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}"],encapsulation:2}),t})()},nST0:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var a=i("tk/3"),n=i("sXtk"),r=i("fXoL");let c=(()=>{class t{constructor(t,e){this.http=t,this.envService=e,this.baseUrl="",this.baseUrl=e.backend}getClients(){return this.http.get(this.baseUrl+"/clients")}getRoles(){return this.http.get(this.baseUrl+"/clients/roles")}saveUserClients(t){return this.http.post(this.baseUrl+"/clients/userclients",t)}getClientImageProperties(t){let e=new a.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/clients/image/properties",{params:e})}getUtilityTypes(t){let e=new a.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/clients/utilityType",{params:e})}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(a.c),r.Xb(n.a))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);