(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"7d4Y":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("tk/3"),i=n("sXtk"),l=n("fXoL");let s=(()=>{class t{constructor(t,e){this.http=t,this.envService=e,this.baseUrl="",this.baseUrl=e.backend}getTenantsDetails(t,e=1){return this.http.get(`${this.baseUrl}/billsettlement/tenants/${t}/${e}`)}getUnits(t){return this.http.get(this.baseUrl+"/billsettlement/units/"+t)}getAccountNumbers(t){return this.http.get(this.baseUrl+"/billsettlement/AccountNumbers/"+t)}getPaymentModes(){return this.http.get(this.baseUrl+"/billsettlement/paymentmodes")}getBanks(t){let e=new a.f;return t&&(e=e.append("unitNumber",""+t.unitNumber),e=e.append("tenantId",""+t.tenantId),e=e.append("phoneNumber",""+t.phoneNumber)),this.http.get(this.baseUrl+"/billsettlement/banks",{params:e})}getBillSettlementDetails(t){let e=new a.f;return t&&(e=e.append("unitNumber",""+t.unitNumber),e=e.append("tenantId",""+t.tenantId),e=e.append("billPeriodId",""+t.billPeriodId),e=e.append("settlementDate",""+t.settlementDate),e=e.append("billType",""+t.billType),e=e.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/finalsettlement/details",{params:e})}getBillDetails(t){let e=new a.f;return t&&(e=e.append("utilityTypeId",""+t.utilityTypeId),e=e.append("billPeriodId",""+t.billPeriodId),e=e.append("clientId",""+t.clientId),e=e.append("tenantId",""+t.tenantId)),this.http.get(this.baseUrl+"/billsettlement/unbilledconsumption",{params:e})}generateBillDetails(t){return this.http.post(this.baseUrl+"/billsettlement/generate/unbilledconsumption",t)}getOutStandingBillDetails(t){let e=new a.f;return t&&(e=e.append("unitNumber",""+t.unitNumber),e=e.append("tenantId",""+t.tenantId),e=e.append("billPeriodId",""+t.billPeriodId),e=e.append("settlementDate",""+t.settlementDate),e=e.append("billType",""+t.billType),e=e.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/outstandingbills",{params:e})}getTenantBillDetails(t){let e=new a.f;return e=e.append("tenantId",""+t),this.http.get(this.baseUrl+"/billsettlement/outstandingbills",{params:e})}saveUnBilledConsumptions(t){return this.http.post(this.baseUrl+"/billsettlement/unbilledconsumption",t)}saveOutstandingBills(t){return this.http.post(this.baseUrl+"/billsettlement/outstandingbills",t)}saveBillPayments(t){return this.http.post(this.baseUrl+"/billsettlement/billpayments",t)}getInvoiceBillDetails(t){let e=new a.f;return t&&(e=e.append("billMasterId",""+t)),this.http.get(this.baseUrl+"/template/billmasterdetails",{params:e})}getReceiptDetails(t){let e=new a.f;return t&&(e=e.append("paymentId",""+t)),this.http.get(this.baseUrl+"/template/paymentdetails",{params:e})}saveRefund(t){return this.http.post(this.baseUrl+"/billsettlement/refund",t)}getBillFailDetails(t){let e=new a.f;return t&&(e=e.append("consumptionType",""+t.consumptionTypeId),e=e.append("utilityTypeId",""+t.utilityTypeId),e=e.append("fromDate",""+t.fromDate),e=e.append("toDate",""+t.toDate),e=e.append("days",""+t.days),e=e.append("percentage",""+t.percentage),e=e.append("billPeriodId",""+t.billPeriodId),e=e.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/failed/bills",{params:e})}saveConsumptionRange(t){return this.http.post(this.baseUrl+"/billsettlement/consumption/range",t)}updateFaileBillsStatus(t){return this.http.put(this.baseUrl+"/billsettlement/failed/bills/update",t)}updateBillMasterSyncStatus(t){return this.http.put(this.baseUrl+"/billsettlement/sync/bills/update",t)}updatePaymentSyncStatus(t){return this.http.put(this.baseUrl+"/billsettlement/sync/payment/update",t)}updateRefundSyncStatus(t){return this.http.put(this.baseUrl+"/billsettlement/sync/refund/update",t)}updateCreditNoteSyncStatus(t){return this.http.put(this.baseUrl+"/billsettlement/sync/creditnote/update",t)}deleteConsumptionAlert(t,e){return this.http.put(this.baseUrl+"/billsettlement/consumptionAlert/delete/"+t,e)}invoiceGeneration(t){return this.http.post(this.baseUrl+"/file/report/invoice/generate",t)}updateBillMasterApprovedStatus(t){return this.http.put(this.baseUrl+"/billsettlement/approved/bills/update",t)}regenerateRejectedBillMasters(t){return this.http.put(this.baseUrl+"/billsettlement/regenerate/billmasters",t)}generateOtherTypeInvoiceDetail(t,e){let n=new a.f;return n=n.append("clientId",""+t),n=n.append("contractId",""+e),this.http.post(`${this.baseUrl}/billsettlement/contract/invoice/billmaster/${t}/${e}`,null)}updateOtherTypeConsumption(t){return this.http.put(this.baseUrl+"/billsettlement/othertype/consumption/update",t)}updatBillMasterRejectedStatus(t){return this.http.put(this.baseUrl+"/billsettlement/rejected/bills/update",t)}saveCreditNote(t){return this.http.post(this.baseUrl+"/billsettlement/creditnote",t)}getCreditNoteDetails(t){let e=new a.f;return t&&(e=e.append("fromDate",""+t.fromDate),e=e.append("toDate",""+t.toDate),e=e.append("billPeriodId",""+t.billPeriodId),e=e.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/creditnote/history",{params:e})}getConsumptioSavedAlertDetails(t){var e,n;let i=new a.f;return t&&(i=i.append("consumptionTypeId",""+(null!==(e=t.consumptionTypeId)&&void 0!==e?e:0)),i=i.append("utilityTypeId",""+(null!==(n=t.utilityTypeId)&&void 0!==n?n:0)),i=i.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/saved/consumption/range/details",{params:i})}getConumptionAlertDetails(t){var e,n,i,l,s;let r=new a.f;return t&&(r=r.append("consumptionTypeId",""+t.consumptionTypeId),r=r.append("utilityTypeId",""+t.utilityTypeId),r=r.append("fromDate",""+(null!==(e=t.fromDate)&&void 0!==e?e:"")),r=r.append("startDate",""+(null!==(n=t.startDate)&&void 0!==n?n:"")),r=r.append("endDate",""+(null!==(i=t.endDate)&&void 0!==i?i:"")),r=r.append("percentage",""+t.percentage),r=r.append("fromBillPeriodId",""+(null!==(l=t.fromBillPeriodId)&&void 0!==l?l:0)),r=r.append("toBillPeriodId",""+(null!==(s=t.toBillPeriodId)&&void 0!==s?s:0)),r=r.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/consumption/alert",{params:r})}getRefundAmount(t,e){let n=new a.f;return t&&(n=n.append("ownerId",""+t),n=n.append("paymentId",""+e)),this.http.get(this.baseUrl+"/billsettlement/refundAmount",{params:n})}creditNoteSummaryView(t){return this.http.post(this.baseUrl+"/file/report/creditnote/summary",t)}creditNoteView(t){return this.http.post(this.baseUrl+"/file/report/creditnote",t)}}return t.\u0275fac=function(e){return new(e||t)(l.Xb(a.c),l.Xb(i.a))},t.\u0275prov=l.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},lW2b:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("tk/3"),i=n("sXtk"),l=n("fXoL");let s=(()=>{class t{constructor(t,e){this.http=t,this.envService=e,this.baseUrl="",this.baseUrl=e.backend}getUtilityTypes(){return this.http.get(this.baseUrl+"/bills/utilitytypes")}getBillPeriods(t){return this.http.get(this.baseUrl+"/bills/billperiods/"+t)}saveAdvancePayment(t){return this.http.post(this.baseUrl+"/bills/advancepayment",t)}getBillHistory(t){let e=new a.f;return t&&(e=e.append("fromDate",""+t.fromDate),e=e.append("toDate",""+t.toDate),t.billPeriodId&&(e=e.append("billPeriodId",""+t.billPeriodId)),t.billFeeType&&(e=e.append("billFeeType",""+t.billFeeType)),t.billType&&(e=e.append("billType",""+t.billType)),t.tenantId&&(e=e.append("ownerId",""+t.tenantId)),t.clientId&&(e=e.append("clientId",""+t.clientId))),this.http.get(this.baseUrl+"/bills/billhistory",{params:e})}getAccountStatement(t){let e=new a.f;return t&&(e=e.append("fromDate",""+t.fromDate),e=e.append("toDate",""+t.toDate),t.tenantId&&(e=e.append("ownerId",""+t.tenantId)),t.clientId&&(e=e.append("clientId",""+t.clientId))),this.http.get(this.baseUrl+"/bills/account/statement",{params:e})}getPaymentHistory(t){let e=new a.f;return t&&(e=e.append("fromDate",""+t.fromDate),e=e.append("toDate",""+t.toDate),e=e.append("paymentMode",""+t.paymentMode),e=e.append("paymentId",""+t.paymentId),e=e.append("ownerId",""+t.tenantId),e=e.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/paymenthistory",{params:e})}getPaymentDetail(t,e){let n=new a.f;return t&&(n=n.append("paymentId",""+t)),e&&(n=n.append("clientId",""+e)),this.http.get(this.baseUrl+"/bills/payment/detail",{params:n})}cancelBillHistory(t){const e={headers:new a.e({"Content-Type":"application/json"}),body:t};return this.http.delete(this.baseUrl+"/billsettlement/CancelBillHistory",e)}getBillCancelledHistory(t){let e=new a.f;return t&&(e=e.append("fromDate",""+t.fromDate),e=e.append("toDate",""+t.toDate),e=e.append("billPeriodId",""+t.billPeriodId),e=e.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/billcancelhistory",{params:e})}cancelPaymentHistory(t){const e={headers:new a.e({"Content-Type":"application/json"}),body:t};return this.http.delete(this.baseUrl+"/billsettlement/CancelPaymentHistory",e)}getPaymentCancelHistory(t){let e=new a.f;return t&&(e=e.append("fromDate",""+t.fromDate),e=e.append("toDate",""+t.toDate),e=e.append("paymentMode",""+t.paymentMode),e=e.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/paymentcancelhistory",{params:e})}getUtilities(t){return this.http.get(this.baseUrl+"/dashboard/"+t+"/Utilities")}GetPaymentDue(t,e,n,i,l){let s=new a.f;return s=s.append("fromDate",""+t),s=s.append("toDate",""+e),s=s.append("billPeriodId",""+n),s=s.append("ownerId",""+i),s=s.append("clientId",""+l),this.http.get(this.baseUrl+"/bills/paymentdue",{params:s})}GetRefundReport(t,e,n,i){let l=new a.f;return l=l.append("fromDate",""+t),l=l.append("toDate",""+e),l=l.append("ownerId",""+n),l=l.append("clientId",""+i),this.http.get(this.baseUrl+"/bills/refund",{params:l})}getInvoiceAgingReport(t,e){let n=new a.f;return n=n.append("clientId",""+t),n=n.append("toDate",""+e),this.http.get(this.baseUrl+"/bills/invoiceAging",{params:n})}getConsolidatedData(t,e){let n=new a.f;return n=n.append("clientId",""+t),n=n.append("billPeriodId",""+e),this.http.get(this.baseUrl+"/bills/consolidatedReport",{params:n})}getAdvancePaymentDetails(t){let e=new a.f;return t&&(e=e.append("fromDate",""+t.fromDate),e=e.append("toDate",""+t.toDate),e=e.append("ownerId",""+t.tenantId),e=e.append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/advancePaymentDetails",{params:e})}adjustBillsWithAdvance(t){let e=new a.f;return e=e.append("ownerId",""+t),this.http.put(`${this.baseUrl}/billsettlement/adjustBillsWithAdvance/${t}`,null)}getAdvanceInHandForOwnerTenant(t){let e=new a.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/bills/advanceInHandForOwnerTenant",{params:e})}updateIsFailedStatusInBills(t){return this.http.put(this.baseUrl+"/bills/isFailed/update",t)}UpdateIsBillFailedStatusInBillMaster(t){return this.http.put(this.baseUrl+"/bills/isBillFailed/update/billMaster",t)}invoiceView(t){return this.http.post(this.baseUrl+"/file/report/invoice",t)}receiptView(t){return this.http.post(this.baseUrl+"/file/report/receipt",t)}sdReceiptView(t){return this.http.post(this.baseUrl+"/file/report/sdreceipt",t)}accountStatementView(t){return this.http.post(this.baseUrl+"/file/report/account/statement",t)}accountStatementSummaryView(t){return this.http.post(this.baseUrl+"/file/report/account/statement/summary",t)}billSummaryView(t){return this.http.post(this.baseUrl+"/file/report/bill/summary",t)}billConsumptionDetails(t,e=!1){let n=new a.f;return t&&(n=n.append("billPeriodId",""+t.billPeriodId),n=n.append("clientId",""+t.clientId),n=n.append("fromDate",""+t.fromDate),n=n.append("toDate",""+t.toDate),n=n.append("isApproved",""+e)),this.http.get(this.baseUrl+"/bills/consumption/details",{params:n})}invoicePreview(t){return this.http.post(this.baseUrl+"/file/report/invoice/preview",t)}}return t.\u0275fac=function(e){return new(e||t)(l.Xb(a.c),l.Xb(i.a))},t.\u0275prov=l.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},xZJV:function(t,e,n){"use strict";n.r(e),n.d(e,"AdvanceInHandModule",(function(){return X}));var a=n("3Pt+"),i=n("9xt4"),l=n("y/v/"),s=n("ofXK"),r=n("KthW"),p=n("WCGO"),o=n("QMK6"),d=n("VE2z"),c=n("q8Jb"),u=n("kmnG"),h=n("qFsG"),m=n("jaxi"),b=n("NFeN"),y=n("STbY"),f=n("0jmt"),I=n("/t3+"),g=n("Qu3c"),v=n("tyNb"),D=n("Ku73"),w=n("nStZ"),U=n("lW2b"),P=n("7d4Y"),S=n("a8hA"),T=n("KHMF"),N=n("EUZL"),C=n("fXoL"),A=n("b6Qw"),B=n("Nm8O"),k=n("dNgK"),x=n("xBcV"),F=n("rvYj"),O=n("XiUz"),j=n("bTqV"),M=n("4FRi"),H=n("uxLP");const R=["htmlData"],V=[{path:"",component:(()=>{class t{constructor(t,e,n,a,i,l,s){this.billService=t,this.cookieService=e,this.currency=n,this.jwtHelperService=a,this.billSettlementService=i,this.clientSelectionService=l,this.snackbar=s,this.advancePayments=[],this.selectedRows=[],this.tenants=[],this.columns=[],this.manageParams={},this.columnNames=[],this.currencyFormat="",this.roundFormat="",this.role="",this.accountNumber="Account Number",this.ownerNameColumnName="Owner/Tenant",this.advanceAmountColumnName="Advance Amount",this.currencyFormat=Object(T.e)("Currency"),this.roundFormat=Object(T.e)("RoundOff")}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}notificationMessage(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}ngOnInit(){this.clientSelectionService.setIsClientVisible(!0);let t=this.cookieService.get("access_token");const e=this.jwtHelperService.decodeToken(t);e&&(this.role=e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]),this.getTenants(),this.createColumnNames(),this.createGridColumns(),this.clientId=parseInt(this.cookieService.get("globalClientId")),this.getAdvancePaymentDetails()}createGridColumns(){this.columns=["accountNumber","ownerName","advanceAmountLocal"]}createColumnNames(){this.columnNames=[{name:this.accountNumber,property:"accountNumber"},{name:this.ownerNameColumnName,property:"ownerName"},{name:this.advanceAmountColumnName,property:"advanceAmountLocal",columnAlign:{"text-align":"right"}}]}getTenants(){this.clientId=parseInt(this.cookieService.get("globalClientId")),this.billSettlementService.getTenantsDetails(this.clientId).subscribe(t=>{this.tenants=t})}getAdvancePaymentDetails(){this.advancePayments=[],this.billService.getAdvanceInHandForOwnerTenant(this.clientId).subscribe(t=>{this.roundFormat=Object(T.e)("RoundOff"),this.currencyFormat=Object(T.e)("Currency"),t.forEach(t=>{t.advanceAmountLocal=this.currency.transform(t.advanceAmount,this.currencyFormat.toString(),!0,this.roundFormat)}),this.advancePayments=t})}getJsonData(){this.tableData=[],null!=this.advancePayments&&this.advancePayments.forEach(t=>{let e={AccountNumber:t.accountNumber,OwnerName:t.ownerName,AdvanceAmount:this.currency.transform(t.advanceAmount,this.currencyFormat.toString(),!0,this.roundFormat)};this.tableData.push(e)})}onExport(){if(this.advancePayments&&this.advancePayments.length>0){if(this.getJsonData(),null!=this.tableData&&this.tableData.length>0){const t=N.utils.json_to_sheet(this.tableData),e=N.utils.book_new();N.utils.book_append_sheet(e,t,"Sheet1"),N.writeFile(e,"AdvanceInHand.xlsx")}}else this.notificationMessage("No Data to Export","yellow-snackbar")}}return t.\u0275fac=function(e){return new(e||t)(C.Nb(U.a),C.Nb(A.a),C.Nb(s.d),C.Nb(B.a),C.Nb(P.a),C.Nb(S.a),C.Nb(k.b))},t.\u0275cmp=C.Hb({type:t,selectors:[["fury-advance-in-hand"]],viewQuery:function(t,e){var n;1&t&&C.Vc(R,!0),2&t&&C.zc(n=C.cc())&&(e.htmlData=n.first)},decls:14,vars:5,consts:[["mode","card",2,"margin-top","27px"],["fxLayout","column"],["color","primary",1,"position-fixed"],["src","assets/img/fav-icon.png",1,"img-style"],[1,"toolbar-spacer"],["matTooltip","Export","mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],["fxFlex","grow",1,"basic-forms","route-animations-elements"],["fxLayout","column",1,"padding-top"],["fxLayout","column",1,"result","padding-top"],[3,"hideHeader","tableData","columnsToDisplay","columnNames"]],template:function(t,e){1&t&&(C.Tb(0,"fury-page-layout",0),C.Tb(1,"fury-page-layout-content",1),C.Tb(2,"mat-toolbar",2),C.Ob(3,"img",3),C.Tb(4,"span"),C.Rc(5,"Advance In Hand"),C.Sb(),C.Ob(6,"span",4),C.Tb(7,"button",5),C.bc("click",(function(){return e.onExport()})),C.Tb(8,"mat-icon"),C.Rc(9,"import_export"),C.Sb(),C.Sb(),C.Sb(),C.Tb(10,"fury-card",6),C.Tb(11,"fury-card-content",7),C.Tb(12,"div",8),C.Ob(13,"fury-expandable-table-structure",9),C.Sb(),C.Sb(),C.Sb(),C.Sb(),C.Sb()),2&t&&(C.Cb(10),C.mc("@fadeInUp",void 0),C.Cb(3),C.mc("hideHeader",!1)("tableData",e.advancePayments)("columnsToDisplay",e.columns)("columnNames",e.columnNames))},directives:[x.a,F.a,O.d,I.a,j.a,g.a,b.a,M.a,O.b,M.c,H.a],styles:[".toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.button[_ngcontent-%COMP%]{line-height:50px}.img-style[_ngcontent-%COMP%]{width:32px}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}"],data:{animation:[w.a,D.a]}}),t})()}];let L=(()=>{class t{}return t.\u0275mod=C.Lb({type:t}),t.\u0275inj=C.Kb({factory:function(e){return new(e||t)},imports:[[v.j.forChild(V)],v.j]}),t})(),X=(()=>{class t{}return t.\u0275mod=C.Lb({type:t}),t.\u0275inj=C.Kb({factory:function(e){return new(e||t)},providers:[s.f,s.g],imports:[[s.c,L,a.l,i.a,l.a,r.a,p.a,a.w,o.a,d.a,f.a,c.a,u.f,h.c,m.c,b.b,y.c,I.b,g.b]]}),t})()}}]);