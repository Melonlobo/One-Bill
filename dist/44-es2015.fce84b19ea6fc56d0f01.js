(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{WFQN:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("tk/3"),a=i("sXtk"),s=i("fXoL");let n=(()=>{class e{constructor(e,t){this.http=e,this.envService=t,this.baseUrl="",this.baseUrl=t.backend}getReplacedMeters(e){return this.http.get(this.baseUrl+"/devicelistreplacements/clientId/"+e)}createMeterReplacement(e){return this.http.post(this.baseUrl+"/devicelistreplacements/",e)}GetUtilityTypes(e){let t=new r.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/UtilityTypes",{params:t})}getAllUnits(e,t){let i=new r.f;return i=i.append("clientId",""+e),i=i.append("utilityTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/Units",{params:i})}GetActiveDevices(e,t){let i=new r.f;return i=i.append("clientId",""+e),i=i.append("utilityTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/ActiveDevices",{params:i})}getMeterErrorDetails(e){return this.http.post(this.baseUrl+"/devicelistreplacements/MeterError",e)}GetParametersList(){return this.http.get(this.baseUrl+"/devicelistreplacements/Parameters")}getDeviceDataDetails(e){return this.http.post(this.baseUrl+"/devicelistreplacements/DeviceData",e)}GetMeterList(e){let t=new r.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/MeterList",{params:t})}getDeviceGroupMeterList(e,t,i="0"){let a=new r.f;return a=a.append("meterTypeId",""+e),a=a.append("groupId",""+t),a=a.append("clientId",""+i),this.http.get(this.baseUrl+"/devicelistreplacements/type/group/meterList",{params:a})}getV1DeviceGroupMeterList(e,t,i="0"){let a=new r.f;return a=a.append("meterTypeId",""+e),a=a.append("groupId",""+t),a=a.append("clientId",""+i),this.http.get(this.baseUrl+"/devicelistreplacements/v1/type/group/meterListFilterByClient",{params:a})}getV1DeviceGroupMeterListWithoutFlowTypeFilter(e,t,i="0"){let a=new r.f;return a=a.append("meterTypeId",""+e),a=a.append("groupId",""+t),a=a.append("clientId",""+i),this.http.get(this.baseUrl+"/devicelistreplacements/V1/type/group/meterListFilterByClientWithoutFlowTypeFilter",{params:a})}getV1MeterList(e=0){let t=new r.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterListFilterByClient",{params:t})}getClients(){return this.http.get(this.baseUrl+"/devicelistreplacements/v1/clients")}getV1MeterGroupList(e=0){let t=new r.f;return t=t.append("meterTypeId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterGroups",{params:t})}}return e.\u0275fac=function(t){return new(t||e)(s.Xb(r.c),s.Xb(a.a))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},YaQ2:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var r=i("fXoL"),a=i("ofXK");function s(e,t){if(1&e&&(r.Tb(0,"small"),r.Rc(1),r.Ob(2,"br"),r.Sb()),2&e){const e=t.$implicit;r.Cb(1),r.Tc(" ",e," ")}}function n(e,t){if(1&e&&(r.Tb(0,"div"),r.Pc(1,s,3,1,"small",1),r.Sb()),2&e){const e=r.fc();r.Cb(1),r.mc("ngForOf",e.listOfErrors())}}let c=(()=>{class e{constructor(){this.PATTERN_ERROR_MESSAGE={"/^[a-zA-Z ]*$/":"Accepts only alphabets with spaces","/^[a-zA-Z0-9]*$/":"Accepts only alphanumeric values with no spaces","/^[a-zA-Z0-9 ]*$/":"Accepts only alphanumeric values with spaces","/^[0-9]*$/":"Accepts only numbers","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{3,4}$":"Enter valid email address of format test@mail.com"},this.ERROR_MESSAGE={required:()=>"This field is required",minlength:e=>`Min ${e.requiredLength} chars is required but got only ${e.actualLength}`,maxlength:e=>`Max chars allowed is ${e.requiredLength} but got ${e.actualLength}`,pattern:e=>""+this.PATTERN_ERROR_MESSAGE[e.requiredPattern],email:()=>"Enter valid email address of format test@mail.com"}}ngOnInit(){}shouldShowErrors(){return this.ctrl&&this.ctrl.errors&&this.ctrl.touched}listOfErrors(){return Object.keys(this.ctrl.errors).map(e=>this.ERROR_MESSAGE[e](this.ctrl.getError(e)))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Hb({type:e,selectors:[["app-show-errors"]],inputs:{ctrl:"ctrl"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&r.Pc(0,n,2,1,"div",0),2&e&&r.mc("ngIf",t.shouldShowErrors())},directives:[a.o,a.n],styles:["small[_ngcontent-%COMP%]{color:red}"]}),e})()},"a+RD":function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var r=i("fXoL"),a=i("xgIS"),s=i("/uUt"),n=i("Kj3r"),c=i("ofXK"),l=i("STbY"),o=i("XiUz"),m=i("NFeN"),p=i("bTqV"),u=i("bSwM"),d=i("3Pt+");const b=["filter"];function h(e,t){if(1&e&&(r.Tb(0,"button",12),r.Tb(1,"mat-icon"),r.Rc(2,"filter_list"),r.Sb(),r.Sb()),2&e){r.fc(2);const e=r.Ac(3);r.mc("matMenuTriggerFor",e)}}function f(e,t){if(1&e&&(r.Tb(0,"div",5),r.Tb(1,"div",6),r.Rc(2),r.Sb(),r.Tb(3,"div",7),r.Tb(4,"mat-icon",8),r.Rc(5,"search"),r.Sb(),r.Ob(6,"input",9,10),r.Sb(),r.Pc(8,h,3,1,"button",11),r.kc(9,1),r.Sb()),2&e){const e=r.fc();r.Cb(2),r.Sc(e.name),r.Cb(6),r.mc("ngIf",!e.hideFilter)}}function y(e,t){if(1&e){const e=r.Ub();r.Tb(0,"button",13),r.bc("click",(function(i){r.Ec(e);const a=t.$implicit;return r.fc().toggleColumnVisibility(a,i)})),r.Tb(1,"mat-checkbox",14,15),r.bc("ngModelChange",(function(i){return r.Ec(e),t.$implicit.visible=i}))("click",(function(t){return r.Ec(e),t.stopPropagation()})),r.Rc(3),r.Sb(),r.Sb()}if(2&e){const e=t.$implicit;r.Cb(1),r.mc("ngModel",e.visible),r.Cb(2),r.Tc(" ",e.name," ")}}const g=["*",[["",8,"actions"]]],v=["*",".actions"];let S=(()=>{class e{constructor(){this.filterChange=new r.o}ngAfterViewInit(){this.hideHeader||Object(a.a)(this.filter.nativeElement,"keyup").pipe(Object(s.a)(),Object(n.a)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(e,t){t.stopPropagation(),t.stopImmediatePropagation(),e.visible=!e.visible}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Hb({type:e,selectors:[["fury-list"]],viewQuery:function(e,t){var i;1&e&&r.Vc(b,!0),2&e&&r.zc(i=r.cc())&&(t.filter=i.first)},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader",hideFilter:"hideFilter"},outputs:{filterChange:"filterChange"},ngContentSelectors:v,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["class","fury-column-filter","type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(e,t){1&e&&(r.lc(g),r.Tb(0,"div",0),r.Pc(1,f,10,2,"div",1),r.Tb(2,"mat-menu",2,3),r.Pc(4,y,4,2,"button",4),r.Sb(),r.kc(5),r.Sb()),2&e&&(r.Cb(1),r.mc("ngIf",!t.hideHeader),r.Cb(3),r.mc("ngForOf",t.columns))},directives:[c.o,l.e,c.n,o.d,o.c,o.e,o.b,m.a,p.a,l.d,u.a,d.q,d.t],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width:599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width:599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}"],encapsulation:2}),e})()},seMb:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i("3Pt+"),a=i("fXoL");let s=(()=>{class e{constructor(){this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{3,4}$",this.nameValidators=r.y.compose([r.y.required,r.y.minLength(1),r.y.maxLength(256)]),this.optionalNameValidators=r.y.compose([r.y.minLength(1),r.y.maxLength(256),r.y.pattern(/^[a-zA-Z ]*$/)]),this.emailValidators=r.y.compose([r.y.required,r.y.pattern(this.emailPattern)]),this.mobileNumberValidators=r.y.compose([r.y.required,r.y.pattern(/^[0-9]*$/)]),this.addressValidators=r.y.compose([r.y.required,r.y.minLength(1),r.y.maxLength(256),r.y.pattern(/^[a-zA-Z0-9 ]*$/)]),this.subjectValidator=r.y.compose([r.y.required,r.y.minLength(1),r.y.maxLength(1e3),r.y.pattern(/^[a-zA-Z0-9 ]*$/)]),this.optionsAddressValidators=r.y.compose([r.y.minLength(1),r.y.maxLength(256),r.y.pattern(/^[a-zA-Z0-9 ]*$/)]),this.postalCodeValidators=r.y.compose([r.y.pattern(/^[a-zA-Z0-9]*$/)]),this.requiredAlphanumericNoSpaces=r.y.compose([r.y.required,r.y.minLength(1),r.y.maxLength(256),r.y.pattern(/^[a-zA-Z0-9]*$/)]),this.passwordValidators=r.y.compose([r.y.required,r.y.minLength(8)])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"yWK+":function(e,t,i){"use strict";i.r(t),i.d(t,"CreateMeterReplacementModule",(function(){return ue}));var r=i("ofXK"),a=i("3Pt+"),s=i("q8Jb"),n=i("0jmt"),c=i("KthW"),l=i("WCGO"),o=i("VE2z"),m=i("tyNb"),p=i("M9IT"),u=i("Dh3D"),d=i("+0xr"),b=i("jtHE"),h=i("pLZG"),f=i("WFQN");class y{constructor(e){this.id=e.id||0,this.replacementDate=e.replacementDate||"",this.deviceName=e.deviceName||"",this.utilityTypeId=e.utilityTypeId||0,this.utilityType=e.utilityType||"",this.unitId=e.unitId||0,this.unitNumber=e.unitNumber||"",this.reading=e.reading||"",this.deviceStatus=e.deviceStatus||"",this.isConnected=e.isConnected||!1,this.remarks=e.remarks||"",this.clientId=e.clientId||0}}var g=i("0IaG"),v=i("seMb"),S=i("sOHO"),T=i("Ooy/"),C=i("m6b6"),w=i("Scjl"),R=i("zSPf"),x=i("fXoL"),I=i("b6Qw"),M=i("/t3+"),L=i("bTqV"),O=i("NFeN"),U=i("MutI"),k=i("4FRi"),P=i("XiUz"),N=i("kmnG"),F=i("qFsG"),A=i("YaQ2"),D=i("/1cH"),E=i("d3UM"),$=i("FKr1");function z(e,t){if(1&e&&(x.Tb(0,"mat-option",28),x.Rc(1),x.Sb()),2&e){const e=t.$implicit;x.mc("value",e.description),x.Cb(1),x.Tc(" ",e.description," ")}}function q(e,t){if(1&e&&(x.Tb(0,"mat-option",28),x.Rc(1),x.Sb()),2&e){const e=t.$implicit;x.mc("value",e.description),x.Cb(1),x.Tc("",e.description," ")}}function G(e,t){if(1&e&&(x.Tb(0,"mat-option",28),x.Rc(1),x.Sb()),2&e){const e=t.$implicit;x.mc("value",e.description),x.Cb(1),x.Tc(" ",e.description," ")}}function V(e,t){if(1&e&&(x.Tb(0,"mat-option",28),x.Rc(1),x.Sb()),2&e){const e=t.$implicit;x.mc("value",e.id),x.Cb(1),x.Tc(" ",e.description,"")}}let j=(()=>{class e{constructor(e,t,i,r,a,s,n,c,l){this.defaults=e,this.dialogRef=t,this.fb=i,this.metadataService=r,this.meterReplacementService=a,this.datePipe=s,this.masterService=n,this.fv=c,this.cookieService=l,t.disableClose=!0}ngOnInit(){this.defaults||(this.defaults=new y({})),this.clientId=parseInt(this.cookieService.get("globalClientId")),this.meterReplacementService.GetUtilityTypes(this.clientId).subscribe(e=>{this.metadataUtilityTypes=e.map(e=>new T.a(e)),this.filteredUtilityTypes=e}),this.masterService.getSystemMasterdata(42,0).subscribe(e=>{this.metadataDeviceStatus=e,this.filteredDeviceStatus=e});let e=new Date,t=("0"+e.getDate()).slice(-2),i=("0"+(e.getMonth()+1)).slice(-2)+"/"+t+"/"+e.getFullYear();i=new Date(i).toISOString().substr(0,10),this.form=this.fb.group({replacementDate:[this.defaults.replacementDate||i,a.y.required],utilityTypeId:[this.defaults.utilityTypeId||"",a.y.required],utilityType:[this.defaults.utilityType||"",a.y.required],unitId:[this.defaults.unitId||"",a.y.required],unitNumber:[this.defaults.unitNumber||"",a.y.required],id:[this.defaults.id||"",a.y.required],deviceName:[this.defaults.deviceName||"",a.y.required],reading:[this.defaults.reading||"",a.y.required],deviceStatus:[this.defaults.deviceStatus||"",a.y.required],remarks:[this.defaults.remarks||"",a.y.required]}),this.form.controls.utilityType.valueChanges.subscribe(e=>{this.filteredUtilityTypes=this.filterUtilityType(e)}),this.form.controls.unitNumber.valueChanges.subscribe(e=>{this.filteredUnits=this.filterUnit(e)}),this.form.controls.deviceName.valueChanges.subscribe(e=>{this.filteredMeters=this.filterMeters(e)})}filterUtilityType(e){return null!=e?this.metadataUtilityTypes.filter(t=>0===t.description.toLowerCase().indexOf(e.toLowerCase())):this.metadataUtilityTypes}filterUnit(e){return null!=e?this.metadataUnits.filter(t=>0===t.description.toLowerCase().indexOf(e.toLowerCase())):this.metadataUnits}filterMeters(e){return null!=e?this.metadataMeters.filter(t=>0===t.description.toLowerCase().indexOf(e.toLowerCase())):this.metadataMeters}save(){this.createMeterReplacement()}createMeterReplacement(){Object.assign(this.defaults,this.form.value),this.defaults.clientId=this.clientId,this.dialogRef.close(new y(this.defaults))}selectUtilityType(e){this.metadataUtilityTypes.forEach(t=>{e.option.value==t.description&&(this.form.controls.utilityTypeId.setValue(t.id),this.defaults.utilityTypeId=t.id,this.onUtilityTypeSelect(t.id))})}selectUnit(e){this.metadataUnits.forEach(t=>{e.option.value==t.description&&this.form.controls.unitId.setValue(t.id)})}selectMeter(e){this.metadataMeters.forEach(t=>{e.option.value==t.description&&this.form.controls.id.setValue(t.id)})}onUtilityTypeSelect(e){this.clientId=parseInt(this.cookieService.get("globalClientId")),this.meterReplacementService.getAllUnits(this.clientId,e).subscribe(e=>{this.metadataUnits=e.map(e=>new C.a(e)),this.filteredUnits=e}),this.meterReplacementService.GetActiveDevices(this.clientId,e).subscribe(e=>{this.metadataMeters=e.map(e=>new w.a(e)),this.filteredMeters=e})}close(){this.dialogRef.close()}}return e.id=100,e.\u0275fac=function(t){return new(t||e)(x.Nb(g.a),x.Nb(g.h),x.Nb(a.f),x.Nb(S.a),x.Nb(f.a),x.Nb(r.f),x.Nb(R.a),x.Nb(v.a),x.Nb(I.a))},e.\u0275cmp=x.Hb({type:e,selectors:[["fury-meter-replacement-create-update"]],decls:82,vars:16,consts:[["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"fx-spacer"],["mat-icon-button","",3,"click"],["title","Close","mat-list-icon",""],[3,"formGroup","ngSubmit"],[1,"mat-dlg-content"],[1,"padding-top"],[1,"person"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","20px"],["fxFlex",""],["type","date","formControlName","replacementDate","matInput",""],[3,"ctrl"],["matInput","","formControlName","utilityType",3,"matAutocomplete"],[3,"optionSelected"],["utility","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","unitNumber",3,"matAutocomplete"],["unit","matAutocomplete"],["fxFlex","",1,"titleSelector"],["matInput","","formControlName","deviceName",3,"matAutocomplete"],["meter","matAutocomplete"],["type","number","formControlName","reading","matInput",""],["formControlName","deviceStatus"],["value","0"],["type","text","formControlName","remarks","matInput",""],["fxLayout","row","fxLayoutAlign","end center"],["mat-button","",3,"disabled"],[3,"value"]],template:function(e,t){if(1&e&&(x.Tb(0,"div",0),x.Tb(1,"mat-toolbar",1),x.Tb(2,"span"),x.Rc(3,"Meter Replacement"),x.Sb(),x.Ob(4,"span",2),x.Tb(5,"button",3),x.bc("click",(function(){return t.close()})),x.Tb(6,"mat-icon",4),x.Rc(7,"close"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(8,"form",5),x.bc("ngSubmit",(function(){return t.save()})),x.Tb(9,"mat-dialog-content",6),x.Tb(10,"fury-card"),x.Tb(11,"fury-card-content",7),x.Tb(12,"div",8),x.Tb(13,"div",9),x.Tb(14,"mat-form-field",10),x.Tb(15,"mat-label"),x.Rc(16,"Date"),x.Sb(),x.Ob(17,"input",11),x.Ob(18,"app-show-errors",12),x.Tb(19,"mat-hint"),x.Rc(20,"Please select Date"),x.Sb(),x.Sb(),x.Tb(21,"mat-form-field",10),x.Tb(22,"mat-label"),x.Rc(23,"Utility Type"),x.Sb(),x.Ob(24,"input",13),x.Tb(25,"mat-autocomplete",14,15),x.bc("optionSelected",(function(e){return t.selectUtilityType(e)})),x.Pc(27,z,2,2,"mat-option",16),x.Sb(),x.Ob(28,"app-show-errors",12),x.Tb(29,"mat-hint"),x.Rc(30,"Please select a Utility Type"),x.Sb(),x.Sb(),x.Tb(31,"mat-form-field",10),x.Tb(32,"mat-label"),x.Rc(33,"Unit"),x.Sb(),x.Ob(34,"input",17),x.Tb(35,"mat-autocomplete",14,18),x.bc("optionSelected",(function(e){return t.selectUnit(e)})),x.Pc(37,q,2,2,"mat-option",16),x.Sb(),x.Ob(38,"app-show-errors",12),x.Tb(39,"mat-hint"),x.Rc(40,"Please select a Unit"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(41,"div",8),x.Tb(42,"div",9),x.Tb(43,"mat-form-field",19),x.Tb(44,"mat-label"),x.Rc(45,"Meter"),x.Sb(),x.Ob(46,"input",20),x.Tb(47,"mat-autocomplete",14,21),x.bc("optionSelected",(function(e){return t.selectMeter(e)})),x.Pc(49,G,2,2,"mat-option",16),x.Sb(),x.Ob(50,"app-show-errors",12),x.Tb(51,"mat-hint"),x.Rc(52,"Please select a Meter"),x.Sb(),x.Sb(),x.Tb(53,"mat-form-field",10),x.Tb(54,"mat-label"),x.Rc(55,"Reading"),x.Sb(),x.Ob(56,"input",22),x.Ob(57,"app-show-errors",12),x.Tb(58,"mat-hint"),x.Rc(59,"Please enter meter reading"),x.Sb(),x.Sb(),x.Tb(60,"mat-form-field",10),x.Tb(61,"mat-label"),x.Rc(62,"Device Status"),x.Sb(),x.Tb(63,"mat-select",23),x.Tb(64,"mat-option",24),x.Rc(65,"--Select--"),x.Sb(),x.Pc(66,V,2,2,"mat-option",16),x.Sb(),x.Ob(67,"app-show-errors",12),x.Tb(68,"mat-hint"),x.Rc(69,"Please select Device Status"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(70,"div",8),x.Tb(71,"div",9),x.Tb(72,"mat-form-field",10),x.Tb(73,"mat-label"),x.Rc(74,"Remarks"),x.Sb(),x.Ob(75,"input",25),x.Ob(76,"app-show-errors",12),x.Tb(77,"mat-hint"),x.Rc(78,"Please enter remarks"),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Sb(),x.Tb(79,"mat-dialog-actions",26),x.Tb(80,"button",27),x.Rc(81,"CREATE METER REPLACEMENT"),x.Sb(),x.Sb(),x.Sb()),2&e){const e=x.Ac(26),i=x.Ac(36),r=x.Ac(48);x.Cb(8),x.mc("formGroup",t.form),x.Cb(10),x.mc("ctrl",t.form.get("replacementDate")),x.Cb(6),x.mc("matAutocomplete",e),x.Cb(3),x.mc("ngForOf",t.filteredUtilityTypes),x.Cb(1),x.mc("ctrl",t.form.get("utilityTypeId")),x.Cb(6),x.mc("matAutocomplete",i),x.Cb(3),x.mc("ngForOf",t.filteredUnits),x.Cb(1),x.mc("ctrl",t.form.get("unitId")),x.Cb(8),x.mc("matAutocomplete",r),x.Cb(3),x.mc("ngForOf",t.filteredMeters),x.Cb(1),x.mc("ctrl",t.form.get("id")),x.Cb(7),x.mc("ctrl",t.form.get("reading")),x.Cb(9),x.mc("ngForOf",t.metadataDeviceStatus),x.Cb(1),x.mc("ctrl",t.form.get("deviceStatus")),x.Cb(9),x.mc("ctrl",t.form.get("remarks")),x.Cb(4),x.mc("disabled",!t.form.valid)}},directives:[g.i,M.a,L.a,O.a,U.c,a.z,a.r,a.k,g.f,k.a,k.c,P.d,P.e,N.d,P.b,N.h,a.c,F.b,a.q,a.i,A.a,N.g,D.c,D.a,r.n,a.u,E.a,$.n,g.c,P.c],styles:[".task-header[_ngcontent-%COMP%]{background-color:transparent;padding:0 5px;height:20px}.fx-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),e})();var H=i("KHMF"),X=i("sXtk"),K=i("dNgK"),Z=i("xBcV"),_=i("Hbgg"),Q=i("rnAf"),W=i("rvYj"),J=i("a+RD");function Y(e,t){if(1&e&&(x.Tb(0,"th",14),x.Rc(1),x.Sb()),2&e){const e=x.fc(2).$implicit;x.Cb(1),x.Tc(" ",e.name,"")}}function B(e,t){if(1&e&&(x.Tb(0,"td",15),x.Rc(1),x.Sb()),2&e){const e=t.$implicit,i=x.fc(2).$implicit;x.Cb(1),x.Tc(" ",e[i.property]," ")}}function ee(e,t){if(1&e&&(x.Rb(0,11),x.Pc(1,Y,2,1,"th",12),x.Pc(2,B,2,1,"td",13),x.Qb()),2&e){const e=x.fc().$implicit;x.mc("matColumnDef",e.property)}}function te(e,t){if(1&e&&(x.Rb(0),x.Pc(1,ee,3,1,"ng-container",10),x.Qb()),2&e){const e=t.$implicit;x.Cb(1),x.mc("ngIf",e.isModelProperty)}}function ie(e,t){1&e&&x.Ob(0,"tr",16)}function re(e,t){1&e&&x.Ob(0,"tr",17)}const ae=function(){return[]},se=[{path:"",component:(()=>{class e{constructor(e,t,i,r,a,s){var n;this.meterReplacementService=e,this.snackbar=t,this.date=i,this.dialog=r,this.cookieService=a,this.envService=s,this.subject$=new b.a(1),this.data$=this.subject$.asObservable(),this.dateFormat="",this.displayedColumns=[{name:"Date",property:"replacementDateLocal",visible:!0,isModelProperty:!0},{name:"Meter Name",property:"deviceName",visible:!0,isModelProperty:!0},{name:"Utility Type",property:"utilityType",visible:!0,isModelProperty:!0},{name:"Last Reading",property:"reading",visible:!0,isModelProperty:!0},{name:"Issue",property:"remarks",visible:!0,isModelProperty:!0}],this.pageSize=8,this.columnsProps=this.displayedColumns.map(e=>e.property),this.dateFormat=null!==(n=Object(H.e)("DateFormat"))&&void 0!==n?n:s.dateFormat}set content(e){this.sort=e,this.sort&&(this.dataSource.sort=this.sort)}get visibleColumns(){return this.displayedColumns.filter(e=>e.visible).map(e=>e.property)}ngOnInit(){this.getReplacedMetersList()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}notificationMessage(e,t){this.snackbar.open(e,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[t]})}createMeterReplacements(){this.dialog.open(j).afterClosed().subscribe(e=>{e&&this.meterReplacementService.createMeterReplacement(e).subscribe({next:e=>{this.snackbar.open("Meter Replaced successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),this.getReplacedMetersList()},error:e=>{this.notificationMessage("Meter Replacement failed.","red-snackbar")}})})}onFilterChange(e){this.dataSource&&(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}getReplacedMetersList(){this.clientId=parseInt(this.cookieService.get("globalClientId")),this.meterReplacementService.getReplacedMeters(this.clientId).subscribe({next:e=>{e=e.map(e=>new y(e)),this.subject$.next(e)},error:e=>{this.notificationMessage("Meter Replacements Not Found.","red-snackbar")}}),this.dataSource=new d.k(this.meterReplacements),this.data$.pipe(Object(h.a)(e=>!!e)).subscribe(e=>{this.meterReplacements=e,e.forEach(e=>{e.replacementDateLocal=this.date.transform(e.replacementDate.toString(),this.dateFormat.toString())}),this.dataSource.data=e}),this.ngAfterViewInit()}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(x.Nb(f.a),x.Nb(K.b),x.Nb(r.f),x.Nb(g.b),x.Nb(I.a),x.Nb(X.a))},e.\u0275cmp=x.Hb({type:e,selectors:[["fury-create-meter-replacement"]],viewQuery:function(e,t){var i;1&e&&(x.Jc(p.a,!0),x.Vc(u.a,!0)),2&e&&(x.zc(i=x.cc())&&(t.paginator=i.first),x.zc(i=x.cc())&&(t.content=i.first))},inputs:{displayedColumns:"displayedColumns"},decls:14,vars:10,consts:[["mode","card"],["current","Meter Replacements",3,"crumbs"],["name","Meter Replacements",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(e,t){1&e&&(x.Tb(0,"fury-page-layout",0),x.Tb(1,"fury-page-layout-header"),x.Ob(2,"fury-breadcrumbs",1),x.Sb(),x.Tb(3,"fury-page-layout-content"),x.Tb(4,"fury-list",2),x.bc("filterChange",(function(e){return t.onFilterChange(e)})),x.Tb(5,"div",3),x.Tb(6,"button",4),x.bc("click",(function(){return t.createMeterReplacements()})),x.Tb(7,"mat-icon"),x.Rc(8,"add"),x.Sb(),x.Sb(),x.Sb(),x.Tb(9,"table",5),x.Pc(10,te,2,1,"ng-container",6),x.Pc(11,ie,1,0,"tr",7),x.Pc(12,re,1,0,"tr",8),x.Sb(),x.Ob(13,"mat-paginator",9),x.Sb(),x.Sb(),x.Sb()),2&e&&(x.Cb(2),x.mc("@fadeInRight",void 0)("crumbs",x.qc(9,ae)),x.Cb(1),x.mc("@fadeInUp",void 0),x.Cb(1),x.mc("columns",t.displayedColumns),x.Cb(5),x.mc("dataSource",t.dataSource),x.Cb(1),x.mc("ngForOf",t.displayedColumns),x.Cb(1),x.mc("matHeaderRowDef",t.visibleColumns),x.Cb(1),x.mc("matRowDefColumns",t.visibleColumns),x.Cb(1),x.mc("pageSize",t.pageSize))},directives:[Z.a,_.a,Q.a,W.a,J.a,L.a,O.a,d.j,u.a,r.n,d.g,d.i,p.a,r.o,d.c,d.e,d.b,d.d,u.b,d.a,d.f,d.h],styles:[""]}),e})()}];let ne=(()=>{class e{}return e.\u0275mod=x.Lb({type:e}),e.\u0275inj=x.Kb({factory:function(t){return new(t||e)},imports:[[m.j.forChild(se)],m.j]}),e})();var ce=i("GiUZ"),le=i("YUcS"),oe=i("QibW"),me=i("wZkO");let pe=(()=>{class e{}return e.\u0275mod=x.Lb({type:e}),e.\u0275inj=x.Kb({factory:function(t){return new(t||e)},imports:[[r.c,a.l,o.a,n.a,a.w,le.a,c.a,g.g,F.c,L.b,O.b,oe.c,E.b,me.c,ce.a]]}),e})(),ue=(()=>{class e{}return e.\u0275mod=x.Lb({type:e}),e.\u0275inj=x.Kb({factory:function(t){return new(t||e)},imports:[[r.c,a.l,c.a,l.a,ne,ce.a,a.w,o.a,pe,n.a,s.a]]}),e})()}}]);