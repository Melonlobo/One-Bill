!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"7d4Y":function(e,a,i){"use strict";i.d(a,"a",(function(){return o}));var l=i("tk/3"),r=i("sXtk"),s=i("fXoL"),o=function(){var e=function(){function e(n,a){t(this,e),this.http=n,this.envService=a,this.baseUrl="",this.baseUrl=a.backend}return n(e,[{key:"getTenantsDetails",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.http.get("".concat(this.baseUrl,"/billsettlement/tenants/").concat(t,"/").concat(e))}},{key:"getUnits",value:function(t){return this.http.get(this.baseUrl+"/billsettlement/units/"+t)}},{key:"getAccountNumbers",value:function(t){return this.http.get(this.baseUrl+"/billsettlement/AccountNumbers/"+t)}},{key:"getPaymentModes",value:function(){return this.http.get(this.baseUrl+"/billsettlement/paymentmodes")}},{key:"getBanks",value:function(t){var e=new l.f;return t&&(e=(e=(e=e.append("unitNumber",""+t.unitNumber)).append("tenantId",""+t.tenantId)).append("phoneNumber",""+t.phoneNumber)),this.http.get(this.baseUrl+"/billsettlement/banks",{params:e})}},{key:"getBillSettlementDetails",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=(e=(e=e.append("unitNumber",""+t.unitNumber)).append("tenantId",""+t.tenantId)).append("billPeriodId",""+t.billPeriodId)).append("settlementDate",""+t.settlementDate)).append("billType",""+t.billType)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/finalsettlement/details",{params:e})}},{key:"getBillDetails",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=e.append("utilityTypeId",""+t.utilityTypeId)).append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)).append("tenantId",""+t.tenantId)),this.http.get(this.baseUrl+"/billsettlement/unbilledconsumption",{params:e})}},{key:"generateBillDetails",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/generate/unbilledconsumption",t)}},{key:"getOutStandingBillDetails",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=(e=(e=e.append("unitNumber",""+t.unitNumber)).append("tenantId",""+t.tenantId)).append("billPeriodId",""+t.billPeriodId)).append("settlementDate",""+t.settlementDate)).append("billType",""+t.billType)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/outstandingbills",{params:e})}},{key:"getTenantBillDetails",value:function(t){var e=new l.f;return e=e.append("tenantId",""+t),this.http.get(this.baseUrl+"/billsettlement/outstandingbills",{params:e})}},{key:"saveUnBilledConsumptions",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/unbilledconsumption",t)}},{key:"saveOutstandingBills",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/outstandingbills",t)}},{key:"saveBillPayments",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/billpayments",t)}},{key:"getInvoiceBillDetails",value:function(t){var e=new l.f;return t&&(e=e.append("billMasterId",""+t)),this.http.get(this.baseUrl+"/template/billmasterdetails",{params:e})}},{key:"getReceiptDetails",value:function(t){var e=new l.f;return t&&(e=e.append("paymentId",""+t)),this.http.get(this.baseUrl+"/template/paymentdetails",{params:e})}},{key:"saveRefund",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/refund",t)}},{key:"getBillFailDetails",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=(e=(e=(e=(e=e.append("consumptionType",""+t.consumptionTypeId)).append("utilityTypeId",""+t.utilityTypeId)).append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("days",""+t.days)).append("percentage",""+t.percentage)).append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/failed/bills",{params:e})}},{key:"saveConsumptionRange",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/consumption/range",t)}},{key:"updateFaileBillsStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/failed/bills/update",t)}},{key:"updateBillMasterSyncStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/sync/bills/update",t)}},{key:"updatePaymentSyncStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/sync/payment/update",t)}},{key:"updateRefundSyncStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/sync/refund/update",t)}},{key:"updateCreditNoteSyncStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/sync/creditnote/update",t)}},{key:"deleteConsumptionAlert",value:function(t,e){return this.http.put(this.baseUrl+"/billsettlement/consumptionAlert/delete/"+t,e)}},{key:"invoiceGeneration",value:function(t){return this.http.post(this.baseUrl+"/file/report/invoice/generate",t)}},{key:"updateBillMasterApprovedStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/approved/bills/update",t)}},{key:"regenerateRejectedBillMasters",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/regenerate/billmasters",t)}},{key:"generateOtherTypeInvoiceDetail",value:function(t,e){var n=new l.f;return n=(n=n.append("clientId",""+t)).append("contractId",""+e),this.http.post("".concat(this.baseUrl,"/billsettlement/contract/invoice/billmaster/").concat(t,"/").concat(e),null)}},{key:"updateOtherTypeConsumption",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/othertype/consumption/update",t)}},{key:"updatBillMasterRejectedStatus",value:function(t){return this.http.put(this.baseUrl+"/billsettlement/rejected/bills/update",t)}},{key:"saveCreditNote",value:function(t){return this.http.post(this.baseUrl+"/billsettlement/creditnote",t)}},{key:"getCreditNoteDetails",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/creditnote/history",{params:e})}},{key:"getConsumptioSavedAlertDetails",value:function(t){var e,n,a=new l.f;return t&&(a=(a=(a=a.append("consumptionTypeId",""+(null!==(e=t.consumptionTypeId)&&void 0!==e?e:0))).append("utilityTypeId",""+(null!==(n=t.utilityTypeId)&&void 0!==n?n:0))).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/saved/consumption/range/details",{params:a})}},{key:"getConumptionAlertDetails",value:function(t){var e,n,a,i,r,s=new l.f;return t&&(s=(s=(s=(s=(s=(s=(s=(s=(s=s.append("consumptionTypeId",""+t.consumptionTypeId)).append("utilityTypeId",""+t.utilityTypeId)).append("fromDate",""+(null!==(e=t.fromDate)&&void 0!==e?e:""))).append("startDate",""+(null!==(n=t.startDate)&&void 0!==n?n:""))).append("endDate",""+(null!==(a=t.endDate)&&void 0!==a?a:""))).append("percentage",""+t.percentage)).append("fromBillPeriodId",""+(null!==(i=t.fromBillPeriodId)&&void 0!==i?i:0))).append("toBillPeriodId",""+(null!==(r=t.toBillPeriodId)&&void 0!==r?r:0))).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/billsettlement/consumption/alert",{params:s})}},{key:"getRefundAmount",value:function(t,e){var n=new l.f;return t&&(n=(n=n.append("ownerId",""+t)).append("paymentId",""+e)),this.http.get(this.baseUrl+"/billsettlement/refundAmount",{params:n})}},{key:"creditNoteSummaryView",value:function(t){return this.http.post(this.baseUrl+"/file/report/creditnote/summary",t)}},{key:"creditNoteView",value:function(t){return this.http.post(this.baseUrl+"/file/report/creditnote",t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Xb(l.c),s.Xb(r.a))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},lW2b:function(e,a,i){"use strict";i.d(a,"a",(function(){return o}));var l=i("tk/3"),r=i("sXtk"),s=i("fXoL"),o=function(){var e=function(){function e(n,a){t(this,e),this.http=n,this.envService=a,this.baseUrl="",this.baseUrl=a.backend}return n(e,[{key:"getUtilityTypes",value:function(){return this.http.get(this.baseUrl+"/bills/utilitytypes")}},{key:"getBillPeriods",value:function(t){return this.http.get(this.baseUrl+"/bills/billperiods/"+t)}},{key:"saveAdvancePayment",value:function(t){return this.http.post(this.baseUrl+"/bills/advancepayment",t)}},{key:"getBillHistory",value:function(t){var e=new l.f;return t&&(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate),t.billPeriodId&&(e=e.append("billPeriodId",""+t.billPeriodId)),t.billFeeType&&(e=e.append("billFeeType",""+t.billFeeType)),t.billType&&(e=e.append("billType",""+t.billType)),t.tenantId&&(e=e.append("ownerId",""+t.tenantId)),t.clientId&&(e=e.append("clientId",""+t.clientId))),this.http.get(this.baseUrl+"/bills/billhistory",{params:e})}},{key:"getAccountStatement",value:function(t){var e=new l.f;return t&&(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate),t.tenantId&&(e=e.append("ownerId",""+t.tenantId)),t.clientId&&(e=e.append("clientId",""+t.clientId))),this.http.get(this.baseUrl+"/bills/account/statement",{params:e})}},{key:"getPaymentHistory",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("paymentMode",""+t.paymentMode)).append("paymentId",""+t.paymentId)).append("ownerId",""+t.tenantId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/paymenthistory",{params:e})}},{key:"getPaymentDetail",value:function(t,e){var n=new l.f;return t&&(n=n.append("paymentId",""+t)),e&&(n=n.append("clientId",""+e)),this.http.get(this.baseUrl+"/bills/payment/detail",{params:n})}},{key:"cancelBillHistory",value:function(t){var e={headers:new l.e({"Content-Type":"application/json"}),body:t};return this.http.delete(this.baseUrl+"/billsettlement/CancelBillHistory",e)}},{key:"getBillCancelledHistory",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/billcancelhistory",{params:e})}},{key:"cancelPaymentHistory",value:function(t){var e={headers:new l.e({"Content-Type":"application/json"}),body:t};return this.http.delete(this.baseUrl+"/billsettlement/CancelPaymentHistory",e)}},{key:"getPaymentCancelHistory",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("paymentMode",""+t.paymentMode)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/paymentcancelhistory",{params:e})}},{key:"getUtilities",value:function(t){return this.http.get(this.baseUrl+"/dashboard/"+t+"/Utilities")}},{key:"GetPaymentDue",value:function(t,e,n,a,i){var r=new l.f;return r=(r=(r=(r=(r=r.append("fromDate",""+t)).append("toDate",""+e)).append("billPeriodId",""+n)).append("ownerId",""+a)).append("clientId",""+i),this.http.get(this.baseUrl+"/bills/paymentdue",{params:r})}},{key:"GetRefundReport",value:function(t,e,n,a){var i=new l.f;return i=(i=(i=(i=i.append("fromDate",""+t)).append("toDate",""+e)).append("ownerId",""+n)).append("clientId",""+a),this.http.get(this.baseUrl+"/bills/refund",{params:i})}},{key:"getInvoiceAgingReport",value:function(t,e){var n=new l.f;return n=(n=n.append("clientId",""+t)).append("toDate",""+e),this.http.get(this.baseUrl+"/bills/invoiceAging",{params:n})}},{key:"getConsolidatedData",value:function(t,e){var n=new l.f;return n=(n=n.append("clientId",""+t)).append("billPeriodId",""+e),this.http.get(this.baseUrl+"/bills/consolidatedReport",{params:n})}},{key:"getAdvancePaymentDetails",value:function(t){var e=new l.f;return t&&(e=(e=(e=(e=e.append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("ownerId",""+t.tenantId)).append("clientId",""+t.clientId)),this.http.get(this.baseUrl+"/bills/advancePaymentDetails",{params:e})}},{key:"adjustBillsWithAdvance",value:function(t){var e=new l.f;return e=e.append("ownerId",""+t),this.http.put("".concat(this.baseUrl,"/billsettlement/adjustBillsWithAdvance/").concat(t),null)}},{key:"getAdvanceInHandForOwnerTenant",value:function(t){var e=new l.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/bills/advanceInHandForOwnerTenant",{params:e})}},{key:"updateIsFailedStatusInBills",value:function(t){return this.http.put(this.baseUrl+"/bills/isFailed/update",t)}},{key:"UpdateIsBillFailedStatusInBillMaster",value:function(t){return this.http.put(this.baseUrl+"/bills/isBillFailed/update/billMaster",t)}},{key:"invoiceView",value:function(t){return this.http.post(this.baseUrl+"/file/report/invoice",t)}},{key:"receiptView",value:function(t){return this.http.post(this.baseUrl+"/file/report/receipt",t)}},{key:"sdReceiptView",value:function(t){return this.http.post(this.baseUrl+"/file/report/sdreceipt",t)}},{key:"accountStatementView",value:function(t){return this.http.post(this.baseUrl+"/file/report/account/statement",t)}},{key:"accountStatementSummaryView",value:function(t){return this.http.post(this.baseUrl+"/file/report/account/statement/summary",t)}},{key:"billSummaryView",value:function(t){return this.http.post(this.baseUrl+"/file/report/bill/summary",t)}},{key:"billConsumptionDetails",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new l.f;return t&&(n=(n=(n=(n=(n=n.append("billPeriodId",""+t.billPeriodId)).append("clientId",""+t.clientId)).append("fromDate",""+t.fromDate)).append("toDate",""+t.toDate)).append("isApproved",""+e)),this.http.get(this.baseUrl+"/bills/consumption/details",{params:n})}},{key:"invoicePreview",value:function(t){return this.http.post(this.baseUrl+"/file/report/invoice/preview",t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Xb(l.c),s.Xb(r.a))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},xZJV:function(e,a,i){"use strict";i.r(a),i.d(a,"AdvanceInHandModule",(function(){return K}));var l,r,s,o=i("3Pt+"),p=i("9xt4"),u=i("y/v/"),c=i("ofXK"),d=i("KthW"),h=i("WCGO"),m=i("QMK6"),b=i("VE2z"),y=i("q8Jb"),f=i("kmnG"),v=i("qFsG"),g=i("jaxi"),I=i("NFeN"),k=i("STbY"),D=i("0jmt"),w=i("/t3+"),U=i("Qu3c"),P=i("tyNb"),S=i("Ku73"),T=i("nStZ"),N=i("lW2b"),C=i("7d4Y"),A=i("a8hA"),B=i("KHMF"),x=i("EUZL"),F=i("fXoL"),O=i("b6Qw"),j=i("Nm8O"),M=i("dNgK"),H=i("xBcV"),R=i("rvYj"),V=i("XiUz"),L=i("bTqV"),X=i("4FRi"),_=i("uxLP"),E=["htmlData"],G=[{path:"",component:(l=function(){function e(n,a,i,l,r,s,o){t(this,e),this.billService=n,this.cookieService=a,this.currency=i,this.jwtHelperService=l,this.billSettlementService=r,this.clientSelectionService=s,this.snackbar=o,this.advancePayments=[],this.selectedRows=[],this.tenants=[],this.columns=[],this.manageParams={},this.columnNames=[],this.currencyFormat="",this.roundFormat="",this.role="",this.accountNumber="Account Number",this.ownerNameColumnName="Owner/Tenant",this.advanceAmountColumnName="Advance Amount",this.currencyFormat=Object(B.e)("Currency"),this.roundFormat=Object(B.e)("RoundOff")}return n(e,[{key:"notificationMessage",value:function(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}},{key:"ngOnInit",value:function(){this.clientSelectionService.setIsClientVisible(!0);var t=this.cookieService.get("access_token"),e=this.jwtHelperService.decodeToken(t);e&&(this.role=e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]),this.getTenants(),this.createColumnNames(),this.createGridColumns(),this.clientId=parseInt(this.cookieService.get("globalClientId")),this.getAdvancePaymentDetails()}},{key:"createGridColumns",value:function(){this.columns=["accountNumber","ownerName","advanceAmountLocal"]}},{key:"createColumnNames",value:function(){this.columnNames=[{name:this.accountNumber,property:"accountNumber"},{name:this.ownerNameColumnName,property:"ownerName"},{name:this.advanceAmountColumnName,property:"advanceAmountLocal",columnAlign:{"text-align":"right"}}]}},{key:"getTenants",value:function(){var t=this;this.clientId=parseInt(this.cookieService.get("globalClientId")),this.billSettlementService.getTenantsDetails(this.clientId).subscribe((function(e){t.tenants=e}))}},{key:"getAdvancePaymentDetails",value:function(){var t=this;this.advancePayments=[],this.billService.getAdvanceInHandForOwnerTenant(this.clientId).subscribe((function(e){t.roundFormat=Object(B.e)("RoundOff"),t.currencyFormat=Object(B.e)("Currency"),e.forEach((function(e){e.advanceAmountLocal=t.currency.transform(e.advanceAmount,t.currencyFormat.toString(),!0,t.roundFormat)})),t.advancePayments=e}))}},{key:"getJsonData",value:function(){var t=this;this.tableData=[],null!=this.advancePayments&&this.advancePayments.forEach((function(e){var n={AccountNumber:e.accountNumber,OwnerName:e.ownerName,AdvanceAmount:t.currency.transform(e.advanceAmount,t.currencyFormat.toString(),!0,t.roundFormat)};t.tableData.push(n)}))}},{key:"onExport",value:function(){if(this.advancePayments&&this.advancePayments.length>0){if(this.getJsonData(),null!=this.tableData&&this.tableData.length>0){var t=x.utils.json_to_sheet(this.tableData),e=x.utils.book_new();x.utils.book_append_sheet(e,t,"Sheet1"),x.writeFile(e,"AdvanceInHand.xlsx")}}else this.notificationMessage("No Data to Export","yellow-snackbar")}},{key:"visibleColumns",get:function(){return this.columns.filter((function(t){return t.visible})).map((function(t){return t.property}))}}]),e}(),l.\u0275fac=function(t){return new(t||l)(F.Nb(N.a),F.Nb(O.a),F.Nb(c.d),F.Nb(j.a),F.Nb(C.a),F.Nb(A.a),F.Nb(M.b))},l.\u0275cmp=F.Hb({type:l,selectors:[["fury-advance-in-hand"]],viewQuery:function(t,e){var n;1&t&&F.Vc(E,!0),2&t&&F.zc(n=F.cc())&&(e.htmlData=n.first)},decls:14,vars:5,consts:[["mode","card",2,"margin-top","27px"],["fxLayout","column"],["color","primary",1,"position-fixed"],["src","assets/img/fav-icon.png",1,"img-style"],[1,"toolbar-spacer"],["matTooltip","Export","mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],["fxFlex","grow",1,"basic-forms","route-animations-elements"],["fxLayout","column",1,"padding-top"],["fxLayout","column",1,"result","padding-top"],[3,"hideHeader","tableData","columnsToDisplay","columnNames"]],template:function(t,e){1&t&&(F.Tb(0,"fury-page-layout",0),F.Tb(1,"fury-page-layout-content",1),F.Tb(2,"mat-toolbar",2),F.Ob(3,"img",3),F.Tb(4,"span"),F.Rc(5,"Advance In Hand"),F.Sb(),F.Ob(6,"span",4),F.Tb(7,"button",5),F.bc("click",(function(){return e.onExport()})),F.Tb(8,"mat-icon"),F.Rc(9,"import_export"),F.Sb(),F.Sb(),F.Sb(),F.Tb(10,"fury-card",6),F.Tb(11,"fury-card-content",7),F.Tb(12,"div",8),F.Ob(13,"fury-expandable-table-structure",9),F.Sb(),F.Sb(),F.Sb(),F.Sb(),F.Sb()),2&t&&(F.Cb(10),F.mc("@fadeInUp",void 0),F.Cb(3),F.mc("hideHeader",!1)("tableData",e.advancePayments)("columnsToDisplay",e.columns)("columnNames",e.columnNames))},directives:[H.a,R.a,V.d,w.a,L.a,U.a,I.a,X.a,V.b,X.c,_.a],styles:[".toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.button[_ngcontent-%COMP%]{line-height:50px}.img-style[_ngcontent-%COMP%]{width:32px}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}"],data:{animation:[T.a,S.a]}}),l)}],J=((s=function e(){t(this,e)}).\u0275mod=F.Lb({type:s}),s.\u0275inj=F.Kb({factory:function(t){return new(t||s)},imports:[[P.j.forChild(G)],P.j]}),s),K=((r=function e(){t(this,e)}).\u0275mod=F.Lb({type:r}),r.\u0275inj=F.Kb({factory:function(t){return new(t||r)},providers:[c.f,c.g],imports:[[c.c,J,o.l,p.a,u.a,d.a,h.a,o.w,m.a,b.a,D.a,y.a,f.f,v.c,g.c,I.b,k.c,w.b,U.b]]}),r)}}])}();