!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{Nm0R:function(t,n,s){"use strict";s.r(n),s.d(n,"MeterGroupModule",(function(){return j}));var c=s("ofXK"),l=s("0jmt"),o=s("KthW"),a=s("tyNb"),u=s("dDrv"),p=s("/sTe"),d=s("zSPf"),b=s("WFQN"),f=s("fXoL"),h=s("3Pt+"),m=s("dNgK"),v=s("b6Qw"),g=s("XiUz"),y=s("/t3+"),M=s("znSr"),T=s("bTqV"),S=s("Qu3c"),C=s("NFeN"),k=s("Wp6s"),I=s("kmnG"),G=s("d3UM"),w=s("FKr1");function x(e,t){if(1&e&&(f.Tb(0,"mat-option",19),f.Rc(1),f.Sb()),2&e){var i=t.$implicit;f.mc("value",i.id),f.Cb(1),f.Sc(i.description)}}function L(e,t){if(1&e&&(f.Tb(0,"mat-option",19),f.Rc(1),f.Sb()),2&e){var i=t.$implicit;f.mc("value",i.description),f.Cb(1),f.Sc(i.description)}}function O(e,t){if(1&e&&(f.Tb(0,"mat-option",19),f.Rc(1),f.Sb()),2&e){var i=t.$implicit;f.mc("value",i.id),f.Cb(1),f.Sc(i.description)}}function U(e,t){if(1&e){var i=f.Ub();f.Tb(0,"li",20),f.bc("click",(function(){f.Ec(i);var e=t.$implicit;return f.fc().toggleSelection(e,1)})),f.Rc(1),f.Sb()}if(2&e){var n=t.$implicit;f.Fb("item-selected",n.selected),f.Cb(1),f.Tc(" ",n.label,"")}}function P(e,t){if(1&e){var i=f.Ub();f.Tb(0,"li",20),f.bc("click",(function(){f.Ec(i);var e=t.$implicit;return f.fc().toggleSelection(e,2)})),f.Rc(1),f.Sb()}if(2&e){var n=t.$implicit;f.Fb("item-selected",n.selected),f.Cb(1),f.Tc(" ",n.label,"")}}var F,N,R,D=[{path:"",component:(F=function(){function t(e,n,r,s,c,l,o){i(this,t),this.masterService=e,this.alertSettingsEmsService=n,this.estidamaChartService=r,this.fb=s,this.snackbar=c,this.meterReplacementService=l,this.cookieService=o,this.clientId="0",this.lstMeters=[],this.selectedlstMeters=[],this.deviceGroups=[],this.clients=[],this.client=0}return r(t,[{key:"ngOnInit",value:function(){this.getClients(),this.getMeterTypes()}},{key:"getMeterTypes",value:function(){var e=this;this.lstMeterType=[],this.estidamaChartService.getMeterTypes().subscribe((function(t){if(t){var i=t.meterTypeList;i&&i.forEach((function(t){e.lstMeterType.push({id:t.meterTypeID,description:t.meterTypeName})})),e.lstMeterType&&e.lstMeterType.length>0&&(e.meterTypeId=e.lstMeterType[0].id,e.meterTypeName=e.lstMeterType[0].description,e.getDeviceGroups()),e.getMeterList()}}))}},{key:"getDeviceGroups",value:function(){var e=this;this.meterGroupId=0,this.lstMeterGroup=[],this.meterReplacementService.getV1MeterGroupList(this.meterTypeId).subscribe((function(t){e.lstMeterGroup=t}))}},{key:"getMeterList",value:function(){var e=this;this.lstMeters=[],this.selectedlstMeters=[],"0"!=this.clientId&&this.alertSettingsEmsService.getv1MeterList(this.clientId,this.meterTypeId,null==this.meterGroupId?0:this.meterGroupId).subscribe((function(t){t.forEach((function(t){t.defaultValue&&"1"===t.defaultValue?e.selectedlstMeters.push({label:t.description,value:t.id,selected:!1}):e.lstMeters.push({label:t.description,value:t.id,selected:!1})})),e.lstMeters.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedlstMeters.sort((function(e,t){return e.label.localeCompare(t.label)}))}))}},{key:"onMeterTypeChange",value:function(){var e=this;this.lstMeterType.find((function(t){t.description==e.meterTypeName&&(e.meterTypeId=t.id),e.getDeviceGroups()})),this.getMeterList()}},{key:"onMeterGroupChange",value:function(){this.getMeterList()}},{key:"getClients",value:function(){var e=this;this.clients=[],this.meterReplacementService.getClients().subscribe((function(t){t&&(e.clients=t)}))}},{key:"onChangeClient",value:function(e){this.getMeterList()}},{key:"toggleSelection",value:function(e,t){e.selected=!e.selected}},{key:"moveSelected",value:function(e){var t=this;"left"===e?(this.selectedlstMeters.forEach((function(e){e.selected&&t.lstMeters.push(e)})),this.selectedlstMeters=this.selectedlstMeters.filter((function(e){return!e.selected})),this.lstMeters.sort((function(e,t){return e.label.localeCompare(t.label)}))):(this.lstMeters.forEach((function(e){e.selected&&t.selectedlstMeters.push(e)})),this.lstMeters=this.lstMeters.filter((function(e){return!e.selected})),this.selectedlstMeters.sort((function(e,t){return e.label.localeCompare(t.label)})))}},{key:"moveAll",value:function(t){"left"===t?(this.lstMeters=[].concat(e(this.lstMeters),e(this.selectedlstMeters)),this.lstMeters.sort((function(e,t){return e.label.localeCompare(t.label)})),this.selectedlstMeters=[]):(this.selectedlstMeters=[].concat(e(this.selectedlstMeters),e(this.lstMeters)),this.selectedlstMeters.sort((function(e,t){return e.label.localeCompare(t.label)})),this.lstMeters=[])}},{key:"onSave",value:function(){var e=this;this.deviceGroups=[];var t=!0;this.meterTypeId&&this.meterTypeId>0&&this.meterGroupId&&this.meterGroupId>0?(this.alertSettingsEmsService.deleteMeterGroup(this.meterTypeId,this.meterGroupId).subscribe((function(e){t=!!e})),this.meterTypeId&&this.meterGroupId&&this.selectedlstMeters&&this.selectedlstMeters.length&&this.selectedlstMeters.forEach((function(t){var i={meterTypeId:Number(e.meterTypeId),groupId:Number(e.meterGroupId),meterId:Number(t.value)};e.deviceGroups.push(i)})),null!=this.deviceGroups&&this.deviceGroups.length&&this.alertSettingsEmsService.saveCreateMeterGroup(this.deviceGroups).subscribe((function(e){t=!!e})),1==t?this.notificationMessage("Meter group saved successfully","green-snackbar"):this.notificationMessage("Meter group save failed","red-snackbar")):this.notificationMessage("Please select Meter Type and Meter Group.","red-snackbar")}},{key:"notificationMessage",value:function(e,t){this.snackbar.open(e,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[t]})}}]),t}(),F.\u0275fac=function(e){return new(e||F)(f.Nb(d.a),f.Nb(p.a),f.Nb(u.a),f.Nb(h.f),f.Nb(m.b),f.Nb(b.a),f.Nb(v.a))},F.\u0275cmp=f.Hb({type:F,selectors:[["fury-meter-group"]],decls:47,vars:9,consts:[["fxLayout","column","fxLayoutGap","2%",2,"padding","27px"],["color","primary","fxLayout","row","fxLayout.xs","column",1,"position-fixed"],["src","assets/img/fav-icon.png",1,"img-style",3,"fxHide.xs"],["fxLayout","row","fxLayout.xs","column"],[1,"toolbar-spacer"],[1,"fury-flex-form-field"],["matTooltip","Save","mat-icon-button","",1,"material-icons",3,"click"],["fxLayout","column","fxLayoutGap","2%"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","2%"],["fxFlex",""],["name","clientId","id","clientId","placeholder","Client",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["name","meterType","id","meterTypeId","placeholder","Meter Type",3,"ngModel","ngModelChange"],["name","meterGroup","id","meterGroupId","placeholder","Meter Group",3,"ngModel","ngModelChange"],["fxLayout","column","fxLayoutGap","5%"],[1,"container"],[3,"item-selected","click",4,"ngFor","ngForOf"],[1,"buttons-container"],["mat-icon-button","",1,"material-icons",3,"click"],[3,"value"],[3,"click"]],template:function(e,t){1&e&&(f.Tb(0,"div",0),f.Tb(1,"mat-toolbar",1),f.Ob(2,"img",2),f.Tb(3,"span",3),f.Rc(4,"Meter Group "),f.Sb(),f.Ob(5,"span",4),f.Tb(6,"div",5),f.Tb(7,"button",6),f.bc("click",(function(){return t.onSave()})),f.Tb(8,"mat-icon"),f.Rc(9,"save"),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Tb(10,"mat-card"),f.Tb(11,"div",7),f.Tb(12,"div",8),f.Tb(13,"mat-form-field",9),f.Tb(14,"mat-label"),f.Rc(15,"Client"),f.Sb(),f.Tb(16,"mat-select",10),f.bc("ngModelChange",(function(e){return t.clientId=e}))("selectionChange",(function(e){return t.onChangeClient(e)})),f.Pc(17,x,2,2,"mat-option",11),f.Sb(),f.Tb(18,"mat-hint"),f.Rc(19,"Please select Client."),f.Sb(),f.Sb(),f.Tb(20,"mat-form-field",9),f.Tb(21,"mat-select",12),f.bc("ngModelChange",(function(e){return t.meterTypeName=e}))("ngModelChange",(function(){return t.onMeterTypeChange()})),f.Pc(22,L,2,2,"mat-option",11),f.Sb(),f.Sb(),f.Tb(23,"mat-form-field",9),f.Tb(24,"mat-select",13),f.bc("ngModelChange",(function(e){return t.meterGroupId=e}))("ngModelChange",(function(){return t.onMeterGroupChange()})),f.Pc(25,O,2,2,"mat-option",11),f.Sb(),f.Sb(),f.Sb(),f.Tb(26,"div",14),f.Tb(27,"div",15),f.Tb(28,"ul"),f.Rc(29," Meters "),f.Pc(30,U,2,3,"li",16),f.Sb(),f.Tb(31,"div",17),f.Tb(32,"button",18),f.bc("click",(function(){return t.moveSelected("right")})),f.Tb(33,"mat-icon"),f.Rc(34,"arrow_right"),f.Sb(),f.Sb(),f.Tb(35,"button",18),f.bc("click",(function(){return t.moveAll("right")})),f.Tb(36,"mat-icon"),f.Rc(37,"fast_forward"),f.Sb(),f.Sb(),f.Tb(38,"button",18),f.bc("click",(function(){return t.moveSelected("left")})),f.Tb(39,"mat-icon"),f.Rc(40,"arrow_left"),f.Sb(),f.Sb(),f.Tb(41,"button",18),f.bc("click",(function(){return t.moveAll("left")})),f.Tb(42,"mat-icon"),f.Rc(43,"fast_rewind"),f.Sb(),f.Sb(),f.Sb(),f.Tb(44,"ul"),f.Rc(45," Selected Meters "),f.Pc(46,P,2,3,"li",16),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Sb(),f.Sb()),2&e&&(f.Cb(2),f.mc("fxHide.xs",!0),f.Cb(14),f.mc("ngModel",t.clientId),f.Cb(1),f.mc("ngForOf",t.clients),f.Cb(4),f.mc("ngModel",t.meterTypeName),f.Cb(1),f.mc("ngForOf",t.lstMeterType),f.Cb(2),f.mc("ngModel",t.meterGroupId),f.Cb(1),f.mc("ngForOf",t.lstMeterGroup),f.Cb(5),f.mc("ngForOf",t.lstMeters),f.Cb(16),f.mc("ngForOf",t.selectedlstMeters))},directives:[g.d,g.e,y.a,M.b,T.a,S.a,C.a,k.a,I.d,g.b,I.h,G.a,h.q,h.t,c.n,I.g,w.n],styles:["ul[_ngcontent-%COMP%]{list-style:none;width:200px;border:1px solid #1976d2;height:200px;display:inline-block;padding:5px;overflow:auto}ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{background:#b2d3f5;color:#000;border:1px solid #c7dff8;padding:8px}.container[_ngcontent-%COMP%]{height:200px;align-items:center}.buttons-container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.buttons-container[_ngcontent-%COMP%]{height:90%;flex-direction:column}.item-selected[_ngcontent-%COMP%]{background:#68d368!important;color:#fff!important}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.img-style[_ngcontent-%COMP%]{width:32px}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}"]}),F)}],E=((N=function e(){i(this,e)}).\u0275mod=f.Lb({type:N}),N.\u0275inj=f.Kb({factory:function(e){return new(e||N)},imports:[[a.j.forChild(D)],a.j]}),N),_=s("WCGO"),A=s("q8Jb"),j=((R=function e(){i(this,e)}).\u0275mod=f.Lb({type:R}),R.\u0275inj=f.Kb({factory:function(e){return new(e||R)},imports:[[c.c,E,o.a,_.a,l.a,h.l,h.w,A.a]]}),R)},WFQN:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("tk/3"),c=n("sXtk"),l=n("fXoL"),o=function(){var e=function(){function e(t,n){i(this,e),this.http=t,this.envService=n,this.baseUrl="",this.baseUrl=n.backend}return r(e,[{key:"getReplacedMeters",value:function(e){return this.http.get(this.baseUrl+"/devicelistreplacements/clientId/"+e)}},{key:"createMeterReplacement",value:function(e){return this.http.post(this.baseUrl+"/devicelistreplacements/",e)}},{key:"GetUtilityTypes",value:function(e){var t=new s.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/UtilityTypes",{params:t})}},{key:"getAllUnits",value:function(e,t){var i=new s.f;return i=(i=i.append("clientId",""+e)).append("utilityTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/Units",{params:i})}},{key:"GetActiveDevices",value:function(e,t){var i=new s.f;return i=(i=i.append("clientId",""+e)).append("utilityTypeId",""+t),this.http.get(this.baseUrl+"/devicelistreplacements/ActiveDevices",{params:i})}},{key:"getMeterErrorDetails",value:function(e){return this.http.post(this.baseUrl+"/devicelistreplacements/MeterError",e)}},{key:"GetParametersList",value:function(){return this.http.get(this.baseUrl+"/devicelistreplacements/Parameters")}},{key:"getDeviceDataDetails",value:function(e){return this.http.post(this.baseUrl+"/devicelistreplacements/DeviceData",e)}},{key:"GetMeterList",value:function(e){var t=new s.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/MeterList",{params:t})}},{key:"getDeviceGroupMeterList",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",n=new s.f;return n=(n=(n=n.append("meterTypeId",""+e)).append("groupId",""+t)).append("clientId",""+i),this.http.get(this.baseUrl+"/devicelistreplacements/type/group/meterList",{params:n})}},{key:"getV1DeviceGroupMeterList",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",n=new s.f;return n=(n=(n=n.append("meterTypeId",""+e)).append("groupId",""+t)).append("clientId",""+i),this.http.get(this.baseUrl+"/devicelistreplacements/v1/type/group/meterListFilterByClient",{params:n})}},{key:"getV1DeviceGroupMeterListWithoutFlowTypeFilter",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",n=new s.f;return n=(n=(n=n.append("meterTypeId",""+e)).append("groupId",""+t)).append("clientId",""+i),this.http.get(this.baseUrl+"/devicelistreplacements/V1/type/group/meterListFilterByClientWithoutFlowTypeFilter",{params:n})}},{key:"getV1MeterList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new s.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterListFilterByClient",{params:t})}},{key:"getClients",value:function(){return this.http.get(this.baseUrl+"/devicelistreplacements/v1/clients")}},{key:"getV1MeterGroupList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new s.f;return t=t.append("meterTypeId",""+e),this.http.get(this.baseUrl+"/devicelistreplacements/v1/meterGroups",{params:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Xb(s.c),l.Xb(c.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();