!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{YaQ2:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var c=i("fXoL"),o=i("ofXK");function r(t,e){if(1&t&&(c.Tb(0,"small"),c.Rc(1),c.Ob(2,"br"),c.Sb()),2&t){var n=e.$implicit;c.Cb(1),c.Tc(" ",n," ")}}function l(t,e){if(1&t&&(c.Tb(0,"div"),c.Pc(1,r,3,1,"small",1),c.Sb()),2&t){var n=c.fc();c.Cb(1),c.mc("ngForOf",n.listOfErrors())}}var s=function(){var t=function(){function t(){var e=this;n(this,t),this.PATTERN_ERROR_MESSAGE={"/^[a-zA-Z ]*$/":"Accepts only alphabets with spaces","/^[a-zA-Z0-9]*$/":"Accepts only alphanumeric values with no spaces","/^[a-zA-Z0-9 ]*$/":"Accepts only alphanumeric values with spaces","/^[0-9]*$/":"Accepts only numbers","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{3,4}$":"Enter valid email address of format test@mail.com"},this.ERROR_MESSAGE={required:function(){return"This field is required"},minlength:function(t){return"Min ".concat(t.requiredLength," chars is required but got only ").concat(t.actualLength)},maxlength:function(t){return"Max chars allowed is ".concat(t.requiredLength," but got ").concat(t.actualLength)},pattern:function(t){return""+e.PATTERN_ERROR_MESSAGE[t.requiredPattern]},email:function(){return"Enter valid email address of format test@mail.com"}}}return a(t,[{key:"ngOnInit",value:function(){}},{key:"shouldShowErrors",value:function(){return this.ctrl&&this.ctrl.errors&&this.ctrl.touched}},{key:"listOfErrors",value:function(){var t=this;return Object.keys(this.ctrl.errors).map((function(e){return t.ERROR_MESSAGE[e](t.ctrl.getError(e))}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["app-show-errors"]],inputs:{ctrl:"ctrl"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&c.Pc(0,l,2,1,"div",0),2&t&&c.mc("ngIf",e.shouldShowErrors())},directives:[o.o,o.n],styles:["small[_ngcontent-%COMP%]{color:red}"]}),t}()},"a+RD":function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));var c=i("fXoL"),o=i("xgIS"),r=i("/uUt"),l=i("Kj3r"),s=i("ofXK"),u=i("STbY"),f=i("XiUz"),d=i("NFeN"),b=i("bTqV"),m=i("bSwM"),h=i("3Pt+"),p=["filter"];function g(t,e){if(1&t&&(c.Tb(0,"button",12),c.Tb(1,"mat-icon"),c.Rc(2,"filter_list"),c.Sb(),c.Sb()),2&t){c.fc(2);var n=c.Ac(3);c.mc("matMenuTriggerFor",n)}}function v(t,e){if(1&t&&(c.Tb(0,"div",5),c.Tb(1,"div",6),c.Rc(2),c.Sb(),c.Tb(3,"div",7),c.Tb(4,"mat-icon",8),c.Rc(5,"search"),c.Sb(),c.Ob(6,"input",9,10),c.Sb(),c.Pc(8,g,3,1,"button",11),c.kc(9,1),c.Sb()),2&t){var n=c.fc();c.Cb(2),c.Sc(n.name),c.Cb(6),c.mc("ngIf",!n.hideFilter)}}function y(t,e){if(1&t){var n=c.Ub();c.Tb(0,"button",13),c.bc("click",(function(t){c.Ec(n);var i=e.$implicit;return c.fc().toggleColumnVisibility(i,t)})),c.Tb(1,"mat-checkbox",14,15),c.bc("ngModelChange",(function(t){return c.Ec(n),e.$implicit.visible=t}))("click",(function(t){return c.Ec(n),t.stopPropagation()})),c.Rc(3),c.Sb(),c.Sb()}if(2&t){var i=e.$implicit;c.Cb(1),c.mc("ngModel",i.visible),c.Cb(2),c.Tc(" ",i.name," ")}}var S=["*",[["",8,"actions"]]],C=["*",".actions"],T=function(){var t=function(){function t(){n(this,t),this.filterChange=new c.o}return a(t,[{key:"ngAfterViewInit",value:function(){var t=this;this.hideHeader||Object(o.a)(this.filter.nativeElement,"keyup").pipe(Object(r.a)(),Object(l.a)(150)).subscribe((function(){t.filterChange.emit(t.filter.nativeElement.value)}))}},{key:"toggleColumnVisibility",value:function(t,e){e.stopPropagation(),e.stopImmediatePropagation(),t.visible=!t.visible}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["fury-list"]],viewQuery:function(t,e){var n;1&t&&c.Vc(p,!0),2&t&&c.zc(n=c.cc())&&(e.filter=n.first)},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader",hideFilter:"hideFilter"},outputs:{filterChange:"filterChange"},ngContentSelectors:C,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["class","fury-column-filter","type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,e){1&t&&(c.lc(S),c.Tb(0,"div",0),c.Pc(1,v,10,2,"div",1),c.Tb(2,"mat-menu",2,3),c.Pc(4,y,4,2,"button",4),c.Sb(),c.kc(5),c.Sb()),2&t&&(c.Cb(1),c.mc("ngIf",!e.hideHeader),c.Cb(3),c.mc("ngForOf",e.columns))},directives:[s.o,u.e,s.n,f.d,f.c,f.e,f.b,d.a,b.a,u.d,m.a,h.q,h.t],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width:599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width:599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}"],encapsulation:2}),t}()},nST0:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var c=i("tk/3"),o=i("sXtk"),r=i("fXoL"),l=function(){var t=function(){function t(e,i){n(this,t),this.http=e,this.envService=i,this.baseUrl="",this.baseUrl=i.backend}return a(t,[{key:"getClients",value:function(){return this.http.get(this.baseUrl+"/clients")}},{key:"getRoles",value:function(){return this.http.get(this.baseUrl+"/clients/roles")}},{key:"saveUserClients",value:function(t){return this.http.post(this.baseUrl+"/clients/userclients",t)}},{key:"getClientImageProperties",value:function(t){var e=new c.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/clients/image/properties",{params:e})}},{key:"getUtilityTypes",value:function(t){var e=new c.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/clients/utilityType",{params:e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Xb(c.c),r.Xb(o.a))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},tB66:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var c=i("fXoL"),o=i("0IaG"),r=i("XiUz"),l=i("bTqV"),s=function(){var t=function(){function t(e){n(this,t),this.dialogRef=e,this.confirmMessage="Are you sure you want to Delete?",e.disableClose=!0}return a(t,[{key:"getConfirmation",value:function(t){this.dialogRef.close(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Nb(o.h))},t.\u0275cmp=c.Hb({type:t,selectors:[["fury-user-confirmation-popup"]],decls:9,vars:1,consts:[[1,"heading"],[1,"mat-dlg-content","contentStyle"],["fxLayout","row","fxLayoutAlign","end center",1,"bottomPadding"],["mat-button","",3,"click"],["mat-button","",1,"buttonStyle",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Rc(1," Confirm Action "),c.Sb(),c.Tb(2,"div",1),c.Rc(3),c.Sb(),c.Tb(4,"mat-dialog-actions",2),c.Tb(5,"button",3),c.bc("click",(function(){return e.getConfirmation(!1)})),c.Rc(6,"NO"),c.Sb(),c.Tb(7,"button",4),c.bc("click",(function(){return e.getConfirmation(!0)})),c.Rc(8,"YES"),c.Sb(),c.Sb()),2&t&&(c.Cb(3),c.Sc(e.confirmMessage))},directives:[o.c,r.d,r.c,l.a],styles:[".buttonStyle[_ngcontent-%COMP%]{background:#1976d2;color:#fff;padding-right:10px}.headingStyle[_ngcontent-%COMP%]{text-align:center;color:red;background-color:silver;border-radius:50%;width:100px;height:100px}.heading[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-top:10px}mat-icon[_ngcontent-%COMP%]{font-size:56px;height:56px;width:56px;line-height:56px;justify-content:center}.contentStyle[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:30px;padding-right:30px}.rightAlign[_ngcontent-%COMP%]{text-align:right}.bottomPadding[_ngcontent-%COMP%]{padding-bottom:20px}"]}),t}()},v0aG:function(e,i,c){"use strict";c.r(i),c.d(i,"CreateAnnouncementModule",(function(){return At}));var o=c("ofXK"),r=c("3Pt+"),l=c("q8Jb"),s=c("0jmt"),u=c("KthW"),f=c("tyNb"),d=c("M9IT"),b=c("Dh3D"),m=c("+0xr"),h=c("jtHE"),p=c("pLZG"),g=c("Ku73"),v=c("nStZ"),y=c("0IaG"),S=c("sOHO"),C=function t(e){n(this,t),this.id=e.id||0,this.announcementId=e.announcementId||"",this.clientId=e.clientId||""},T=function t(e){n(this,t),this.id=e.id||0,this.validTill=e.validTill||"",this.title=e.title||"",this.content=e.content||"",this.clients=(e.clients||[]).map((function(t){return new C(t)}))},k=c("5cYQ"),x=c("nST0"),w=c("xXXn"),A=c("fXoL"),O=c("/t3+"),P=c("bTqV"),R=c("NFeN"),M=c("MutI"),I=c("4FRi"),E=c("XiUz"),D=c("kmnG"),F=c("qFsG"),N=c("YaQ2"),L=c("iadO"),z=c("d3UM"),j=c("FKr1"),U=["allSelected"];function V(t,e){1&t&&(A.Tb(0,"small"),A.Rc(1,"Valid Till should not be a past date."),A.Sb())}function $(t,e){if(1&t){var n=A.Ub();A.Tb(0,"mat-option",26),A.bc("click",(function(){A.Ec(n);var t=A.fc(),e=A.Ac(37);return t.togglePerOne(e.viewValue)})),A.Rc(1),A.Sb()}if(2&t){var i=e.$implicit;A.mc("optionSelected",i.selected)("value",i.value),A.Cb(1),A.Tc(" ",i.label," ")}}function q(t,e){if(1&t&&(A.Tb(0,"button",27),A.Rc(1,"CREATE ANNOUNCEMENT"),A.Sb()),2&t){var n=A.fc();A.mc("disabled",!n.form.valid||!n.validateDates())}}function _(t,e){if(1&t&&(A.Tb(0,"button",27),A.Rc(1,"UPDATE ANNOUNCEMENT"),A.Sb()),2&t){var n=A.fc();A.mc("disabled",!n.form.valid||!n.validateDates())}}var G,H=((G=function(){function e(t,i,a,c,o,r,l,s){n(this,e),this.defaults=t,this.fb=i,this.datePipe=a,this.dialog=c,this.metadataService=o,this.clientService=r,this.announcementService=l,this.dialogRef=s,this.mode="create",this.selectedClients=[],this.clients=[],this.selectedAnnouncementClients=[],this.isValidDate=!1,this.isCancel=!1,s.disableClose=!0}return a(e,[{key:"ngOnInit",value:function(){var t=new Date,n=("0"+t.getDate()).slice(-2),i=("0"+(t.getMonth()+1)).slice(-2),a=t.getFullYear();if(this.minDate=new Date(i+"/"+n+"/"+a),this.defaults){this.mode="update";for(var c=0;c<this.defaults.clients.length;c++)this.selectedClients[c]=this.defaults.clients[c].clientId}else this.defaults=new T({});this.getClients(),this.form=this.fb.group({id:[this.defaults.id||e.id++],title:[this.defaults.title||"",r.y.required],content:[this.defaults.content||"",r.y.required],validTill:[this.defaults.validTill||"",r.y.required],clientSelect:["",r.y.required],clients:[this.defaults.clients]})}},{key:"save",value:function(){var t=this;this.isCancel?(this.isCancel=!1,this.dialog.open(w.a,{data:{label:"Are you sure you want to Cancel?",selected:!1}}).afterClosed().subscribe((function(e){e&&t.dialogRef.close()}))):this.validateDates()&&("create"===this.mode?this.createAnnouncement():"update"===this.mode&&this.updateAnnouncement())}},{key:"isCreateMode",value:function(){return"create"===this.mode}},{key:"isUpdateMode",value:function(){return"update"===this.mode}},{key:"createAnnouncement",value:function(){Object.assign(this.defaults,this.form.value),this.defaults.validTill=this.datePipe.transform(this.defaults.validTill,"yyyy-MM-dd");for(var t=0;t<this.selectedClients.length;t++)0!=this.selectedClients[t]&&this.selectedAnnouncementClients.push({announcementId:this.defaults.id,clientId:this.selectedClients[t]});this.defaults.clients=this.selectedAnnouncementClients,this.dialogRef.close(new T(this.defaults))}},{key:"updateAnnouncement",value:function(){Object.assign(this.defaults,this.form.value),this.defaults.validTill=this.datePipe.transform(this.defaults.validTill,"yyyy-MM-dd");for(var t=0;t<this.selectedClients.length;t++)0!=this.selectedClients[t]&&this.selectedAnnouncementClients.push({announcementId:this.defaults.id,clientId:this.selectedClients[t]});this.defaults.clients=this.selectedAnnouncementClients,this.dialogRef.close(new T(this.defaults))}},{key:"getClients",value:function(){var t=this;this.clients=[],this.announcementService.getClients().subscribe((function(e){e&&e.forEach((function(e){t.clients.push({label:e.clientName,value:e.id})}))}))}},{key:"onChangeClients",value:function(t){this.selectedClients.indexOf(t[0])<0&&this.selectedClients.push(t[0])}},{key:"toggleAllSelection",value:function(){this.form.controls.clientSelect.patchValue(this.allSelected.selected?[].concat(t(this.clients.map((function(t){return t.value}))),[0]):[])}},{key:"togglePerOne",value:function(t){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.form.controls.clientSelect.value.length==this.clients.length&&this.allSelected.select()}},{key:"validateDates",value:function(){this.validTill=this.datePipe.transform(this.form.get("validTill").value,"MM-dd-yyyy");var t=new Date,e=("0"+t.getDate()).slice(-2),n=("0"+(t.getMonth()+1)).slice(-2)+"-"+e+"-"+t.getFullYear();this.isValidDate=!0;var i=new Date(this.validTill).getFullYear(),a=new Date(n).getFullYear();return 1970==i||1970==a?this.isValidDate:i<a?this.isValidDate=!1:null!=this.validTill||""!=this.validTill?(this.validTill<n&&(this.isValidDate=!1),this.isValidDate):void 0}},{key:"close",value:function(){this.dialogRef.close()}},{key:"closeDialog",value:function(){this.isCancel=!0}}]),e}()).id=100,G.\u0275fac=function(t){return new(t||G)(A.Nb(y.a),A.Nb(r.f),A.Nb(o.f),A.Nb(y.b),A.Nb(S.a),A.Nb(x.a),A.Nb(k.a),A.Nb(y.h))},G.\u0275cmp=A.Hb({type:G,selectors:[["fury-announcement-create-update"]],viewQuery:function(t,e){var n;1&t&&A.Vc(U,!0),2&t&&A.zc(n=A.cc())&&(e.allSelected=n.first)},decls:51,vars:13,consts:[["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"fx-spacer"],["mat-icon-button","",3,"click"],["title","Close","mat-list-icon",""],[3,"formGroup","ngSubmit"],[1,"padding-top"],[1,"person"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","48px"],["fxFlex",""],["type","text","formControlName","title","matInput","","required",""],[3,"ctrl"],["formControlName","validTill","matInput","","required","",3,"min","matDatepicker","click","focus"],["matSuffix","",3,"for"],["formDatepickerRef",""],[4,"ngIf"],["multiple","","formControlName","clientSelect",3,"ngModel","ngModelChange"],[3,"value","click"],["allSelected",""],[3,"optionSelected","value","click",4,"ngFor","ngForOf"],["fxLayout","row",1,"padding-top"],["maxlength","\u200b160","rows","10","cols","100","formControlName","content","placeholder","Enter text here....",1,"textId"],["textId",""],["fxLayout","row","fxLayoutAlign","end center"],["mat-button","",3,"click"],["mat-button","",3,"disabled",4,"ngIf"],[3,"optionSelected","value","click"],["mat-button","",3,"disabled"]],template:function(t,e){if(1&t){var n=A.Ub();A.Tb(0,"div",0),A.Tb(1,"mat-toolbar",1),A.Tb(2,"span"),A.Rc(3,"Announcement"),A.Sb(),A.Ob(4,"span",2),A.Tb(5,"button",3),A.bc("click",(function(){return e.close()})),A.Tb(6,"mat-icon",4),A.Rc(7,"close"),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(8,"form",5),A.bc("ngSubmit",(function(){return e.save()})),A.Tb(9,"mat-dialog-content"),A.Tb(10,"fury-card"),A.Tb(11,"fury-card-content",6),A.Tb(12,"div",7),A.Tb(13,"div",8),A.Tb(14,"mat-form-field",9),A.Tb(15,"mat-label"),A.Rc(16,"Title"),A.Sb(),A.Ob(17,"input",10),A.Tb(18,"mat-hint"),A.Rc(19,"This will be Title."),A.Sb(),A.Ob(20,"app-show-errors",11),A.Sb(),A.Tb(21,"mat-form-field",9),A.Tb(22,"mat-label"),A.Rc(23,"Valid Till"),A.Sb(),A.Tb(24,"input",12),A.bc("click",(function(){return A.Ec(n),A.Ac(27).open()}))("focus",(function(){return A.Ec(n),A.Ac(27).open()})),A.Sb(),A.Ob(25,"mat-datepicker-toggle",13),A.Ob(26,"mat-datepicker",null,14),A.Tb(28,"mat-hint"),A.Rc(29,"Please enter valid till date."),A.Sb(),A.Ob(30,"app-show-errors",11),A.Pc(31,V,2,0,"small",15),A.Sb(),A.Tb(32,"mat-form-field",9),A.Tb(33,"mat-label"),A.Rc(34,"Clients"),A.Sb(),A.Tb(35,"mat-select",16),A.bc("ngModelChange",(function(t){return e.selectedClients=t})),A.Tb(36,"mat-option",17,18),A.bc("click",(function(){return e.toggleAllSelection()})),A.Rc(38,"Select All"),A.Sb(),A.Pc(39,$,2,3,"mat-option",19),A.Sb(),A.Tb(40,"mat-hint"),A.Rc(41,"Please select clients."),A.Sb(),A.Ob(42,"app-show-errors",11),A.Sb(),A.Sb(),A.Sb(),A.Tb(43,"div",20),A.Ob(44,"textarea",21,22),A.Sb(),A.Sb(),A.Sb(),A.Sb(),A.Tb(46,"mat-dialog-actions",23),A.Tb(47,"button",24),A.bc("click",(function(){return e.closeDialog()})),A.Rc(48,"CANCEL"),A.Sb(),A.Pc(49,q,2,1,"button",25),A.Pc(50,_,2,1,"button",25),A.Sb(),A.Sb()}if(2&t){var i=A.Ac(27);A.Cb(8),A.mc("formGroup",e.form),A.Cb(12),A.mc("ctrl",e.form.get("title")),A.Cb(4),A.mc("min",e.minDate)("matDatepicker",i),A.Cb(1),A.mc("for",i),A.Cb(5),A.mc("ctrl",e.form.get("validTill")),A.Cb(1),A.mc("ngIf",!e.validateDates()),A.Cb(4),A.mc("ngModel",e.selectedClients),A.Cb(1),A.mc("value",0),A.Cb(3),A.mc("ngForOf",e.clients),A.Cb(3),A.mc("ctrl",e.form.get("clientSelect")),A.Cb(7),A.mc("ngIf",e.isCreateMode()),A.Cb(1),A.mc("ngIf",e.isUpdateMode())}},directives:[y.i,O.a,P.a,R.a,M.c,r.z,r.r,r.k,y.f,I.a,I.c,E.d,E.e,D.d,E.b,D.h,r.c,F.b,r.q,r.i,r.x,D.g,N.a,L.b,L.d,D.j,L.a,o.o,z.a,j.n,o.n,r.m,y.c,E.c],styles:["small[_ngcontent-%COMP%]{color:red}.task-header[_ngcontent-%COMP%]{background-color:transparent;padding:0 5px;height:20px}.fx-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),G),X=c("tB66"),K=c("KHMF"),Y=c("a8hA"),Q=c("sXtk"),Z=c("dNgK"),B=c("b6Qw"),J=c("xBcV"),W=c("Hbgg"),tt=c("rnAf"),et=c("rvYj"),nt=c("a+RD"),it=c("STbY");function at(t,e){if(1&t&&(A.Tb(0,"th",17),A.Rc(1),A.Sb()),2&t){var n=A.fc(2).$implicit;A.Cb(1),A.Tc(" ",n.name,"")}}function ct(t,e){if(1&t&&(A.Tb(0,"td",18),A.Rc(1),A.Sb()),2&t){var n=e.$implicit,i=A.fc(2).$implicit;A.Cb(1),A.Tc(" ",n[i.property]," ")}}function ot(t,e){if(1&t&&(A.Rb(0,14),A.Pc(1,at,2,1,"th",15),A.Pc(2,ct,2,1,"td",16),A.Qb()),2&t){var n=A.fc().$implicit;A.mc("matColumnDef",n.property)}}function rt(t,e){if(1&t&&(A.Rb(0),A.Pc(1,ot,3,1,"ng-container",13),A.Qb()),2&t){var n=e.$implicit;A.Cb(1),A.mc("ngIf",n.isModelProperty)}}function lt(t,e){1&t&&A.Ob(0,"th",19)}function st(t,e){if(1&t){var n=A.Ub();A.Tb(0,"td",20),A.Tb(1,"button",21),A.bc("click",(function(t){return A.Ec(n),t.stopPropagation()})),A.Tb(2,"mat-icon"),A.Rc(3,"more_horiz"),A.Sb(),A.Sb(),A.Tb(4,"mat-menu",22,23),A.Tb(6,"button",24),A.bc("click",(function(){A.Ec(n);var t=e.$implicit;return A.fc().updateAnnouncement(t)})),A.Tb(7,"span"),A.Rc(8,"Modify"),A.Sb(),A.Sb(),A.Tb(9,"button",24),A.bc("click",(function(){A.Ec(n);var t=e.$implicit;return A.fc().deleteAnnouncement(t)})),A.Tb(10,"span"),A.Rc(11,"Delete"),A.Sb(),A.Sb(),A.Sb(),A.Sb()}if(2&t){var i=A.Ac(5);A.Cb(1),A.mc("matMenuTriggerFor",i)}}function ut(t,e){1&t&&A.Ob(0,"tr",25)}function ft(t,e){1&t&&A.Ob(0,"tr",26)}var dt,bt,mt,ht,pt=function(){return[]},gt=[{path:"",component:(dt=function(){function t(e,i,a,c,o,r,l){var s;n(this,t),this.dialog=e,this.snackbar=i,this.date=a,this.announcementService=c,this.clientSelectionService=o,this.cookieService=r,this.envService=l,this.subject$=new h.a(1),this.data$=this.subject$.asObservable(),this.dateFormat="",this.displayedColumns=[{name:"Title",property:"title",visible:!0,isModelProperty:!0},{name:"Content",property:"content",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=8,this.dateFormat=null!==(s=Object(K.e)("DateFormat"))&&void 0!==s?s:l.dateFormat}return a(t,[{key:"ngOnInit",value:function(){this.clientSelectionService.setIsClientVisible(!1),this.getAnnouncements()}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"createAnnouncement",value:function(){var t=this;this.dialog.open(H).afterClosed().subscribe((function(e){e&&t.announcementService.createAnnouncement(e).subscribe({next:function(e){t.snackbar.open("Announcement created successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),t.getAnnouncements()},error:function(e){t.notificationMessage("Announcement creation failed.","red-snackbar")}})}))}},{key:"updateAnnouncement",value:function(t){var e=this;this.dialog.open(H,{data:t}).afterClosed().subscribe((function(t){t&&e.announcementService.updateAnnouncementById(t.id,t).subscribe({next:function(t){e.snackbar.open("Announcement updated successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),e.getAnnouncements()},error:function(t){e.notificationMessage("Announcement updation failed.","red-snackbar")}})}))}},{key:"deleteAnnouncement",value:function(t){var e=this;this.dialog.open(X.a).afterClosed().subscribe((function(n){n&&e.announcementService.deleteAnnouncementById(t.id,t).subscribe({next:function(t){e.snackbar.open("Announcement deleted successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),e.getAnnouncements()},error:function(t){e.notificationMessage("Announcement deletion failed.","red-snackbar")}})}))}},{key:"getAnnouncements",value:function(){var t=this;this.clientId=parseInt(this.cookieService.get("globalClientId")),this.announcementService.getAnnouncements(this.clientId).subscribe((function(e){e=e.map((function(t){return new T(t)})),t.announcements=e,t.subject$.next(e)})),this.dataSource=new m.k(this.announcements),this.data$.pipe(Object(p.a)((function(t){return!!t}))).subscribe((function(e){t.announcements=e,e.forEach((function(e){e.validTillLocal=t.date.transform(e.validTill.toString(),t.dateFormat.toString())})),t.dataSource.data=e})),this.ngAfterViewInit()}},{key:"notificationMessage",value:function(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}},{key:"onFilterChange",value:function(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}},{key:"ngOnDestroy",value:function(){}},{key:"content",set:function(t){this.sort=t,this.sort&&(this.dataSource.sort=this.sort)}},{key:"visibleColumns",get:function(){return this.displayedColumns.filter((function(t){return t.visible})).map((function(t){return t.property}))}}]),t}(),dt.\u0275fac=function(t){return new(t||dt)(A.Nb(y.b),A.Nb(Z.b),A.Nb(o.f),A.Nb(k.a),A.Nb(Y.a),A.Nb(B.a),A.Nb(Q.a))},dt.\u0275cmp=A.Hb({type:dt,selectors:[["fury-create-announcement"]],viewQuery:function(t,e){var n;1&t&&(A.Jc(d.a,!0),A.Vc(b.a,!0)),2&t&&(A.zc(n=A.cc())&&(e.paginator=n.first),A.zc(n=A.cc())&&(e.content=n.first))},inputs:{displayedColumns:"displayedColumns"},decls:17,vars:10,consts:[["mode","card"],["current","Announcements",3,"crumbs"],["name","Announcements",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(A.Tb(0,"fury-page-layout",0),A.Tb(1,"fury-page-layout-header"),A.Ob(2,"fury-breadcrumbs",1),A.Sb(),A.Tb(3,"fury-page-layout-content"),A.Tb(4,"fury-list",2),A.bc("filterChange",(function(t){return e.onFilterChange(t)})),A.Tb(5,"div",3),A.Tb(6,"button",4),A.bc("click",(function(){return e.createAnnouncement()})),A.Tb(7,"mat-icon"),A.Rc(8,"add"),A.Sb(),A.Sb(),A.Sb(),A.Tb(9,"table",5),A.Pc(10,rt,2,1,"ng-container",6),A.Rb(11,7),A.Pc(12,lt,1,0,"th",8),A.Pc(13,st,12,1,"td",9),A.Qb(),A.Pc(14,ut,1,0,"tr",10),A.Pc(15,ft,1,0,"tr",11),A.Sb(),A.Ob(16,"mat-paginator",12),A.Sb(),A.Sb(),A.Sb()),2&t&&(A.Cb(2),A.mc("@fadeInRight",void 0)("crumbs",A.qc(9,pt)),A.Cb(1),A.mc("@fadeInUp",void 0),A.Cb(1),A.mc("columns",e.displayedColumns),A.Cb(5),A.mc("dataSource",e.dataSource),A.Cb(1),A.mc("ngForOf",e.displayedColumns),A.Cb(4),A.mc("matHeaderRowDef",e.visibleColumns),A.Cb(1),A.mc("matRowDefColumns",e.visibleColumns),A.Cb(1),A.mc("pageSize",e.pageSize))},directives:[J.a,W.a,tt.a,et.a,nt.a,P.a,R.a,m.j,b.a,o.n,m.c,m.e,m.b,m.g,m.i,d.a,o.o,m.d,b.b,m.a,it.d,it.e,it.b,m.f,m.h],styles:[""],data:{animation:[g.a,v.a]}}),dt)}],vt=((bt=function t(){n(this,t)}).\u0275mod=A.Lb({type:bt}),bt.\u0275inj=A.Kb({factory:function(t){return new(t||bt)},imports:[[f.j.forChild(gt)],f.j]}),bt),yt=c("YUcS"),St=c("VE2z"),Ct=c("QibW"),Tt=c("wZkO"),kt=c("GiUZ"),xt=((mt=function t(){n(this,t)}).\u0275mod=A.Lb({type:mt}),mt.\u0275inj=A.Kb({factory:function(t){return new(t||mt)},imports:[[o.c,r.l,St.a,s.a,r.w,yt.a,u.a,y.g,F.c,P.b,R.b,Ct.c,z.b,Tt.c,kt.a]]}),mt),wt=c("WCGO"),At=((ht=function t(){n(this,t)}).\u0275mod=A.Lb({type:ht}),ht.\u0275inj=A.Kb({factory:function(t){return new(t||ht)},imports:[[o.c,vt,r.l,u.a,wt.a,s.a,xt,l.a]]}),ht)}}])}();