(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{Iab2:function(t,e,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){r(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,r){var c=o.URL||o.webkitURL,s=document.createElement("a");s.download=a=a||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?i(s):n(s.href)?e(t,a,r):i(s,s.target="_blank")):(s.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(s.href)}),4e4),setTimeout((function(){i(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,o,a){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),o);else if(n(t))e(t,o,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){i(r)}))}}:function(t,n,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var c="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||c&&s||a)&&"undefined"!=typeof FileReader){var b=new FileReader;b.onloadend=function(){var t=b.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},b.readAsDataURL(t)}else{var d=o.URL||o.webkitURL,m=d.createObjectURL(t);r?r.location=m:location.href=m,r=null,setTimeout((function(){d.revokeObjectURL(m)}),4e4)}});o.saveAs=r.saveAs=r,t.exports=r})?i.apply(e,[]):i)||(t.exports=o)},Wodw:function(t,e,n){"use strict";n.r(e),n.d(e,"ListemailsModule",(function(){return rt}));var i=n("ofXK"),o=n("tyNb"),a=n("0IaG"),r=n("nT7d"),c=n("LRne"),s=n("lJxs"),l=n("5oXs"),b=n("tk/3"),d=n("sXtk"),m=n("fXoL");let u=(()=>{class t{constructor(t,e){this.httpClient=t,this.envService=e,this.baseUrl="",this.mails=l.a,this.availableLabels=[],this.baseUrl=e.backend,this.mails.forEach(t=>{t.labels.forEach(t=>{this.availableLabels.find(e=>e.name===t.name)||this.availableLabels.push(t)})})}getStarred(){return Object(c.a)(this.mails).pipe(Object(s.a)(t=>t.filter(t=>t.starred)))}getNotificationEntities(t,e){let n=new b.f;return n=n.append("entityType",t),n=n.append("clientId",e),this.httpClient.get(this.baseUrl+"/emails/GetNotificationEntities",{params:n})}getGroup(t){return Object(c.a)(this.mails).pipe(Object(s.a)(e=>e.filter(e=>e.group===t)))}getEmailList(t,e,n,i,o,a=0){let r=new b.f;return r=r.append("flag",""+t),r=r.append("clientId",""+e),r=r.append("receivedById",""+n),r=r.append("ownerId",""+(null!=i?i:0)),r=r.append("role",""+o),r=r.append("mailId",""+a),this.httpClient.get(this.baseUrl+"/emails/GetMailDetails",{params:r})}updateIsReadForMail(t){return this.httpClient.put(this.baseUrl+"/emails/updateIsReadForMail",t)}getMailFromServer(t,e){let n=new b.f;return n=n.append("clientId",""+t),n=n.append("userId",""+e),this.httpClient.get(this.baseUrl+"/emails",{params:n})}getMail(t){return Object(c.a)(this.mails).pipe(Object(s.a)(e=>e.find(e=>e.id===t)))}toggleStarred(t){const e=this.find(t);e&&(e.starred=!t.starred)}addLabel(t,e){const n=this.find(e);n&&(n.labels.find(e=>e===t)||(n.labels.push(t),this.addToAvailableIfNotExists(t)))}addToAvailableIfNotExists(t){-1===this.availableLabels.indexOf(t)&&this.availableLabels.push(t)}removeLabel(t,e){const n=this.find(e);if(n){const e=n.labels.findIndex(e=>e===t);e>-1&&n.labels.splice(e,1)}}removeMail(t){const e=this.mails.findIndex(e=>e===t);e>-1&&(this.mails.splice(e,1),this.lastRemovedMail=t,this.lastRemovedMailIndex=e)}undoRemove(){return!(!this.lastRemovedMail||!this.lastRemovedMailIndex)&&(this.mails.splice(this.lastRemovedMailIndex,0,this.lastRemovedMail),this.lastRemovedMail)}find(t){return this.mails.find(e=>e.id===t.id)}getLabelColors(){return Object(c.a)(l.b)}}return t.\u0275fac=function(e){return new(e||t)(m.Xb(b.c),m.Xb(d.a))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=n("b6Qw"),p=n("XhcP"),h=n("ZS9X"),f=n("XiUz"),x=n("MutI"),v=n("FKr1"),C=n("NFeN"),M=n("znSr"),y=n("f0Cb");const w=function(){return["/listemails/primary"]},S=function(){return["/listemails/Sent"]};let O=(()=>{class t{constructor(t){this.router=t,this.onListTypeChange=new m.o}ngOnInit(){}navigateToInboxList(){this.onListTypeChange.emit("receive")}navigateToSentList(){this.onListTypeChange.emit("sent")}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(o.f))},t.\u0275cmp=m.Hb({type:t,selectors:[["fury-inbox-navigation"]],inputs:{responsive:"responsive"},outputs:{onListTypeChange:"onListTypeChange"},decls:15,vars:8,consts:[["fxFlex","grow"],[1,"navigation"],["matSubheader",""],["matRipple","","routerLinkActive","active",1,"secondary-text",3,"routerLink","click"],["matListIcon",""],["matLine","",3,"fxHide","fxShow.gt-sm"]],template:function(t,e){1&t&&(m.Tb(0,"fury-scrollbar",0),m.Tb(1,"mat-list",1),m.Tb(2,"div",2),m.Rc(3,"Inbox"),m.Sb(),m.Tb(4,"mat-list-item",3),m.bc("click",(function(){return e.navigateToInboxList()})),m.Tb(5,"mat-icon",4),m.Rc(6,"inbox"),m.Sb(),m.Tb(7,"div",5),m.Rc(8,"Inbox Mail"),m.Sb(),m.Sb(),m.Ob(9,"mat-divider"),m.Tb(10,"mat-list-item",3),m.bc("click",(function(){return e.navigateToSentList()})),m.Tb(11,"mat-icon",4),m.Rc(12,"send"),m.Sb(),m.Tb(13,"div",5),m.Rc(14,"Sent Mail"),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t&&(m.Cb(4),m.mc("routerLink",m.qc(6,w)),m.Cb(3),m.mc("fxHide",e.responsive)("fxShow.gt-sm",e.responsive),m.Cb(3),m.mc("routerLink",m.qc(7,S)),m.Cb(3),m.mc("fxHide",e.responsive)("fxShow.gt-sm",e.responsive))},directives:[h.a,f.b,x.a,x.f,x.d,v.s,o.h,o.g,C.a,x.c,v.j,M.b,y.a],styles:[".navigation[_ngcontent-%COMP%]{margin-top:24px}.navigation[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{cursor:pointer;margin-top:8px;margin-bottom:8px;position:relative;outline:none;border-radius:8px}.navigation[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{font-weight:500}.navigation[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}"]}),t})();var T=n("zpSk"),_=n("bTqV"),P=n("1G5W"),L=n("CP7g");let k=(()=>{class t{transform(t,e){let n;return console.log("filterText",e),console.log("QQQQtransform",t),console.log("keys",Object.keys(t)),n=t?t.filter(t=>t.content.search(new RegExp(e,"i"))>-1):[],console.log("returnList",n),n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Mb({name:"listFilter",type:t,pure:!0}),t})();var R=n("a8hA"),I=n("Nm8O"),F=n("STbY"),A=n("bSwM");let N=(()=>{class t{transform(e,n){return n&&e?t.filter(e,n):e}static filter(t,e){const n=e.toLowerCase();return t.filter((function(t){return function t(e,i){for(let o in e)if(null!==e[o]&&null!=e[o]){if("object"==typeof e[o]&&t(e[o],i))return!0;if(e[o].toString().toLowerCase().includes(n))return!0}return!1}(t,e)}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Mb({name:"filter",type:t,pure:!1}),t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac}),t})(),j=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)}}),t})();const E=function(t){return["../mail",t]},H=function(t){return{id:t}};function U(t,e){if(1&t){const t=m.Ub();m.Tb(0,"div",13),m.Tb(1,"div",14),m.Tb(2,"mat-checkbox",15),m.bc("click",(function(e){return m.Ec(t),e.stopPropagation()})),m.Sb(),m.Sb(),m.Tb(3,"div",16),m.Tb(4,"div",17),m.Ob(5,"img",18),m.Tb(6,"div",19),m.Rc(7),m.Tb(8,"div",20),m.Rc(9),m.Sb(),m.Sb(),m.Sb(),m.Tb(10,"div",21),m.Tb(11,"div",22),m.Rc(12),m.Sb(),m.Tb(13,"div",23),m.Rc(14,"\xb7"),m.Sb(),m.Sb(),m.Sb(),m.Tb(15,"div",24),m.Tb(16,"span",25),m.Rc(17),m.gc(18,"date"),m.Sb(),m.Tb(19,"button",26),m.bc("click",(function(e){return m.Ec(t),e.stopPropagation()})),m.Tb(20,"mat-icon"),m.Rc(21,"more_vert"),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&t){const t=e.$implicit,n=m.fc(),i=m.Ac(26);m.Fb("background-hover",t.read),m.mc("routerLink",m.rc(13,E,t.id)),m.Cb(5),m.oc("src","http://i.pravatar.cc/30?u=",t.from.name,"",m.Gc),m.Cb(2),m.Tc(" ",t.from.name," "),m.Cb(2),m.Sc(t.mailDateTime),m.Cb(3),m.Sc(t.subject),m.Cb(5),m.Sc(m.ic(18,10,t.mailDateTime,n.dateFormat)),m.Cb(2),m.mc("matMenuTriggerFor",i)("matMenuTriggerData",m.rc(15,H,t.id))}}function D(t,e){if(1&t){const t=m.Ub();m.Tb(0,"button",10),m.bc("click",(function(){m.Ec(t);const n=e.id;return m.fc().enableIsread(n)})),m.Tb(1,"mat-icon"),m.Rc(2,"markunread_mailbox"),m.Sb(),m.Rc(3," Mark as unread "),m.Sb()}}let G=(()=>{class t{constructor(t,e,n,i,o,a,r){this.route=t,this.date=e,this.inboxService=n,this.searchPipe=i,this.jwtHelperService=o,this.clientSelectionService=a,this.cookieService=r,this.txtSearch="",this.maillist=[],this.ownerId=parseInt(""==this.cookieService.get("ownerId")?"0":this.cookieService.get("ownerId")),this.mailListType="receive",this.dateFormat="MMM d, y, h:mm:ss a"}valChange(t){this.txtSearch=t}ngOnInit(){this.clientSelectionService.setIsClientVisible(!0);let t=this.cookieService.get("access_token");const e=this.jwtHelperService.decodeToken(t);e&&(this.role=e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]),this.clientId=this.cookieService.get("globalClientId"),this.userId=this.cookieService.get("userId"),this.route.paramMap.pipe(Object(P.a)(Object(L.a)(this))).subscribe(t=>{"starred"===t.get("category")?this.mails$=this.inboxService.getStarred():"primary"===t.get("category")?(this.mailListType="receive",this.emails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role)):"Update"===t.get("category")?this.onUpdateMail():"Sent"===t.get("category")?(this.mailListType="sent",this.emails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role)):this.mails$=this.inboxService.getGroup(t.get("category"))}),this.emails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role),this.inboxMails=this.emails}ngOnChanges(t){this.inboxMails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role),this.listMails()}listMails(){this.mailListType||(this.mailListType="receive"),this.emails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role),this.inboxMails=this.emails}onUpdateMail(){this.inboxService.getMailFromServer(this.clientId,this.userId).subscribe(t=>{t&&(this.emails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role))})}unreadMail(){this.emails=this.inboxMails,this.emails=this.emails.pipe(Object(s.a)(t=>t.filter(t=>!t.isRead)))}readMail(){this.emails=this.inboxMails,this.emails=this.emails.pipe(Object(s.a)(t=>t.filter(t=>t.isRead)))}enableIsread(t){let e={id:Number(t),isRead:!1};this.inboxService.updateIsReadForMail(e).subscribe(t=>{})}toggleStarred(t){this.inboxService.toggleStarred(t)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(o.a),m.Nb(i.f),m.Nb(u),m.Nb(k),m.Nb(I.a),m.Nb(R.a),m.Nb(g.a))},t.\u0275cmp=m.Hb({type:t,selectors:[["fury-inbox-mail-list"]],inputs:{mailListType:"mailListType"},features:[m.Ab],decls:28,vars:7,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"search-bar","card","elevation"],[1,"icon"],["type","search","fxFlex","","placeholder","Search...",1,"search","card","text",3,"[ngModel]","input"],["searchInput",""],["fxLayout","column",1,"mail-list"],["fxFlex","none","fxLayout","row","fxLayoutAlign","start center",1,"header","border-bottom"],["mat-icon-button","","type","button",1,"icon",3,"matMenuTriggerFor"],["fxFlex","auto",1,"content"],["class","mail border-bottom","gdColumns","68px 1fr 140px","gdColumns.lt-md","68px 1fr auto","gdColumns.lt-sm","auto 1fr auto","gdGap","8px",3,"background-hover","routerLink",4,"ngFor","ngForOf"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mailOptions","matMenu"],["matMenuContent",""],["gdColumns","68px 1fr 140px","gdColumns.lt-md","68px 1fr auto","gdColumns.lt-sm","auto 1fr auto","gdGap","8px",1,"mail","border-bottom",3,"routerLink"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","6px","fxHide","","fxShow.gt-xs",""],[1,"checkbox",3,"click"],["gdColumns.gt-sm","150px 1fr","gdRows.lt-md","auto 1fr",1,"content-container"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px"],["fxFlex","noshrink","fxHide","","fxShow.gt-sm","",1,"picture",3,"src"],["fxFlex","grow","fxLayout","row","fxLayoutAlign","space-between center",1,"from","text"],["fxHide.gt-sm","",1,"when","secondary-text"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start center","fxLayoutGap","8px",1,"content-wrapper"],["fxFlex","noshrink",1,"subject","text"],["fxHide","","fxShow.gt-sm","",1,"middot","text"],["fxLayout","row","fxLayoutAlign","end center"],["fxHide","","fxShow.gt-sm","",1,"when","secondary-text"],["mat-icon-button","",1,"icon",3,"matMenuTriggerFor","matMenuTriggerData","click"]],template:function(t,e){if(1&t&&(m.Tb(0,"div",0),m.Tb(1,"mat-icon",1),m.Rc(2,"search"),m.Sb(),m.Tb(3,"input",2,3),m.bc("[ngModel]",(function(){return e.txtSearch}))("input",(function(t){return e.valChange(t.target.value)})),m.Sb(),m.Sb(),m.Tb(5,"div",4),m.Tb(6,"div",5),m.Tb(7,"button",6),m.Tb(8,"mat-icon"),m.Rc(9,"arrow_drop_down"),m.Sb(),m.Sb(),m.Sb(),m.Tb(10,"fury-scrollbar",7),m.Pc(11,U,22,17,"div",8),m.gc(12,"filter"),m.gc(13,"async"),m.Sb(),m.Sb(),m.Tb(14,"mat-menu",null,9),m.Tb(16,"button",10),m.bc("click",(function(){return e.listMails()})),m.Tb(17,"span"),m.Rc(18," All "),m.Sb(),m.Sb(),m.Tb(19,"button",10),m.bc("click",(function(){return e.unreadMail()})),m.Tb(20,"span"),m.Rc(21," Unread "),m.Sb(),m.Sb(),m.Tb(22,"button",10),m.bc("click",(function(){return e.readMail()})),m.Tb(23,"span"),m.Rc(24," Read "),m.Sb(),m.Sb(),m.Sb(),m.Tb(25,"mat-menu",null,11),m.Pc(27,D,4,0,"ng-template",12),m.Sb()),2&t){const t=m.Ac(15);m.Cb(7),m.mc("matMenuTriggerFor",t),m.Cb(4),m.mc("ngForOf",m.ic(12,2,m.hc(13,5,e.emails),e.txtSearch))}},directives:[f.d,f.c,C.a,f.b,_.a,F.d,h.a,i.n,F.e,F.b,F.a,T.d,T.b,o.g,f.e,M.b,A.a,T.c],pipes:[N,i.b,i.f],styles:[".header[_ngcontent-%COMP%]{height:64px;min-height:64px;max-height:64px;padding-left:24px;padding-right:24px}.mail-list[_ngcontent-%COMP%]{height:100%}.search-bar[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.search-bar[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:14px;margin-left:16px}.search-bar[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{border:0;height:54px;outline:none}.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{height:54px;min-height:54px;max-height:54px;padding-left:24px;padding-right:12px;position:relative;transition:all .4s cubic-bezier(.25,.8,.25,1);cursor:pointer;outline:none;font:var(--font-body-1)}@media screen and (max-width:599px){.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{height:auto;max-height:none;padding-top:12px;padding-bottom:12px}}@media screen and (min-width:599px) and (max-width:959px){.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{height:auto;max-height:none;padding-top:12px;padding-bottom:12px}}.content[_ngcontent-%COMP%]   .mail.background-hover[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail.background-hover[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail.background-hover[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail.background-hover[_ngcontent-%COMP%]   .when[_ngcontent-%COMP%]{font-weight:400}.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50%}.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .when[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;font-weight:500}"]}),t})(),$=(()=>{class t{constructor(t,e,n,i){this.dialog=t,this.route=e,this.inboxService=n,this.cookieService=i,this.mailType="",this.sendTo=""}ngOnInit(){}receiveMailType(t){this.mailType=t}ngAfterViewInit(){}ngOnDestroy(){}openCompose(){let t=this.cookieService.get("globalClientId");this.sendTo="",this.inboxService.getNotificationEntities("",t).subscribe(t=>{if(t){let e=this.cookieService.get("ownerId");if(e){const n=t.find(t=>t.id==e);if(n){this.sendTo=n.email;const t=new a.e;t.data=n,this.dialog.open(r.a,t)}}""==this.sendTo&&this.openDialog()}else this.openDialog()},t=>{this.openDialog()})}openDialog(){const t=new a.e;t.data={sendTo:this.sendTo},this.dialog.open(r.a,t)}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(a.b),m.Nb(o.a),m.Nb(u),m.Nb(g.a))},t.\u0275cmp=m.Hb({type:t,selectors:[["fury-listemails"]],decls:29,vars:2,consts:[[1,"drawer-container"],["mode","over"],["drawer",""],[1,"drawer-navigation"],["gdRows","auto 1fr",1,"drawer-content"],["gdColumns","250px 1fr","gdColumns.lt-md","116px 1fr","gdColumns.lt-sm","1fr",1,"header","elevation"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutAlign.lt-md","center center","fxLayoutAlign.lt-sm","start center",1,"logo"],["fxHide.gt-xs","","mat-icon-button","","type","button",3,"click"],["fxHide","","fxShow.gt-xs","",2,"color","#3069b1"],["fxHide.sm","",2,"color","#3069b1"],["gdColumns","250px 1fr","gdColumns.lt-md","116px 1fr","gdColumns.lt-sm","1fr",1,"page-container"],["fxHide","","fxLayout","column","fxShow.gt-xs","",1,"navigation-container"],["fxFlex","0 0 auto","fxLayout","row","fxLayoutAlign","center center",1,"compose"],["color","primary","fxFlex","","fxHide","","fxShow.gt-sm","","mat-raised-button","","type","button",3,"click"],[1,"icon"],["color","primary","fxHide.gt-sm","","mat-mini-fab","","type","button"],[3,"responsive","onListTypeChange"],[1,"content","card","elevation"],[3,"mailListType"]],template:function(t,e){if(1&t){const t=m.Ub();m.Tb(0,"mat-drawer-container",0),m.Tb(1,"mat-drawer",1,2),m.Tb(3,"div",3),m.Ob(4,"fury-inbox-navigation"),m.Sb(),m.Sb(),m.Tb(5,"mat-drawer-content",4),m.Tb(6,"div",5),m.Tb(7,"div",6),m.Tb(8,"button",7),m.bc("click",(function(){return m.Ec(t),m.Ac(2).open()})),m.Tb(9,"mat-icon"),m.Rc(10,"menu"),m.Sb(),m.Sb(),m.Tb(11,"mat-icon",8),m.Rc(12,"mail"),m.Sb(),m.Tb(13,"span",9),m.Rc(14,"Mailbox"),m.Sb(),m.Sb(),m.Sb(),m.Tb(15,"div",10),m.Tb(16,"div",11),m.Tb(17,"div",12),m.Tb(18,"button",13),m.bc("click",(function(){return e.openCompose()})),m.Tb(19,"mat-icon",14),m.Rc(20,"edit"),m.Sb(),m.Rc(21," Compose "),m.Sb(),m.Tb(22,"button",15),m.Tb(23,"mat-icon"),m.Rc(24,"edit"),m.Sb(),m.Sb(),m.Sb(),m.Tb(25,"fury-inbox-navigation",16),m.bc("onListTypeChange",(function(t){return e.receiveMailType(t)})),m.Sb(),m.Sb(),m.Tb(26,"div",17),m.Ob(27,"router-outlet"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(28,"fury-inbox-mail-list",18)}2&t&&(m.Cb(25),m.mc("responsive",!0),m.Cb(3),m.mc("mailListType",e.mailType))},directives:[p.b,p.a,O,p.c,T.c,T.d,f.d,f.c,_.a,M.b,C.a,f.b,o.k,G],styles:[".drawer-container[_ngcontent-%COMP%]{height:100%}.drawer-content[_ngcontent-%COMP%]{overflow:hidden}.drawer-navigation[_ngcontent-%COMP%]{padding:0 24px;overflow:hidden}.header[_ngcontent-%COMP%]{background:#d3e6f0;padding:48px 24px 112px 0;background-size:cover;z-index:10}@media screen and (max-width:599px){.header[_ngcontent-%COMP%]{padding:8px 8px 72px}}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#fff;padding-left:24px;font:var(--font-display-1)}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{padding-right:12px}@media screen and (min-width:599px) and (max-width:959px){.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{padding-left:0}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{padding-right:0}}@media screen and (max-width:599px){.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{padding-left:0;margin-bottom:8px}}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:14px;margin-left:16px}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{border:0;height:54px;outline:none}.page-container[_ngcontent-%COMP%]{margin-top:-64px;overflow:hidden}.navigation-container[_ngcontent-%COMP%]{padding:0 24px 24px;z-index:20}.navigation-container[_ngcontent-%COMP%]   .compose[_ngcontent-%COMP%]{height:64px}.navigation-container[_ngcontent-%COMP%]   .compose[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:-24px;padding-right:8px}.content[_ngcontent-%COMP%]{margin-right:24px;margin-bottom:24px;border-radius:8px;z-index:20;overflow:hidden}@media screen and (max-width:599px){.content[_ngcontent-%COMP%]{margin:0 8px 8px}}"]}),t})(),X=(()=>{class t{constructor(t,e){this.options=t,this.dialogRef=e}ngOnInit(){this.content=this.options.content}cancel(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(a.a),m.Nb(a.h))},t.\u0275cmp=m.Hb({type:t,selectors:[["fury-inbox-mail-confirm-dialog"]],decls:9,vars:1,consts:[["matDialogTitle",""],["align","end"],["type","button","mat-button","",3,"click"],["type","button","mat-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(m.Tb(0,"div",0),m.Rc(1,"Confirm your action"),m.Sb(),m.Tb(2,"mat-dialog-content"),m.Rc(3),m.Sb(),m.Tb(4,"mat-dialog-actions",1),m.Tb(5,"button",2),m.bc("click",(function(){return e.cancel()})),m.Rc(6,"CANCEL"),m.Sb(),m.Tb(7,"button",3),m.bc("click",(function(){return e.confirm()})),m.Rc(8,"CONFIRM"),m.Sb(),m.Sb()),2&t&&(m.Cb(3),m.Tc(" ",e.content,"\n"))},directives:[a.i,a.f,a.c,_.a],styles:[""]}),t})();var z=n("Iab2"),B=n("dNgK"),K=n("Qu3c");const q=["*"];let Q=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Hb({type:t,selectors:[["fury-inbox-mail-label"]],inputs:{color:"color"},ngContentSelectors:q,decls:4,vars:2,consts:[["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","6px",1,"label","app-bar"],[1,"indicator"],[1,"label-name"]],template:function(t,e){1&t&&(m.lc(),m.Tb(0,"div",0),m.Ob(1,"div",1),m.Tb(2,"div",2),m.kc(3),m.Sb(),m.Sb()),2&t&&(m.Cb(1),m.Mc("background",e.color))},directives:[f.d,f.c,f.e],styles:[".label[_ngcontent-%COMP%]{font:var(--font-caption);padding:2px 8px;white-space:nowrap}.label[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}"]}),t})();function J(t,e){if(1&t&&(m.Tb(0,"fury-inbox-mail-label",27),m.Rc(1),m.Sb()),2&t){const t=e.$implicit;m.mc("color",t.color),m.Cb(1),m.Tc(" ",t.name," ")}}function W(t,e){if(1&t){const t=m.Ub();m.Tb(0,"div",28),m.Tb(1,"mat-icon"),m.Rc(2,"attachments"),m.Sb(),m.Tb(3,"div",29),m.Tb(4,"span",30),m.bc("click",(function(){return m.Ec(t),m.fc().downloadDocument()})),m.Rc(5),m.Sb(),m.Sb(),m.Sb()}if(2&t){const t=e.index,n=m.fc();m.Cb(5),m.Sc(n.fileName[t])}}const V=function(){return["../../"]};let Y=(()=>{class t{constructor(t,e,n,i,o,a,r,c){var s;this.route=t,this.inboxService=e,this.dialog=n,this.router=i,this.snackbar=o,this.listEmailsService=a,this.cookieService=r,this.envService=c,this.baseUrl="",this.mail$={subject:"",labels:[],attachments:[]},this.fileName=[],this.downloadFile="",this.ownerId=parseInt(null!==(s=this.cookieService.get("ownerId"))&&void 0!==s?s:"0"),this.sendTo="",this.mailListType="view",this.baseUrl=c.backendForFiles}ngOnInit(){this.clientId=this.cookieService.get("globalClientId"),this.userId=this.cookieService.get("userId"),this.availableLabels=this.inboxService.availableLabels,this.route.paramMap.subscribe(t=>{this.id=t.get("id"),this.listEmailsService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,0,Number(this.id)).subscribe(t=>{t.length>0&&(this.mail$=t[0],this.mail$.attachments.forEach(t=>{t.hasOwnProperty("attachmentName")&&this.fileName.push(t.attachmentName)}))}),this.enableIsread(!0)})}enableIsread(t){let e={id:Number(this.id),isRead:t};this.inboxService.updateIsReadForMail(e).subscribe(t=>{})}downloadDocument(){this.downloadFile=this.baseUrl+"/uploads/"+this.fileName,z.saveAs(this.downloadFile,this.fileName)}openCompose(){this.sendTo="",this.sendTo=this.mail$.from.mail,this.openDialog()}openDialog(){const t=new a.e;t.data={sendTo:this.sendTo},t.height="500px",this.dialog.open(r.a,t)}toggleStarred(){this.inboxService.toggleStarred(this._mail)}addLabel(t){this.inboxService.addLabel(t,this._mail)}removeLabel(t){this.inboxService.removeLabel(t,this._mail)}removeMail(){this.dialog.open(X,{data:{content:"Are you sure you want to delete this mail?"}}).afterClosed().subscribe(t=>{t&&(this.inboxService.removeMail(this._mail),this.router.navigate(["../../"],{relativeTo:this.route}),this.snackbar.open("You deleted the mail from: "+this._mail.from.name,"UNDO",{duration:3e3}).onAction().subscribe(()=>{const t=this.inboxService.undoRemove();t?(this.router.navigate(["/apps/inbox/mail",t.id]),this.snackbar.open("Restored your mail from: "+t.from.name,null,{duration:3e3})):this.snackbar.open("Could not UNDO last delete action. Sorry!",null,{duration:3e3})}))})}showReply(){this.replying=!0}hideReply(t){this.replying=!1,t&&this.snackbar.open("You replied to "+this._mail.from.name,"UNDO",{duration:3e3})}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(o.a),m.Nb(u),m.Nb(a.b),m.Nb(o.f),m.Nb(B.b),m.Nb(u),m.Nb(g.a),m.Nb(d.a))},t.\u0275cmp=m.Hb({type:t,selectors:[["fury-inbox-mail"]],decls:44,vars:11,consts:[["fxLayout","column","fxFlex","grow",1,"inbox-mail"],["fxFlex","none","fxLayout","row","fxLayoutAlign","space-between center","fxLayoutAlign.gt-xs","start center",1,"header","border-bottom"],["type","button","mat-icon-button","","matTooltip","Back to Inbox",3,"routerLink"],["fxHide","","fxShow.gt-xs",""],["fxLayout","column",1,"mail-content"],["fxFlex","noshrink","fxLayout","row","fxLayoutAlign","space-between start",1,"head","border-bottom"],["fxLayout","column","fxLayoutAlign","start start"],[1,"subject"],["fxLayout","row","fxLayoutGap","8px",1,"labels"],[3,"color",4,"ngFor","ngForOf"],["fxFlex","noshrink","fxLayout","column","fxLayoutAlign","start","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","space-between",1,"info"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px"],[1,"picture",3,"src"],["fxLayout","column"],[1,"from"],["fxLayout","row","fxLayoutAlign","start center",1,"to","secondary-text"],["fxFlexAlign.xs","end","fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","16px",1,"extra"],[1,"when","secondary-text"],["mat-icon-button","",1,"options","icon",3,"matMenuTriggerFor"],["fxFlex","grow",1,"content",3,"innerHtml"],["class","extra","fxFlexAlign.xs","start","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px",4,"ngFor","ngForOf"],["fxFlex","noshrink","fxLayout","row","fxLayoutAlign","space-between center",1,"reply","border-top"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px"],["type","button","mat-button","",3,"click"],[1,"text"],["mailOptions","matMenu"],["mat-menu-item","",3,"click"],[3,"color"],["fxFlexAlign.xs","start","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px",1,"extra"],[1,"when","secondary-text","under-line"],[3,"click"]],template:function(t,e){if(1&t&&(m.Tb(0,"div",0),m.Tb(1,"div",1),m.Tb(2,"button",2),m.Tb(3,"mat-icon"),m.Rc(4,"arrow_back"),m.Sb(),m.Sb(),m.Ob(5,"mat-divider",3),m.Sb(),m.Tb(6,"div",4),m.Tb(7,"div",5),m.Tb(8,"div",6),m.Tb(9,"div",7),m.Rc(10),m.Sb(),m.Tb(11,"div",8),m.Pc(12,J,2,2,"fury-inbox-mail-label",9),m.Sb(),m.Sb(),m.Sb(),m.Tb(13,"div",10),m.Tb(14,"div",11),m.Ob(15,"img",12),m.Tb(16,"div",13),m.Tb(17,"div",14),m.Rc(18),m.Sb(),m.Tb(19,"div",15),m.Rc(20),m.Tb(21,"mat-icon"),m.Rc(22,"arrow_drop_down"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(23,"div",16),m.Tb(24,"div",17),m.Rc(25),m.Sb(),m.Tb(26,"button",18),m.Tb(27,"mat-icon"),m.Rc(28,"more_vert"),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Ob(29,"div",19),m.Pc(30,W,6,1,"div",20),m.Tb(31,"div",21),m.Tb(32,"div",22),m.Tb(33,"button",23),m.bc("click",(function(){return e.openCompose()})),m.Tb(34,"mat-icon"),m.Rc(35,"reply"),m.Sb(),m.Sb(),m.Tb(36,"div",24),m.Rc(37,"Click to Reply "),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Tb(38,"mat-menu",null,25),m.Tb(40,"button",26),m.bc("click",(function(){return e.enableIsread(!1)})),m.Tb(41,"mat-icon"),m.Rc(42,"markunread_mailbox"),m.Sb(),m.Rc(43," Mark as unread "),m.Sb(),m.Sb()),2&t){const t=m.Ac(39);m.Cb(2),m.mc("routerLink",m.qc(10,V)),m.Cb(8),m.Sc(e.mail$.subject),m.Cb(2),m.mc("ngForOf",e.mail$.labels),m.Cb(3),m.oc("src","http://i.pravatar.cc/35?u=",null==e.mail$.from?null:e.mail$.from.name,"",m.Gc),m.Cb(3),m.Sc(null==e.mail$.from?null:e.mail$.from.name),m.Cb(2),m.Tc(" to ",null==e.mail$.to?null:e.mail$.to.name," "),m.Cb(5),m.Sc(null==e.mail$.when?null:e.mail$.when.fromNow()),m.Cb(1),m.mc("matMenuTriggerFor",t),m.Cb(3),m.mc("innerHtml",e.mail$.content,m.Fc),m.Cb(1),m.mc("ngForOf",e.fileName)}},directives:[f.d,f.b,f.c,_.a,K.a,o.g,C.a,y.a,M.b,f.e,i.n,f.a,F.d,F.e,F.b,Q],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1}.inbox-mail[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:64px;padding-left:8px;padding-right:8px}.inbox-mail[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .inbox-mail[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}.inbox-mail[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .vertical-divider[_ngcontent-%COMP%]{width:1px;height:calc(100% - 24px);margin:12px 8px}.inbox-mail[_ngcontent-%COMP%]   .mail-content[_ngcontent-%COMP%]     .scroll-content{display:flex;flex-direction:column;flex:1}.inbox-mail[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{padding:24px}.inbox-mail[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font:var(--font-title)}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:24px}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50%}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%], .inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]{font:var(--font-body-1)}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .extra[_ngcontent-%COMP%]   .when[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.inbox-mail[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 24px 24px}.inbox-mail[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{padding:24px;cursor:pointer}.inbox-mail[_ngcontent-%COMP%]   .replying[_ngcontent-%COMP%]{padding:24px}.inbox-mail[_ngcontent-%COMP%]   .replying[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px}.inbox-mail[_ngcontent-%COMP%]   .under-line[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}"]}),t})();const Z=[{path:"",component:$,children:[{path:"",redirectTo:"primary",pathMatch:"full",data:{scrollDisabled:!0}},{path:":category",component:G,data:{scrollDisabled:!0}},{path:"mail/:id",component:Y,data:{scrollDisabled:!0}}]}];let tt=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(Z)],o.j]}),t})();var et=n("3Pt+"),nt=n("CzEO"),it=n("KthW"),ot=n("51bB"),at=n("vxfF");let rt=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},providers:[G,k,Y],imports:[[i.c,tt,it.a,et.w,nt.b.forRoot(),ot.a,at.d,j,C.b]]}),t})()}}]);