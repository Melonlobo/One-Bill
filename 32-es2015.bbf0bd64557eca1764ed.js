(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"0ICb":function(t,e,i){"use strict";i.r(e),i.d(e,"CreateVariablePayModule",(function(){return Et}));var a=i("ofXK"),n=i("3Pt+"),o=i("q8Jb"),r=i("0jmt"),c=i("KthW"),s=i("tyNb"),l=i("0IaG"),u=i("M9IT"),d=i("Dh3D"),b=i("+0xr"),m=i("jtHE"),f=i("pLZG"),h=i("Ku73"),p=i("nStZ"),g=i("sOHO"),y=i("ERz2"),S=i("xu6j"),C=i("VYjJ");class v{constructor(t){this.id=t.id||0,this.billPeriodId=t.billPeriodId||0,this.periodDescription=t.periodDescription||"",this.tenantId=t.tenantId||0,this.tenantName=t.tenantName||"",this.tenantNumber=t.tenantNumber||"",this.unitId=t.unitId||0,this.unitNumber=t.unitNumber||"",this.accountHeadId=t.accountHeadId||0,this.accountHeadName=t.accountHeadName||"",this.isDeduction=t.isDeduction||!1,this.amount=t.amount||0,this.utilityTypeId=t.utilityTypeId||0,this.clientId=t.clientId||0,this.isVariablePayUsed=t.isVariablePayUsed||!1,this.unit=t.unit||""}}var P=i("Ektq"),T=i("3jSL"),w=i("xXXn"),x=i("KHMF"),I=i("fXoL"),O=i("b6Qw"),A=i("/t3+"),R=i("bTqV"),k=i("NFeN"),N=i("MutI"),M=i("4FRi"),V=i("XiUz"),L=i("kmnG"),D=i("qFsG"),F=i("/1cH"),H=i("YaQ2"),E=i("d3UM"),U=i("f0Cb"),j=i("FKr1"),z=i("6GKC"),$=i("bSwM"),B=i("dUAH");const _=["allSelected"],G=["class","component"];function K(t,e){if(1&t&&(I.Tb(0,"mat-option",31),I.Rc(1),I.Sb()),2&t){const t=e.$implicit;I.mc("value",t.description),I.Cb(1),I.Tc(" ",t.description," ")}}function q(t,e){if(1&t&&(I.Tb(0,"mat-option",31),I.Rc(1),I.Sb()),2&t){const t=e.$implicit;I.mc("value",t.description),I.Cb(1),I.Tc(" ",t.description," ")}}function X(t,e){if(1&t){const t=I.Ub();I.Tb(0,"div",7),I.Tb(1,"div",8),I.Tb(2,"mat-form-field",9),I.Tb(3,"mat-label"),I.Rc(4,"Tenant"),I.Sb(),I.Ob(5,"input",32),I.Tb(6,"mat-autocomplete",11,33),I.bc("optionSelected",(function(e){return I.Ec(t),I.fc().selectTenant(e)})),I.Pc(8,q,2,2,"mat-option",13),I.Sb(),I.Ob(9,"app-show-errors",14),I.Tb(10,"mat-hint"),I.Rc(11,"Please select Tenant"),I.Sb(),I.Sb(),I.Sb(),I.Sb()}if(2&t){const t=I.Ac(7),e=I.fc();I.Cb(5),I.mc("matAutocomplete",t),I.Cb(3),I.mc("ngForOf",e.filteredTenants),I.Cb(1),I.mc("ctrl",null==e.form?null:e.form.get("tenantId"))}}function Q(t,e){if(1&t){const t=I.Ub();I.Tb(0,"mat-option",34),I.bc("click",(function(){I.Ec(t);const e=I.fc(),i=I.Ac(35);return e.togglePerOne(i.viewValue)})),I.Rc(1),I.Sb()}if(2&t){const t=e.$implicit;I.mc("optionSelected",t.selected)("value",t.id),I.Cb(1),I.Tc(" ",t.description," ")}}function Y(t,e){if(1&t&&(I.Tb(0,"mat-option",31),I.Rc(1),I.Sb()),2&t){const t=e.$implicit;I.mc("value",t.description),I.Cb(1),I.Tc(" ",t.description," ")}}function W(t,e){1&t&&(I.Tb(0,"mat-label"),I.Rc(1,"Amount"),I.Sb())}function Z(t,e){1&t&&(I.Tb(0,"mat-label"),I.Rc(1,"Consumption"),I.Sb())}function J(t,e){1&t&&(I.Tb(0,"mat-hint"),I.Rc(1,"Please enter Amount"),I.Sb())}function tt(t,e){1&t&&(I.Tb(0,"mat-hint"),I.Rc(1,"Please enter Consumption"),I.Sb())}function et(t,e){if(1&t){const t=I.Ub();I.Tb(0,"div",35),I.Tb(1,"mat-checkbox",36),I.bc("change",(function(){I.Ec(t);const e=I.fc();return e.toggleDeduction(e.isDeduction)})),I.Rc(2,"Deduction"),I.Sb(),I.Sb()}if(2&t){const t=I.fc();I.Cb(1),I.mc("disabled","create"!==t.mode)}}function it(t,e){if(1&t&&(I.Tb(0,"button",37),I.Rc(1,"CREATE VARIABLE PAY"),I.Sb()),2&t){const t=I.fc();I.mc("disabled",t.form&&!(null!=t.form&&t.form.valid))}}function at(t,e){if(1&t&&(I.Tb(0,"button",37),I.Rc(1,"UPDATE VARIABLE PAY"),I.Sb()),2&t){const t=I.fc();I.mc("disabled",!(null!=t.form&&t.form.valid))}}let nt=(()=>{class t{constructor(t,e,i,a,n,o,r,c,s){this.defaults=t,this.fb=e,this.dialog=i,this.datePipe=a,this.decimalPipe=n,this.metadataService=o,this.variablePayService=r,this.cookieService=c,this.dialogRef=s,this.mode="create",this.isDeduction=!1,this.tenantId=0,this.accountHeadId=0,this.onAveragebillType=!1,this.isCancel=!1,this.selectedUnits=[],this.variablePayamount=0,this.currency=Object(x.e)("Currency",0),this.roundFormat=Object(x.e)("RoundOff"),s.disableClose=!0}ngOnInit(){this.defaults?(this.mode="update",this.selectedUnits.push(this.defaults.unitId)):this.defaults=new v({}),this.variablePayamount=this.defaults.amount,this.clientId=parseInt(this.cookieService.get("globalClientId")),this.variablePayService.getTenants(this.clientId).subscribe(t=>{this.metadataTenant=t.map(t=>new y.a(t)),this.filteredTenants=t}),this.getUnitsWithTenantName(),this.variablePayService.getBillPeriods(this.clientId).subscribe(t=>{this.metadataBillPeriod=t.map(t=>new S.a(t)),this.filteredBillPeriods=t}),this.variablePayService.getAccountHeads(this.clientId).subscribe(t=>{this.metadataAccountHead=t.map(t=>new C.a(t)),this.filteredAccountHeads=t,this.onBindSelectedBillLine()}),this.form=this.fb.group({id:[this.defaults.id||t.id++],billPeriodId:[this.defaults.billPeriodId||"",n.y.required],periodDescription:[this.defaults.periodDescription||""],tenantId:[this.defaults.tenantId||""],tenantName:[this.defaults.tenantName||""],unitId:[this.defaults.unitId||""],unitNumber:[this.defaults.unitNumber||""],accountHeadId:[this.defaults.accountHeadId||"",n.y.required],accountHeadName:[this.defaults.accountHeadName||"",n.y.required],isDeduction:[this.defaults.isDeduction||!1],amount:[this.defaults.amount||""],unit:[this.defaults.unit||"",n.y.required]}),this.isDeduction=this.defaults.isDeduction,this.form.controls.periodDescription.valueChanges.subscribe(t=>{this.filteredBillPeriods=this.filterBillPeriods(t)}),this.form.controls.tenantName.valueChanges.subscribe(t=>{this.filteredTenants=this.filterTenant(t)}),this.form.controls.unitNumber.valueChanges.subscribe(t=>{this.filteredUnits=this.filterUnit(t)}),this.form.controls.accountHeadName.valueChanges.subscribe(t=>{this.filteredAccountHeads=this.filterAccountHeads(t)}),"update"==this.mode&&(this.form.controls.periodDescription.disable(),this.form.controls.unit.disable(),this.form.controls.accountHeadName.disable())}filterTenant(t){return this.metadataTenant.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}filterUnit(t){return this.metadataUnit.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}filterBillPeriods(t){if(this.metadataBillPeriod)return this.metadataBillPeriod.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}filterAccountHeads(t){if(this.metadataAccountHead)return this.metadataAccountHead.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}save(){this.isCancel?(this.isCancel=!1,this.dialog.open(w.a,{data:{label:"Are you sure you want to Cancel?",selected:!1}}).afterClosed().subscribe(t=>{t&&this.dialogRef.close()})):"create"===this.mode?this.createVariablePay():"update"===this.mode&&this.updateVariablePay()}createVariablePay(){Object.assign(this.defaults,this.form.value),this.defaults.amount=parseFloat(""==this.form.controls.amount.value?"0":this.form.controls.amount.value),this.defaults.isDeduction=this.isDeduction,this.defaults.clientId=this.clientId,this.defaults.unit=this.selectedUnits.join(","),this.dialogRef.close(new v(this.defaults))}updateVariablePay(){Object.assign(this.defaults,this.form.value),this.defaults.amount=parseFloat(""==this.form.controls.amount.value?"0":this.form.controls.amount.value),this.defaults.isDeduction=this.isDeduction,this.defaults.clientId=this.clientId,this.defaults.unit=this.selectedUnits.join(","),this.dialogRef.close(new v(this.defaults))}isCreateMode(){return"create"===this.mode}isUpdateMode(){return"update"===this.mode}selectTenant(t){this.metadataTenant.forEach(e=>{t.option.value==e.description&&(this.form.controls.tenantId.setValue(e.id),this.tenantId=e.id,this.onTenantSelect(this.tenantId))})}selectUnit(t){this.metadataUnit.forEach(e=>{t.option.value==e.description&&this.form.controls.unitId.setValue(e.id)})}selectBillPeriod(t){this.metadataBillPeriod.forEach(e=>{t.option.value==e.description&&this.form.controls.billPeriodId.setValue(e.id)})}onFilterChange(t){t=(t=t.trim()).toLowerCase(),this.metadataBillPeriod.filter=t}selectAccountHead(t){this.onAveragebillType=!1;const e=this.metadataAccountHead.find(e=>e.description===t.option.value);e&&(this.accountHeadId=e.id,this.form.controls.accountHeadId.setValue(e.id),e.defaultValue&&e.defaultValue.toLowerCase()==="Consumption Charge".toLowerCase()?this.onAveragebillType=!0:e.defaultValue&&e.defaultValue.toLowerCase()==="Variable".toLowerCase()&&this.variablePayService.getVariableAmount(this.accountHeadId).subscribe(t=>{if(t){let e=this.decimalPipe.transform(t,this.roundFormat).replace(",","");this.form.controls.amount.setValue(e)}}))}onBindSelectedBillLine(){if(this.defaults&&this.defaults.accountHeadName){this.onAveragebillType=!1;const t=this.metadataAccountHead.find(t=>t.description===this.defaults.accountHeadName);t&&t.defaultValue&&t.defaultValue.toLowerCase()==="Consumption Charge".toLowerCase()&&(this.onAveragebillType=!0)}}toggleDeduction(t){this.isDeduction=!t}onTenantSelect(t){var e,i;this.filteredUnits=[],this.getUnitsWithTenantName(),null===(e=this.form)||void 0===e||e.controls.unitNumber.setValue(""),null===(i=this.form)||void 0===i||i.controls.unitId.setValue(0)}getUnitsWithTenantName(){this.variablePayService.GetUnitsWithTenantName(this.clientId).subscribe(t=>{this.metadataUnit=t.map(t=>new T.a(t)),this.filteredUnits=t})}toggleAllSelection(){this.form.controls.unit.patchValue(this.allSelected.selected?[...this.filteredUnits.map(t=>t.id),0]:[])}togglePerOne(t){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.form.controls.unit.value.length==this.filteredUnits.length&&this.allSelected.select()}close(){this.dialogRef.close()}closeDialog(){this.isCancel=!0}searchUnit(t){let e=this.selectUnits(t.toLowerCase());this.filteredUnits=e}selectUnits(t){let e=[];if(!t)return this.metadataUnit;for(let i of this.metadataUnit)i.description.toLowerCase().indexOf(t)>-1&&e.push(i);return e}handleInput(t){t.stopPropagation()}}return t.id=100,t.\u0275fac=function(e){return new(e||t)(I.Nb(l.a),I.Nb(n.f),I.Nb(l.b),I.Nb(a.f),I.Nb(a.g),I.Nb(g.a),I.Nb(P.a),I.Nb(O.a),I.Nb(l.h))},t.\u0275cmp=I.Hb({type:t,selectors:[["fury-variablepay-create-update",8,"component"]],viewQuery:function(t,e){var i;1&t&&I.Vc(_,!0),2&t&&I.zc(i=I.cc())&&(e.allSelected=i.first)},attrs:G,decls:68,vars:26,consts:[["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"fx-spacer"],["mat-icon-button","",3,"click"],["title","Close","mat-list-icon",""],[3,"formGroup","ngSubmit"],[1,"mat-dlg-content"],[1,"person","padding-top"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","20px"],["fxFlex",""],["matInput","","formControlName","periodDescription",3,"matAutocomplete"],[3,"optionSelected"],["billPeriod","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"ctrl"],["class","person padding-top",4,"ngIf"],["multiple","","formControlName","unit",3,"ngModel","ngModelChange"],["matInput","","focused","'true'","type","text","autocomplete","off","placeholder","search",1,"myInput",3,"keydown","keyup"],["myInput",""],[3,"value","click"],["allSelected",""],[3,"optionSelected","value","click",4,"ngFor","ngForOf"],["matInput","","formControlName","accountHeadName",3,"matAutocomplete"],["accountHead","matAutocomplete"],["fxFlex","48%"],[4,"ngIf"],["type","textbox","formControlName","amount","matInput","","furyValidateDecimalPlacesDirective","",3,"ngModel"],["class","deduction",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-button","",3,"click"],["mat-button","",3,"disabled",4,"ngIf"],[3,"value"],["matInput","","formControlName","tenantName",3,"matAutocomplete"],["tenant","matAutocomplete"],[3,"optionSelected","value","click"],[1,"deduction"],["color","primary","formControlName","isDeduction",3,"disabled","change"],["mat-button","",3,"disabled"]],template:function(t,e){if(1&t&&(I.Tb(0,"div",0),I.Tb(1,"mat-toolbar",1),I.Tb(2,"span"),I.Rc(3,"Variable Pay"),I.Sb(),I.Ob(4,"span",2),I.Tb(5,"button",3),I.bc("click",(function(){return e.close()})),I.Tb(6,"mat-icon",4),I.Rc(7,"close"),I.Sb(),I.Sb(),I.Sb(),I.Sb(),I.Tb(8,"form",5),I.bc("ngSubmit",(function(){return e.save()})),I.Tb(9,"mat-dialog-content",6),I.Tb(10,"fury-card"),I.Tb(11,"fury-card-content"),I.Tb(12,"div",7),I.Tb(13,"div",8),I.Tb(14,"mat-form-field",9),I.Tb(15,"mat-label"),I.Rc(16,"Bill Period"),I.Sb(),I.Ob(17,"input",10),I.Tb(18,"mat-autocomplete",11,12),I.bc("optionSelected",(function(t){return e.selectBillPeriod(t)})),I.Pc(20,K,2,2,"mat-option",13),I.Sb(),I.Ob(21,"app-show-errors",14),I.Tb(22,"mat-hint"),I.Rc(23,"Please select Bill Period"),I.Sb(),I.Sb(),I.Sb(),I.Sb(),I.Pc(24,X,12,3,"div",15),I.Tb(25,"div",7),I.Tb(26,"div",8),I.Tb(27,"mat-form-field",9),I.Tb(28,"mat-label"),I.Rc(29,"Unit"),I.Sb(),I.Tb(30,"mat-select",16),I.bc("ngModelChange",(function(t){return e.selectedUnits=t})),I.Tb(31,"input",17,18),I.bc("keydown",(function(t){return e.handleInput(t)}))("keyup",(function(t){return e.searchUnit(t.target.value)})),I.Sb(),I.Ob(33,"mat-divider"),I.Tb(34,"mat-option",19,20),I.bc("click",(function(){return e.toggleAllSelection()})),I.Rc(36,"Select All"),I.Sb(),I.Pc(37,Q,2,3,"mat-option",21),I.Sb(),I.Ob(38,"app-show-errors",14),I.Tb(39,"mat-hint"),I.Rc(40,"Please select Unit"),I.Sb(),I.Sb(),I.Tb(41,"mat-form-field",9),I.Tb(42,"mat-label"),I.Rc(43,"Bill line"),I.Sb(),I.Ob(44,"input",22),I.Tb(45,"mat-autocomplete",11,23),I.bc("optionSelected",(function(t){return e.selectAccountHead(t)})),I.Pc(47,Y,2,2,"mat-option",13),I.Sb(),I.Ob(48,"app-show-errors",14),I.Tb(49,"mat-hint"),I.Rc(50,"Please select Bill line"),I.Sb(),I.Sb(),I.Sb(),I.Sb(),I.Tb(51,"div",7),I.Tb(52,"div",8),I.Tb(53,"mat-form-field",24),I.Pc(54,W,2,0,"mat-label",25),I.Pc(55,Z,2,0,"mat-label",25),I.Ob(56,"input",26),I.gc(57,"noComma"),I.gc(58,"number"),I.Ob(59,"app-show-errors",14),I.Pc(60,J,2,0,"mat-hint",25),I.Pc(61,tt,2,0,"mat-hint",25),I.Sb(),I.Pc(62,et,3,1,"div",27),I.Sb(),I.Sb(),I.Sb(),I.Sb(),I.Sb(),I.Tb(63,"mat-dialog-actions",28),I.Tb(64,"button",29),I.bc("click",(function(){return e.closeDialog()})),I.Rc(65,"CANCEL"),I.Sb(),I.Pc(66,it,2,1,"button",30),I.Pc(67,at,2,1,"button",30),I.Sb(),I.Sb()),2&t){const t=I.Ac(19),i=I.Ac(46);I.Cb(8),I.mc("formGroup",e.form),I.Cb(9),I.mc("matAutocomplete",t),I.Cb(3),I.mc("ngForOf",e.filteredBillPeriods),I.Cb(1),I.mc("ctrl",null==e.form?null:e.form.get("billPeriodId")),I.Cb(3),I.mc("ngIf",!1),I.Cb(6),I.mc("ngModel",e.selectedUnits),I.Cb(4),I.mc("value",0),I.Cb(3),I.mc("ngForOf",e.filteredUnits),I.Cb(1),I.mc("ctrl",null==e.form?null:e.form.get("unitId")),I.Cb(6),I.mc("matAutocomplete",i),I.Cb(3),I.mc("ngForOf",e.filteredAccountHeads),I.Cb(1),I.mc("ctrl",null==e.form?null:e.form.get("accountHeadId")),I.Cb(6),I.mc("ngIf",!e.onAveragebillType),I.Cb(1),I.mc("ngIf",e.onAveragebillType),I.Cb(1),I.mc("ngModel",I.hc(57,21,I.ic(58,23,e.variablePayamount,e.roundFormat))),I.Cb(3),I.mc("ctrl",null==e.form?null:e.form.get("amount")),I.Cb(1),I.mc("ngIf",!e.onAveragebillType),I.Cb(1),I.mc("ngIf",e.onAveragebillType),I.Cb(1),I.mc("ngIf",!1),I.Cb(4),I.mc("ngIf",e.isCreateMode()),I.Cb(1),I.mc("ngIf",e.isUpdateMode())}},directives:[l.i,A.a,R.a,k.a,N.c,n.z,n.r,n.k,l.f,M.a,M.c,V.d,V.e,L.d,V.b,L.h,D.b,n.c,F.c,n.q,n.i,F.a,a.n,H.a,L.g,a.o,E.a,U.a,j.n,z.a,l.c,V.c,$.a],pipes:[B.a,a.g],styles:[".deduction[_ngcontent-%COMP%]{vertical-align:middle;margin-top:15px}.deductionAmount[_ngcontent-%COMP%]{margin-left:24px;margin-right:24px}.window[_ngcontent-%COMP%]{width:80%}.task-header[_ngcontent-%COMP%]{background-color:transparent;padding:0 5px;height:20px}.fx-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.myInput[_ngcontent-%COMP%]{height:50px!important;padding:10px!important}"]}),t})();var ot=i("tB66"),rt=i("a8hA"),ct=i("sXtk"),st=i("dNgK"),lt=i("xBcV"),ut=i("Hbgg"),dt=i("rnAf"),bt=i("rvYj"),mt=i("a+RD"),ft=i("STbY");const ht=["class","component"];function pt(t,e){if(1&t&&(I.Tb(0,"th",20),I.Rc(1),I.Sb()),2&t){const t=I.fc(2).$implicit;I.Cb(1),I.Tc(" ",t.name,"")}}function gt(t,e){if(1&t&&(I.Tb(0,"td",21),I.Rc(1),I.Sb()),2&t){const t=e.$implicit,i=I.fc(2).$implicit;I.Cb(1),I.Tc(" ",t[i.property]," ")}}function yt(t,e){if(1&t&&(I.Rb(0,17),I.Pc(1,pt,2,1,"th",18),I.Pc(2,gt,2,1,"td",19),I.Qb()),2&t){const t=I.fc().$implicit;I.mc("matColumnDef",t.property)}}function St(t,e){if(1&t&&(I.Rb(0),I.Pc(1,yt,3,1,"ng-container",16),I.Qb()),2&t){const t=e.$implicit;I.Cb(1),I.mc("ngIf",t.isModelProperty)}}function Ct(t,e){1&t&&(I.Tb(0,"th",22),I.Rc(1,"AMOUNT"),I.Sb())}function vt(t,e){if(1&t&&(I.Tb(0,"td",23),I.Rc(1),I.Sb()),2&t){const t=e.$implicit;I.Cb(1),I.Tc(" ",t.amountLocal," ")}}function Pt(t,e){1&t&&I.Ob(0,"th",24)}function Tt(t,e){if(1&t){const t=I.Ub();I.Tb(0,"td",25),I.Tb(1,"button",26),I.bc("click",(function(e){return I.Ec(t),e.stopPropagation()})),I.Tb(2,"mat-icon"),I.Rc(3,"more_horiz"),I.Sb(),I.Sb(),I.Tb(4,"mat-menu",27,28),I.Tb(6,"button",29),I.bc("click",(function(){I.Ec(t);const i=e.$implicit;return I.fc().updateVariablePay(i)})),I.Tb(7,"span"),I.Rc(8,"Modify"),I.Sb(),I.Sb(),I.Tb(9,"button",29),I.bc("click",(function(){I.Ec(t);const i=e.$implicit;return I.fc().deleteVariablePay(i)})),I.Tb(10,"span"),I.Rc(11,"Delete"),I.Sb(),I.Sb(),I.Sb(),I.Sb()}if(2&t){const t=I.Ac(5);I.Cb(1),I.mc("matMenuTriggerFor",t)}}function wt(t,e){1&t&&I.Ob(0,"tr",30)}function xt(t,e){1&t&&I.Ob(0,"tr",31)}const It=function(){return[]},Ot=[{path:"",component:(()=>{class t{constructor(t,e,i,a,n,o,r){var c,s;this.dialog=t,this.snackbar=e,this.currency=i,this.variablePayService=a,this.clientSelectionService=n,this.cookieService=o,this.envService=r,this.subject$=new m.a(1),this.data$=this.subject$.asObservable(),this.dateFormat=Object(x.e)("DateFormat"),this.currencyFormat="",this.roundFormat="",this.displayedColumns=[{name:"Period Description",property:"periodDescription",visible:!0,isModelProperty:!0},{name:"Tenant Name",property:"tenantName",visible:!0,isModelProperty:!0},{name:"Unit Number",property:"unitNumber",visible:!0,isModelProperty:!0},{name:"Account Head Name",property:"accountHeadName",visible:!0,isModelProperty:!0},{name:"Amount",property:"amountLocal",visible:!0,isModelProperty:!1},{name:"Actions",property:"actions",visible:!0}],this.pageSize=8,this.currencyFormat=null!==(c=Object(x.e)("Currency"))&&void 0!==c?c:r.currencyFormat,this.roundFormat=null!==(s=Object(x.e)("RoundOff"))&&void 0!==s?s:r.roundOffFormat}set content(t){this.sort=t,this.sort&&(this.dataSource.sort=this.sort)}get visibleColumns(){return this.displayedColumns.filter(t=>t.visible).map(t=>t.property)}ngOnInit(){this.clientSelectionService.setIsClientVisible(!0),this.getVariablePays()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createVariablePay(){(new l.e).width="60%",this.dialog.open(nt).afterClosed().subscribe(t=>{t&&this.variablePayService.createVariablePay(t).subscribe(t=>{this.snackbar.open("Variable Pay created successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),this.getVariablePays()})})}updateVariablePay(t){this.dialog.open(nt,{data:t}).afterClosed().subscribe(t=>{t&&this.variablePayService.updateVariablePayById(t.id,t).subscribe(t=>{this.snackbar.open("Variable Pay updated successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),this.getVariablePays()})})}deleteVariablePay(t){t&&t.isVariablePayUsed?this.notificationMessage("Cant delete this variable pay, its alreday used for bills.","red-snackbar"):this.dialog.open(ot.a).afterClosed().subscribe(e=>{e&&this.variablePayService.deleteVariablePayById(t.id,t).subscribe({next:t=>{this.snackbar.open("Variable Pay deleted successfully.",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),this.getVariablePays()},error:t=>{this.notificationMessage("Variable Pay deletion failed.","red-snackbar")}})})}getVariablePays(){this.clientId=parseInt(this.cookieService.get("globalClientId")),this.variablePayService.getVariablePays(this.clientId).subscribe(t=>{t=t.map(t=>new v(t)),this.subject$.next(t)}),this.dataSource=new b.k(this.variablePays),this.data$.pipe(Object(f.a)(t=>!!t)).subscribe(t=>{this.variablePays=t,this.dateFormat=Object(x.e)("DateFormat"),this.roundFormat=Object(x.e)("RoundOff"),this.currencyFormat=Object(x.e)("Currency"),t.forEach(t=>{t.amountLocal=this.currency.transform(t.amount,this.currencyFormat.toString(),!0,this.roundFormat)}),this.dataSource.data=t}),this.ngAfterViewInit()}notificationMessage(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}onFilterChange(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(I.Nb(l.b),I.Nb(st.b),I.Nb(a.d),I.Nb(P.a),I.Nb(rt.a),I.Nb(O.a),I.Nb(ct.a))},t.\u0275cmp=I.Hb({type:t,selectors:[["fury-create-variablepay",8,"component"]],viewQuery:function(t,e){var i;1&t&&(I.Jc(u.a,!0),I.Vc(d.a,!0)),2&t&&(I.zc(i=I.cc())&&(e.paginator=i.first),I.zc(i=I.cc())&&(e.content=i.first))},inputs:{displayedColumns:"displayedColumns"},attrs:ht,decls:20,vars:10,consts:[["mode","card"],["current","Variable Pays",3,"crumbs"],["name","Variable Pays",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","amountLocal"],["mat-header-cell","","class","header-align-right",4,"matHeaderCellDef"],["mat-cell","","class","header-align-right",4,"matCellDef"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"header-align-right"],["mat-cell","",1,"header-align-right"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(I.Tb(0,"fury-page-layout",0),I.Tb(1,"fury-page-layout-header"),I.Ob(2,"fury-breadcrumbs",1),I.Sb(),I.Tb(3,"fury-page-layout-content"),I.Tb(4,"fury-list",2),I.bc("filterChange",(function(t){return e.onFilterChange(t)})),I.Tb(5,"div",3),I.Tb(6,"button",4),I.bc("click",(function(){return e.createVariablePay()})),I.Tb(7,"mat-icon"),I.Rc(8,"add"),I.Sb(),I.Sb(),I.Sb(),I.Tb(9,"table",5),I.Pc(10,St,2,1,"ng-container",6),I.Rb(11,7),I.Pc(12,Ct,2,0,"th",8),I.Pc(13,vt,2,1,"td",9),I.Qb(),I.Rb(14,10),I.Pc(15,Pt,1,0,"th",11),I.Pc(16,Tt,12,1,"td",12),I.Qb(),I.Pc(17,wt,1,0,"tr",13),I.Pc(18,xt,1,0,"tr",14),I.Sb(),I.Ob(19,"mat-paginator",15),I.Sb(),I.Sb(),I.Sb()),2&t&&(I.Cb(2),I.mc("@fadeInRight",void 0)("crumbs",I.qc(9,It)),I.Cb(1),I.mc("@fadeInUp",void 0),I.Cb(1),I.mc("columns",e.displayedColumns),I.Cb(5),I.mc("dataSource",e.dataSource),I.Cb(1),I.mc("ngForOf",e.displayedColumns),I.Cb(7),I.mc("matHeaderRowDef",e.visibleColumns),I.Cb(1),I.mc("matRowDefColumns",e.visibleColumns),I.Cb(1),I.mc("pageSize",e.pageSize))},directives:[lt.a,ut.a,dt.a,bt.a,mt.a,R.a,k.a,b.j,d.a,a.n,b.c,b.e,b.b,b.g,b.i,u.a,a.o,b.d,d.b,b.a,ft.d,ft.e,ft.b,b.f,b.h],styles:[".header-align-right[_ngcontent-%COMP%]{text-align:right}"],data:{animation:[h.a,p.a]}}),t})()}];let At=(()=>{class t{}return t.\u0275mod=I.Lb({type:t}),t.\u0275inj=I.Kb({factory:function(e){return new(e||t)},imports:[[s.j.forChild(Ot)],s.j]}),t})();var Rt=i("YUcS"),kt=i("VE2z"),Nt=i("QibW"),Mt=i("wZkO"),Vt=i("GiUZ"),Lt=i("zWnM"),Dt=i("zeEN");let Ft=(()=>{class t{}return t.\u0275mod=I.Lb({type:t}),t.\u0275inj=I.Kb({factory:function(e){return new(e||t)},imports:[[a.c,n.l,kt.a,r.a,n.w,Rt.a,c.a,l.g,D.c,R.b,k.b,Nt.c,E.b,Mt.c,Vt.a,Lt.a,Dt.a]]}),t})();var Ht=i("WCGO");let Et=(()=>{class t{}return t.\u0275mod=I.Lb({type:t}),t.\u0275inj=I.Kb({factory:function(e){return new(e||t)},providers:[a.g],imports:[[a.c,At,n.l,c.a,Ht.a,r.a,Ft,o.a]]}),t})()},"6GKC":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i("KHMF"),n=i("fXoL");let o=(()=>{class t{constructor(t){this.el=t,this.roundOffFormat="",this.decimalPlaces=0,this.keyString="Decimal",this.regex=new RegExp(/^\d*\.?\d{0,2}$/g),this.specialKeys=["Backspace","Tab","End","Home","-","ArrowLeft","ArrowRight","Del","Delete"],this.roundOffFormat=Object(a.e)("RoundOff"),this.decimalPlaces=parseInt(this.roundOffFormat.substring(this.roundOffFormat.indexOf("-")+1,this.roundOffFormat.length))}onKeyDown(t){if(this.regex=new RegExp("^\\d*\\.?\\d{0,"+this.decimalPlaces+"}$"),-1!==this.specialKeys.indexOf(t.key))return;let e=this.el.nativeElement.value;const i=this.el.nativeElement.selectionStart,a=[e.slice(0,i),t.key===this.keyString||t.key===this.keyString.toLowerCase()?".":t.key,e.slice(i)].join("");a&&!String(a).match(this.regex)&&t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(n.l))},t.\u0275dir=n.Ib({type:t,selectors:[["","furyValidateDecimalPlacesDirective",""]],hostBindings:function(t,e){1&t&&n.bc("keydown",(function(t){return e.onKeyDown(t)}))}}),t})()},YaQ2:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var a=i("fXoL"),n=i("ofXK");function o(t,e){if(1&t&&(a.Tb(0,"small"),a.Rc(1),a.Ob(2,"br"),a.Sb()),2&t){const t=e.$implicit;a.Cb(1),a.Tc(" ",t," ")}}function r(t,e){if(1&t&&(a.Tb(0,"div"),a.Pc(1,o,3,1,"small",1),a.Sb()),2&t){const t=a.fc();a.Cb(1),a.mc("ngForOf",t.listOfErrors())}}let c=(()=>{class t{constructor(){this.PATTERN_ERROR_MESSAGE={"/^[a-zA-Z ]*$/":"Accepts only alphabets with spaces","/^[a-zA-Z0-9]*$/":"Accepts only alphanumeric values with no spaces","/^[a-zA-Z0-9 ]*$/":"Accepts only alphanumeric values with spaces","/^[0-9]*$/":"Accepts only numbers","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{3,4}$":"Enter valid email address of format test@mail.com"},this.ERROR_MESSAGE={required:()=>"This field is required",minlength:t=>`Min ${t.requiredLength} chars is required but got only ${t.actualLength}`,maxlength:t=>`Max chars allowed is ${t.requiredLength} but got ${t.actualLength}`,pattern:t=>""+this.PATTERN_ERROR_MESSAGE[t.requiredPattern],email:()=>"Enter valid email address of format test@mail.com"}}ngOnInit(){}shouldShowErrors(){return this.ctrl&&this.ctrl.errors&&this.ctrl.touched}listOfErrors(){return Object.keys(this.ctrl.errors).map(t=>this.ERROR_MESSAGE[t](this.ctrl.getError(t)))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-show-errors"]],inputs:{ctrl:"ctrl"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&a.Pc(0,r,2,1,"div",0),2&t&&a.mc("ngIf",e.shouldShowErrors())},directives:[n.o,n.n],styles:["small[_ngcontent-%COMP%]{color:red}"]}),t})()},"a+RD":function(t,e,i){"use strict";i.d(e,"a",(function(){return C}));var a=i("fXoL"),n=i("xgIS"),o=i("/uUt"),r=i("Kj3r"),c=i("ofXK"),s=i("STbY"),l=i("XiUz"),u=i("NFeN"),d=i("bTqV"),b=i("bSwM"),m=i("3Pt+");const f=["filter"];function h(t,e){if(1&t&&(a.Tb(0,"button",12),a.Tb(1,"mat-icon"),a.Rc(2,"filter_list"),a.Sb(),a.Sb()),2&t){a.fc(2);const t=a.Ac(3);a.mc("matMenuTriggerFor",t)}}function p(t,e){if(1&t&&(a.Tb(0,"div",5),a.Tb(1,"div",6),a.Rc(2),a.Sb(),a.Tb(3,"div",7),a.Tb(4,"mat-icon",8),a.Rc(5,"search"),a.Sb(),a.Ob(6,"input",9,10),a.Sb(),a.Pc(8,h,3,1,"button",11),a.kc(9,1),a.Sb()),2&t){const t=a.fc();a.Cb(2),a.Sc(t.name),a.Cb(6),a.mc("ngIf",!t.hideFilter)}}function g(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",13),a.bc("click",(function(i){a.Ec(t);const n=e.$implicit;return a.fc().toggleColumnVisibility(n,i)})),a.Tb(1,"mat-checkbox",14,15),a.bc("ngModelChange",(function(i){return a.Ec(t),e.$implicit.visible=i}))("click",(function(e){return a.Ec(t),e.stopPropagation()})),a.Rc(3),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit;a.Cb(1),a.mc("ngModel",t.visible),a.Cb(2),a.Tc(" ",t.name," ")}}const y=["*",[["",8,"actions"]]],S=["*",".actions"];let C=(()=>{class t{constructor(){this.filterChange=new a.o}ngAfterViewInit(){this.hideHeader||Object(n.a)(this.filter.nativeElement,"keyup").pipe(Object(o.a)(),Object(r.a)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(t,e){e.stopPropagation(),e.stopImmediatePropagation(),t.visible=!t.visible}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["fury-list"]],viewQuery:function(t,e){var i;1&t&&a.Vc(f,!0),2&t&&a.zc(i=a.cc())&&(e.filter=i.first)},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader",hideFilter:"hideFilter"},outputs:{filterChange:"filterChange"},ngContentSelectors:S,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["class","fury-column-filter","type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,e){1&t&&(a.lc(y),a.Tb(0,"div",0),a.Pc(1,p,10,2,"div",1),a.Tb(2,"mat-menu",2,3),a.Pc(4,g,4,2,"button",4),a.Sb(),a.kc(5),a.Sb()),2&t&&(a.Cb(1),a.mc("ngIf",!e.hideHeader),a.Cb(3),a.mc("ngForOf",e.columns))},directives:[c.o,s.e,c.n,l.d,l.c,l.e,l.b,u.a,d.a,s.d,b.a,m.q,m.t],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width:599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width:599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}"],encapsulation:2}),t})()},dUAH:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i("fXoL");let n=(()=>{class t{transform(t){return null!=t?t.toString().replace(/,/g,""):""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Mb({name:"noComma",type:t,pure:!0}),t})()},tB66:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var a=i("fXoL"),n=i("0IaG"),o=i("XiUz"),r=i("bTqV");let c=(()=>{class t{constructor(t){this.dialogRef=t,this.confirmMessage="Are you sure you want to Delete?",t.disableClose=!0}getConfirmation(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(n.h))},t.\u0275cmp=a.Hb({type:t,selectors:[["fury-user-confirmation-popup"]],decls:9,vars:1,consts:[[1,"heading"],[1,"mat-dlg-content","contentStyle"],["fxLayout","row","fxLayoutAlign","end center",1,"bottomPadding"],["mat-button","",3,"click"],["mat-button","",1,"buttonStyle",3,"click"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Rc(1," Confirm Action "),a.Sb(),a.Tb(2,"div",1),a.Rc(3),a.Sb(),a.Tb(4,"mat-dialog-actions",2),a.Tb(5,"button",3),a.bc("click",(function(){return e.getConfirmation(!1)})),a.Rc(6,"NO"),a.Sb(),a.Tb(7,"button",4),a.bc("click",(function(){return e.getConfirmation(!0)})),a.Rc(8,"YES"),a.Sb(),a.Sb()),2&t&&(a.Cb(3),a.Sc(e.confirmMessage))},directives:[n.c,o.d,o.c,r.a],styles:[".buttonStyle[_ngcontent-%COMP%]{background:#1976d2;color:#fff;padding-right:10px}.headingStyle[_ngcontent-%COMP%]{text-align:center;color:red;background-color:silver;border-radius:50%;width:100px;height:100px}.heading[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-top:10px}mat-icon[_ngcontent-%COMP%]{font-size:56px;height:56px;width:56px;line-height:56px;justify-content:center}.contentStyle[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:30px;padding-right:30px}.rightAlign[_ngcontent-%COMP%]{text-align:right}.bottomPadding[_ngcontent-%COMP%]{padding-bottom:20px}"]}),t})()},zWnM:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i("fXoL");let n=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[]]}),t})()},zeEN:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i("fXoL");let n=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[]]}),t})()}}]);