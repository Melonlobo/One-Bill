!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{Iab2:function(t,n,e){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";function n(t,n,e){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){r(i.response,n,e)},i.onerror=function(){console.error("could not download file")},i.send()}function e(t){var n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch(t){}return 200<=n.status&&299>=n.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,r){var c=o.URL||o.webkitURL,l=document.createElement("a");l.download=a=a||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):e(l.href)?n(t,a,r):i(l,l.target="_blank")):(l.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,o,a){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,n){return void 0===n?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),o);else if(e(t))n(t,o,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){i(r)}))}}:function(t,e,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,i);var c="application/octet-stream"===t.type,l=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||c&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var b=o.URL||o.webkitURL,d=b.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout((function(){b.revokeObjectURL(d)}),4e4)}});o.saveAs=r.saveAs=r,t.exports=r})?i.apply(n,[]):i)||(t.exports=o)},Wodw:function(n,i,o){"use strict";o.r(i),o.d(i,"ListemailsModule",(function(){return yt}));var a,r,c,l,s,u=o("ofXK"),b=o("tyNb"),d=o("0IaG"),f=o("nT7d"),m=o("LRne"),g=o("lJxs"),p=o("5oXs"),h=o("tk/3"),x=o("sXtk"),v=o("fXoL"),y=((a=function(){function n(e,i){var o=this;t(this,n),this.httpClient=e,this.envService=i,this.baseUrl="",this.mails=p.a,this.availableLabels=[],this.baseUrl=i.backend,this.mails.forEach((function(t){t.labels.forEach((function(t){o.availableLabels.find((function(n){return n.name===t.name}))||o.availableLabels.push(t)}))}))}return e(n,[{key:"getStarred",value:function(){return Object(m.a)(this.mails).pipe(Object(g.a)((function(t){return t.filter((function(t){return t.starred}))})))}},{key:"getNotificationEntities",value:function(t,n){var e=new h.f;return e=(e=e.append("entityType",t)).append("clientId",n),this.httpClient.get(this.baseUrl+"/emails/GetNotificationEntities",{params:e})}},{key:"getGroup",value:function(t){return Object(m.a)(this.mails).pipe(Object(g.a)((function(n){return n.filter((function(n){return n.group===t}))})))}},{key:"getEmailList",value:function(t,n,e,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=new h.f;return r=(r=(r=(r=(r=(r=r.append("flag",""+t)).append("clientId",""+n)).append("receivedById",""+e)).append("ownerId",""+(null!=i?i:0))).append("role",""+o)).append("mailId",""+a),this.httpClient.get(this.baseUrl+"/emails/GetMailDetails",{params:r})}},{key:"updateIsReadForMail",value:function(t){return this.httpClient.put(this.baseUrl+"/emails/updateIsReadForMail",t)}},{key:"getMailFromServer",value:function(t,n){var e=new h.f;return e=(e=e.append("clientId",""+t)).append("userId",""+n),this.httpClient.get(this.baseUrl+"/emails",{params:e})}},{key:"getMail",value:function(t){return Object(m.a)(this.mails).pipe(Object(g.a)((function(n){return n.find((function(n){return n.id===t}))})))}},{key:"toggleStarred",value:function(t){var n=this.find(t);n&&(n.starred=!t.starred)}},{key:"addLabel",value:function(t,n){var e=this.find(n);e&&(e.labels.find((function(n){return n===t}))||(e.labels.push(t),this.addToAvailableIfNotExists(t)))}},{key:"addToAvailableIfNotExists",value:function(t){-1===this.availableLabels.indexOf(t)&&this.availableLabels.push(t)}},{key:"removeLabel",value:function(t,n){var e=this.find(n);if(e){var i=e.labels.findIndex((function(n){return n===t}));i>-1&&e.labels.splice(i,1)}}},{key:"removeMail",value:function(t){var n=this.mails.findIndex((function(n){return n===t}));n>-1&&(this.mails.splice(n,1),this.lastRemovedMail=t,this.lastRemovedMailIndex=n)}},{key:"undoRemove",value:function(){return!(!this.lastRemovedMail||!this.lastRemovedMailIndex)&&(this.mails.splice(this.lastRemovedMailIndex,0,this.lastRemovedMail),this.lastRemovedMail)}},{key:"find",value:function(t){return this.mails.find((function(n){return n.id===t.id}))}},{key:"getLabelColors",value:function(){return Object(m.a)(p.b)}}]),n}()).\u0275fac=function(t){return new(t||a)(v.Xb(h.c),v.Xb(x.a))},a.\u0275prov=v.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),C=o("b6Qw"),M=o("XhcP"),w=o("ZS9X"),S=o("XiUz"),O=o("MutI"),T=o("FKr1"),_=o("NFeN"),k=o("znSr"),P=o("f0Cb"),L=function(){return["/listemails/primary"]},R=function(){return["/listemails/Sent"]},I=((r=function(){function n(e){t(this,n),this.router=e,this.onListTypeChange=new v.o}return e(n,[{key:"ngOnInit",value:function(){}},{key:"navigateToInboxList",value:function(){this.onListTypeChange.emit("receive")}},{key:"navigateToSentList",value:function(){this.onListTypeChange.emit("sent")}}]),n}()).\u0275fac=function(t){return new(t||r)(v.Nb(b.f))},r.\u0275cmp=v.Hb({type:r,selectors:[["fury-inbox-navigation"]],inputs:{responsive:"responsive"},outputs:{onListTypeChange:"onListTypeChange"},decls:15,vars:8,consts:[["fxFlex","grow"],[1,"navigation"],["matSubheader",""],["matRipple","","routerLinkActive","active",1,"secondary-text",3,"routerLink","click"],["matListIcon",""],["matLine","",3,"fxHide","fxShow.gt-sm"]],template:function(t,n){1&t&&(v.Tb(0,"fury-scrollbar",0),v.Tb(1,"mat-list",1),v.Tb(2,"div",2),v.Rc(3,"Inbox"),v.Sb(),v.Tb(4,"mat-list-item",3),v.bc("click",(function(){return n.navigateToInboxList()})),v.Tb(5,"mat-icon",4),v.Rc(6,"inbox"),v.Sb(),v.Tb(7,"div",5),v.Rc(8,"Inbox Mail"),v.Sb(),v.Sb(),v.Ob(9,"mat-divider"),v.Tb(10,"mat-list-item",3),v.bc("click",(function(){return n.navigateToSentList()})),v.Tb(11,"mat-icon",4),v.Rc(12,"send"),v.Sb(),v.Tb(13,"div",5),v.Rc(14,"Sent Mail"),v.Sb(),v.Sb(),v.Sb(),v.Sb()),2&t&&(v.Cb(4),v.mc("routerLink",v.qc(6,L)),v.Cb(3),v.mc("fxHide",n.responsive)("fxShow.gt-sm",n.responsive),v.Cb(3),v.mc("routerLink",v.qc(7,R)),v.Cb(3),v.mc("fxHide",n.responsive)("fxShow.gt-sm",n.responsive))},directives:[w.a,S.b,O.a,O.f,O.d,T.s,b.h,b.g,_.a,O.c,T.j,k.b,P.a],styles:[".navigation[_ngcontent-%COMP%]{margin-top:24px}.navigation[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{cursor:pointer;margin-top:8px;margin-bottom:8px;position:relative;outline:none;border-radius:8px}.navigation[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{font-weight:500}.navigation[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}"]}),r),F=o("zpSk"),A=o("bTqV"),N=o("1G5W"),j=o("CP7g"),E=((c=function(){function n(){t(this,n)}return e(n,[{key:"transform",value:function(t,n){var e;return console.log("filterText",n),console.log("QQQQtransform",t),console.log("keys",Object.keys(t)),e=t?t.filter((function(t){return t.content.search(new RegExp(n,"i"))>-1})):[],console.log("returnList",e),e}}]),n}()).\u0275fac=function(t){return new(t||c)},c.\u0275pipe=v.Mb({name:"listFilter",type:c,pure:!0}),c),H=o("a8hA"),U=o("Nm8O"),D=o("STbY"),G=o("bSwM"),$=((s=function(){function n(){t(this,n)}return e(n,[{key:"transform",value:function(t,e){return e&&t?n.filter(t,e):t}}],[{key:"filter",value:function(t,n){var e=n.toLowerCase();return t.filter((function(t){return function t(n,i){for(var o in n)if(null!==n[o]&&null!=n[o]){if("object"==typeof n[o]&&t(n[o],i))return!0;if(n[o].toString().toLowerCase().includes(e))return!0}return!1}(t,n)}))}}]),n}()).\u0275fac=function(t){return new(t||s)},s.\u0275pipe=v.Mb({name:"filter",type:s,pure:!1}),s.\u0275prov=v.Jb({token:s,factory:s.\u0275fac}),s),X=((l=function n(){t(this,n)}).\u0275mod=v.Lb({type:l}),l.\u0275inj=v.Kb({factory:function(t){return new(t||l)}}),l),z=function(t){return["../mail",t]},B=function(t){return{id:t}};function K(t,n){if(1&t){var e=v.Ub();v.Tb(0,"div",13),v.Tb(1,"div",14),v.Tb(2,"mat-checkbox",15),v.bc("click",(function(t){return v.Ec(e),t.stopPropagation()})),v.Sb(),v.Sb(),v.Tb(3,"div",16),v.Tb(4,"div",17),v.Ob(5,"img",18),v.Tb(6,"div",19),v.Rc(7),v.Tb(8,"div",20),v.Rc(9),v.Sb(),v.Sb(),v.Sb(),v.Tb(10,"div",21),v.Tb(11,"div",22),v.Rc(12),v.Sb(),v.Tb(13,"div",23),v.Rc(14,"\xb7"),v.Sb(),v.Sb(),v.Sb(),v.Tb(15,"div",24),v.Tb(16,"span",25),v.Rc(17),v.gc(18,"date"),v.Sb(),v.Tb(19,"button",26),v.bc("click",(function(t){return v.Ec(e),t.stopPropagation()})),v.Tb(20,"mat-icon"),v.Rc(21,"more_vert"),v.Sb(),v.Sb(),v.Sb(),v.Sb()}if(2&t){var i=n.$implicit,o=v.fc(),a=v.Ac(26);v.Fb("background-hover",i.read),v.mc("routerLink",v.rc(13,z,i.id)),v.Cb(5),v.oc("src","http://i.pravatar.cc/30?u=",i.from.name,"",v.Gc),v.Cb(2),v.Tc(" ",i.from.name," "),v.Cb(2),v.Sc(i.mailDateTime),v.Cb(3),v.Sc(i.subject),v.Cb(5),v.Sc(v.ic(18,10,i.mailDateTime,o.dateFormat)),v.Cb(2),v.mc("matMenuTriggerFor",a)("matMenuTriggerData",v.rc(15,B,i.id))}}function q(t,n){if(1&t){var e=v.Ub();v.Tb(0,"button",10),v.bc("click",(function(){v.Ec(e);var t=n.id;return v.fc().enableIsread(t)})),v.Tb(1,"mat-icon"),v.Rc(2,"markunread_mailbox"),v.Sb(),v.Rc(3," Mark as unread "),v.Sb()}}var Q,J,W,V,Y=((W=function(){function n(e,i,o,a,r,c,l){t(this,n),this.route=e,this.date=i,this.inboxService=o,this.searchPipe=a,this.jwtHelperService=r,this.clientSelectionService=c,this.cookieService=l,this.txtSearch="",this.maillist=[],this.ownerId=parseInt(""==this.cookieService.get("ownerId")?"0":this.cookieService.get("ownerId")),this.mailListType="receive",this.dateFormat="MMM d, y, h:mm:ss a"}return e(n,[{key:"valChange",value:function(t){this.txtSearch=t}},{key:"ngOnInit",value:function(){var t=this;this.clientSelectionService.setIsClientVisible(!0);var n=this.cookieService.get("access_token"),e=this.jwtHelperService.decodeToken(n);e&&(this.role=e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]),this.clientId=this.cookieService.get("globalClientId"),this.userId=this.cookieService.get("userId"),this.route.paramMap.pipe(Object(N.a)(Object(j.a)(this))).subscribe((function(n){"starred"===n.get("category")?t.mails$=t.inboxService.getStarred():"primary"===n.get("category")?(t.mailListType="receive",t.emails=t.inboxService.getEmailList(t.mailListType,t.clientId,t.userId,t.ownerId,t.role)):"Update"===n.get("category")?t.onUpdateMail():"Sent"===n.get("category")?(t.mailListType="sent",t.emails=t.inboxService.getEmailList(t.mailListType,t.clientId,t.userId,t.ownerId,t.role)):t.mails$=t.inboxService.getGroup(n.get("category"))})),this.emails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role),this.inboxMails=this.emails}},{key:"ngOnChanges",value:function(t){this.inboxMails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role),this.listMails()}},{key:"listMails",value:function(){this.mailListType||(this.mailListType="receive"),this.emails=this.inboxService.getEmailList(this.mailListType,this.clientId,this.userId,this.ownerId,this.role),this.inboxMails=this.emails}},{key:"onUpdateMail",value:function(){var t=this;this.inboxService.getMailFromServer(this.clientId,this.userId).subscribe((function(n){n&&(t.emails=t.inboxService.getEmailList(t.mailListType,t.clientId,t.userId,t.ownerId,t.role))}))}},{key:"unreadMail",value:function(){this.emails=this.inboxMails,this.emails=this.emails.pipe(Object(g.a)((function(t){return t.filter((function(t){return!t.isRead}))})))}},{key:"readMail",value:function(){this.emails=this.inboxMails,this.emails=this.emails.pipe(Object(g.a)((function(t){return t.filter((function(t){return t.isRead}))})))}},{key:"enableIsread",value:function(t){var n={id:Number(t),isRead:!1};this.inboxService.updateIsReadForMail(n).subscribe((function(t){}))}},{key:"toggleStarred",value:function(t){this.inboxService.toggleStarred(t)}},{key:"ngOnDestroy",value:function(){}}]),n}()).\u0275fac=function(t){return new(t||W)(v.Nb(b.a),v.Nb(u.f),v.Nb(y),v.Nb(E),v.Nb(U.a),v.Nb(H.a),v.Nb(C.a))},W.\u0275cmp=v.Hb({type:W,selectors:[["fury-inbox-mail-list"]],inputs:{mailListType:"mailListType"},features:[v.Ab],decls:28,vars:7,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"search-bar","card","elevation"],[1,"icon"],["type","search","fxFlex","","placeholder","Search...",1,"search","card","text",3,"[ngModel]","input"],["searchInput",""],["fxLayout","column",1,"mail-list"],["fxFlex","none","fxLayout","row","fxLayoutAlign","start center",1,"header","border-bottom"],["mat-icon-button","","type","button",1,"icon",3,"matMenuTriggerFor"],["fxFlex","auto",1,"content"],["class","mail border-bottom","gdColumns","68px 1fr 140px","gdColumns.lt-md","68px 1fr auto","gdColumns.lt-sm","auto 1fr auto","gdGap","8px",3,"background-hover","routerLink",4,"ngFor","ngForOf"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mailOptions","matMenu"],["matMenuContent",""],["gdColumns","68px 1fr 140px","gdColumns.lt-md","68px 1fr auto","gdColumns.lt-sm","auto 1fr auto","gdGap","8px",1,"mail","border-bottom",3,"routerLink"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","6px","fxHide","","fxShow.gt-xs",""],[1,"checkbox",3,"click"],["gdColumns.gt-sm","150px 1fr","gdRows.lt-md","auto 1fr",1,"content-container"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px"],["fxFlex","noshrink","fxHide","","fxShow.gt-sm","",1,"picture",3,"src"],["fxFlex","grow","fxLayout","row","fxLayoutAlign","space-between center",1,"from","text"],["fxHide.gt-sm","",1,"when","secondary-text"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start center","fxLayoutGap","8px",1,"content-wrapper"],["fxFlex","noshrink",1,"subject","text"],["fxHide","","fxShow.gt-sm","",1,"middot","text"],["fxLayout","row","fxLayoutAlign","end center"],["fxHide","","fxShow.gt-sm","",1,"when","secondary-text"],["mat-icon-button","",1,"icon",3,"matMenuTriggerFor","matMenuTriggerData","click"]],template:function(t,n){if(1&t&&(v.Tb(0,"div",0),v.Tb(1,"mat-icon",1),v.Rc(2,"search"),v.Sb(),v.Tb(3,"input",2,3),v.bc("[ngModel]",(function(){return n.txtSearch}))("input",(function(t){return n.valChange(t.target.value)})),v.Sb(),v.Sb(),v.Tb(5,"div",4),v.Tb(6,"div",5),v.Tb(7,"button",6),v.Tb(8,"mat-icon"),v.Rc(9,"arrow_drop_down"),v.Sb(),v.Sb(),v.Sb(),v.Tb(10,"fury-scrollbar",7),v.Pc(11,K,22,17,"div",8),v.gc(12,"filter"),v.gc(13,"async"),v.Sb(),v.Sb(),v.Tb(14,"mat-menu",null,9),v.Tb(16,"button",10),v.bc("click",(function(){return n.listMails()})),v.Tb(17,"span"),v.Rc(18," All "),v.Sb(),v.Sb(),v.Tb(19,"button",10),v.bc("click",(function(){return n.unreadMail()})),v.Tb(20,"span"),v.Rc(21," Unread "),v.Sb(),v.Sb(),v.Tb(22,"button",10),v.bc("click",(function(){return n.readMail()})),v.Tb(23,"span"),v.Rc(24," Read "),v.Sb(),v.Sb(),v.Sb(),v.Tb(25,"mat-menu",null,11),v.Pc(27,q,4,0,"ng-template",12),v.Sb()),2&t){var e=v.Ac(15);v.Cb(7),v.mc("matMenuTriggerFor",e),v.Cb(4),v.mc("ngForOf",v.ic(12,2,v.hc(13,5,n.emails),n.txtSearch))}},directives:[S.d,S.c,_.a,S.b,A.a,D.d,w.a,u.n,D.e,D.b,D.a,F.d,F.b,b.g,S.e,k.b,G.a,F.c],pipes:[$,u.b,u.f],styles:[".header[_ngcontent-%COMP%]{height:64px;min-height:64px;max-height:64px;padding-left:24px;padding-right:24px}.mail-list[_ngcontent-%COMP%]{height:100%}.search-bar[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.search-bar[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:14px;margin-left:16px}.search-bar[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{border:0;height:54px;outline:none}.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{height:54px;min-height:54px;max-height:54px;padding-left:24px;padding-right:12px;position:relative;transition:all .4s cubic-bezier(.25,.8,.25,1);cursor:pointer;outline:none;font:var(--font-body-1)}@media screen and (max-width:599px){.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{height:auto;max-height:none;padding-top:12px;padding-bottom:12px}}@media screen and (min-width:599px) and (max-width:959px){.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]{height:auto;max-height:none;padding-top:12px;padding-bottom:12px}}.content[_ngcontent-%COMP%]   .mail.background-hover[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail.background-hover[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail.background-hover[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail.background-hover[_ngcontent-%COMP%]   .when[_ngcontent-%COMP%]{font-weight:400}.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50%}.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .mail[_ngcontent-%COMP%]   .when[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;font-weight:500}"]}),W),Z=((J=function(){function n(e,i,o,a){t(this,n),this.dialog=e,this.route=i,this.inboxService=o,this.cookieService=a,this.mailType="",this.sendTo=""}return e(n,[{key:"ngOnInit",value:function(){}},{key:"receiveMailType",value:function(t){this.mailType=t}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){}},{key:"openCompose",value:function(){var t=this,n=this.cookieService.get("globalClientId");this.sendTo="",this.inboxService.getNotificationEntities("",n).subscribe((function(n){if(n){var e=t.cookieService.get("ownerId");if(e){var i=n.find((function(t){return t.id==e}));if(i){t.sendTo=i.email;var o=new d.e;o.data=i,t.dialog.open(f.a,o)}}""==t.sendTo&&t.openDialog()}else t.openDialog()}),(function(n){t.openDialog()}))}},{key:"openDialog",value:function(){var t=new d.e;t.data={sendTo:this.sendTo},this.dialog.open(f.a,t)}}]),n}()).\u0275fac=function(t){return new(t||J)(v.Nb(d.b),v.Nb(b.a),v.Nb(y),v.Nb(C.a))},J.\u0275cmp=v.Hb({type:J,selectors:[["fury-listemails"]],decls:29,vars:2,consts:[[1,"drawer-container"],["mode","over"],["drawer",""],[1,"drawer-navigation"],["gdRows","auto 1fr",1,"drawer-content"],["gdColumns","250px 1fr","gdColumns.lt-md","116px 1fr","gdColumns.lt-sm","1fr",1,"header","elevation"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutAlign.lt-md","center center","fxLayoutAlign.lt-sm","start center",1,"logo"],["fxHide.gt-xs","","mat-icon-button","","type","button",3,"click"],["fxHide","","fxShow.gt-xs","",2,"color","#3069b1"],["fxHide.sm","",2,"color","#3069b1"],["gdColumns","250px 1fr","gdColumns.lt-md","116px 1fr","gdColumns.lt-sm","1fr",1,"page-container"],["fxHide","","fxLayout","column","fxShow.gt-xs","",1,"navigation-container"],["fxFlex","0 0 auto","fxLayout","row","fxLayoutAlign","center center",1,"compose"],["color","primary","fxFlex","","fxHide","","fxShow.gt-sm","","mat-raised-button","","type","button",3,"click"],[1,"icon"],["color","primary","fxHide.gt-sm","","mat-mini-fab","","type","button"],[3,"responsive","onListTypeChange"],[1,"content","card","elevation"],[3,"mailListType"]],template:function(t,n){if(1&t){var e=v.Ub();v.Tb(0,"mat-drawer-container",0),v.Tb(1,"mat-drawer",1,2),v.Tb(3,"div",3),v.Ob(4,"fury-inbox-navigation"),v.Sb(),v.Sb(),v.Tb(5,"mat-drawer-content",4),v.Tb(6,"div",5),v.Tb(7,"div",6),v.Tb(8,"button",7),v.bc("click",(function(){return v.Ec(e),v.Ac(2).open()})),v.Tb(9,"mat-icon"),v.Rc(10,"menu"),v.Sb(),v.Sb(),v.Tb(11,"mat-icon",8),v.Rc(12,"mail"),v.Sb(),v.Tb(13,"span",9),v.Rc(14,"Mailbox"),v.Sb(),v.Sb(),v.Sb(),v.Tb(15,"div",10),v.Tb(16,"div",11),v.Tb(17,"div",12),v.Tb(18,"button",13),v.bc("click",(function(){return n.openCompose()})),v.Tb(19,"mat-icon",14),v.Rc(20,"edit"),v.Sb(),v.Rc(21," Compose "),v.Sb(),v.Tb(22,"button",15),v.Tb(23,"mat-icon"),v.Rc(24,"edit"),v.Sb(),v.Sb(),v.Sb(),v.Tb(25,"fury-inbox-navigation",16),v.bc("onListTypeChange",(function(t){return n.receiveMailType(t)})),v.Sb(),v.Sb(),v.Tb(26,"div",17),v.Ob(27,"router-outlet"),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Ob(28,"fury-inbox-mail-list",18)}2&t&&(v.Cb(25),v.mc("responsive",!0),v.Cb(3),v.mc("mailListType",n.mailType))},directives:[M.b,M.a,I,M.c,F.c,F.d,S.d,S.c,A.a,k.b,_.a,S.b,b.k,Y],styles:[".drawer-container[_ngcontent-%COMP%]{height:100%}.drawer-content[_ngcontent-%COMP%]{overflow:hidden}.drawer-navigation[_ngcontent-%COMP%]{padding:0 24px;overflow:hidden}.header[_ngcontent-%COMP%]{background:#d3e6f0;padding:48px 24px 112px 0;background-size:cover;z-index:10}@media screen and (max-width:599px){.header[_ngcontent-%COMP%]{padding:8px 8px 72px}}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#fff;padding-left:24px;font:var(--font-display-1)}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{padding-right:12px}@media screen and (min-width:599px) and (max-width:959px){.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{padding-left:0}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{padding-right:0}}@media screen and (max-width:599px){.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{padding-left:0;margin-bottom:8px}}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:14px;margin-left:16px}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{border:0;height:54px;outline:none}.page-container[_ngcontent-%COMP%]{margin-top:-64px;overflow:hidden}.navigation-container[_ngcontent-%COMP%]{padding:0 24px 24px;z-index:20}.navigation-container[_ngcontent-%COMP%]   .compose[_ngcontent-%COMP%]{height:64px}.navigation-container[_ngcontent-%COMP%]   .compose[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:-24px;padding-right:8px}.content[_ngcontent-%COMP%]{margin-right:24px;margin-bottom:24px;border-radius:8px;z-index:20;overflow:hidden}@media screen and (max-width:599px){.content[_ngcontent-%COMP%]{margin:0 8px 8px}}"]}),J),tt=((Q=function(){function n(e,i){t(this,n),this.options=e,this.dialogRef=i}return e(n,[{key:"ngOnInit",value:function(){this.content=this.options.content}},{key:"cancel",value:function(){this.dialogRef.close(!1)}},{key:"confirm",value:function(){this.dialogRef.close(!0)}}]),n}()).\u0275fac=function(t){return new(t||Q)(v.Nb(d.a),v.Nb(d.h))},Q.\u0275cmp=v.Hb({type:Q,selectors:[["fury-inbox-mail-confirm-dialog"]],decls:9,vars:1,consts:[["matDialogTitle",""],["align","end"],["type","button","mat-button","",3,"click"],["type","button","mat-button","","color","warn",3,"click"]],template:function(t,n){1&t&&(v.Tb(0,"div",0),v.Rc(1,"Confirm your action"),v.Sb(),v.Tb(2,"mat-dialog-content"),v.Rc(3),v.Sb(),v.Tb(4,"mat-dialog-actions",1),v.Tb(5,"button",2),v.bc("click",(function(){return n.cancel()})),v.Rc(6,"CANCEL"),v.Sb(),v.Tb(7,"button",3),v.bc("click",(function(){return n.confirm()})),v.Rc(8,"CONFIRM"),v.Sb(),v.Sb()),2&t&&(v.Cb(3),v.Tc(" ",n.content,"\n"))},directives:[d.i,d.f,d.c,A.a],styles:[""]}),Q),nt=o("Iab2"),et=o("dNgK"),it=o("Qu3c"),ot=["*"],at=((V=function(){function n(){t(this,n)}return e(n,[{key:"ngOnInit",value:function(){}}]),n}()).\u0275fac=function(t){return new(t||V)},V.\u0275cmp=v.Hb({type:V,selectors:[["fury-inbox-mail-label"]],inputs:{color:"color"},ngContentSelectors:ot,decls:4,vars:2,consts:[["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","6px",1,"label","app-bar"],[1,"indicator"],[1,"label-name"]],template:function(t,n){1&t&&(v.lc(),v.Tb(0,"div",0),v.Ob(1,"div",1),v.Tb(2,"div",2),v.kc(3),v.Sb(),v.Sb()),2&t&&(v.Cb(1),v.Mc("background",n.color))},directives:[S.d,S.c,S.e],styles:[".label[_ngcontent-%COMP%]{font:var(--font-caption);padding:2px 8px;white-space:nowrap}.label[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}"]}),V);function rt(t,n){if(1&t&&(v.Tb(0,"fury-inbox-mail-label",27),v.Rc(1),v.Sb()),2&t){var e=n.$implicit;v.mc("color",e.color),v.Cb(1),v.Tc(" ",e.name," ")}}function ct(t,n){if(1&t){var e=v.Ub();v.Tb(0,"div",28),v.Tb(1,"mat-icon"),v.Rc(2,"attachments"),v.Sb(),v.Tb(3,"div",29),v.Tb(4,"span",30),v.bc("click",(function(){return v.Ec(e),v.fc().downloadDocument()})),v.Rc(5),v.Sb(),v.Sb(),v.Sb()}if(2&t){var i=n.index,o=v.fc();v.Cb(5),v.Sc(o.fileName[i])}}var lt,st,ut,bt=function(){return["../../"]},dt=((lt=function(){function n(e,i,o,a,r,c,l,s){var u;t(this,n),this.route=e,this.inboxService=i,this.dialog=o,this.router=a,this.snackbar=r,this.listEmailsService=c,this.cookieService=l,this.envService=s,this.baseUrl="",this.mail$={subject:"",labels:[],attachments:[]},this.fileName=[],this.downloadFile="",this.ownerId=parseInt(null!==(u=this.cookieService.get("ownerId"))&&void 0!==u?u:"0"),this.sendTo="",this.mailListType="view",this.baseUrl=s.backendForFiles}return e(n,[{key:"ngOnInit",value:function(){var t=this;this.clientId=this.cookieService.get("globalClientId"),this.userId=this.cookieService.get("userId"),this.availableLabels=this.inboxService.availableLabels,this.route.paramMap.subscribe((function(n){t.id=n.get("id"),t.listEmailsService.getEmailList(t.mailListType,t.clientId,t.userId,t.ownerId,0,Number(t.id)).subscribe((function(n){n.length>0&&(t.mail$=n[0],t.mail$.attachments.forEach((function(n){n.hasOwnProperty("attachmentName")&&t.fileName.push(n.attachmentName)})))})),t.enableIsread(!0)}))}},{key:"enableIsread",value:function(t){var n={id:Number(this.id),isRead:t};this.inboxService.updateIsReadForMail(n).subscribe((function(t){}))}},{key:"downloadDocument",value:function(){this.downloadFile=this.baseUrl+"/uploads/"+this.fileName,nt.saveAs(this.downloadFile,this.fileName)}},{key:"openCompose",value:function(){this.sendTo="",this.sendTo=this.mail$.from.mail,this.openDialog()}},{key:"openDialog",value:function(){var t=new d.e;t.data={sendTo:this.sendTo},t.height="500px",this.dialog.open(f.a,t)}},{key:"toggleStarred",value:function(){this.inboxService.toggleStarred(this._mail)}},{key:"addLabel",value:function(t){this.inboxService.addLabel(t,this._mail)}},{key:"removeLabel",value:function(t){this.inboxService.removeLabel(t,this._mail)}},{key:"removeMail",value:function(){var t=this;this.dialog.open(tt,{data:{content:"Are you sure you want to delete this mail?"}}).afterClosed().subscribe((function(n){n&&(t.inboxService.removeMail(t._mail),t.router.navigate(["../../"],{relativeTo:t.route}),t.snackbar.open("You deleted the mail from: "+t._mail.from.name,"UNDO",{duration:3e3}).onAction().subscribe((function(){var n=t.inboxService.undoRemove();n?(t.router.navigate(["/apps/inbox/mail",n.id]),t.snackbar.open("Restored your mail from: "+n.from.name,null,{duration:3e3})):t.snackbar.open("Could not UNDO last delete action. Sorry!",null,{duration:3e3})})))}))}},{key:"showReply",value:function(){this.replying=!0}},{key:"hideReply",value:function(t){this.replying=!1,t&&this.snackbar.open("You replied to "+this._mail.from.name,"UNDO",{duration:3e3})}}]),n}()).\u0275fac=function(t){return new(t||lt)(v.Nb(b.a),v.Nb(y),v.Nb(d.b),v.Nb(b.f),v.Nb(et.b),v.Nb(y),v.Nb(C.a),v.Nb(x.a))},lt.\u0275cmp=v.Hb({type:lt,selectors:[["fury-inbox-mail"]],decls:44,vars:11,consts:[["fxLayout","column","fxFlex","grow",1,"inbox-mail"],["fxFlex","none","fxLayout","row","fxLayoutAlign","space-between center","fxLayoutAlign.gt-xs","start center",1,"header","border-bottom"],["type","button","mat-icon-button","","matTooltip","Back to Inbox",3,"routerLink"],["fxHide","","fxShow.gt-xs",""],["fxLayout","column",1,"mail-content"],["fxFlex","noshrink","fxLayout","row","fxLayoutAlign","space-between start",1,"head","border-bottom"],["fxLayout","column","fxLayoutAlign","start start"],[1,"subject"],["fxLayout","row","fxLayoutGap","8px",1,"labels"],[3,"color",4,"ngFor","ngForOf"],["fxFlex","noshrink","fxLayout","column","fxLayoutAlign","start","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","space-between",1,"info"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px"],[1,"picture",3,"src"],["fxLayout","column"],[1,"from"],["fxLayout","row","fxLayoutAlign","start center",1,"to","secondary-text"],["fxFlexAlign.xs","end","fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","16px",1,"extra"],[1,"when","secondary-text"],["mat-icon-button","",1,"options","icon",3,"matMenuTriggerFor"],["fxFlex","grow",1,"content",3,"innerHtml"],["class","extra","fxFlexAlign.xs","start","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px",4,"ngFor","ngForOf"],["fxFlex","noshrink","fxLayout","row","fxLayoutAlign","space-between center",1,"reply","border-top"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px"],["type","button","mat-button","",3,"click"],[1,"text"],["mailOptions","matMenu"],["mat-menu-item","",3,"click"],[3,"color"],["fxFlexAlign.xs","start","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px",1,"extra"],[1,"when","secondary-text","under-line"],[3,"click"]],template:function(t,n){if(1&t&&(v.Tb(0,"div",0),v.Tb(1,"div",1),v.Tb(2,"button",2),v.Tb(3,"mat-icon"),v.Rc(4,"arrow_back"),v.Sb(),v.Sb(),v.Ob(5,"mat-divider",3),v.Sb(),v.Tb(6,"div",4),v.Tb(7,"div",5),v.Tb(8,"div",6),v.Tb(9,"div",7),v.Rc(10),v.Sb(),v.Tb(11,"div",8),v.Pc(12,rt,2,2,"fury-inbox-mail-label",9),v.Sb(),v.Sb(),v.Sb(),v.Tb(13,"div",10),v.Tb(14,"div",11),v.Ob(15,"img",12),v.Tb(16,"div",13),v.Tb(17,"div",14),v.Rc(18),v.Sb(),v.Tb(19,"div",15),v.Rc(20),v.Tb(21,"mat-icon"),v.Rc(22,"arrow_drop_down"),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Tb(23,"div",16),v.Tb(24,"div",17),v.Rc(25),v.Sb(),v.Tb(26,"button",18),v.Tb(27,"mat-icon"),v.Rc(28,"more_vert"),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Ob(29,"div",19),v.Pc(30,ct,6,1,"div",20),v.Tb(31,"div",21),v.Tb(32,"div",22),v.Tb(33,"button",23),v.bc("click",(function(){return n.openCompose()})),v.Tb(34,"mat-icon"),v.Rc(35,"reply"),v.Sb(),v.Sb(),v.Tb(36,"div",24),v.Rc(37,"Click to Reply "),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Tb(38,"mat-menu",null,25),v.Tb(40,"button",26),v.bc("click",(function(){return n.enableIsread(!1)})),v.Tb(41,"mat-icon"),v.Rc(42,"markunread_mailbox"),v.Sb(),v.Rc(43," Mark as unread "),v.Sb(),v.Sb()),2&t){var e=v.Ac(39);v.Cb(2),v.mc("routerLink",v.qc(10,bt)),v.Cb(8),v.Sc(n.mail$.subject),v.Cb(2),v.mc("ngForOf",n.mail$.labels),v.Cb(3),v.oc("src","http://i.pravatar.cc/35?u=",null==n.mail$.from?null:n.mail$.from.name,"",v.Gc),v.Cb(3),v.Sc(null==n.mail$.from?null:n.mail$.from.name),v.Cb(2),v.Tc(" to ",null==n.mail$.to?null:n.mail$.to.name," "),v.Cb(5),v.Sc(null==n.mail$.when?null:n.mail$.when.fromNow()),v.Cb(1),v.mc("matMenuTriggerFor",e),v.Cb(3),v.mc("innerHtml",n.mail$.content,v.Fc),v.Cb(1),v.mc("ngForOf",n.fileName)}},directives:[S.d,S.b,S.c,A.a,it.a,b.g,_.a,P.a,k.b,S.e,u.n,S.a,D.d,D.e,D.b,at],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1}.inbox-mail[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:64px;padding-left:8px;padding-right:8px}.inbox-mail[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], .inbox-mail[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}.inbox-mail[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .vertical-divider[_ngcontent-%COMP%]{width:1px;height:calc(100% - 24px);margin:12px 8px}.inbox-mail[_ngcontent-%COMP%]   .mail-content[_ngcontent-%COMP%]     .scroll-content{display:flex;flex-direction:column;flex:1}.inbox-mail[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{padding:24px}.inbox-mail[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font:var(--font-title)}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:24px}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50%}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%], .inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]{font:var(--font-body-1)}.inbox-mail[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .extra[_ngcontent-%COMP%]   .when[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.inbox-mail[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 24px 24px}.inbox-mail[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{padding:24px;cursor:pointer}.inbox-mail[_ngcontent-%COMP%]   .replying[_ngcontent-%COMP%]{padding:24px}.inbox-mail[_ngcontent-%COMP%]   .replying[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px}.inbox-mail[_ngcontent-%COMP%]   .under-line[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}"]}),lt),ft=[{path:"",component:Z,children:[{path:"",redirectTo:"primary",pathMatch:"full",data:{scrollDisabled:!0}},{path:":category",component:Y,data:{scrollDisabled:!0}},{path:"mail/:id",component:dt,data:{scrollDisabled:!0}}]}],mt=((st=function n(){t(this,n)}).\u0275mod=v.Lb({type:st}),st.\u0275inj=v.Kb({factory:function(t){return new(t||st)},imports:[[b.j.forChild(ft)],b.j]}),st),gt=o("3Pt+"),pt=o("CzEO"),ht=o("KthW"),xt=o("51bB"),vt=o("vxfF"),yt=((ut=function n(){t(this,n)}).\u0275mod=v.Lb({type:ut}),ut.\u0275inj=v.Kb({factory:function(t){return new(t||ut)},providers:[Y,E,dt],imports:[[u.c,mt,ht.a,gt.w,pt.b.forRoot(),xt.a,vt.d,X,_.b]]}),ut)}}])}();