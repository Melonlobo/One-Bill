(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"1op0":function(t,e,a){var i,n,o;o=function(t){function e(t,e,a,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,a))}e(t=t?t._modules:{},"Extensions/DownloadURL.js",[t["Core/Globals.js"]],(function(t){var e=t.win,a=e.navigator,i=e.document,n=e.URL||e.webkitURL||e,o=/Edge\/\d+/.test(a.userAgent),r=t.dataURLtoBlob=function(t){if((t=t.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<t.length&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&e.Blob&&n.createObjectURL){var a=e.atob(t[3]),i=new e.ArrayBuffer(a.length);i=new e.Uint8Array(i);for(var o=0;o<i.length;++o)i[o]=a.charCodeAt(o);return t=new e.Blob([i],{type:t[1]}),n.createObjectURL(t)}};return t=t.downloadURL=function(t,n){var s=i.createElement("a");if("string"==typeof t||t instanceof String||!a.msSaveOrOpenBlob){if(t=""+t,(o||2e6<t.length)&&!(t=r(t)||""))throw Error("Failed to convert to blob");if(void 0!==s.download)s.href=t,s.download=n,i.body.appendChild(s),s.click(),i.body.removeChild(s);else try{if(null==e.open(t,"chart"))throw Error("Failed to open window")}catch(l){e.location.href=t}}else a.msSaveOrOpenBlob(t,n)},{dataURLtoBlob:r,downloadURL:t}})),e(t,"Extensions/ExportData.js",[t["Core/Axis/Axis.js"],t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Utilities.js"],t["Extensions/DownloadURL.js"]],(function(t,e,a,i,n){function o(t,e){var a=l.navigator,i=-1<a.userAgent.indexOf("WebKit")&&0>a.userAgent.indexOf("Chrome"),n=l.URL||l.webkitURL||l;try{if(a.msSaveOrOpenBlob&&l.MSBlobBuilder){var o=new l.MSBlobBuilder;return o.append(t),o.getBlob("image/svg+xml")}if(!i)return n.createObjectURL(new l.Blob(["\ufeff"+t],{type:e}))}catch(r){}}var r=a.doc,s=a.seriesTypes,l=a.win;a=i.addEvent;var c=i.defined,d=i.extend,h=i.find,u=i.fireEvent,p=i.getOptions,m=i.isNumber,g=i.pick,f=n.downloadURL;(i=i.setOptions)({exporting:{csv:{annotations:{itemDelimiter:"; ",join:!1},columnHeaderFormatter:null,dateFormat:"%Y-%m-%d %H:%M:%S",decimalPoint:null,itemDelimiter:null,lineDelimiter:"\n"},showTable:!1,useMultiLevelHeaders:!0,useRowspanHeaders:!0},lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",exportData:{annotationHeader:"Annotations",categoryHeader:"Category",categoryDatetimeHeader:"DateTime"},viewData:"View data table",hideData:"Hide data table"}}),a(e,"render",(function(){this.options&&this.options.exporting&&this.options.exporting.showTable&&!this.options.chart.forExport&&!this.dataTableDiv&&this.viewData()})),e.prototype.setUpKeyToAxis=function(){s.arearange&&(s.arearange.prototype.keyToAxis={low:"y",high:"y"}),s.gantt&&(s.gantt.prototype.keyToAxis={start:"x",end:"x"})},e.prototype.getDataRows=function(e){var a,i=this.hasParallelCoordinates,n=this.time,o=this.options.exporting&&this.options.exporting.csv||{},r=this.xAxis,s={},l=[],d=[],p=[],f=this.options.lang.exportData,b=f.categoryHeader,y=f.categoryDatetimeHeader,v=function(a,i,n){if(o.columnHeaderFormatter){var r=o.columnHeaderFormatter(a,i,n);if(!1!==r)return r}return a?a instanceof t?a.options.title&&a.options.title.text||(a.dateTime?y:b):e?{columnTitle:1<n?i:a.name,topLevelColumnTitle:a.name}:a.name+(1<n?" ("+i+")":""):b},x=function(t,e,a){var i={},n={};return e.forEach((function(e){var o=(t.keyToAxis&&t.keyToAxis[e]||e)+"Axis";o=m(a)?t.chart[o][a]:t[o],i[e]=o&&o.categories||[],n[e]=o&&o.dateTime})),{categoryMap:i,dateTimeValueAxisMap:n}},C=[],O=0;for(w in this.setUpKeyToAxis(),this.series.forEach((function(t){var l,c=t.xAxis,u=t.options.keys||function(t,e){return t.data.filter((function(t){return void 0!==t.y&&t.name})).length&&e&&!e.categories&&!t.keyToAxis?t.pointArrayMap&&t.pointArrayMap.filter((function(t){return"x"===t})).length?(t.pointArrayMap.unshift("x"),t.pointArrayMap):["x","y"]:t.pointArrayMap||["y"]}(t,c),m=u.length,f=!t.requireSorting&&{},b=r.indexOf(c),y=x(t,u);if(!1!==t.options.includeInDataExport&&!t.options.isInternal&&!1!==t.visible){for(h(C,(function(t){return t[0]===b}))||C.push([b,O]),l=0;l<m;)a=v(t,u[l],u.length),p.push(a.columnTitle||a),e&&d.push(a.topLevelColumnTitle||a),l++;var w={chart:t.chart,autoIncrement:t.autoIncrement,options:t.options,pointArrayMap:t.pointArrayMap};t.options.data.forEach((function(e,a){i&&(y=x(t,u,a));var r={series:w};t.pointClass.prototype.applyOptions.apply(r,[e]),e=r.x;var d=t.data[a]&&t.data[a].name;for(l=0,(!c||"name"===t.exportKey||!i&&c&&c.hasNames&&d)&&(e=d),f&&(f[e]&&(e+="|"+a),f[e]=!0),s[e]||(s[e]=[],s[e].xValues=[]),s[e].x=r.x,s[e].name=d,s[e].xValues[b]=r.x;l<m;)s[e][O+l]=g(y.categoryMap[a=u[l]][d=r[a]],y.dateTimeValueAxisMap[a]?n.dateFormat(o.dateFormat,d):null,d),l++})),O+=l}})),s)Object.hasOwnProperty.call(s,w)&&l.push(s[w]);var w=e?[d,p]:[p];for(O=C.length;O--;){var S=C[O][0],T=C[O][1],D=r[S];l.sort((function(t,e){return t.xValues[S]-e.xValues[S]})),f=v(D),w[0].splice(T,0,f),e&&w[1]&&w[1].splice(T,0,f),l.forEach((function(t){var e=t.name;D&&!c(e)&&(D.dateTime?(t.x instanceof Date&&(t.x=t.x.getTime()),e=n.dateFormat(o.dateFormat,t.x)):e=D.categories?g(D.names[t.x],D.categories[t.x],t.x):t.x),t.splice(T,0,e)}))}return w=w.concat(l),u(this,"exportData",{dataRows:w}),w},e.prototype.getCSV=function(t){var e="",a=this.getDataRows(),i=this.options.exporting.csv,n=g(i.decimalPoint,","!==i.itemDelimiter&&t?1.1.toLocaleString()[1]:"."),o=g(i.itemDelimiter,","===n?";":","),r=i.lineDelimiter;return a.forEach((function(t,i){for(var s,l=t.length;l--;)"string"==typeof(s=t[l])&&(s='"'+s+'"'),"number"==typeof s&&"."!==n&&(s=s.toString().replace(".",n)),t[l]=s;e+=t.join(o),i<a.length-1&&(e+=r)})),e},e.prototype.getTable=function(t){var e='<table id="highcharts-data-table-'+this.index+'">',a=this.options,i=t?1.1.toLocaleString()[1]:".",n=g(a.exporting.useMultiLevelHeaders,!0);t=this.getDataRows(n);var o=0,r=n?t.shift():null,s=t.shift(),l=function(t,e,a,n){var o=g(n,"");return e="text"+(e?" "+e:""),"number"==typeof o?(o=o.toString(),","===i&&(o=o.replace(".",i)),e="number"):n||(e="empty"),"<"+t+(a?" "+a:"")+' class="'+e+'">'+o+"</"+t+">"};!1!==a.exporting.tableCaption&&(e+='<caption class="highcharts-table-caption">'+g(a.exporting.tableCaption,a.title.text?a.title.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):"Chart")+"</caption>");for(var c=0,d=t.length;c<d;++c)t[c].length>o&&(o=t[c].length);return e+=function(t,e,i){var o="<thead>",r=0;i=i||e&&e.length;var s,c=0;if(s=n&&t&&e){t:if(s=t.length,e.length===s){for(;s--;)if(t[s]!==e[s]){s=!1;break t}s=!0}else s=!1;s=!s}if(s){for(o+="<tr>";r<i;++r){var d=t[r+1];(s=t[r])===d?++c:c?(o+=l("th","highcharts-table-topheading",'scope="col" colspan="'+(c+1)+'"',s),c=0):(s===e[r]?a.exporting.useRowspanHeaders?(d=2,delete e[r]):(d=1,e[r]=""):d=1,o+=l("th","highcharts-table-topheading",'scope="col"'+(1<d?' valign="top" rowspan="'+d+'"':""),s))}o+="</tr>"}if(e){for(o+="<tr>",r=0,i=e.length;r<i;++r)void 0!==e[r]&&(o+=l("th",null,'scope="col"',e[r]));o+="</tr>"}return o+"</thead>"}(r,s,Math.max(o,s.length)),e+="<tbody>",t.forEach((function(t){e+="<tr>";for(var a=0;a<o;a++)e+=l(a?"td":"th",null,a?"":'scope="row"',t[a]);e+="</tr>"})),u(this,"afterGetTable",t={html:e+="</tbody></table>"}),t.html},e.prototype.downloadCSV=function(){var t=this.getCSV(!0);f(o(t,"text/csv")||"data:text/csv,\ufeff"+encodeURIComponent(t),this.getFilename()+".csv")},e.prototype.downloadXLS=function(){var t='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";} .text{ mso-number-format:"@";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>";f(o(t,"application/vnd.ms-excel")||"data:application/vnd.ms-excel;base64,"+l.btoa(unescape(encodeURIComponent(t))),this.getFilename()+".xls")},e.prototype.viewData=function(){this.dataTableDiv||(this.dataTableDiv=r.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling),this.dataTableDiv.innerHTML=this.getTable()),""!==this.dataTableDiv.style.display&&"none"!==this.dataTableDiv.style.display||(this.dataTableDiv.style.display="block"),this.isDataTableVisible=!0,u(this,"afterViewData",this.dataTableDiv)},e.prototype.hideData=function(){this.dataTableDiv&&"block"===this.dataTableDiv.style.display&&(this.dataTableDiv.style.display="none"),this.isDataTableVisible=!1},e.prototype.toggleDataTable=function(){var t=this.exportDivElements,e=this.options.exporting;e=e&&e.buttons&&e.buttons.contextButton.menuItems;var a=this.options.lang;this.isDataTableVisible?this.hideData():this.viewData(),null!=b&&b.menuItemDefinitions&&null!=a&&a.viewData&&a.hideData&&e&&t&&t.length&&(t[e.indexOf("viewData")].innerHTML=this.isDataTableVisible?a.hideData:a.viewData)};var b=p().exporting;b&&(d(b.menuItemDefinitions,{downloadCSV:{textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},downloadXLS:{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},viewData:{textKey:"viewData",onclick:function(){this.toggleDataTable()}}}),b.buttons&&b.buttons.contextButton.menuItems.push("separator","downloadCSV","downloadXLS","viewData")),s.map&&(s.map.prototype.exportKey="name"),s.mapbubble&&(s.mapbubble.prototype.exportKey="name"),s.treemap&&(s.treemap.prototype.exportKey="name")})),e(t,"masters/modules/export-data.src.js",[],(function(){}))},t.exports?(o.default=o,t.exports=o):(i=[a("6n/F"),a("AxlJ")],void 0===(n=(function(t){return o(t),o.Highcharts=t,o}).apply(e,i))||(t.exports=n))},"4u/o":function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));var i=a("z6cu"),n=a("lJxs"),o=a("JIr8"),r=a("sXtk"),s=a("fXoL"),l=a("tk/3"),c=a("ofXK"),d=a("b6Qw");let h=(()=>{class t{constructor(t,e,a,i){this.httpClient=t,this.titlecasePipe=e,this.cookieService=a,this.envService=i,this.baseUrl="",this.clientId=Number(this.cookieService.get("globalClientId")),this.baseUrl=i.backend}getDatas(t){return this.httpClient.get(this.baseUrl+t)}getById(t,e){return this.httpClient.get(this.baseUrl+t+e)}postData(t,e){return this.httpClient.post(this.baseUrl+t,e)}putData(t,e){return this.httpClient.put(this.baseUrl+t,e)}patchData(t,e){return this.httpClient.patch(this.baseUrl+t,e)}getData(t){return this.httpClient.get(this.baseUrl+t).pipe(Object(n.a)(t=>t),Object(o.a)(t=>Object(i.a)("Something went wrong!")))}setPieChart(t){return{chart:{type:"pie"},title:{text:null},credits:{enabled:!1},exporting:{enabled:!1},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},legend:{floating:!0,align:"left",verticalAlign:"top",layout:"vertical",x:0,y:50},plotOptions:{series:{shadow:!0}},series:[{type:"pie",allowPointSelect:!0,dataLabels:{enabled:!0},keys:["name","y","selected","sliced"],data:t.chartValues,showInLegend:!0}]}}setBarChart(t){return{chart:{height:325,type:"column"},credits:{enabled:!1},title:{text:null},subtitle:{text:null},xAxis:{categories:t.labels},yAxis:{min:0,title:{text:"Invoice Statistics"}},legend:{layout:"horizontal",align:"center",verticalAlign:"top",x:0,y:0,floating:!1,shadow:!1},tooltip:{formatter:function(){return this.x+": "+this.y}},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:15}},series:[{name:"Invoice Data",data:t.datas,type:"column"}]}}setLineChart(t){return{chart:{type:"spline"},title:{text:t.chartName},subtitle:{text:t.subTitle},xAxis:{categories:this.formatLabel(t.label),title:{text:t.xTitle}},yAxis:{title:{text:t.yTitle}},tooltip:{shared:!0,useHTML:!0,backgroundColor:"#0000008f",borderWidth:0,style:{fontFamily:"comic sans ms",color:"white",opacity:1}},plotOptions:{spline:{marker:{fillColor:"#FFFFFF",lineWidth:2,lineColor:null}},series:{shadow:!0,point:{events:{}}}},credits:{enabled:!1},series:t.data,exporting:{enabled:!1}}}formatLabel(t){return t.map(t=>(t.length>7&&(t=t.slice(0,5)+".."),this.titlecasePipe.transform(t)))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(l.c),s.Xb(c.x),s.Xb(d.a),s.Xb(r.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Xhjs:function(t,e,a){"use strict";a.r(e),a.d(e,"GeneraldashboardModule",(function(){return J}));var i=a("ofXK"),n=a("tyNb"),o=a("4u/o"),r=a("cFdI"),s=a("6n/F"),l=a("AxlJ"),c=a.n(l),d=a("iTcJ"),h=a.n(d),u=a("1op0"),p=a.n(u),m=a("M8aS"),g=a.n(m),f=a("cIyM"),b=a("K+kB"),y=a("wd/R"),v=a("Z9Wc"),x=a.n(v),C=a("rjUY"),O=a.n(C),w=a("zSPf"),S=a("KHMF"),T=a("a8hA"),D=a("sXtk"),P=a("fXoL"),F=a("dNgK"),A=a("b6Qw"),R=a("XiUz"),M=a("Wp6s"),k=a("/t3+"),I=a("kmnG"),E=a("d3UM"),L=a("3Pt+"),N=a("FKr1");function B(t,e){if(1&t){const t=P.Ub();P.Tb(0,"button",24),P.bc("click",(function(e){return P.Ec(t),P.fc().showQuarterData(e)})),P.Rc(1),P.Sb()}if(2&t){const t=e.$implicit;P.nc("id",t),P.Cb(1),P.Tc(" ",t.replace("Q","Quarter")," ")}}function U(t,e){if(1&t){const t=P.Ub();P.Tb(0,"button",24),P.bc("click",(function(e){return P.Ec(t),P.fc().showRevenueData(e)})),P.Rc(1),P.Sb()}if(2&t){const t=e.$implicit;P.nc("id",t),P.Cb(1),P.Tc(" ",t," ")}}function W(t,e){if(1&t&&(P.Tb(0,"mat-option",25),P.Rc(1),P.Sb()),2&t){const t=e.$implicit;P.mc("value",t.id),P.Cb(1),P.Sc(t.description)}}x()(s),c()(s),O()(s),a("Tos5")(s),h()(s),p()(s),g()(s);const j=[{path:"",component:(()=>{class t{constructor(t,e,a,i,n,o,r,l,c,d,h,u,p,m){this.pagesService=t,this.data=e,this.decimalPipe=a,this.generalDashBoardService=i,this.currency=n,this.menuItemService=o,this.route=r,this.snackbar=l,this.router=c,this.date=d,this.cookieService=h,this.masterService=u,this.clientSelectionService=p,this.envService=m,this.hideTextOnTile=!1,this.gain=0,this.isGain=!1,this.toolTip="",this.outstandingPercentage=0,this.isOutstandingIncreased=!1,this.overallConsumptionNodata=!0,this.meterNodata=!0,this.unitNodata=!0,this.revenueNodata=!0,this.invoiceNodata=!0,this.consolidated=!1,this.contractsAboutToExpire=0,this.numberOfOpenTickets=0,this.utilityType=0,this.lstutilityType=[],this.invoiceDate="",this.currencyType=Object(S.e)("Currency"),this.roundFormat=Object(S.e)("RoundOff"),this.consumptionRoundOffFormat=Object(S.e)("ConsumptionRoundOff"),this.Highcharts1=s,this.chartConstructor1="chart",this.barChartOptions={},this.pieChartOptions={},this.dailyRevenueOptions={},this.quarterWiseColumnChartOptions={},this.quarters=["Q1","Q2","Q3","Q4"],this.revenueTypes=["CurrentMonth","PreviousMonth","CurrentYear"],this.allQuarterData=[],this.currentQuarterData=[],this.lineChartOptions={},this.unitConsumptionbarChartOptions={},this.dashboardTitle="Dashboard",this.consumptionTitle="Overall Consumption",this.updateFlag1=!1,this.oneToOneFlag1=!0,this.runOutsideAngular1=!1,this.dashboardParameters={},this.invoiceData=[],this.manageParams={},this.expiryReminder=!1,this.fromQuickPanel=!1,this.parameterValue=!1}ngOnInit(){this.currencySymbol=Object(i.A)(this.currencyType,"narrow"),this.masterService.getParameterValue("TicketTile").subscribe(t=>{t&&(this.parameterValue=t)}),this.cookieService.set("ownerId","0"),this.clientId=Number(this.cookieService.get("globalClientId")),this.cookieService.get("external_role")&&(this.cookieService.delete("external_role","/",this.envService.cookieDomain),this.menuItemService.setIsAuthenticatedUser(!0)),this.clientSelectionService.setIsClientVisible(!1),this.getFilterParams(),this.getUtilities(),this.getCountOfContractsAboutToExpire(),this.getNumberOfOpenTickets()}getFilterParams(){this.invoiceDate="";const t=this.cookieService.get("filterData");if(t){if(this.manageParams=JSON.parse(t),this.clientId=this.manageParams.clientId,""==this.manageParams.strClientId)this.fromQuickPanel=!1;else{this.fromQuickPanel=!0;let t=this.manageParams.strClientId.split(",");t&&1==t.length&&(this.clientId=Number(this.manageParams.strClientId))}if(this.clientId){const t=localStorage.getItem("userClients"),e=JSON.parse(t).find(t=>t.clientId==this.clientId);if(e){this.dashboardTitle="Dashboard -  "+e.clientName,this.consumptionTitle="Overall Consumption -  "+e.clientName,this.hideMoreInfo=!0,this.manageParams.strClientId=this.clientId.toString();const t=y();this.masterService.getClientDataFormats(e.clientId).subscribe(t=>{var e,a,n;t&&(localStorage.setItem("data_formats",JSON.stringify(t)),this.roundFormat=null===(e=t.find(t=>"RoundOff"==t.roundOffType))||void 0===e?void 0:e.roundOff,this.consumptionRoundOffFormat=null===(a=t.find(t=>"ConsumptionRoundOff"==t.roundOffType))||void 0===a?void 0:a.roundOff,this.currencyType=null===(n=t.find(t=>"Currency"==t.roundOffType))||void 0===n?void 0:n.roundOff,this.currencySymbol=Object(i.A)(this.currencyType,"narrow"),this.roundFormat&&""!=this.roundFormat&&(this.amountdecimalPlaces=parseInt(this.roundFormat.substring(this.roundFormat.indexOf("-")+1,this.roundFormat.length))),this.consumptionRoundOffFormat&&""!=this.consumptionRoundOffFormat&&(this.consumptiondecimalPlaces=parseInt(this.consumptionRoundOffFormat.substring(this.consumptionRoundOffFormat.indexOf("-")+1,this.consumptionRoundOffFormat.length))))}),this.invoiceDate="("+this.date.transform(t.add("month",-1),"yyyy-MM-dd")+" - "+this.date.transform(y(),"yyyy-MM-dd")+")"}}else this.dashboardTitle="Dashboard",this.consumptionTitle="Overall Consumption",this.hideMoreInfo=!1,""==this.manageParams.strClientId&&(this.manageParams.strClientId="0"),this.masterService.getDefaultDataFormats().subscribe(t=>{var e,a,n;t&&(localStorage.setItem("data_formats",JSON.stringify(t)),this.roundFormat=null===(e=t.find(t=>"RoundOff"==t.roundOffType))||void 0===e?void 0:e.roundOff,this.consumptionRoundOffFormat=null===(a=t.find(t=>"ConsumptionRoundOff"==t.roundOffType))||void 0===a?void 0:a.roundOff,this.currencyType=null===(n=t.find(t=>"Currency"==t.roundOffType))||void 0===n?void 0:n.roundOff,this.currencySymbol=Object(i.A)(this.currencyType,"narrow"),this.roundFormat&&""!=this.roundFormat&&(this.amountdecimalPlaces=parseInt(this.roundFormat.substring(this.roundFormat.indexOf("-")+1,this.roundFormat.length))),this.consumptionRoundOffFormat&&""!=this.consumptionRoundOffFormat&&(this.consumptiondecimalPlaces=parseInt(this.consumptionRoundOffFormat.substring(this.consumptionRoundOffFormat.indexOf("-")+1,this.consumptionRoundOffFormat.length))))}),this.invoiceDate="("+this.date.transform(this.manageParams.fromDate,"yyyy-MM-dd")+" - "+this.date.transform(this.manageParams.toDate,"yyyy-MM-dd")+")"}}getData(){this.meterNodata=!0,this.unitNodata=!0,this.revenueNodata=!0,this.invoiceNodata=!0,this.overallConsumptionNodata=!0,this.manageParams.clientId=this.clientId,this.manageParams.utilityTypeId=this.utilityType.toString(),this.dashboardParameters.ClientId=this.manageParams.strClientId,this.dashboardParameters.FromDate=this.manageParams.fromDate,this.dashboardParameters.ToDate=this.manageParams.toDate;let t={chartName:[],chartValues:[]};this.meterBarChartOptions=this.setMeterPieChart(t,"Meter Status");let e=document.getElementById("gdacontainer3");e&&s.chart("gdacontainer3",this.meterBarChartOptions),this.generalDashBoardService.getMeterData(this.dashboardParameters).subscribe(a=>{Object.keys(a).map(e=>{t.chartValues.push([a[e].dataType,Number(a[e].dataCount)])}),this.meterBarChartOptions=this.setMeterPieChart(t,"Meter Status"),e=document.getElementById("gdacontainer3"),e&&s.chart("gdacontainer3",this.meterBarChartOptions)},t=>{this.notificationMessage("Error in MeterData","red-snackbar")});let a={chartName:[],chartValues:[]};this.unitBarChartOptions=this.setUnitPieChart(a,"Occupancy Status");let i=document.getElementById("gdacontainer4");i&&s.chart("gdacontainer4",this.unitBarChartOptions),this.generalDashBoardService.getUnitData(this.dashboardParameters).subscribe(t=>{Object.keys(t).map(e=>{a.chartValues.push([t[e].dataType,Number(t[e].dataCount)])}),this.unitBarChartOptions=this.setUnitPieChart(a,"Occupancy Status"),i=document.getElementById("gdacontainer4"),i&&s.chart("gdacontainer4",this.unitBarChartOptions)},t=>{this.unitNodata=!0,this.notificationMessage("Error in UnitData","red-snackbar")});let n={labels:[],datas:[]};this.dailyRevenueOptions=this.setDailyRevenueChart(n),document.getElementById("gdacontainer2")&&s.chart("gdacontainer2",this.dailyRevenueOptions),this.dashboardParameters.ReportType=this.revenueTypes[0];let o=document.getElementById(this.revenueTypes[0]);document.querySelectorAll(".revbuttons button.active").forEach((function(t){t.className=""})),o.className="active",this.makeRevenueDataChart(n);let r=this.getCurrentQuarter(),l=document.getElementById(r);this.dashboardParameters.Quarter=r,document.querySelectorAll(".buttons button.active").forEach((function(t){t.className=""})),l.className="active",this.makeQuarteWiseChart({labels:[],datas:[],totalInvoice:[],totalReceived:[],totalOutStanding:[]})}makeRevenueDataChart(t){this.dailyRevenueOptions=this.setDailyRevenueChart(t),document.getElementById("gdacontainer2")&&s.chart("gdacontainer2",this.dailyRevenueOptions),this.generalDashBoardService.getDailyRevenueData(this.dashboardParameters).subscribe(e=>{let a=e.revenueDailyDatas;this.totalMonthCollectionForTile$=e.totalCurrentMonthPaymentAmount.toFixed(this.amountdecimalPlaces),this.totalOutStandingForTile$=e.totalCurrentMonthOutStandingAmount.toFixed(this.amountdecimalPlaces);let i=(e.totalCurrentMonthPaymentAmount-e.totalPreviousMonthPaymentAmount)/e.totalPreviousMonthPaymentAmount*100;isNaN(i)?(this.gain=0,this.isGain=!1,this.toolTip=this.gain+"% when compared with Previous Month Collection"):i==1/0?(this.gain=100,this.isGain=!0,this.toolTip=this.gain+"% increase when compared with Previous Month Collection"):i>=0?(this.gain=parseFloat(this.decimalPipe.transform(i,this.roundFormat)),this.isGain=!0,this.toolTip=this.gain+"% increase when compared with Previous Month Collection"):(this.gain=parseFloat(this.decimalPipe.transform(i,this.roundFormat)),this.isGain=!1,this.toolTip=this.gain+"% decrease when compared with Previous Month Collection"),Object.keys(a).map(e=>{t.labels.push(a[e].dayId),t.datas.push(Number(a[e].paymentAmount))}),this.revenueNodata=!1,this.dailyRevenueOptions=this.setDailyRevenueChart(t),document.getElementById("gdacontainer2")&&s.chart("gdacontainer2",this.dailyRevenueOptions)})}makeQuarteWiseChart(t){this.quarterWiseColumnChartOptions=this.setQuarterWiseColumnChart(t);let e=document.getElementById("gdacontainer1");e&&s.chart("gdacontainer1",this.quarterWiseColumnChartOptions),this.generalDashBoardService.getQuarterRevenueData(this.dashboardParameters).subscribe(a=>{this.currentQuarterData=a,Object.keys(this.currentQuarterData).map(e=>{t.labels.push(this.currentQuarterData[e].monthName),t.totalInvoice.push(this.currentQuarterData[e].totalInvoice),t.totalReceived.push(this.currentQuarterData[e].totalReceived),t.totalOutStanding.push(this.currentQuarterData[e].totalOutStanding)}),this.quarterWiseColumnChartOptions=this.setQuarterWiseColumnChart(t),e=document.getElementById("gdacontainer1"),e&&s.chart("gdacontainer1",this.quarterWiseColumnChartOptions)})}getCurrentQuarter(){let t=(new Date).getMonth();return"Q"+Math.floor(t/3+1)}showRevenueData(t){let e=(t.target||t.srcElement||t.currentTarget).attributes.id.nodeValue,a=document.getElementById(e);document.querySelectorAll(".revbuttons button.active").forEach((function(t){t.className=""})),a.className="active",this.dashboardParameters.ReportType=e,this.makeRevenueDataChart({labels:[],datas:[]})}showQuarterData(t){let e=(t.target||t.srcElement||t.currentTarget).attributes.id.nodeValue,a=document.getElementById(e);document.querySelectorAll(".buttons button.active").forEach((function(t){t.className=""})),a.className="active",this.dashboardParameters.Quarter=e,this.makeQuarteWiseChart({labels:[],datas:[],totalInvoice:[],totalReceived:[],totalOutStanding:[]})}notificationMessage(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}getUtilities(){this.generalDashBoardService.getUtilities(this.clientId).subscribe(t=>{t?(this.lstutilityType=[],this.lstutilityType=t,this.lstutilityType&&this.lstutilityType.length>0&&(this.utilityType=this.lstutilityType[0].id),null==this.utilityType&&(this.utilityType=0),this.getData(),this.getUnitConsumption()):(this.getData(),this.getUnitConsumption())},t=>{this.getData(),this.getUnitConsumption()})}onDropdownChange(){this.getUnitConsumption()}getUnitConsumption(){this.overallConsumptionNodata=!0,this.manageParams.clientId=this.clientId,this.manageParams.utilityTypeId=this.utilityType.toString(),this.dashboardParameters.ClientId=this.manageParams.strClientId,this.dashboardParameters.FromDate=this.manageParams.fromDate,this.dashboardParameters.ToDate=this.manageParams.toDate,this.dashboardParameters.UtilityTypeId=parseInt(this.manageParams.utilityTypeId);let t={labels:[],datas:[]};this.consumptionUnit="Unit Consumption ";let e="";this.consumptionRoundOffFormat=Object(S.e)("ConsumptionRoundOff",0==this.clientId?0:this.dashboardParameters.UtilityTypeId),this.consumptionRoundOffFormat&&""!=this.consumptionRoundOffFormat&&(this.consumptiondecimalPlaces=parseInt(this.consumptionRoundOffFormat.substring(this.consumptionRoundOffFormat.indexOf("-")+1,this.consumptionRoundOffFormat.length))),this.unitConsumptionbarChartOptions=this.setUnitConsumptionBarChart(t),document.getElementById("gdacontainer6")&&s.chart("gdacontainer6",this.unitConsumptionbarChartOptions),this.generalDashBoardService.getBarChartData(this.dashboardParameters).subscribe(a=>{var i;let n=a;e=null===(i=n[0])||void 0===i?void 0:i.unit,this.consumptionUnit+=e,Object.keys(n).map(e=>{t.labels.push(n[e].month),t.datas.push(Number(n[e].unitConsumption))}),this.overallConsumptionNodata=!1,this.unitConsumptionbarChartOptions=this.setUnitConsumptionBarChart(t,e),document.getElementById("gdacontainer6")&&s.chart("gdacontainer6",this.unitConsumptionbarChartOptions)},e=>{this.unitConsumptionbarChartOptions=this.setUnitConsumptionBarChart(t),document.getElementById("gdacontainer6")&&s.chart("gdacontainer6",this.unitConsumptionbarChartOptions)})}setChart(t){s.chart("gdacontainer1",{chart:{type:"pie"},title:{text:null},credits:{enabled:!1},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},legend:{align:"right",verticalAlign:"top",layout:"vertical",x:0,y:50},plotOptions:{series:{shadow:!0}},series:[{type:"pie",allowPointSelect:!0,dataLabels:{enabled:!0},keys:["name","y","selected","sliced"],data:t.chartValues,showInLegend:!0}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}})}setMeterBarChart(t){return{chart:{height:325,type:"column"},credits:{enabled:!1},title:{text:null},subtitle:{text:null},xAxis:{categories:t.labels},yAxis:{min:0,title:{text:"Meter Statistics",style:{fontSize:"12px",fontFamily:"Roboto"}}},legend:{itemStyle:{color:"#000000",fontWeight:"normal"},layout:"horizontal",align:"center",verticalAlign:"top",x:0,y:0,floating:!1,shadow:!1},tooltip:{formatter:function(){return this.x+": "+this.y}},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:40,color:"rgb(63, 81, 181)"}},lang:{noData:"No data to display"},noData:{style:{fontWeight:"bold",fontSize:"15px"}},series:[{name:"Meter Status",data:t.datas,type:"column"}]}}setUnitBarChart(t){return{chart:{height:325,type:"column"},credits:{enabled:!1},title:null,subtitle:{text:null},xAxis:{categories:t.labels},yAxis:{min:0,title:{text:"Unit Statistics",style:{fontSize:"12px",fontFamily:"Roboto"}}},legend:{itemStyle:{color:"#000000",fontWeight:"normal"},layout:"horizontal",align:"center",verticalAlign:"top",x:0,y:0,floating:!1,shadow:!1},tooltip:{formatter:function(){return this.x+": "+this.y}},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:40,color:"#00bcd4"}},lang:{noData:"No data to display"},noData:{style:{fontWeight:"bold",fontSize:"15px"}},series:[{name:"Occupancy Status",data:t.datas,type:"column"}]}}setPieChart(t,e,a=""){let i={chart:{height:325,type:"pie"},title:{text:e,style:{fontFamily:"Roboto"}},credits:{enabled:!1},exporting:{enabled:!0},noData:{style:{fontWeight:"bold",fontSize:"15px",color:"#CD534C"}},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},legend:{floating:!1,align:"center",verticalAlign:"top",layout:"horizontal",x:0,y:-15,fontFamily:"Roboto",labelFormatter:function(){return this.name.split(" ").slice(0,2).join("").replace(":","")}},plotOptions:{series:{shadow:!0},pie:{colors:["#EFC000","#0073C2"]}},series:[{name:null==this.currencyType?"Amount":"Amount in "+this.currencySymbol,type:"pie",allowPointSelect:!0,dataLabels:{enabled:!0},keys:["name","y","selected","sliced"],data:t.chartValues,showInLegend:!0}]},n=i.series[0].data;return n.forEach(t=>{t[0]=t[0]+": "+(a||"")+" "+t[1]}),i.series[0].data=n,i}setDailyRevenueChart(t){let e=this.currencySymbol,a=this.amountdecimalPlaces;return{chart:{height:387,type:"line"},credits:{enabled:!1},title:{text:"Collection Summary",style:{fontFamily:"Roboto",fontWeight:"bold"}},subtitle:{text:null},xAxis:{categories:this.formatLabel(t.labels)},yAxis:{min:0,title:{text:null==this.currencyType?"Amount":"Amount in "+this.currencySymbol,style:{fontSize:"12px",fontFamily:"Roboto"}}},tooltip:{formatter:function(){return this.x+": "+e+this.y.toFixed(a)}},colors:["#3366CC"],plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:8,color:"rgb(63, 81, 181)"}},lang:{noData:"No data to display"},noData:{style:{fontWeight:"bold",fontSize:"15px"}},series:[{name:"CurrentYear"==this.dashboardParameters.ReportType?"Monthly Revenue":"Day Wise Revenue",data:t.datas}]}}setMeterPieChart(t,e,a=""){let i={chart:{height:325,type:"pie",options3d:{enabled:!0,alpha:45}},title:{text:e,style:{fontFamily:"Roboto",fontWeight:"bold"}},credits:{enabled:!1},exporting:{enabled:!0},noData:{style:{fontWeight:"bold",fontSize:"15px"}},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},legend:{floating:!1,align:"center",verticalAlign:"top",layout:"horizontal",x:0,y:-15,fontFamily:"Roboto",labelFormatter:function(){return this.name.split(" ").slice(0,2).join("").replace(":","")}},plotOptions:{series:{shadow:!0},pointPadding:.25,pie:{innerSize:100,depth:45,colors:["#663399","#DFD8EB"]}},series:[{name:"Count: ",type:"pie",allowPointSelect:!0,dataLabels:{enabled:!0},keys:["name","y","selected","sliced"],data:t.chartValues,showInLegend:!0}]},n=i.series[0].data;return n.forEach(t=>{t[0]=t[0]+": "+(a||"")+" "+t[1]}),i.series[0].data=n,i}setUnitPieChart(t,e,a=""){let i={chart:{height:325,type:"pie",options3d:{enabled:!0,alpha:45}},title:{text:e,style:{fontFamily:"Roboto",fontWeight:"bold"}},credits:{enabled:!1},exporting:{enabled:!0},noData:{style:{fontWeight:"bold",fontSize:"15px"}},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},legend:{floating:!1,align:"center",verticalAlign:"top",layout:"horizontal",x:0,y:-15,fontFamily:"Roboto",labelFormatter:function(){return this.name.split(" ").slice(0,2).join("").replace(":","")}},plotOptions:{series:{shadow:!0},pointPadding:.25,pie:{innerSize:100,depth:45,colors:["#454F8C","#FF9E01"]}},series:[{name:"Count: ",type:"pie",allowPointSelect:!0,dataLabels:{enabled:!0},keys:["name","y","selected","sliced"],data:t.chartValues,showInLegend:!0}]},n=i.series[0].data;return n.forEach(t=>{t[0]=t[0]+": "+(a||"")+" "+t[1]}),i.series[0].data=n,i}setLineChart(t){return{legend:{itemStyle:{color:"#000000",fontWeight:"normal"}},chart:{type:"spline",height:340,width:1100},title:{text:t.chartName},subtitle:{text:t.subTitle},xAxis:{categories:this.formatLabel(t.label),title:{text:t.xTitle}},yAxis:{title:{text:t.yTitle}},tooltip:{shared:!0,useHTML:!0,backgroundColor:"#0000008f",borderWidth:0,style:{fontFamily:"comic sans ms",color:"white",opacity:1}},plotOptions:{spline:{marker:{fillColor:"#FFFFFF",lineWidth:2,lineColor:null}},series:{shadow:!0,point:{events:{}}}},credits:{enabled:!1},series:t.data,exporting:{enabled:!0}}}setBarChart(t){return{lang:{noData:"No data to display"},noData:{style:{fontWeight:"bold",fontSize:"15px"}},chart:{height:325,type:"column"},credits:{enabled:!1},export:{enabled:!0},title:{text:"Invoice and Receipt Details "+this.invoiceDate,style:{fontFamily:"Roboto",fontWeight:10}},subtitle:{text:null},xAxis:{categories:t.labels},yAxis:{min:0,title:{text:"Invoice Statistics "+this.currencySymbol,style:{fontSize:"12px",fontFamily:"Roboto"}}},legend:{itemStyle:{color:"#000000",fontWeight:"normal",fontFamily:"Roboto"},layout:"horizontal",align:"center",verticalAlign:"top",x:0,y:0,floating:!1,shadow:!1},tooltip:{formatter:function(){return this.x+": "+this.y}},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:40,colorByPoint:!0}},colors:["#016BA5","#ABABAB","#ff800f"],series:[{name:"Invoice Data",data:t.datas,type:"column"}]}}setQuarterWiseColumnChart(t){return{chart:{type:"column",height:387},title:{text:"Bills & Payment Summary",style:{fontFamily:"Roboto",fontWeight:"bold"}},credits:{enabled:!1},xAxis:{categories:t.labels,crosshair:!0},yAxis:{min:0,title:{text:null==this.currencyType?"Amount":"Amount in "+this.currencySymbol,style:{fontSize:"12px",fontFamily:"Roboto"}}},tooltip:{headerFormat:'<span style = "font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style = "color:{series.color};padding:0">{series.name}: </td><td style = "padding:0"><b>'+this.currencySymbol+"{point.y:."+this.amountdecimalPlaces+"f} </b></td></tr>",footerFormat:"</table>",shared:!0,useHTML:!0},colors:["#3366CC","#10C8CD","#DC0A59"],plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:29},colors:["#3366CC","#10C8CD","#DC0A59"]},series:[{type:"column",name:"Total Invoice",data:t.totalInvoice},{type:"column",name:"Total Received",data:t.totalReceived},{type:"column",name:"Total OutStanding",data:t.totalOutStanding}]}}formatLabel(t){return t.map(t=>(t.length>7&&(t=t.slice(0,5)+".."),t))}setHighPieChart(){let t={chartName:"",chartValues:[]};this.pagesService.getData("/invoiceData").subscribe(e=>{e&&(this.invoiceData=e,Object.keys(this.invoiceData).map(e=>{t.chartValues.push([this.invoiceData[e].dataType,Number(this.invoiceData[e].dataCount),!0])}),this.barChartOptions={chart:{type:"pie"},exporting:{enabled:!0},legend:{align:"right",verticalAlign:"top",layout:"vertical",x:0,y:50},title:{text:t.chartName},credits:{enabled:!1},plotOptions:{series:{point:{events:{}}},pie:{dataLabels:{enabled:!1}}},series:[{name:"value",type:"pie",allowPointSelect:!0,keys:["name","y","selected","sliced"],data:[["GDP value wise",29.9,!1],["GDW Value wise",71.5,!1],["Mobile",106.4,!1],["ACC ZRD",129.2,!1],["ACC BGN",144,!1],["Peaches",176,!1],["Prunes",135.6,!0,!0],["Avocados",148.5,!1]],showInLegend:!0,point:{events:{}}}]})},t=>{})}setUnitConsumptionBarChart(t,e=""){let a=this.consumptiondecimalPlaces;return{chart:{height:325,type:"column",exportChart:{type:"application/pdf"}},credits:{enabled:!1},export:{enabled:!0},exporting:{fallbackToExportServer:!1},time:{moment:y},global:{},title:{text:"Overall Consumption",style:{fontFamily:"Roboto",display:"none"}},subtitle:{text:null},xAxis:{categories:t.labels},yAxis:{min:0,title:{text:this.consumptionUnit,style:{fontFamily:"Roboto"}},stackLabels:{style:{color:"#000",fontWeight:"bold"},enabled:!0,verticalAlign:"center"}},legend:{layout:"horizontal",align:"center",verticalAlign:"top",x:0,y:0,floating:!1,shadow:!1},tooltip:{enabled:!1,formatter:function(){return this.x+": "+this.y.toFixed(a)+" "+e}},plotOptions:{column:{pointPadding:.1,borderWidth:0,pointWidth:30,color:"#663399",stacking:"normal"}},lang:{noData:"No data to display"},noData:{style:{fontWeight:"bold",fontSize:"15px"}},series:[{name:"Unit Consumption",data:t.datas,type:"column"}]}}getCountOfContractsAboutToExpire(){if(this.dashboardParameters.ClientId=this.manageParams.strClientId,this.fromQuickPanel)this.dashboardParameters.FromDate=this.date.transform(this.manageParams.fromDate,"yyyy-MM-dd"),this.dashboardParameters.ToDate=this.date.transform(this.manageParams.toDate,"yyyy-MM-dd");else{let t=y();this.dashboardParameters.FromDate=this.date.transform(t,"yyyy-MM-dd"),this.dashboardParameters.ToDate=this.date.transform(t.add("month",1),"yyyy-MM-dd")}this.generalDashBoardService.getCountOfContractsAboutToExpire(this.dashboardParameters).subscribe({next:t=>{this.contractsAboutToExpire=parseInt(t.toString())},error:t=>{this.contractsAboutToExpire=0}})}getNumberOfOpenTickets(){this.dashboardParameters.ClientId=this.manageParams.strClientId,this.fromQuickPanel?(this.dashboardParameters.FromDate=this.manageParams.fromDate,this.dashboardParameters.ToDate=this.manageParams.toDate):(this.dashboardParameters.FromDate="",this.dashboardParameters.ToDate=""),this.generalDashBoardService.getNumberOfOpenTickets(this.dashboardParameters).subscribe({next:t=>{this.numberOfOpenTickets=parseInt(t.toString())},error:t=>{this.numberOfOpenTickets=0}})}contractReminder(){this.data.setMessage(!0),this.router.navigate(["/owner-tenant/create-contract"])}openTickets(){this.router.navigate(["/tickets/list"])}}return t.\u0275fac=function(e){return new(e||t)(P.Nb(o.a),P.Nb(b.a),P.Nb(i.g),P.Nb(r.a),P.Nb(i.d),P.Nb(f.a),P.Nb(n.a),P.Nb(F.b),P.Nb(n.f),P.Nb(i.f),P.Nb(A.a),P.Nb(w.a),P.Nb(T.a),P.Nb(D.a))},t.\u0275cmp=P.Hb({type:t,selectors:[["fury-generaldashboard"]],features:[P.Bb([o.a,i.x])],decls:32,vars:6,consts:[[1,"container"],[1,"utype",2,"padding","1.25% 1% 1% 1%"],[1,"toolBar"],["fxLayout","row","fxLayout.xs","row","fxLayout.sm","row","fxLayoutGap","6px",1,"content",2,"padding","1% 1% 1% 1%"],["fxFlex","50%"],[1,"mat-elevation-z4"],[1,"buttons"],[3,"id","click",4,"ngFor","ngForOf"],["id","gdacontainer1"],[1,"revbuttons"],["id","gdacontainer2"],["fxFlex","50%",1,"mat-elevation-z4"],["id","gdacontainer3"],["id","gdacontainer4"],[1,"utype",2,"padding","1% 1% 1% 1%"],["color","primary","fxLayout","row"],[1,"toolbar-spacer"],["fxFlex","20%",1,"dropdown"],["fxFlex",""],["name","utilityType","id","utilityTypeId","placeholder","Utility Type",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayout.xs","row","fxLayout.sm","row",1,"content",2,"padding","0% 1% 0% 1%"],["fxFlex","100%"],["id","gdacontainer6"],[3,"id","click"],[3,"value"]],template:function(t,e){1&t&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"span",2),P.Rc(3),P.Sb(),P.Sb(),P.Tb(4,"div",3),P.Tb(5,"div",4),P.Tb(6,"mat-card",5),P.Tb(7,"div",6),P.Pc(8,B,2,2,"button",7),P.Sb(),P.Ob(9,"div",8),P.Sb(),P.Sb(),P.Tb(10,"div",4),P.Tb(11,"mat-card",5),P.Tb(12,"div",9),P.Pc(13,U,2,2,"button",7),P.Sb(),P.Ob(14,"div",10),P.Sb(),P.Sb(),P.Sb(),P.Tb(15,"div",3),P.Tb(16,"mat-card",11),P.Ob(17,"div",12),P.Sb(),P.Tb(18,"mat-card",11),P.Ob(19,"div",13),P.Sb(),P.Sb(),P.Tb(20,"div",14),P.Tb(21,"mat-toolbar",15),P.Tb(22,"span"),P.Rc(23),P.Sb(),P.Ob(24,"span",16),P.Tb(25,"div",17),P.Tb(26,"mat-form-field",18),P.Tb(27,"mat-select",19),P.bc("ngModelChange",(function(t){return e.utilityType=t}))("ngModelChange",(function(){return e.onDropdownChange()})),P.Pc(28,W,2,2,"mat-option",20),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(29,"div",21),P.Tb(30,"mat-card",22),P.Ob(31,"div",23),P.Sb(),P.Sb(),P.Sb()),2&t&&(P.Cb(3),P.Sc(e.dashboardTitle),P.Cb(5),P.mc("ngForOf",e.quarters),P.Cb(5),P.mc("ngForOf",e.revenueTypes),P.Cb(10),P.Sc(e.consumptionTitle),P.Cb(4),P.mc("ngModel",e.utilityType),P.Cb(1),P.mc("ngForOf",e.lstutilityType))},directives:[R.d,R.e,R.b,M.a,i.n,k.a,I.d,E.a,L.q,L.t,N.n],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.utype[_ngcontent-%COMP%]{width:100%}.mat-card[_ngcontent-%COMP%]{min-height:25%!important}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.dropdown[_ngcontent-%COMP%]{background-color:#fff;color:#000;height:78%}.img-style[_ngcontent-%COMP%]{width:32px}.chkspace[_ngcontent-%COMP%]{padding-right:20px}.pointer[_ngcontent-%COMP%]{cursor:pointer;text-align:right}.contractReminder[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;max-width:100%}.MonthCollection[_ngcontent-%COMP%]{background:#03a9f4;color:#fff;max-width:100%}.OutStanding[_ngcontent-%COMP%]{background:#dc0a59;color:#fff;max-width:100%}.openTickets[_ngcontent-%COMP%]{background:#10c8cd;color:#fff}.fontSize[_ngcontent-%COMP%]{font-size:medium;vertical-align:middle;font-weight:400}.contractscounter[_ngcontent-%COMP%], .ticketscounter[_ngcontent-%COMP%]{font-size:xx-large;vertical-align:middle;margin:0;font-weight:700}.buttons[_ngcontent-%COMP%]{min-width:310px;text-align:center;font-size:0}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:16px;background-color:#f8f8f8 0 0 no-repeat padding-box;font-size:1rem;padding:.5rem;outline:none;transition-duration:.3s;margin:4px auto}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#9e9fa3;outline:none}.buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#0051b4;color:#fff}.revbuttons[_ngcontent-%COMP%]{min-width:310px;text-align:center;font-size:0}.revbuttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:16px;background-color:#f8f8f8 0 0 no-repeat padding-box;font-size:1rem;padding:.5rem;outline:none;transition-duration:.3s;margin:4px auto}.revbuttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#9e9fa3;outline:none}.revbuttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#0051b4;color:#fff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.bottomPadding[_ngcontent-%COMP%]{padding-bottom:20px}.alignRight[_ngcontent-%COMP%]{float:right}.toolBar[_ngcontent-%COMP%]{font-size:x-large;font-weight:700;line-height:50px}"]}),t})()}];let V=(()=>{class t{}return t.\u0275mod=P.Lb({type:t}),t.\u0275inj=P.Kb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(j)],n.j]}),t})();var z=a("kAVD"),_=a("a0Xn"),G=a("WCGO"),Q=a("KthW");let J=(()=>{class t{}return t.\u0275mod=P.Lb({type:t}),t.\u0275inj=P.Kb({factory:function(e){return new(e||t)},providers:[i.g],imports:[[i.c,V,z.a,_.a,M.g,G.a,Q.a,L.w,E.b,N.o,L.l,k.b]]}),t})()},iTcJ:function(t,e,a){var i,n,o;o=function(t){function e(t,e,a,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,a))}e(t=t?t._modules:{},"Extensions/DownloadURL.js",[t["Core/Globals.js"]],(function(t){var e=t.win,a=e.navigator,i=e.document,n=e.URL||e.webkitURL||e,o=/Edge\/\d+/.test(a.userAgent),r=t.dataURLtoBlob=function(t){if((t=t.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<t.length&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&e.Blob&&n.createObjectURL){var a=e.atob(t[3]),i=new e.ArrayBuffer(a.length);i=new e.Uint8Array(i);for(var o=0;o<i.length;++o)i[o]=a.charCodeAt(o);return t=new e.Blob([i],{type:t[1]}),n.createObjectURL(t)}};return t=t.downloadURL=function(t,n){var s=i.createElement("a");if("string"==typeof t||t instanceof String||!a.msSaveOrOpenBlob){if(t=""+t,(o||2e6<t.length)&&!(t=r(t)||""))throw Error("Failed to convert to blob");if(void 0!==s.download)s.href=t,s.download=n,i.body.appendChild(s),s.click(),i.body.removeChild(s);else try{if(null==e.open(t,"chart"))throw Error("Failed to open window")}catch(l){e.location.href=t}}else a.msSaveOrOpenBlob(t,n)},{dataURLtoBlob:r,downloadURL:t}})),e(t,"Extensions/OfflineExporting.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"],t["Extensions/DownloadURL.js"]],(function(t,e,a,i,n){function o(t,e){var a=d.getElementsByTagName("head")[0],i=d.createElement("script");i.type="text/javascript",i.src=t,i.onload=e,i.onerror=function(){u("Error loading script "+t)},a.appendChild(i)}function r(t){var e=-1<y.userAgent.indexOf("WebKit")&&0>y.userAgent.indexOf("Chrome");try{if(!e&&0>y.userAgent.toLowerCase().indexOf("firefox"))return b.createObjectURL(new c.Blob([t],{type:"image/svg+xml;charset-utf-16"}))}catch(a){}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(t)}function s(t,e,a,i,n,o,r,s,l){var h=new c.Image,u=function(){setTimeout((function(){var o=d.createElement("canvas"),s=o.getContext&&o.getContext("2d");try{if(s){o.height=h.height*i,o.width=h.width*i,s.drawImage(h,0,0,o.width,o.height);try{var c=o.toDataURL(e);n(c,e,a,i)}catch(u){m(t,e,a,i)}}else r(t,e,a,i)}finally{l&&l(t,e,a,i)}}),x)},p=function(){s(t,e,a,i),l&&l(t,e,a,i)},m=function(){h=new c.Image,m=o,h.crossOrigin="Anonymous",h.onload=u,h.onerror=p,h.src=t};h.onload=u,h.onerror=p,h.src=t}function l(t,e,a,i){function n(t,e){var a=t.width.baseVal.value+2*e;return a=new c.jsPDF((e=t.height.baseVal.value+2*e)>a?"p":"l","pt",[a,e]),[].forEach.call(t.querySelectorAll('*[visibility="hidden"]'),(function(t){t.parentNode.removeChild(t)})),c.svg2pdf(t,a,{removeInvalid:!0}),a.output("datauristring")}function l(){p.innerHTML=t;var e,o=p.getElementsByTagName("text");[].forEach.call(o,(function(t){["font-family","font-size"].forEach((function(e){for(var a=t;a&&a!==p;){if(a.style[e]){t.style[e]=a.style[e];break}a=a.parentNode}})),t.style["font-family"]=t.style["font-family"]&&t.style["font-family"].split(" ").splice(-1),e=t.getElementsByTagName("title"),[].forEach.call(e,(function(e){t.removeChild(e)}))})),o=n(p.firstChild,0);try{f(o,v),i&&i()}catch(r){a(r)}}var h=!0,u=e.libURL||m().exporting.libURL,p=d.createElement("div"),g=e.type||"image/png",v=(e.filename||"chart")+"."+("image/svg+xml"===g?"svg":g.split("/")[1]),x=e.scale||1;if(u="/"!==u.slice(-1)?u+"/":u,"image/svg+xml"===g)try{if(void 0!==y.msSaveOrOpenBlob){var C=new MSBlobBuilder;C.append(t);var O=C.getBlob("image/svg+xml")}else O=r(t);f(O,v),i&&i()}catch(S){a(S)}else if("application/pdf"===g)c.jsPDF&&c.svg2pdf?l():(h=!0,o(u+"jspdf.js",(function(){o(u+"svg2pdf.js",(function(){l()}))})));else{O=r(t);var w=function(){try{b.revokeObjectURL(O)}catch(S){}};s(O,g,{},x,(function(t){try{f(t,v),i&&i()}catch(e){a(e)}}),(function(){var e=d.createElement("canvas"),n=e.getContext("2d"),r=t.match(/^<svg[^>]*width\s*=\s*"?(\d+)"?[^>]*>/)[1]*x,s=t.match(/^<svg[^>]*height\s*=\s*"?(\d+)"?[^>]*>/)[1]*x,l=function(){n.drawSvg(t,0,0,r,s);try{f(y.msSaveOrOpenBlob?e.msToBlob():e.toDataURL(g),v),i&&i()}catch(o){a(o)}finally{w()}};e.width=r,e.height=s,c.canvg?l():(h=!0,o(u+"rgbcolor.js",(function(){o(u+"canvg.js",(function(){l()}))})))}),a,a,(function(){h&&w()}))}}var c=e.win,d=e.doc,h=i.addEvent,u=i.error,p=i.extend,m=i.getOptions,g=i.merge,f=n.downloadURL,b=c.URL||c.webkitURL||c,y=c.navigator,v=/Edge\/|Trident\/|MSIE /.test(y.userAgent),x=v?150:0;e.CanVGRenderer={},t.prototype.getSVGForLocalExport=function(t,e,a,i){var n,o,r,l,c=this,d=0,u=function(){d===m.length&&i(c.sanitizeSVG(n.innerHTML,o))},p=function(t,e,a){++d,a.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",t),u()};c.unbindGetSVG=h(c,"getSVG",(function(t){o=t.chartCopy.options,n=t.chartCopy.container.cloneNode(!0)})),c.getSVGForExport(t,e);var m=n.getElementsByTagName("image");try{if(!m.length)return void i(c.sanitizeSVG(n.innerHTML,o));var g=0;for(r=m.length;g<r;++g){var f=m[g];(l=f.getAttributeNS("http://www.w3.org/1999/xlink","href"))?s(l,"image/png",{imageElement:f},t.scale,p,a,a,a):(++d,f.parentNode.removeChild(f),u())}}catch(b){a(b)}c.unbindGetSVG()},t.prototype.exportChartLocal=function(t,e){var i=this,n=g(i.options.exporting,t),o=function(t){!1===n.fallbackToExportServer?n.error?n.error(n,t):u(28,!0):i.exportChart(n)};t=function(){return[].some.call(i.container.getElementsByTagName("image"),(function(t){return""!==(t=t.getAttribute("href"))&&0!==t.indexOf("data:")}))},v&&i.styledMode&&(a.prototype.inlineWhitelist=[/^blockSize/,/^border/,/^caretColor/,/^color/,/^columnRule/,/^columnRuleColor/,/^cssFloat/,/^cursor/,/^fill$/,/^fillOpacity/,/^font/,/^inlineSize/,/^length/,/^lineHeight/,/^opacity/,/^outline/,/^parentRule/,/^rx$/,/^ry$/,/^stroke/,/^textAlign/,/^textAnchor/,/^textDecoration/,/^transform/,/^vectorEffect/,/^visibility/,/^x$/,/^y$/]),v&&("application/pdf"===n.type||i.container.getElementsByTagName("image").length&&"image/svg+xml"!==n.type)||"application/pdf"===n.type&&t()?o("Image type not supported for this chart/browser."):i.getSVGForLocalExport(n,e,o,(function(t){-1<t.indexOf("<foreignObject")&&"image/svg+xml"!==n.type?o("Image type not supportedfor charts with embedded HTML"):l(t,p({filename:i.getFilename()},n),o)}))},g(!0,m().exporting,{libURL:"https://code.highcharts.com/8.2.2/lib/",menuItemDefinitions:{downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}}}),e.downloadSVGLocal=l})),e(t,"masters/modules/offline-exporting.src.js",[],(function(){}))},t.exports?(o.default=o,t.exports=o):(i=[a("6n/F"),a("AxlJ")],void 0===(n=(function(t){return o(t),o.Highcharts=t,o}).apply(e,i))||(t.exports=n))}}]);