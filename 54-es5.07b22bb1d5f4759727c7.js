!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"9+Ko":function(t,a,n){"use strict";n.r(a),n.d(a,"AcceptanceReportModule",(function(){return ie}));var r=n("ofXK"),c=n("0jmt"),o=n("KthW"),l=n("tyNb"),s=n("M9IT"),u=n("Dh3D"),f=n("+0xr"),b=n("jtHE"),m=n("pLZG"),p=n("Ku73"),h=n("nStZ"),d=n("Y0L5"),g=n("EUZL"),y=n("i680"),v=(n("DaQG"),n("nST0")),S=n("wd/R"),x=n("KHMF"),w=n("a8hA"),C=n("sXtk"),k=n("fXoL"),T=n("dNgK"),D=n("b6Qw"),P=n("xBcV"),A=n("Hbgg"),L=n("rnAf"),I=n("rvYj"),R=n("a+RD"),F=n("bTqV"),N=n("Qu3c"),O=n("NFeN"),U=n("bSwM");function z(e,t){if(1&e){var i=k.Ub();k.Tb(0,"th",20),k.Tb(1,"mat-checkbox",21),k.bc("click",(function(e){return k.Ec(i),e.stopPropagation()})),k.Sb(),k.Sb()}}function M(e,t){if(1&e){var i=k.Ub();k.Tb(0,"td",22),k.Tb(1,"mat-checkbox",21),k.bc("click",(function(e){return k.Ec(i),e.stopPropagation()})),k.Sb(),k.Sb()}}function j(e,t){1&e&&k.Ob(0,"th",23)}function E(e,t){if(1&e&&(k.Tb(0,"td",24),k.Ob(1,"img",25),k.Sb()),2&e){var i=t.$implicit;k.Cb(1),k.oc("src","http://i.pravatar.cc/30?u=",i.name,"",k.Gc)}}function H(e,t){if(1&e&&(k.Tb(0,"th",30),k.Rc(1),k.Sb()),2&e){var i=k.fc(2).$implicit;k.Cb(1),k.Tc(" ",i.name," ")}}function $(e,t){if(1&e&&(k.Tb(0,"td",31),k.Rc(1),k.Sb()),2&e){var i=t.$implicit,a=k.fc(2).$implicit;k.Cb(1),k.Tc(" ",i[a.property]," ")}}function W(e,t){if(1&e&&(k.Rb(0,27),k.Pc(1,H,2,1,"th",28),k.Pc(2,$,2,1,"td",29),k.Qb()),2&e){var i=k.fc().$implicit;k.mc("matColumnDef",i.property)}}function X(e,t){if(1&e&&(k.Rb(0),k.Pc(1,W,3,1,"ng-container",26),k.Qb()),2&e){var i=t.$implicit;k.Cb(1),k.mc("ngIf",i.isModelProperty)}}function Y(e,t){1&e&&(k.Tb(0,"th",32),k.Rc(1,"IS ACCEPTED"),k.Sb())}function V(e,t){if(1&e&&(k.Tb(0,"td",33),k.Rc(1),k.Sb()),2&e){var i=t.$implicit;k.Cb(1),k.Tc(" ",1==i.isAccepted?"Yes":"No"," ")}}function G(e,t){1&e&&k.Ob(0,"tr",34)}function K(e,t){1&e&&k.Ob(0,"tr",35)}var Q,J,_,q=function(){return[]},Z=[{path:"",component:(Q=function(){function t(i,a,n,r,c,o,l){var s;e(this,t),this.loginReportService=i,this.date=a,this.snackbar=n,this.cookieService=r,this.clientSelectionService=c,this.clientService=o,this.envService=l,this.subject$=new b.a(1),this.data$=this.subject$.asObservable(),this.filePath="",this.imageProperties=[],this.columns=[{name:"Account Number",property:"accountNumber",visible:!0,isModelProperty:!0},{name:"Owner Name",property:"ownerName",visible:!0,isModelProperty:!0},{name:"Is Accepted",property:"isAccepted",visible:!0,isModelProperty:!1},{name:"Last Updated On",property:"createdDate",visible:!0,isModelProperty:!0}],this.pageSize=8,this.dateFormat="",this.filePath=l.backendForFiles,this.dateFormat=null!==(s=Object(x.e)("DateFormat"))&&void 0!==s?s:l.dateFormat,this.clientId=parseInt(this.cookieService.get("globalClientId"))}return i(t,[{key:"ngOnInit",value:function(){this.clientSelectionService.setIsClientVisible(!0),this.userid=this.cookieService.get("userId"),this.GetAllUserAcceptanceLogDetails()}},{key:"GetAllUserAcceptanceLogDetails",value:function(){var e=this;this.loginReportService.getAllUserAcceptanceLogDetails(this.clientId).subscribe((function(t){t.forEach((function(t){t.createdDateLocal=e.date.transform(t.createdDate.toString(),e.dateFormat.toString())})),e.subject$.next(t)})),this.dataSource=new f.k,this.data$.pipe(Object(m.a)((function(e){return!!e}))).subscribe((function(t){e.userAcceptanceLogDetails=t,e.dataSource.data=t})),this.ngAfterViewInit()}},{key:"onFilterChange",value:function(e){this.dataSource&&(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"ngOnDestroy",value:function(){}},{key:"getJsonData",value:function(){var e=this;this.tableData=[],this.userAcceptanceLogDetails.forEach((function(t){e.tableData.push({AccountNumber:t.accountNumber,OwnerName:t.ownerName,IsAccepted:1==t.isAccepted?"Yes":"No",LastUpdatedOn:t.createdDate})}))}},{key:"notificationMessage",value:function(e,t){this.snackbar.open(e,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[t]})}},{key:"onExport",value:function(){if(this.userAcceptanceLogDetails&&this.userAcceptanceLogDetails.length>0){this.getJsonData();var e=g.utils.json_to_sheet(this.tableData),t=g.utils.book_new();g.utils.book_append_sheet(t,e,"Sheet1"),g.writeFile(t,"AcceptanceReport.xlsx")}else this.notificationMessage("No Data to Export","yellow-snackbar")}},{key:"onPrint",value:function(){this.getClientImageProperties()}},{key:"getClientImageProperties",value:function(){var e=this;this.imageProperties=[],this.clientService.getClientImageProperties(this.clientId).subscribe({next:function(t){t&&t.length&&(e.imageProperties=t,e.userAcceptanceLogDetails&&e.userAcceptanceLogDetails.length&&e.downloadSummary(e.userAcceptanceLogDetails))},error:function(){this.notificationMessage("Image properties not found. To see image on print, please configure image properties","red-snackbar"),this.userAcceptanceLogDetails&&this.userAcceptanceLogDetails.length&&this.downloadSummary(this.userAcceptanceLogDetails)}})}},{key:"downloadSummary",value:function(e){for(var t=[],i=[],a=0;a<e.length;a++)t.push(a+1),t.push(e[a].accountNumber),t.push(e[a].ownerName),t.push(1==e[a].isAccepted?"Yes":"No"),t.push(e[a].createdDate),i.push(t),t=[];this.getSummaryReport(e,["SL No","Account Number","Owner Name","Is Accepted","Last Updated On"],i,"TNC Acceptance Report")}},{key:"getSummaryReport",value:function(e,t,i,a){var n,r=this.imageProperties,c=new Image;c.src=this.filePath+"/uploads/"+(null===(n=this.imageProperties[0])||void 0===n?void 0:n.photo);var o=new y.default({orientation:"portrait",unit:"pt",format:"letter"}),l=S().format("M/D/YYYY hh:mm:ss a");o.autoTable(t,i,{startX:10,startY:70,didDrawPage:function(e){if(o.setFontSize(30),c&&e&&r&&r.length){var t=r.find((function(e){return"portrait"===e.imageType.trim().toLowerCase()}));t&&(c.onload=function(){o.addImage(c,t.imgX,t.imgY,t.imgW,t.imgH)})}o.setTextColor(0,0,0),o.setFontSize(14),o.setFont("Cambria"),o.text(a,260,60),o.setFont("Cambria","normal"),o.setFontSize(9),o.text("Print Date: "+l,o.internal.pageSize.width-150,20);var i="Page "+e.pageCount;"function"==typeof o.putTotalPages&&(o.setTextColor(0,0,0),o.rect(5,5,o.internal.pageSize.width-10,o.internal.pageSize.height-10,"S")),o.setFontSize(9);var n=o.internal.pageSize.height||o.internal.pageSize.getHeight();o.text(i,e.settings.margin.left,n-10)},styles:{overflow:"linebreak",cellWidth:"wrap",fontSize:9,cellPadding:6,overflowColumns:"linebreak",lineColor:[0,0,0]},margin:{top:60,left:20},theme:"grid",tableWidth:"auto",cellWidth:"wrap",columnStyles:{0:{cellWidth:40,halign:"center"},1:{cellWidth:100,halign:"center"},2:{cellWidth:230,halign:"center"},3:{cellWidth:70,halign:"center"},4:{cellWidth:130,halign:"center"}},headStyles:{lineWidth:.1,lineColor:[0,0,0],halign:"center",fillColor:[25,118,210]}});var s=o.output("blob");window.open(URL.createObjectURL(s))}},{key:"content",set:function(e){this.sort=e,this.sort&&(this.dataSource.sort=this.sort)}},{key:"visibleColumns",get:function(){return this.columns.filter((function(e){return e.visible})).map((function(e){return e.property}))}}]),t}(),Q.\u0275fac=function(e){return new(e||Q)(k.Nb(d.a),k.Nb(r.f),k.Nb(T.b),k.Nb(D.a),k.Nb(w.a),k.Nb(v.a),k.Nb(C.a))},Q.\u0275cmp=k.Hb({type:Q,selectors:[["app-acceptance-report"]],viewQuery:function(e,t){var i;1&e&&(k.Jc(s.a,!0),k.Vc(u.a,!0)),2&e&&(k.zc(i=k.cc())&&(t.paginator=i.first),k.zc(i=k.cc())&&(t.content=i.first))},inputs:{columns:"columns"},decls:26,vars:10,consts:[["mode","card"],["current","TNC Acceptance Report",3,"crumbs"],["name","TNC Acceptance Report",3,"columns","filterChange"],[1,"actions"],["matTooltip","Export","mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],["matTooltip","Print","mat-icon-button","",1,"example-icon",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","isAccepted"],["mat-header-cell","","class","header-align-right",4,"matHeaderCellDef"],["mat-cell","","class","header-align-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"header-align-right"],["mat-cell","",1,"header-align-right"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(e,t){1&e&&(k.Tb(0,"fury-page-layout",0),k.Tb(1,"fury-page-layout-header"),k.Ob(2,"fury-breadcrumbs",1),k.Sb(),k.Tb(3,"fury-page-layout-content"),k.Tb(4,"fury-list",2),k.bc("filterChange",(function(e){return t.onFilterChange(e)})),k.Tb(5,"div",3),k.Tb(6,"button",4),k.bc("click",(function(){return t.onExport()})),k.Tb(7,"mat-icon"),k.Rc(8,"import_export"),k.Sb(),k.Sb(),k.Tb(9,"button",5),k.bc("click",(function(){return t.onPrint()})),k.Tb(10,"mat-icon"),k.Rc(11,"print"),k.Sb(),k.Sb(),k.Sb(),k.Tb(12,"table",6),k.Rb(13,7),k.Pc(14,z,2,0,"th",8),k.Pc(15,M,2,0,"td",9),k.Qb(),k.Rb(16,10),k.Pc(17,j,1,0,"th",11),k.Pc(18,E,2,1,"td",12),k.Qb(),k.Pc(19,X,2,1,"ng-container",13),k.Rb(20,14),k.Pc(21,Y,2,0,"th",15),k.Pc(22,V,2,1,"td",16),k.Qb(),k.Pc(23,G,1,0,"tr",17),k.Pc(24,K,1,0,"tr",18),k.Sb(),k.Ob(25,"mat-paginator",19),k.Sb(),k.Sb(),k.Sb()),2&e&&(k.Cb(2),k.mc("@fadeInRight",void 0)("crumbs",k.qc(9,q)),k.Cb(1),k.mc("@fadeInUp",void 0),k.Cb(1),k.mc("columns",t.columns),k.Cb(8),k.mc("dataSource",t.dataSource),k.Cb(7),k.mc("ngForOf",t.columns),k.Cb(4),k.mc("matHeaderRowDef",t.visibleColumns),k.Cb(1),k.mc("matRowDefColumns",t.visibleColumns),k.Cb(1),k.mc("pageSize",t.pageSize))},directives:[P.a,A.a,L.a,I.a,R.a,F.a,N.a,O.a,f.j,u.a,f.c,f.e,f.b,r.n,f.g,f.i,s.a,f.d,U.a,f.a,r.o,u.b,f.f,f.h],styles:[""],data:{animation:[p.a,h.a]}}),Q)}],B=((J=function t(){e(this,t)}).\u0275mod=k.Lb({type:J}),J.\u0275inj=k.Kb({factory:function(e){return new(e||J)},imports:[[l.j.forChild(Z)],l.j]}),J),ee=n("WCGO"),te=n("q8Jb"),ie=((_=function t(){e(this,t)}).\u0275mod=k.Lb({type:_}),_.\u0275inj=k.Kb({factory:function(e){return new(e||_)},imports:[[r.c,B,o.a,ee.a,c.a,te.a]]}),_)},"a+RD":function(t,a,n){"use strict";n.d(a,"a",(function(){return w}));var r=n("fXoL"),c=n("xgIS"),o=n("/uUt"),l=n("Kj3r"),s=n("ofXK"),u=n("STbY"),f=n("XiUz"),b=n("NFeN"),m=n("bTqV"),p=n("bSwM"),h=n("3Pt+"),d=["filter"];function g(e,t){if(1&e&&(r.Tb(0,"button",12),r.Tb(1,"mat-icon"),r.Rc(2,"filter_list"),r.Sb(),r.Sb()),2&e){r.fc(2);var i=r.Ac(3);r.mc("matMenuTriggerFor",i)}}function y(e,t){if(1&e&&(r.Tb(0,"div",5),r.Tb(1,"div",6),r.Rc(2),r.Sb(),r.Tb(3,"div",7),r.Tb(4,"mat-icon",8),r.Rc(5,"search"),r.Sb(),r.Ob(6,"input",9,10),r.Sb(),r.Pc(8,g,3,1,"button",11),r.kc(9,1),r.Sb()),2&e){var i=r.fc();r.Cb(2),r.Sc(i.name),r.Cb(6),r.mc("ngIf",!i.hideFilter)}}function v(e,t){if(1&e){var i=r.Ub();r.Tb(0,"button",13),r.bc("click",(function(e){r.Ec(i);var a=t.$implicit;return r.fc().toggleColumnVisibility(a,e)})),r.Tb(1,"mat-checkbox",14,15),r.bc("ngModelChange",(function(e){return r.Ec(i),t.$implicit.visible=e}))("click",(function(e){return r.Ec(i),e.stopPropagation()})),r.Rc(3),r.Sb(),r.Sb()}if(2&e){var a=t.$implicit;r.Cb(1),r.mc("ngModel",a.visible),r.Cb(2),r.Tc(" ",a.name," ")}}var S=["*",[["",8,"actions"]]],x=["*",".actions"],w=function(){var t=function(){function t(){e(this,t),this.filterChange=new r.o}return i(t,[{key:"ngAfterViewInit",value:function(){var e=this;this.hideHeader||Object(c.a)(this.filter.nativeElement,"keyup").pipe(Object(o.a)(),Object(l.a)(150)).subscribe((function(){e.filterChange.emit(e.filter.nativeElement.value)}))}},{key:"toggleColumnVisibility",value:function(e,t){t.stopPropagation(),t.stopImmediatePropagation(),e.visible=!e.visible}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["fury-list"]],viewQuery:function(e,t){var i;1&e&&r.Vc(d,!0),2&e&&r.zc(i=r.cc())&&(t.filter=i.first)},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader",hideFilter:"hideFilter"},outputs:{filterChange:"filterChange"},ngContentSelectors:x,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["class","fury-column-filter","type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(e,t){1&e&&(r.lc(S),r.Tb(0,"div",0),r.Pc(1,y,10,2,"div",1),r.Tb(2,"mat-menu",2,3),r.Pc(4,v,4,2,"button",4),r.Sb(),r.kc(5),r.Sb()),2&e&&(r.Cb(1),r.mc("ngIf",!t.hideHeader),r.Cb(3),r.mc("ngForOf",t.columns))},directives:[s.o,u.e,s.n,f.d,f.c,f.e,f.b,b.a,m.a,u.d,p.a,h.q,h.t],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width:599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width:599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}"],encapsulation:2}),t}()},nST0:function(t,a,n){"use strict";n.d(a,"a",(function(){return l}));var r=n("tk/3"),c=n("sXtk"),o=n("fXoL"),l=function(){var t=function(){function t(i,a){e(this,t),this.http=i,this.envService=a,this.baseUrl="",this.baseUrl=a.backend}return i(t,[{key:"getClients",value:function(){return this.http.get(this.baseUrl+"/clients")}},{key:"getRoles",value:function(){return this.http.get(this.baseUrl+"/clients/roles")}},{key:"saveUserClients",value:function(e){return this.http.post(this.baseUrl+"/clients/userclients",e)}},{key:"getClientImageProperties",value:function(e){var t=new r.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/clients/image/properties",{params:t})}},{key:"getUtilityTypes",value:function(e){var t=new r.f;return t=t.append("clientId",""+e),this.http.get(this.baseUrl+"/clients/utilityType",{params:t})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Xb(r.c),o.Xb(c.a))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();