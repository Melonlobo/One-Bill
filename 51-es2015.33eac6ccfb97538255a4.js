(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"0iiu":function(t,e,i){"use strict";i.r(e),i.d(e,"CreateBilltagModule",(function(){return _}));var r=i("ofXK"),s=i("3Pt+"),n=i("q8Jb"),a=i("0jmt"),l=i("KthW"),c=i("tyNb");class o{constructor(t){this.id=t.id||0,this.deviceId=t.deviceId||0,this.billSettingsId=t.billSettingsId||0,this.billSettingsName=t.billSettingsName||"",this.clientId=t.clientId||0,this.clientName=t.clientName||""}}var b=i("sOHO"),u=i("nST0"),m=i("sXtk"),p=i("fXoL"),f=i("tk/3");let d=(()=>{class t{constructor(t,e){this.http=t,this.envService=e,this.baseUrl="",this.baseUrl=e.backend}createBilltag(t){return this.http.post(this.baseUrl+"/billTags",t)}}return t.\u0275fac=function(e){return new(e||t)(p.Xb(f.c),p.Xb(m.a))},t.\u0275prov=p.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i("Ku73"),g=i("nStZ"),S=i("ctVQ"),v=i("dNgK"),T=i("rFp9"),y=i("jM3x"),C=i("XiUz"),w=i("xHqg"),I=i("4FRi"),N=i("kmnG"),A=i("qFsG"),E=i("/1cH"),O=i("YaQ2"),R=i("0IaG"),L=i("bTqV"),k=i("FKr1");function U(t,e){1&t&&p.Rc(0,"Bill Tag")}function q(t,e){if(1&t&&(p.Tb(0,"mat-option",21),p.Rc(1),p.Sb()),2&t){const t=e.$implicit;p.mc("value",t.description),p.Cb(1),p.Tc("",t.description," ")}}function P(t,e){if(1&t&&(p.Tb(0,"mat-option",21),p.Rc(1),p.Sb()),2&t){const t=e.$implicit;p.mc("value",t.label),p.Cb(1),p.Tc("",t.label," ")}}const x=[{path:"",component:(()=>{class t{constructor(t,e,i,r,s,n){this.fb=t,this.metadataService=e,this.clientService=i,this.billTagService=r,this.snackbar=s,this.billPeriodService=n,this.clients=[]}ngOnInit(){this.defaults=new o({}),this.getClients(),this.form=this.fb.group({id:[this.defaults.id||t.id++],billSettingsId:[this.defaults.billSettingsId||"",s.y.required],billSettingsName:[this.defaults.billSettingsName||"",s.y.required],clientId:[this.defaults.clientId||"",s.y.required],clientName:[this.defaults.clientName||"",s.y.required]})}getClients(){this.clients=[],this.clientService.getClients().subscribe(t=>{t&&t.forEach(t=>{this.clients.push({label:t.clientName,value:t.id})})})}save(){this.createBillTag()}createBillTag(){Object.assign(this.defaults,this.form.value),this.billTagService.createBilltag(this.defaults).subscribe(t=>{this.snackbar.open("created Bill tags Successfully",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]})})}selectBillSettings(t){this.metadataBillSettingsTypes.forEach(e=>{t.option.value==e.description&&this.form.controls.billSettingsId.setValue(e.id)})}selectClients(t){this.clients.forEach(e=>{t.option.value==e.label&&this.form.controls.clientId.setValue(e.value)})}}return t.id=0,t.\u0275fac=function(e){return new(e||t)(p.Nb(s.f),p.Nb(b.a),p.Nb(u.a),p.Nb(d),p.Nb(v.b),p.Nb(S.a))},t.\u0275cmp=p.Hb({type:t,selectors:[["create-billtag"]],decls:32,vars:10,consts:[[1,"title"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[3,"linear"],["stepper","matHorizontalStepper"],[3,"stepControl"],[3,"formGroup","ngSubmit"],["matStepLabel",""],[1,"padding-top"],[1,"person"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","48px"],["fxFlex",""],["matInput","","formControlName","billSettingsName",3,"matAutocomplete"],[3,"optionSelected"],["billSettingsId","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"ctrl"],["matInput","","formControlName","clientName",3,"matAutocomplete"],["clientName","matAutocomplete"],["fxLayout","row","fxLayoutAlign","end center"],["mat-button",""],[3,"value"]],template:function(t,e){if(1&t&&(p.Tb(0,"fury-page"),p.Ob(1,"fury-title",0),p.Tb(2,"div",1),p.Tb(3,"div",2),p.Tb(4,"mat-horizontal-stepper",3,4),p.Tb(6,"mat-step",5),p.Tb(7,"form",6),p.bc("ngSubmit",(function(){return e.save()})),p.Pc(8,U,1,0,"ng-template",7),p.Tb(9,"fury-card"),p.Tb(10,"fury-card-content",8),p.Tb(11,"div",9),p.Tb(12,"div",10),p.Tb(13,"mat-form-field",11),p.Tb(14,"mat-label"),p.Rc(15,"Bill Settings"),p.Sb(),p.Ob(16,"input",12),p.Tb(17,"mat-autocomplete",13,14),p.bc("optionSelected",(function(t){return e.selectBillSettings(t)})),p.Pc(19,q,2,2,"mat-option",15),p.Sb(),p.Ob(20,"app-show-errors",16),p.Sb(),p.Tb(21,"mat-form-field",11),p.Tb(22,"mat-label"),p.Rc(23,"Clients"),p.Sb(),p.Ob(24,"input",17),p.Tb(25,"mat-autocomplete",13,18),p.bc("optionSelected",(function(t){return e.selectClients(t)})),p.Pc(27,P,2,2,"mat-option",15),p.Sb(),p.Ob(28,"app-show-errors",16),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(29,"mat-dialog-actions",19),p.Tb(30,"button",20),p.Rc(31,"SAVE BILLTAG"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb()),2&t){const t=p.Ac(18),i=p.Ac(26);p.Cb(3),p.mc("@fadeInUp",void 0),p.Cb(1),p.mc("linear",!0),p.Cb(2),p.mc("stepControl",e.form),p.Cb(1),p.mc("formGroup",e.form),p.Cb(9),p.mc("matAutocomplete",t),p.Cb(3),p.mc("ngForOf",e.metadataBillSettingsTypes),p.Cb(1),p.mc("ctrl",e.form.get("billSettingsName")),p.Cb(4),p.mc("matAutocomplete",i),p.Cb(3),p.mc("ngForOf",e.clients),p.Cb(1),p.mc("ctrl",e.form.get("clientName"))}},directives:[T.a,y.a,C.d,C.c,w.a,w.b,s.z,s.r,s.k,w.c,I.a,I.c,C.e,N.d,C.b,N.h,A.b,s.c,E.c,s.q,s.i,E.a,r.n,O.a,R.c,L.a,k.n],styles:[""],data:{animation:[h.a,g.a]}}),t})()}];let F=(()=>{class t{}return t.\u0275mod=p.Lb({type:t}),t.\u0275inj=p.Kb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(x)],c.j]}),t})();var B=i("WCGO"),G=i("YUcS"),X=i("VE2z"),z=i("NFeN"),$=i("QibW"),M=i("d3UM"),j=i("wZkO"),K=i("GiUZ");let _=(()=>{class t{}return t.\u0275mod=p.Lb({type:t}),t.\u0275inj=p.Kb({factory:function(e){return new(e||t)},imports:[[r.c,F,s.l,s.w,l.a,B.a,G.a,X.a,a.a,L.b,z.b,A.c,$.c,M.b,j.c,n.a,K.a]]}),t})()},YaQ2:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var r=i("fXoL"),s=i("ofXK");function n(t,e){if(1&t&&(r.Tb(0,"small"),r.Rc(1),r.Ob(2,"br"),r.Sb()),2&t){const t=e.$implicit;r.Cb(1),r.Tc(" ",t," ")}}function a(t,e){if(1&t&&(r.Tb(0,"div"),r.Pc(1,n,3,1,"small",1),r.Sb()),2&t){const t=r.fc();r.Cb(1),r.mc("ngForOf",t.listOfErrors())}}let l=(()=>{class t{constructor(){this.PATTERN_ERROR_MESSAGE={"/^[a-zA-Z ]*$/":"Accepts only alphabets with spaces","/^[a-zA-Z0-9]*$/":"Accepts only alphanumeric values with no spaces","/^[a-zA-Z0-9 ]*$/":"Accepts only alphanumeric values with spaces","/^[0-9]*$/":"Accepts only numbers","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{3,4}$":"Enter valid email address of format test@mail.com"},this.ERROR_MESSAGE={required:()=>"This field is required",minlength:t=>`Min ${t.requiredLength} chars is required but got only ${t.actualLength}`,maxlength:t=>`Max chars allowed is ${t.requiredLength} but got ${t.actualLength}`,pattern:t=>""+this.PATTERN_ERROR_MESSAGE[t.requiredPattern],email:()=>"Enter valid email address of format test@mail.com"}}ngOnInit(){}shouldShowErrors(){return this.ctrl&&this.ctrl.errors&&this.ctrl.touched}listOfErrors(){return Object.keys(this.ctrl.errors).map(t=>this.ERROR_MESSAGE[t](this.ctrl.getError(t)))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-show-errors"]],inputs:{ctrl:"ctrl"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&r.Pc(0,a,2,1,"div",0),2&t&&r.mc("ngIf",e.shouldShowErrors())},directives:[s.o,s.n],styles:["small[_ngcontent-%COMP%]{color:red}"]}),t})()},nST0:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var r=i("tk/3"),s=i("sXtk"),n=i("fXoL");let a=(()=>{class t{constructor(t,e){this.http=t,this.envService=e,this.baseUrl="",this.baseUrl=e.backend}getClients(){return this.http.get(this.baseUrl+"/clients")}getRoles(){return this.http.get(this.baseUrl+"/clients/roles")}saveUserClients(t){return this.http.post(this.baseUrl+"/clients/userclients",t)}getClientImageProperties(t){let e=new r.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/clients/image/properties",{params:e})}getUtilityTypes(t){let e=new r.f;return e=e.append("clientId",""+t),this.http.get(this.baseUrl+"/clients/utilityType",{params:e})}}return t.\u0275fac=function(e){return new(e||t)(n.Xb(r.c),n.Xb(s.a))},t.\u0275prov=n.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},rFp9:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var r=i("fXoL");let s=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Ib({type:t,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),t})()}}]);