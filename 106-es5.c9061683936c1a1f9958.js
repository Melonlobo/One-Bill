!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{nJbp:function(t,i,n){"use strict";n.r(i),n.d(i,"CreateOwnerRegisteredModule",(function(){return Nt}));var o=n("ofXK"),s=n("3Pt+"),r=n("q8Jb"),c=n("0jmt"),l=n("KthW"),u=n("tyNb"),d=n("M9IT"),b=n("Dh3D"),m=n("+0xr"),f=n("jtHE"),p=n("pLZG"),h=n("0IaG"),g=n("JyMN"),v=n("zyfE"),y=n("sOHO"),T=n("qIvx"),S=n("seMb"),C=n("UcNE"),w=n("Vvus"),k=n("/D9e"),N=n("kLqA"),O=n("6zYn"),D=n("Iab2"),x=n("zSPf"),R=n("tB66"),I=n("xXXn"),P=n("zP6O"),A=n("sXtk"),M=n("fXoL"),E=n("dNgK"),U=n("b6Qw"),$=n("/t3+"),z=n("bTqV"),L=n("NFeN"),F=n("MutI"),V=n("4FRi"),j=n("XiUz"),B=n("1jcm"),G=n("wZkO"),Q=n("kmnG"),H=n("qFsG"),_=n("/1cH"),q=n("YaQ2"),K=n("iadO"),J=n("znSr"),X=n("FKr1"),Y=n("bSwM"),W=["fileInput"],Z=["fileInputDocument"];function ee(e,t){1&e&&(M.Tb(0,"mat-form-field",92),M.Tb(1,"mat-label"),M.Rc(2,"Company Name"),M.Sb(),M.Ob(3,"input",93),M.Tb(4,"mat-hint"),M.Rc(5,"Owner Name cannot be Greater than 100"),M.Sb(),M.Sb())}function te(e,t){if(1&e){var a=M.Ub();M.Tb(0,"mat-form-field",94),M.Tb(1,"mat-label"),M.Rc(2,"TRN"),M.Sb(),M.Tb(3,"input",95),M.bc("change",(function(){return M.Ec(a),M.fc().checkTRNDuplication()}))("keyup",(function(){return M.Ec(a),M.fc().checkTRNDuplication()})),M.Sb(),M.Tb(4,"mat-hint",96),M.Rc(5),M.Sb(),M.Sb()}if(2&e){var i=M.fc();M.Cb(5),M.Sc(i.duplicateTRN)}}function ae(e,t){if(1&e&&(M.Tb(0,"mat-option",97),M.Rc(1),M.Sb()),2&e){var a=t.$implicit;M.mc("value",a.description),M.Cb(1),M.Tc(" ",a.description," ")}}function ie(e,t){if(1&e&&(M.Tb(0,"mat-hint",98),M.Rc(1),M.Sb()),2&e){var a=M.fc();M.Cb(1),M.Sc(a.errorMessage)}}function ne(e,t){if(1&e&&(M.Tb(0,"mat-option",97),M.Rc(1),M.Sb()),2&e){var a=t.$implicit;M.mc("value",a.description),M.Cb(1),M.Tc("",a.description," ")}}function oe(e,t){if(1&e&&(M.Tb(0,"mat-option",97),M.Rc(1),M.Sb()),2&e){var a=t.$implicit;M.mc("value",a.description),M.Cb(1),M.Tc(" ",a.description,"")}}function se(e,t){if(1&e&&(M.Tb(0,"mat-option",97),M.Rc(1),M.Sb()),2&e){var a=t.$implicit;M.mc("value",a.description),M.Cb(1),M.Tc(" ",a.description,"")}}function re(e,t){if(1&e&&(M.Tb(0,"mat-hint",98),M.Rc(1),M.Sb()),2&e){var a=M.fc();M.Cb(1),M.Sc(a.errorMessage)}}function ce(e,t){if(1&e){var a=M.Ub();M.Tb(0,"th",99),M.Tb(1,"mat-checkbox",100),M.bc("click",(function(e){return M.Ec(a),e.stopPropagation()})),M.Sb(),M.Sb()}}function le(e,t){if(1&e){var a=M.Ub();M.Tb(0,"td",101),M.Tb(1,"mat-checkbox",100),M.bc("click",(function(e){return M.Ec(a),e.stopPropagation()})),M.Sb(),M.Sb()}}function ue(e,t){1&e&&M.Ob(0,"th",102)}function de(e,t){if(1&e&&(M.Tb(0,"td",103),M.Ob(1,"img",104),M.Sb()),2&e){var a=t.$implicit;M.Cb(1),M.oc("src","http://i.pravatar.cc/30?u=",a.name,"",M.Gc)}}function be(e,t){1&e&&(M.Tb(0,"td",101),M.Tb(1,"mat-icon"),M.Rc(2,"more_horiz"),M.Sb(),M.Sb())}function me(e,t){if(1&e&&(M.Tb(0,"th",108),M.Rc(1),M.Sb()),2&e){var a=M.fc(2).$implicit;M.Cb(1),M.Tc(" ",a.name,"")}}function fe(e,t){if(1&e&&(M.Tb(0,"td",109),M.Rc(1),M.Sb()),2&e){var a=t.$implicit,i=M.fc(2).$implicit;M.Cb(1),M.Tc(" ",a[i.property]," ")}}function pe(e,t){if(1&e&&(M.Rb(0,106),M.Pc(1,me,2,1,"th",107),M.Pc(2,fe,2,1,"td",83),M.Qb()),2&e){var a=M.fc().$implicit;M.mc("matColumnDef",a.property)}}function he(e,t){if(1&e&&(M.Rb(0),M.Pc(1,pe,3,1,"ng-container",105),M.Qb()),2&e){var a=t.$implicit;M.Cb(1),M.mc("ngIf",a.isModelProperty)}}function ge(e,t){1&e&&(M.Tb(0,"th",110),M.Rc(1,"File Name"),M.Sb())}function ve(e,t){if(1&e){var a=M.Ub();M.Tb(0,"td",109),M.Tb(1,"span",111),M.bc("click",(function(){M.Ec(a);var e=t.$implicit;return M.fc().downloadDocument(e)})),M.Rc(2),M.Sb(),M.Sb()}if(2&e){var i=t.$implicit;M.Cb(2),M.Sc(i.document)}}function ye(e,t){1&e&&(M.Tb(0,"th",99),M.Rc(1,"Action"),M.Sb())}function Te(e,t){if(1&e){var a=M.Ub();M.Tb(0,"td",112),M.bc("click",(function(){M.Ec(a);var e=t.$implicit;return M.fc().deleteDocument(e)})),M.Tb(1,"mat-icon",113),M.Rc(2,"delete"),M.Sb(),M.Sb()}}function Se(e,t){1&e&&M.Ob(0,"tr",114)}function Ce(e,t){1&e&&M.Ob(0,"tr",115)}function we(e,t){if(1&e&&(M.Tb(0,"mat-option",97),M.Rc(1),M.Sb()),2&e){var a=t.$implicit;M.mc("value",a.description),M.Cb(1),M.Tc("",a.description," ")}}function ke(e,t){if(1&e){var a=M.Ub();M.Tb(0,"th",99),M.Tb(1,"mat-checkbox",100),M.bc("click",(function(e){return M.Ec(a),e.stopPropagation()})),M.Sb(),M.Sb()}}function Ne(e,t){if(1&e){var a=M.Ub();M.Tb(0,"td",101),M.Tb(1,"mat-checkbox",100),M.bc("click",(function(e){return M.Ec(a),e.stopPropagation()})),M.Sb(),M.Sb()}}function Oe(e,t){1&e&&M.Ob(0,"th",102)}function De(e,t){if(1&e&&(M.Tb(0,"td",103),M.Ob(1,"img",104),M.Sb()),2&e){var a=t.$implicit;M.Cb(1),M.oc("src","http://i.pravatar.cc/30?u=",a.name,"",M.Gc)}}function xe(e,t){1&e&&(M.Tb(0,"td",101),M.Tb(1,"mat-icon"),M.Rc(2,"more_horiz"),M.Sb(),M.Sb())}function Re(e,t){if(1&e&&(M.Tb(0,"th",108),M.Rc(1),M.Sb()),2&e){var a=M.fc(2).$implicit;M.Cb(1),M.Tc(" ",a.name,"")}}function Ie(e,t){if(1&e&&(M.Tb(0,"td",109),M.Rc(1),M.Sb()),2&e){var a=t.$implicit,i=M.fc(2).$implicit;M.Cb(1),M.Tc(" ",a[i.property]," ")}}function Pe(e,t){if(1&e&&(M.Rb(0,106),M.Pc(1,Re,2,1,"th",107),M.Pc(2,Ie,2,1,"td",83),M.Qb()),2&e){var a=M.fc().$implicit;M.mc("matColumnDef",a.property)}}function Ae(e,t){if(1&e&&(M.Rb(0),M.Pc(1,Pe,3,1,"ng-container",105),M.Qb()),2&e){var a=t.$implicit;M.Cb(1),M.mc("ngIf",a.isModelProperty)}}function Me(e,t){1&e&&(M.Tb(0,"th",99),M.Rc(1,"Modify"),M.Sb())}function Ee(e,t){if(1&e){var a=M.Ub();M.Tb(0,"td",112),M.bc("click",(function(){M.Ec(a);var e=t.$implicit;return M.fc(2).deleteOwnership(e)})),M.Tb(1,"mat-icon",113),M.Rc(2,"delete"),M.Sb(),M.Sb()}}function Ue(e,t){1&e&&M.Ob(0,"tr",114)}function $e(e,t){1&e&&M.Ob(0,"tr",115)}function ze(e,t){if(1&e){var a=M.Ub();M.Tb(0,"mat-tab",116),M.Tb(1,"fury-card-content",14),M.Tb(2,"div",39),M.Tb(3,"div",6),M.Tb(4,"div",28),M.Tb(5,"mat-form-field",29),M.Tb(6,"mat-label"),M.Rc(7,"Unit"),M.Sb(),M.Ob(8,"input",117),M.Tb(9,"mat-autocomplete",17,118),M.bc("optionSelected",(function(e){return M.Ec(a),M.fc().selectUnit(e)})),M.Pc(11,we,2,2,"mat-option",19),M.Sb(),M.Ob(12,"app-show-errors",20),M.Sb(),M.Tb(13,"mat-form-field",29),M.Tb(14,"mat-label"),M.Rc(15,"Start Date"),M.Sb(),M.Ob(16,"input",119),M.Ob(17,"app-show-errors",20),M.Sb(),M.Tb(18,"button",120),M.bc("click",(function(){return M.Ec(a),M.fc().saveOwnership()})),M.Rc(19,"CREATE OWNERSHIP"),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(20,"table",72),M.Rc(21," --\x3e "),M.Rb(22,73),M.Pc(23,ke,2,0,"th",74),M.Pc(24,Ne,2,0,"td",75),M.Qb(),M.Rb(25,76),M.Pc(26,Oe,1,0,"th",77),M.Pc(27,De,2,1,"td",78),M.Qb(),M.Rb(28,79),M.Tb(29,"th"),M.Rc(30,"Action"),M.Sb(),M.Pc(31,xe,3,0,"td",75),M.Qb(),M.Pc(32,Ae,2,1,"ng-container",80),M.Rb(33,84),M.Pc(34,Me,2,0,"th",74),M.Pc(35,Ee,3,0,"td",85),M.Qb(),M.Pc(36,Ue,1,0,"tr",86),M.Pc(37,$e,1,0,"tr",87),M.Sb(),M.Tb(38,"div"),M.Rc(39),M.Sb(),M.Sb(),M.Sb()}if(2&e){var i=M.Ac(10),n=M.fc();M.Cb(2),M.mc("formGroup",n.form.controls.ownerships),M.Cb(6),M.mc("matAutocomplete",i),M.Cb(3),M.mc("ngForOf",n.filteredUnits),M.Cb(1),M.mc("ctrl",n.form.controls.ownerships.get("unitId")),M.Cb(5),M.mc("ctrl",n.form.controls.ownerships.get("startDate")),M.Cb(1),M.mc("disabled",""===n.form.controls.ownerships.get("unit").value||null===n.form.controls.ownerships.get("unitId").value||""===n.form.controls.ownerships.get("startDate").value),M.Cb(2),M.mc("dataSource",n.ownershipdataSource),M.Cb(12),M.mc("ngForOf",n.ownershipcolumns),M.Cb(4),M.mc("matHeaderRowDef",n.ownershipVisibleColumns),M.Cb(1),M.mc("matRowDefColumns",n.ownershipVisibleColumns),M.Cb(2),M.Tc(" ",n.length,"")}}var Le,Fe=((Le=function(){function t(a,i,n,o,s,r,c,l,u,d,b,m,p,h){e(this,t),this.defaults=a,this.dialog=i,this.snackbar=n,this.ownerService=o,this.date=s,this.dialogRef=r,this.fb=c,this.metadataService=l,this.fv=u,this.constantsService=d,this.fileService=b,this.masterService=m,this.cookieService=p,this.envService=h,this.baseUrl="",this.fileSize=0,this.mode="create",this.dateFormat="",this.isCancel=!1,this.myDate=new Date,this.addressTypeId=30,this.documentName="",this.duplicateTRN="",this.documents=[],this.downloadVar="",this.isUploadSuccess=!0,this.errorMessage="",this.isDocumentUploadSuccess=!0,this.subject$=new f.a(1),this.data$=this.subject$.asObservable(),this.ownershipsubject$=new f.a(1),this.ownershipdata$=this.ownershipsubject$.asObservable(),this.columns=[{name:"Document Type",property:"documentType",visible:!0,isModelProperty:!0},{name:"Path",property:"documentPath",visible:!1},{name:"File Name",property:"document",visible:!0},{name:"Action",property:"actions",visible:!0}],this.pageSize=10,this.ownershipcolumns=[{name:"Unit",property:"unit",visible:!0,isModelProperty:!0},{name:"Start Date",property:"startDateLocal",visible:!0,isModelProperty:!0},{name:"Modify",property:"actions",visible:!0}],this.ownershippageSize=10,this.baseUrl=h.backendForFiles,this.fileSize=Math.floor(h.MaxBytes/1e6),this.dateFormat=h.dateFormat,r.disableClose=!0}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.clientId=parseInt(this.cookieService.get("globalClientId")),this.address=this.defaults.addresses[0]||new v.a({}),this.bankDetails=this.defaults.bankDetails[0]||new T.a({}),this.ownership=this.defaults.ownerships[0]||new O.a({}),this.masterService.getSystemMasterdata(15,0).subscribe((function(t){e.metadataCountries=t,e.filteredCountries=t})),this.getDocumentTypes(),this.masterService.getSystemMasterdata(26,0).subscribe((function(t){e.metadataTitles=t,e.filteredTitles=t})),this.masterService.getSystemMasterdata(22,0).subscribe((function(t){e.metadataAddressTypes=t,e.filteredAddressTypes=t,e.metadataAddressTypes&&e.metadataAddressTypes.forEach((function(t){t.id===e.addressTypeId&&(e.addressType=t.description,e.address.addressType=t.description)}))})),this.ownerService.getUnits(this.clientId).subscribe((function(t){e.metadataUnits=t,e.filteredUnits=t})),this.image=this.baseUrl+"/uploads/"+this.defaults.photo,""==this.defaults.photo&&(this.image="assets/img/avatars/two.png"),this.response=this.defaults.photo,this.isOwner="Owner"==this.defaults.entityType,this.form=this.fb.group({id:[this.defaults.id||0],clientId:[this.defaults.clientId],trn:[this.defaults.trn||""],title:[this.defaults.title||""],titleId:[this.defaults.titleId||""],firstName:[this.defaults.firstName||"",this.fv.nameValidators],lastName:[this.defaults.lastName||"",this.fv.nameValidators],mobile:[this.defaults.mobile||"",this.fv.mobileNumberValidators],email:[this.defaults.email||"",this.fv.emailValidators],dob:[this.defaults.dob&&new Date(this.defaults.dob).toISOString().substr(0,10)||""],accountNumber:["",this.fv.requiredAlphanumericNoSpaces],photo:[this.defaults.photo||""],isCompanySelected:[this.defaults.isCompany||!1],ownerName:[this.defaults.ownerName||""],entityType:[this.defaults.entityType],isLoginEnabled:[this.defaults.userDetails.isLoginEnabled],isOwner:this.isOwner,addressType:this.addressTypeId,address:this.fb.group({city:[this.address.city||""],zipPostalCode:[this.address.zipPostalCode||""],address1:[this.address.address1||""],address2:[this.address.address2||""],country:[this.address.country||""],countryId:[this.address.countryId||0],addressType:[this.address.addressType||""],addressTypeId:[this.address.addressTypeId||""],email:[this.address.email||""],phoneNumber:[this.address.phoneNumber||""]}),bank:this.fb.group({accountName:[this.bankDetails.accountName||""],accountNo:[this.bankDetails.accountNo||""],bankName:[this.bankDetails.bankName||""],bankAddress:[this.bankDetails.bankAddress||""],swiftCode:[this.bankDetails.swiftCode||""],ibanNumber:[this.bankDetails.ibanNumber||""]}),documentType:"",documentTypeId:0,ownerships:this.fb.group({id:0,unitId:0,unit:"",startDate:""})}),this.documents=this.defaults.documents||[],this.documents.forEach((function(e){var t=e.documentPath.indexOf(",");t>0&&(e.document=e.documentPath.substr(t+1,e.documentPath.length),e.documentPath=e.documentPath.substr(0,t))})),this.subject$.next(this.documents),this.dataSource=new m.k,this.data$.pipe(Object(p.a)((function(e){return!!e}))).subscribe((function(t){e.documents=t,e.dataSource.data=t})),this.ownerships=this.defaults.ownerships||[],this.bindOwnershipDetails(),this.isLoginEnabled=""!==(this.defaults.userDetails.isLoginEnabled||""),this.isCompanySelected=this.defaults.isCompany,this.form.controls.title.valueChanges.subscribe((function(t){e.filteredTitles=e.filterTitle(t)})),this.form.controls.address.get("addressType").valueChanges.subscribe((function(t){e.filteredAddressTypes=e.filterAddressType(t)})),this.form.controls.address.get("country").valueChanges.subscribe((function(t){e.filteredCountries=e.filterCountry(t)})),this.form.controls.documentType.valueChanges.subscribe((function(t){e.filteredDocumentTypes=e.filterDocumentType(t)})),this.form.controls.ownerships.get("unit").valueChanges.subscribe((function(t){e.filteredUnits=e.filterUnits(t)}))}},{key:"getDocumentTypes",value:function(){var e=this;this.masterService.getUserMasterdata(20,0).subscribe((function(t){e.metadataDocumentTypes=t,e.filteredDocumentTypes=t}))}},{key:"getFilteredCountry",value:function(){this.filteredCountries=this.filterCountry(this.form.controls.address.get("country").value)}},{key:"filterTitle",value:function(e){if(""!=e)return this.metadataTitles.filter((function(t){return 0===t.description.toLowerCase().indexOf(e.toLowerCase())}))}},{key:"filterAddressType",value:function(e){return this.metadataAddressTypes.filter((function(t){return 0===t.description.toLowerCase().indexOf(e.toLowerCase())}))}},{key:"filterCountry",value:function(e){return this.metadataCountries.filter((function(t){return 0===t.description.toLowerCase().indexOf(e.toLowerCase())}))}},{key:"filterDocumentType",value:function(e){return this.metadataDocumentTypes.filter((function(t){return 0===t.description.toLowerCase().indexOf(e.toLowerCase())}))}},{key:"filterUnits",value:function(e){return this.metadataUnits.filter((function(t){return 0===t.description.toLowerCase().indexOf(e.toLowerCase())}))}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"bindOwnershipDetails",value:function(){var e=this;this.ownerships.forEach((function(t){t.startDateLocal=e.date.transform(t.startDate.toString(),e.dateFormat.toString())})),this.ownershipsubject$.next(this.ownerships),this.ownershipdataSource=new m.k(this.ownerships),this.ownershipdata$.pipe(Object(p.a)((function(e){return!!e}))).subscribe((function(t){e.ownerships=t,e.ownershipdataSource.data=t})),null==this.ownerships&&null==this.ownerships||(length=this.ownerships.length)}},{key:"save",value:function(){var e=this;this.isCancel?(this.isCancel=!1,this.dialog.open(I.a,{data:{label:"Are you sure you want to Cancel?",selected:!1}}).afterClosed().subscribe((function(t){t&&e.dialogRef.close()}))):(this.updateAddress(),this.updateBankDetails(),this.documents.forEach((function(e){e.documentPath=e.documentPath+","+e.document})),this.defaults.documents=this.documents,this.updateOwner())}},{key:"createUserDetails",value:function(){return{username:this.defaults.accountNumber,email:this.defaults.email,password:this.getRandomString(15),role:"External",designation:"External",image:this.defaults.photo}}},{key:"saveOwnership",value:function(){if(this.form.controls.ownerships.valid){var e=this.form.controls.ownerships.get("unitId").value;this.ownerships.findIndex((function(t){return t.unitId===e}))&&(this.ownerships.push({id:0,unitId:this.form.controls.ownerships.get("unitId").value,unit:this.form.controls.ownerships.get("unit").value,startDate:this.form.controls.ownerships.get("startDate").value}),this.bindOwnershipDetails(),this.form.controls.ownerships.reset())}}},{key:"deleteOwnership",value:function(e){this.ownerships.splice(this.ownerships.findIndex((function(t){return t.id===e.id})),1),this.bindOwnershipDetails()}},{key:"getRandomString",value:function(e){return("P@Qr$#S"+N.Guid.create().toString()).substring(0,e-1)}},{key:"updateOwner",value:function(){Object.assign(this.defaults,this.form.value),this.defaults.trn=this.form.controls.trn.value.toString(),this.defaults.isCompany=this.isCompanySelected,void 0!==this.response&&(this.defaults.photo=this.response),this.defaults.userDetails=this.createUserDetails(),this.isLoginEnabled&&(this.defaults.userDetails.isLoginEnabled=!0,this.defaults.userDetails.isLoginActivated=!0),this.defaults.dob=""==this.form.controls.dob.value?null:this.form.controls.dob.value,this.defaults.titleId=""==this.form.controls.titleId.value?0:this.form.controls.titleId.value,this.defaults.ownerName=this.defaults.ownerName,this.defaults.ownerships=this.ownerships,this.dialogRef.close(new g.a(this.defaults))}},{key:"isUpdateMode",value:function(){return"update"===this.mode}},{key:"changeAddressType",value:function(e){var t=this;this.addressType=e.option.value,this.metadataAddressTypes.forEach((function(e){t.addressType===e.description&&(t.addressTypeId=e.id)})),this.address=this.defaults.addresses.filter((function(e){return e.addressTypeId===t.addressTypeId}))[0]||new v.a({}),this.form.controls.address=this.fb.group({city:[this.address.city||""],zipPostalCode:[this.address.zipPostalCode||""],address1:[this.address.address1||""],address2:[this.address.address2||""],country:[this.address.country||""],countryId:[this.address.countryId||0],addressType:[this.address.addressType||""],addressTypeId:[this.address.addressTypeId||""],email:[this.address.email||""],phoneNumber:[this.address.phoneNumber||""]})}},{key:"updateAddress",value:function(){var e=this;if(this.form.controls.address.valid){var t=!1;if(this.defaults.addresses.forEach((function(a){a.addressTypeId===e.addressTypeId&&(t=!0,Object.assign(a,e.form.controls.address.value),a.addressType=e.addressType)})),!t){var a={addressTypeId:this.addressTypeId};Object.assign(a,this.form.controls.address.value),Object.assign(a,{addresstype:this.addressType}),this.defaults.addresses.push(new v.a(a))}}}},{key:"updateBankDetails",value:function(){this.form.controls.bank.valid&&(this.defaults.bankDetails[0]?Object.assign(this.defaults.bankDetails[0],this.form.controls.bank.value):this.defaults.bankDetails.push(new T.a(this.form.controls.bank.value)))}},{key:"uploadPhoto",value:function(e){var t=this;this.image="assets/img/avatars/two.png",this.errorMessage="",this.fileService.upload(e.target.files[0],"image").subscribe({next:function(e){t.response=e,t.image=t.baseUrl+"/uploads/"+e,t.isUploadSuccess=!0},error:function(e){t.isUploadSuccess=!1,t.errorMessage=null==e.error.message?e.error.Message:e.error.message,"Request body too large."==t.errorMessage&&(t.errorMessage="Max. allowed File size is "+t.fileSize+"MB. Please upload file with smaller size.")}})}},{key:"notificationMessage",value:function(e,t){this.snackbar.open(e,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:[t]})}},{key:"selectDocument",value:function(e){var t=this;this.selectedDocument=null,this.fileService.upload(e.target.files[0]).subscribe({next:function(a){t.documentResponse=a,t.selectedDocument=e.target.files[0],t.isDocumentUploadSuccess=!0},error:function(e){t.isDocumentUploadSuccess=!1,t.errorMessage=null==e.error.message?e.error.Message:e.error.message,"Request body too large."==t.errorMessage&&(t.errorMessage="Max. allowed File size is "+t.fileSize+"MB. Please upload file with smaller size.")}})}},{key:"uploadDocument",value:function(){this.form.controls.documentType.value&&""!==this.form.controls.documentType.value&&this.selectedDocument&&(this.documents.push({documentTypeId:this.form.controls.documentTypeId.value,documentType:this.form.controls.documentType.value,documentPath:this.documentResponse,document:this.selectedDocument.name}),this.subject$.next(this.documents),this.form.controls.documentType.setValue(""),this.form.controls.documentTypeId.setValue(0),this.fileInputDocument.nativeElement.value="",this.selectedDocument=void 0)}},{key:"deleteDocument",value:function(e){var t=this;this.dialog.open(R.a).afterClosed().subscribe((function(a){if(a){var i=t.documents.findIndex((function(t){return t.documentType===e.documentType}));i>=0&&t.documents.splice(i,1),t.subject$.next(t.documents)}}))}},{key:"toggleOwner",value:function(e){this.form.controls.entityType.setValue(!0===this.form.controls.isOwner.value?"owner":"tenant")}},{key:"toggleCompany",value:function(e){this.isCompanySelected=e.checked||!1,this.form.controls.ownerName.setValue(!1===this.isCompanySelected?this.defaults.firstName+" "+this.defaults.lastName:"")}},{key:"toggleLoginEnabled",value:function(e){this.isLoginEnabled=e.checked||!1}},{key:"enbaleAddressValidators",value:function(){var e,t=this.form.controls.address;this.metadataCountries.forEach((function(a){a.description==t.value.country&&(e=a.id)})),this.form.controls.address=this.fb.group(""!==t.value.address1||""!==t.value.address2||""!==t.value.city||""!==t.value.zipPostalCode||""!==t.value.country?{city:[t.value.city||"",this.fv.addressValidators],zipPostalCode:[t.value.zipPostalCode||"",this.fv.postalCodeValidators],address1:[t.value.address1||"",this.fv.addressValidators],address2:[t.value.address2||"",this.fv.optionsAddressValidators],country:[t.value.country||"",s.y.required],countryId:[e||0],addressType:[t.value.addressType||"",s.y.required],addressTypeId:[this.addressTypeId||0],email:[this.address.email||""],phoneNumber:[this.address.phoneNumber||""]}:{city:[t.value.city||""],zipPostalCode:[t.value.zipPostalCode||""],address1:[t.value.address1||""],address2:[t.value.address2||""],country:[t.value.country||""],countryId:[e||0],addressType:[t.value.addressType||""],addressTypeId:[this.addressTypeId||0],email:[this.address.email||""],phoneNumber:[this.address.phoneNumber||""]})}},{key:"enabledBankValidators",value:function(){var e=this.form.controls.bank;this.form.controls.bank=this.fb.group(""!==e.value.accountName||""!==e.value.accountNo||""!==e.value.bankName||""!==e.value.bankAddress||""!==e.value.swiftCode||""!==e.value.ibanNumber?{accountName:[e.value.accountName||"",this.fv.nameValidators],accountNo:[e.value.accountNo||"",this.fv.requiredAlphanumericNoSpaces],bankName:[e.value.bankName||"",this.fv.nameValidators],bankAddress:[e.value.bankAddress||"",this.fv.optionsAddressValidators],swiftCode:[e.value.swiftCode||"",this.fv.requiredAlphanumericNoSpaces],ibanNumber:[e.value.ibanNumber||"",this.fv.requiredAlphanumericNoSpaces]}:{accountName:[e.value.accountName||""],accountNo:[e.value.accountNo||""],bankName:[e.value.bankName||""],bankAddress:[e.value.bankAddress||""],swiftCode:[e.value.swiftCode||""],ibanNumber:[e.value.ibanNumber||""]})}},{key:"enabledOwnershipValidators",value:function(){var e=this.form.controls.ownerships;this.form.controls.ownerships=this.fb.group(""!==e.value.unit||""!==e.value.startDate?{unitId:[e.value.unitId||0],unit:[e.value.unit||""],startDate:[e.value.startDate||"",s.y.required]}:{unitId:[e.value.unitId||0],unit:[e.value.unit||""],startDate:[e.value.startDate||""]})}},{key:"selectTitle",value:function(e){var t=this;this.metadataTitles.forEach((function(a){e.option.value==a.description&&t.form.controls.titleId.setValue(a.id)}))}},{key:"selectDocumentType",value:function(e){var t=this;this.documentName="",this.documents.find((function(a){a.documentType!=e.option.value||(t.documentName=e.option.value+" already uploaded")})),this.metadataDocumentTypes.forEach((function(a){e.option.value==a.description&&t.form.controls.documentTypeId.setValue(a.id)}))}},{key:"selectUnit",value:function(e){var t=this;this.metadataUnits.forEach((function(a){e.option.value==a.description&&t.form.controls.ownerships.get("unitId").setValue(a.id)}))}},{key:"downloadDocument",value:function(e){var t,a=e.documentPath.indexOf(",");t=a>0?e.documentPath.substr(0,a):e.documentPath,this.downloadVar=this.baseUrl+"/uploads/"+t,D.saveAs(this.downloadVar,t)}},{key:"addAddress",value:function(){var e={};if(Object.assign(e,this.form.controls.address.value),this.defaults.addresses&&this.defaults.addresses.length){var t=this.defaults.addresses.findIndex((function(t){return t.addressTypeId==e.addressTypeId}));t>-1&&this.defaults.addresses.splice(t,1)}this.defaults.addresses.push(e)}},{key:"checkTRNDuplication",value:function(){var e=this;this.duplicateTRN="";var t=this.form.controls.trn.value;""==t&&null==t||this.ownerService.checkTRNDuplication(1,t,this.defaults.id).subscribe((function(t){t&&t>0&&(e.duplicateTRN="TRN already exists.")}))}},{key:"close",value:function(){this.dialogRef.close()}},{key:"closeDialog",value:function(){this.isCancel=!0}},{key:"createDocumentType",value:function(){var e=this;this.dialog.open(P.a,{data:[0,20]}).afterClosed().subscribe((function(t){t&&"Success"==t&&e.getDocumentTypes()}))}},{key:"content",set:function(e){this.sort=e,this.sort&&(this.dataSource.sort=this.sort)}},{key:"visibleColumns",get:function(){return this.columns.filter((function(e){return e.visible})).map((function(e){return e.property}))}},{key:"ownershipVisibleColumns",get:function(){return this.ownershipcolumns.filter((function(e){return e.visible})).map((function(e){return e.property}))}}]),t}()).id=100,Le.\u0275fac=function(e){return new(e||Le)(M.Nb(h.a),M.Nb(h.b),M.Nb(E.b),M.Nb(w.a),M.Nb(o.f),M.Nb(h.h),M.Nb(s.f),M.Nb(y.a),M.Nb(S.a),M.Nb(C.a),M.Nb(k.a),M.Nb(x.a),M.Nb(U.a),M.Nb(A.a))},Le.\u0275cmp=M.Hb({type:Le,selectors:[["fury-owner-registered-create-update"]],viewQuery:function(e,t){var a;1&e&&(M.Vc(W,!0),M.Vc(Z,!0),M.Jc(d.a,!0),M.Vc(b.a,!0)),2&e&&(M.zc(a=M.cc())&&(t.fileInput=a.first),M.zc(a=M.cc())&&(t.fileInputDocument=a.first),M.zc(a=M.cc())&&(t.paginator=a.first),M.zc(a=M.cc())&&(t.content=a.first))},inputs:{columns:"columns"},decls:239,vars:50,consts:[["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"fx-spacer"],["mat-icon-button","",3,"click"],["title","Close","mat-list-icon",""],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"person"],["fxLayout","column","fxLayout.gt-sm","row"],["formControlName","isCompanySelected",3,"checked","change"],["formControlName","isOwner",1,"togglebutton",3,"checked","change"],[3,"checked","change"],["fxFlex","","class","companyName",4,"ngIf"],["fxFlex","40%","class","companyName",4,"ngIf"],["label","General"],[1,"padding-top"],["fxFlex","",1,"titleSelector"],["matInput","","formControlName","title",3,"matAutocomplete"],[3,"optionSelected"],["title","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"ctrl"],[1,"profile"],["fxLayout","column"],[1,"profileImage",2,"width","100px","height","100px","border-radius","50%",3,"src"],["type","file","accept","image/*",1,"profileButton",3,"change"],["fileInput",""],["class","errorMessage",4,"ngIf"],[1,"person","padding-top"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","48px"],["fxFlex",""],["type","text","formControlName","firstName","maxlength","65","matInput",""],["type","text","formControlName","lastName","maxlength","65","matInput",""],["type","text","formControlName","mobile","matInput",""],["type","text","formControlName","email","maxlength","100","matInput",""],["formControlName","dob","matInput","",3,"max","matDatepicker","click","focus"],["matSuffix","",3,"for"],["formDatepickerRef",""],["type","text","formControlName","accountNumber","maxlength","50","matInput",""],["label","Address Details"],[3,"formGroup"],["type","button","mat-mini-fab","","color","primary",1,"create","right","margin",3,"click"],["matInput","","formControlName","addressType",3,"matAutocomplete"],["addressTypes","matAutocomplete"],["type","text","formControlName","city","matInput",""],["type","text","formControlName","address1","matInput",""],["type","text","formControlName","zipPostalCode","matInput",""],["type","text","formControlName","address2","matInput",""],["matInput","","formControlName","country",3,"matAutocomplete","keyup"],["country","matAutocomplete"],["type","text","formControlName","email","maxlength","200","matInput",""],["type","text","formControlName","phoneNumber","maxlength","200","matInput",""],["label","Bank Details"],["type","text","formControlName","accountName","matInput",""],["type","text","formControlName","accountNo","matInput",""],["type","text","formControlName","bankName","matInput",""],["type","text","formControlName","bankAddress","matInput",""],["type","text","formControlName","swiftCode","matInput",""],["type","text","formControlName","ibanNumber","matInput",""],["label","Document Details"],[1,"person",2,"width","700px"],["fxLayout","column","fxLayout.gt-sm","row",2,"margin-right","0px","width","100%"],["fxFlex","40%"],[1,"titleSelector",2,"width","85%","margin-right","0px"],["matInput","","formControlName","documentType",3,"matAutocomplete"],["documentTypes","matAutocomplete"],[1,"duplicateMessage"],["type","button","mat-mini-fab","","color","primary",1,"create",2,"height","30px","width","30px","margin-right","0px","margin-left","5px","padding-top","-5px",3,"click"],[2,"height","10px","width","10px","padding-top","-5px","margin-top","-25px","margin-left","-13px"],[1,"document",2,"width","60%","padding-left","50px"],["type","file",1,"selectDocument",3,"change"],["fileInputDocument",""],[3,"ngClass","click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],["matColumnDef","delete"],[4,"ngFor","ngForOf"],["matColumnDef","document"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["class","actions-cell","mat-cell","",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],["label","Ownerships",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-button","",3,"click"],["mat-button","",3,"disabled"],["fxFlex","",1,"companyName"],["type","text","formControlName","ownerName","maxlength","100","matInput",""],["fxFlex","40%",1,"companyName"],["type","number","formControlName","trn","matInput","","maxlength","15","oninput","javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);if(this.value <= 0) this.value = ''",3,"change","keyup"],[1,"duplicate"],[3,"value"],[1,"errorMessage"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"under-line",3,"click"],["mat-cell","",1,"actions-cell",3,"click"],[1,"deleteIcon"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"],["label","Ownerships"],["matInput","","formControlName","unit",3,"matAutocomplete"],["unitId","matAutocomplete"],["type","date","formControlName","startDate","matInput",""],["mat-button","",3,"disabled","click"]],template:function(e,t){if(1&e){var a=M.Ub();M.Tb(0,"div",0),M.Tb(1,"mat-toolbar",1),M.Tb(2,"span"),M.Rc(3,"Newly Registered User"),M.Sb(),M.Ob(4,"span",2),M.Tb(5,"button",3),M.bc("click",(function(){return t.close()})),M.Tb(6,"mat-icon",4),M.Rc(7,"close"),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(8,"form",5),M.bc("ngSubmit",(function(){return t.save()})),M.Tb(9,"mat-dialog-content"),M.Tb(10,"fury-card"),M.Tb(11,"div",6),M.Tb(12,"div",7),M.Tb(13,"mat-slide-toggle",8),M.bc("change",(function(e){return t.toggleCompany(e)})),M.Rc(14,"Company"),M.Sb(),M.Tb(15,"mat-slide-toggle",9),M.bc("change",(function(e){return t.toggleOwner(e)})),M.Rc(16,"Owner"),M.Sb(),M.Tb(17,"mat-slide-toggle",10),M.bc("change",(function(e){return t.toggleLoginEnabled(e)})),M.Rc(18,"Login Enabled "),M.Sb(),M.Sb(),M.Sb(),M.Tb(19,"div",6),M.Tb(20,"div",7),M.Pc(21,ee,6,0,"mat-form-field",11),M.Pc(22,te,6,1,"mat-form-field",12),M.Sb(),M.Sb(),M.Tb(23,"mat-tab-group"),M.Tb(24,"mat-tab",13),M.Tb(25,"fury-card-content",14),M.Tb(26,"div",6),M.Tb(27,"div",7),M.Tb(28,"mat-form-field",15),M.Tb(29,"mat-label"),M.Rc(30,"Title"),M.Sb(),M.Ob(31,"input",16),M.Tb(32,"mat-autocomplete",17,18),M.bc("optionSelected",(function(e){return t.selectTitle(e)})),M.Pc(34,ae,2,2,"mat-option",19),M.Sb(),M.Ob(35,"app-show-errors",20),M.Sb(),M.Tb(36,"div",21),M.Tb(37,"div",22),M.Tb(38,"div",7),M.Ob(39,"img",23),M.Tb(40,"input",24,25),M.bc("change",(function(e){return t.uploadPhoto(e)})),M.Sb(),M.Sb(),M.Pc(42,ie,2,1,"mat-hint",26),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(43,"div",27),M.Tb(44,"div",28),M.Tb(45,"mat-form-field",29),M.Tb(46,"mat-label"),M.Rc(47,"First Name"),M.Sb(),M.Ob(48,"input",30),M.Ob(49,"app-show-errors",20),M.Tb(50,"mat-hint"),M.Rc(51,"First Name cannot be Greater than 65"),M.Sb(),M.Sb(),M.Tb(52,"mat-form-field",29),M.Tb(53,"mat-label"),M.Rc(54,"Last Name"),M.Sb(),M.Ob(55,"input",31),M.Ob(56,"app-show-errors",20),M.Tb(57,"mat-hint"),M.Rc(58,"Last Name cannot be Greater than 65"),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(59,"div",6),M.Tb(60,"div",28),M.Tb(61,"mat-form-field",29),M.Tb(62,"mat-label"),M.Rc(63,"Mobile"),M.Sb(),M.Ob(64,"input",32),M.Ob(65,"app-show-errors",20),M.Tb(66,"mat-hint"),M.Rc(67,"Mobile Number cannot be Greater than 10 Characters"),M.Sb(),M.Sb(),M.Tb(68,"mat-form-field",29),M.Tb(69,"mat-label"),M.Rc(70,"Email"),M.Sb(),M.Ob(71,"input",33),M.Ob(72,"app-show-errors",20),M.Tb(73,"mat-hint"),M.Rc(74,"Email cannot be Greater than 100"),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(75,"div",6),M.Tb(76,"div",28),M.Tb(77,"mat-form-field",29),M.Tb(78,"mat-label"),M.Rc(79,"DOB"),M.Sb(),M.Tb(80,"input",34),M.bc("click",(function(){return M.Ec(a),M.Ac(83).open()}))("focus",(function(){return M.Ec(a),M.Ac(83).open()})),M.Sb(),M.Ob(81,"mat-datepicker-toggle",35),M.Ob(82,"mat-datepicker",null,36),M.Sb(),M.Tb(84,"mat-form-field",29),M.Tb(85,"mat-label"),M.Rc(86,"Account Number"),M.Sb(),M.Ob(87,"input",37),M.Ob(88,"app-show-errors",20),M.Tb(89,"mat-hint"),M.Rc(90,"Please enter alphanumeric characters only."),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(91,"mat-tab",38),M.Tb(92,"fury-card-content",14),M.Tb(93,"div",39),M.Tb(94,"div",6),M.Tb(95,"button",40),M.bc("click",(function(){return t.addAddress()})),M.Tb(96,"mat-icon"),M.Rc(97,"add"),M.Sb(),M.Sb(),M.Tb(98,"div",28),M.Tb(99,"mat-form-field",29),M.Tb(100,"mat-label"),M.Rc(101,"Address Type"),M.Sb(),M.Ob(102,"input",41),M.Tb(103,"mat-autocomplete",17,42),M.bc("optionSelected",(function(e){return t.changeAddressType(e)})),M.Pc(105,ne,2,2,"mat-option",19),M.Sb(),M.Ob(106,"app-show-errors",20),M.Sb(),M.Tb(107,"mat-form-field",29),M.Tb(108,"mat-label"),M.Rc(109,"City"),M.Sb(),M.Ob(110,"input",43),M.Ob(111,"app-show-errors",20),M.Sb(),M.Sb(),M.Sb(),M.Tb(112,"div",6),M.Tb(113,"div",28),M.Tb(114,"mat-form-field",29),M.Tb(115,"mat-label"),M.Rc(116,"Address 1"),M.Sb(),M.Ob(117,"input",44),M.Ob(118,"app-show-errors",20),M.Sb(),M.Tb(119,"mat-form-field",29),M.Tb(120,"mat-label"),M.Rc(121,"Postal Code"),M.Sb(),M.Ob(122,"input",45),M.Ob(123,"app-show-errors",20),M.Sb(),M.Sb(),M.Sb(),M.Tb(124,"div",6),M.Tb(125,"div",28),M.Tb(126,"mat-form-field",29),M.Tb(127,"mat-label"),M.Rc(128,"Address 2"),M.Sb(),M.Ob(129,"input",46),M.Ob(130,"app-show-errors",20),M.Sb(),M.Tb(131,"mat-form-field",29),M.Tb(132,"mat-label"),M.Rc(133,"Country"),M.Sb(),M.Tb(134,"input",47),M.bc("keyup",(function(){return t.getFilteredCountry()})),M.Sb(),M.Tb(135,"mat-autocomplete",17,48),M.bc("optionSelected",(function(){return t.enbaleAddressValidators()})),M.Pc(137,oe,2,2,"mat-option",19),M.Sb(),M.Ob(138,"app-show-errors",20),M.Sb(),M.Sb(),M.Sb(),M.Tb(139,"div",6),M.Tb(140,"div",28),M.Tb(141,"mat-form-field",29),M.Tb(142,"mat-label"),M.Rc(143,"Secondary Email"),M.Sb(),M.Ob(144,"input",49),M.Ob(145,"app-show-errors",20),M.Sb(),M.Tb(146,"mat-form-field",29),M.Tb(147,"mat-label"),M.Rc(148,"Secondary Phone No"),M.Sb(),M.Ob(149,"input",50),M.Ob(150,"app-show-errors",20),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(151,"mat-tab",51),M.Tb(152,"fury-card-content",14),M.Tb(153,"div",39),M.Tb(154,"div",6),M.Tb(155,"div",28),M.Tb(156,"mat-form-field",29),M.Tb(157,"mat-label"),M.Rc(158,"Account Name"),M.Sb(),M.Ob(159,"input",52),M.Ob(160,"app-show-errors",20),M.Sb(),M.Tb(161,"mat-form-field",29),M.Tb(162,"mat-label"),M.Rc(163,"Bank Account Number"),M.Sb(),M.Ob(164,"input",53),M.Ob(165,"app-show-errors",20),M.Sb(),M.Sb(),M.Sb(),M.Tb(166,"div",6),M.Tb(167,"div",28),M.Tb(168,"mat-form-field",29),M.Tb(169,"mat-label"),M.Rc(170,"Bank Name"),M.Sb(),M.Ob(171,"input",54),M.Ob(172,"app-show-errors",20),M.Sb(),M.Tb(173,"mat-form-field",29),M.Tb(174,"mat-label"),M.Rc(175,"Bank Branch"),M.Sb(),M.Ob(176,"input",55),M.Ob(177,"app-show-errors",20),M.Sb(),M.Sb(),M.Sb(),M.Tb(178,"div",6),M.Tb(179,"div",28),M.Tb(180,"mat-form-field",29),M.Tb(181,"mat-label"),M.Rc(182,"Swift Code"),M.Sb(),M.Ob(183,"input",56),M.Ob(184,"app-show-errors",20),M.Sb(),M.Tb(185,"mat-form-field",29),M.Tb(186,"mat-label"),M.Rc(187,"IBAN"),M.Sb(),M.Ob(188,"input",57),M.Ob(189,"app-show-errors",20),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Sb(),M.Tb(190,"mat-tab",58),M.Tb(191,"fury-card-content",14),M.Tb(192,"div",59),M.Tb(193,"div",60),M.Tb(194,"div",61),M.Tb(195,"mat-form-field",62),M.Tb(196,"mat-label"),M.Rc(197,"Document Type"),M.Sb(),M.Ob(198,"input",63),M.Tb(199,"mat-autocomplete",17,64),M.bc("optionSelected",(function(e){return t.selectDocumentType(e)})),M.Pc(201,se,2,2,"mat-option",19),M.Sb(),M.Tb(202,"mat-hint",65),M.Rc(203),M.Sb(),M.Sb(),M.Tb(204,"button",66),M.bc("click",(function(){return t.createDocumentType()})),M.Tb(205,"mat-icon",67),M.Rc(206,"add"),M.Sb(),M.Sb(),M.Sb(),M.Tb(207,"div",68),M.Tb(208,"input",69,70),M.bc("change",(function(e){return t.selectDocument(e)})),M.Sb(),M.Tb(210,"span",71),M.bc("click",(function(){return t.uploadDocument()})),M.Rc(211,"UPLOAD"),M.Sb(),M.Sb(),M.Sb(),M.Pc(212,re,2,1,"mat-hint",26),M.Sb(),M.Tb(213,"table",72),M.Rb(214,73),M.Pc(215,ce,2,0,"th",74),M.Pc(216,le,2,0,"td",75),M.Qb(),M.Rb(217,76),M.Pc(218,ue,1,0,"th",77),M.Pc(219,de,2,1,"td",78),M.Qb(),M.Rb(220,79),M.Tb(221,"th"),M.Rc(222,"Action"),M.Sb(),M.Pc(223,be,3,0,"td",75),M.Qb(),M.Pc(224,he,2,1,"ng-container",80),M.Rb(225,81),M.Pc(226,ge,2,0,"th",82),M.Pc(227,ve,3,1,"td",83),M.Qb(),M.Rb(228,84),M.Pc(229,ye,2,0,"th",74),M.Pc(230,Te,3,0,"td",85),M.Qb(),M.Pc(231,Se,1,0,"tr",86),M.Pc(232,Ce,1,0,"tr",87),M.Sb(),M.Sb(),M.Sb(),M.Pc(233,ze,40,11,"mat-tab",88),M.Sb(),M.Sb(),M.Sb(),M.Tb(234,"mat-dialog-actions",89),M.Tb(235,"button",90),M.bc("click",(function(){return t.closeDialog()})),M.Rc(236,"CANCEL"),M.Sb(),M.Tb(237,"button",91),M.Rc(238,"UPDATE OWNER/TENANT"),M.Sb(),M.Sb(),M.Sb()}if(2&e){var i=M.Ac(33),n=M.Ac(83),o=M.Ac(104),s=M.Ac(136),r=M.Ac(200);M.Cb(8),M.mc("formGroup",t.form),M.Cb(5),M.mc("checked",t.isCompanySelected),M.Cb(2),M.mc("checked",t.isOwner),M.Cb(2),M.mc("checked",t.isLoginEnabled),M.Cb(4),M.mc("ngIf",t.isCompanySelected),M.Cb(1),M.mc("ngIf",t.isCompanySelected),M.Cb(9),M.mc("matAutocomplete",i),M.Cb(3),M.mc("ngForOf",t.filteredTitles),M.Cb(1),M.mc("ctrl",null==t.form?null:t.form.get("title")),M.Cb(4),M.nc("src",t.image,M.Gc),M.Cb(3),M.mc("ngIf",0==t.isUploadSuccess),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.get("firstName")),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.get("lastName")),M.Cb(9),M.mc("ctrl",null==t.form?null:t.form.get("mobile")),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.get("email")),M.Cb(8),M.mc("max",t.myDate)("matDatepicker",n),M.Cb(1),M.mc("for",n),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.get("accountNumber")),M.Cb(5),M.mc("formGroup",null==t.form?null:t.form.controls.address),M.Cb(9),M.mc("matAutocomplete",o),M.Cb(3),M.mc("ngForOf",t.filteredAddressTypes),M.Cb(1),M.mc("ctrl",null==t.form?null:t.form.controls.address.get("addressType")),M.Cb(5),M.mc("ctrl",null==t.form?null:t.form.controls.address.get("city")),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.controls.address.get("address1")),M.Cb(5),M.mc("ctrl",null==t.form?null:t.form.controls.address.get("zipPostalCode")),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.controls.address.get("address2")),M.Cb(4),M.mc("matAutocomplete",s),M.Cb(3),M.mc("ngForOf",t.filteredCountries),M.Cb(1),M.mc("ctrl",null==t.form?null:t.form.controls.address.get("country")),M.Cb(7),M.mc("ctrl",t.form.controls.address.get("email")),M.Cb(5),M.mc("ctrl",t.form.controls.address.get("phoneNumber")),M.Cb(3),M.mc("formGroup",null==t.form?null:t.form.controls.bank),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.controls.bank.get("accountName")),M.Cb(5),M.mc("ctrl",null==t.form?null:t.form.controls.bank.get("accountNo")),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.controls.bank.get("bankName")),M.Cb(5),M.mc("ctrl",null==t.form?null:t.form.controls.bank.get("bankAddress")),M.Cb(7),M.mc("ctrl",null==t.form?null:t.form.controls.bank.get("swiftCode")),M.Cb(5),M.mc("ctrl",null==t.form?null:t.form.controls.bank.get("ibanNumber")),M.Cb(9),M.mc("matAutocomplete",r),M.Cb(3),M.mc("ngForOf",t.filteredDocumentTypes),M.Cb(2),M.Sc(t.documentName),M.Cb(7),M.mc("ngClass",""!==t.form.controls.documentType.value&&""==t.documentName&&t.selectedDocument?"uploadButton":"uploadButtonDisabled"),M.Cb(2),M.mc("ngIf",0==t.isDocumentUploadSuccess),M.Cb(1),M.mc("dataSource",t.dataSource),M.Cb(11),M.mc("ngForOf",t.columns),M.Cb(7),M.mc("matHeaderRowDef",t.visibleColumns),M.Cb(1),M.mc("matRowDefColumns",t.visibleColumns),M.Cb(1),M.mc("ngIf",!1),M.Cb(4),M.mc("disabled",!t.form.valid||""!=t.duplicateTRN)}},directives:[h.i,$.a,z.a,L.a,F.c,s.z,s.r,s.k,h.f,V.a,j.d,B.a,s.q,s.i,o.o,G.b,G.a,V.c,Q.d,j.b,Q.h,H.b,s.c,_.c,_.a,o.n,q.a,j.e,s.m,Q.g,K.b,K.d,Q.j,K.a,o.m,J.a,m.j,b.a,m.c,m.e,m.b,m.g,m.i,h.c,j.c,s.u,X.n,m.d,Y.a,m.a,b.b,m.f,m.h],styles:[".companyName[_ngcontent-%COMP%]{margin-top:10px;margin-right:24px}.document[_ngcontent-%COMP%]{width:50%;display:flex}.titleSelector[_ngcontent-%COMP%]{margin-top:auto;margin-right:24px}.selectDocument[_ngcontent-%COMP%]{width:inherit;margin-right:30px;align-self:center;padding:3px 15px;overflow:hidden}.errorMessage[_ngcontent-%COMP%]{color:red;font-size:smaller;width:330px;margin-left:24px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.uploadButton[_ngcontent-%COMP%]{align-self:center;padding:5px 15px;border:1px solid grey;border-radius:3px;box-shadow:1px 1px 1px grey;cursor:pointer}.uploadButtonDisabled[_ngcontent-%COMP%]{align-self:center;padding:5px 15px;border:1px solid rgba(0,0,0,.26);border-radius:3px;box-shadow:1px 1px 1px rgba(0,0,0,.26);color:rgba(0,0,0,.26)}mat-slide-toggle[_ngcontent-%COMP%]{padding-right:10px}.profile[_ngcontent-%COMP%]{width:50%;display:flex}.profileImage[_ngcontent-%COMP%]{height:100px;margin-left:24px;margin-right:10px;padding:10px}.profileButton[_ngcontent-%COMP%]{align-self:center;padding:3px 15px}.under-line[_ngcontent-%COMP%]{text-decoration:underline}.deleteIcon[_ngcontent-%COMP%], .under-line[_ngcontent-%COMP%]{cursor:pointer}.duplicateMessage[_ngcontent-%COMP%]{color:red;font-size:small}.duplicate[_ngcontent-%COMP%]{color:red}.task-header[_ngcontent-%COMP%]{background-color:transparent;padding:0 5px;height:20px}.fx-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),Le),Ve=n("Ku73"),je=n("nStZ"),Be=n("+Kgr"),Ge=n("a8hA"),Qe=n("xBcV"),He=n("Hbgg"),_e=n("rnAf"),qe=n("rvYj"),Ke=n("a+RD"),Je=n("STbY");function Xe(e,t){if(1&e){var a=M.Ub();M.Tb(0,"th",16),M.Tb(1,"mat-checkbox",17),M.bc("click",(function(e){return M.Ec(a),e.stopPropagation()})),M.Sb(),M.Sb()}}function Ye(e,t){if(1&e){var a=M.Ub();M.Tb(0,"td",18),M.Tb(1,"mat-checkbox",17),M.bc("click",(function(e){return M.Ec(a),e.stopPropagation()})),M.Sb(),M.Sb()}}function We(e,t){1&e&&M.Ob(0,"th",19)}function Ze(e,t){if(1&e&&(M.Tb(0,"td",20),M.Ob(1,"img",21),M.Sb()),2&e){var a=t.$implicit;M.Cb(1),M.oc("src","http://i.pravatar.cc/30?u=",a.name,"",M.Gc)}}function et(e,t){if(1&e&&(M.Tb(0,"th",26),M.Rc(1),M.Sb()),2&e){var a=M.fc(2).$implicit;M.Cb(1),M.Tc(" ",a.name,"")}}function tt(e,t){if(1&e&&(M.Tb(0,"td",27),M.Rc(1),M.Sb()),2&e){var a=t.$implicit,i=M.fc(2).$implicit;M.Cb(1),M.Tc(" ",a[i.property]," ")}}function at(e,t){if(1&e&&(M.Rb(0,23),M.Pc(1,et,2,1,"th",24),M.Pc(2,tt,2,1,"td",25),M.Qb()),2&e){var a=M.fc().$implicit;M.mc("matColumnDef",a.property)}}function it(e,t){if(1&e&&(M.Rb(0),M.Pc(1,at,3,1,"ng-container",22),M.Qb()),2&e){var a=t.$implicit;M.Cb(1),M.mc("ngIf",a.isModelProperty)}}function nt(e,t){1&e&&M.Ob(0,"th",28)}function ot(e,t){if(1&e){var a=M.Ub();M.Tb(0,"td",18),M.Tb(1,"button",29),M.bc("click",(function(e){return M.Ec(a),e.stopPropagation()})),M.Tb(2,"mat-icon"),M.Rc(3,"more_horiz"),M.Sb(),M.Sb(),M.Tb(4,"mat-menu",30,31),M.Tb(6,"button",32),M.bc("click",(function(){M.Ec(a);var e=t.$implicit;return M.fc().updateOwner(e)})),M.Tb(7,"span"),M.Rc(8,"Modify"),M.Sb(),M.Sb(),M.Tb(9,"button",32),M.bc("click",(function(){M.Ec(a);var e=t.$implicit;return M.fc().deleteOwner(e)})),M.Tb(10,"span"),M.Rc(11,"Delete"),M.Sb(),M.Sb(),M.Sb(),M.Sb()}if(2&e){var i=M.Ac(5);M.Cb(1),M.mc("matMenuTriggerFor",i)}}function st(e,t){1&e&&M.Ob(0,"tr",33)}function rt(e,t){if(1&e){var a=M.Ub();M.Tb(0,"tr",34),M.bc("click",(function(){M.Ec(a);var e=t.$implicit;return M.fc().updateOwner(e)})),M.Sb()}}var ct,lt,ut,dt,bt=function(){return[]},mt=[{path:"",component:(ct=function(){function t(a,i,n,o,s,r,c){e(this,t),this.dialog=a,this.ownerService=i,this.snackbar=n,this.router=o,this.authenticationService=s,this.clientSelectionService=r,this.cookieService=c,this.subject$=new f.a(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Owner Name",property:"ownerName",visible:!0,isModelProperty:!0},{name:"Mobile",property:"mobile",visible:!0,isModelProperty:!0},{name:"Email",property:"email",visible:!0,isModelProperty:!0},{name:"Tenant/Owner",property:"entityType",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=8}return a(t,[{key:"ngOnInit",value:function(){this.clientSelectionService.setIsClientVisible(!0),this.getAllOwners()}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"updateOwner",value:function(e){var t=this;this.dialog.open(Fe,{data:e}).afterClosed().subscribe((function(e){e&&(!e.userId&&e.userDetails?t.authenticationService.register(e.userDetails,e.clientId).subscribe((function(a){a&&(e.userId=a.id,t.updateOwnerDetails(e))})):t.updateOwnerDetails(e))})),this.getAllOwners()}},{key:"updateOwnerDetails",value:function(e){var t=this;this.ownerService.updateOwnerById(e.id,e).subscribe({next:function(e){t.snackbar.open("Successfully moved to Owner-Tenant",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),t.getAllOwners()},error:function(e){t.notificationMessage("Newly Registered Owner/Tenant updation failed","red-snackbar")}})}},{key:"deleteOwner",value:function(e){var t=this;this.dialog.open(R.a).afterClosed().subscribe((function(a){a&&t.ownerService.deleteOwnerById(e.id).subscribe({next:function(){t.getAllOwners()},error:function(e){t.notificationMessage("Newly Registered Owner/Tenant deletion failed","red-snackbar")}})}))}},{key:"onFilterChange",value:function(e){this.dataSource&&(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}},{key:"notificationMessage",value:function(e,t){this.snackbar.open(e,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[t]})}},{key:"getAllOwners",value:function(){var e=this;this.clientId=parseInt(this.cookieService.get("globalClientId")),this.ownerService.getNewlyRegisteredUsers(this.clientId).subscribe({next:function(t){t=t.map((function(e){return new g.a(e)})),e.subject$.next(t)},error:function(t){e.notificationMessage("Newly Registered Owner/Tenant Not Found.","green-snackbar")}}),this.dataSource=new m.k,this.data$.pipe(Object(p.a)((function(e){return!!e}))).subscribe((function(t){e.owners=t,e.dataSource.data=t})),this.ngAfterViewInit()}},{key:"ngOnDestroy",value:function(){}},{key:"content",set:function(e){this.sort=e,this.sort&&(this.dataSource.sort=this.sort)}},{key:"visibleColumns",get:function(){return this.columns.filter((function(e){return e.visible})).map((function(e){return e.property}))}}]),t}(),ct.\u0275fac=function(e){return new(e||ct)(M.Nb(h.b),M.Nb(w.a),M.Nb(E.b),M.Nb(u.f),M.Nb(Be.a),M.Nb(Ge.a),M.Nb(U.a))},ct.\u0275cmp=M.Hb({type:ct,selectors:[["fury-create-owner-registered"]],viewQuery:function(e,t){var a;1&e&&(M.Jc(d.a,!0),M.Vc(b.a,!0)),2&e&&(M.zc(a=M.cc())&&(t.paginator=a.first),M.zc(a=M.cc())&&(t.content=a.first))},inputs:{columns:"columns"},decls:19,vars:10,consts:[["mode","card"],["current","Newly Registered Users",3,"crumbs"],["name","Newly Registered Users",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(e,t){1&e&&(M.Tb(0,"fury-page-layout",0),M.Tb(1,"fury-page-layout-header"),M.Ob(2,"fury-breadcrumbs",1),M.Sb(),M.Tb(3,"fury-page-layout-content"),M.Tb(4,"fury-list",2),M.bc("filterChange",(function(e){return t.onFilterChange(e)})),M.Tb(5,"table",3),M.Rb(6,4),M.Pc(7,Xe,2,0,"th",5),M.Pc(8,Ye,2,0,"td",6),M.Qb(),M.Rb(9,7),M.Pc(10,We,1,0,"th",8),M.Pc(11,Ze,2,1,"td",9),M.Qb(),M.Pc(12,it,2,1,"ng-container",10),M.Rb(13,11),M.Pc(14,nt,1,0,"th",12),M.Pc(15,ot,12,1,"td",6),M.Qb(),M.Pc(16,st,1,0,"tr",13),M.Pc(17,rt,1,0,"tr",14),M.Sb(),M.Ob(18,"mat-paginator",15),M.Sb(),M.Sb(),M.Sb()),2&e&&(M.Cb(2),M.mc("@fadeInRight",void 0)("crumbs",M.qc(9,bt)),M.Cb(1),M.mc("@fadeInUp",void 0),M.Cb(1),M.mc("columns",t.columns),M.Cb(1),M.mc("dataSource",t.dataSource),M.Cb(7),M.mc("ngForOf",t.columns),M.Cb(4),M.mc("matHeaderRowDef",t.visibleColumns),M.Cb(1),M.mc("matRowDefColumns",t.visibleColumns),M.Cb(1),M.mc("pageSize",t.pageSize))},directives:[Qe.a,He.a,_e.a,qe.a,Ke.a,m.j,b.a,m.c,m.e,m.b,o.n,m.g,m.i,d.a,m.d,Y.a,m.a,o.o,b.b,z.a,Je.d,L.a,Je.e,Je.b,m.f,m.h],styles:[""],data:{animation:[Ve.a,je.a]}}),ct)}],ft=((lt=function t(){e(this,t)}).\u0275mod=M.Lb({type:lt}),lt.\u0275inj=M.Kb({factory:function(e){return new(e||lt)},imports:[[u.j.forChild(mt)],u.j]}),lt),pt=n("YUcS"),ht=n("VE2z"),gt=n("QibW"),vt=n("d3UM"),yt=n("GiUZ"),Tt=n("VY/7"),St=n("WCGO"),Ct=n("2+hO"),wt=n("jJIU"),kt=((dt=function t(){e(this,t)}).\u0275mod=M.Lb({type:dt}),dt.\u0275inj=M.Kb({factory:function(e){return new(e||dt)},imports:[[o.c,s.l,ht.a,St.a,c.a,s.w,pt.a,l.a,h.g,H.c,z.b,L.b,gt.c,vt.b,G.c,yt.a,Tt.a,Ct.a,wt.a]]}),dt),Nt=((ut=function t(){e(this,t)}).\u0275mod=M.Lb({type:ut}),ut.\u0275inj=M.Kb({factory:function(e){return new(e||ut)},imports:[[o.c,ft,s.l,s.w,l.a,St.a,c.a,kt,r.a]]}),ut)}}])}();