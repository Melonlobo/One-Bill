(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{nJbp:function(t,e,s){"use strict";s.r(e),s.d(e,"CreateOwnerRegisteredModule",(function(){return Te}));var a=s("ofXK"),i=s("3Pt+"),o=s("q8Jb"),n=s("0jmt"),r=s("KthW"),c=s("tyNb"),l=s("M9IT"),d=s("Dh3D"),b=s("+0xr"),m=s("jtHE"),u=s("pLZG"),p=s("0IaG"),h=s("JyMN"),f=s("zyfE"),g=s("sOHO"),T=s("qIvx"),S=s("seMb"),y=s("UcNE"),C=s("Vvus"),w=s("/D9e"),v=s("kLqA"),N=s("6zYn"),O=s("Iab2"),D=s("zSPf"),x=s("tB66"),k=s("xXXn"),R=s("zP6O"),I=s("sXtk"),P=s("fXoL"),A=s("dNgK"),M=s("b6Qw"),U=s("/t3+"),E=s("bTqV"),$=s("NFeN"),z=s("MutI"),L=s("4FRi"),F=s("XiUz"),V=s("1jcm"),j=s("wZkO"),B=s("kmnG"),G=s("qFsG"),Q=s("/1cH"),H=s("YaQ2"),_=s("iadO"),q=s("znSr"),K=s("FKr1"),J=s("bSwM");const X=["fileInput"],Y=["fileInputDocument"];function W(t,e){1&t&&(P.Tb(0,"mat-form-field",92),P.Tb(1,"mat-label"),P.Rc(2,"Company Name"),P.Sb(),P.Ob(3,"input",93),P.Tb(4,"mat-hint"),P.Rc(5,"Owner Name cannot be Greater than 100"),P.Sb(),P.Sb())}function Z(t,e){if(1&t){const t=P.Ub();P.Tb(0,"mat-form-field",94),P.Tb(1,"mat-label"),P.Rc(2,"TRN"),P.Sb(),P.Tb(3,"input",95),P.bc("change",(function(){return P.Ec(t),P.fc().checkTRNDuplication()}))("keyup",(function(){return P.Ec(t),P.fc().checkTRNDuplication()})),P.Sb(),P.Tb(4,"mat-hint",96),P.Rc(5),P.Sb(),P.Sb()}if(2&t){const t=P.fc();P.Cb(5),P.Sc(t.duplicateTRN)}}function tt(t,e){if(1&t&&(P.Tb(0,"mat-option",97),P.Rc(1),P.Sb()),2&t){const t=e.$implicit;P.mc("value",t.description),P.Cb(1),P.Tc(" ",t.description," ")}}function et(t,e){if(1&t&&(P.Tb(0,"mat-hint",98),P.Rc(1),P.Sb()),2&t){const t=P.fc();P.Cb(1),P.Sc(t.errorMessage)}}function st(t,e){if(1&t&&(P.Tb(0,"mat-option",97),P.Rc(1),P.Sb()),2&t){const t=e.$implicit;P.mc("value",t.description),P.Cb(1),P.Tc("",t.description," ")}}function at(t,e){if(1&t&&(P.Tb(0,"mat-option",97),P.Rc(1),P.Sb()),2&t){const t=e.$implicit;P.mc("value",t.description),P.Cb(1),P.Tc(" ",t.description,"")}}function it(t,e){if(1&t&&(P.Tb(0,"mat-option",97),P.Rc(1),P.Sb()),2&t){const t=e.$implicit;P.mc("value",t.description),P.Cb(1),P.Tc(" ",t.description,"")}}function ot(t,e){if(1&t&&(P.Tb(0,"mat-hint",98),P.Rc(1),P.Sb()),2&t){const t=P.fc();P.Cb(1),P.Sc(t.errorMessage)}}function nt(t,e){if(1&t){const t=P.Ub();P.Tb(0,"th",99),P.Tb(1,"mat-checkbox",100),P.bc("click",(function(e){return P.Ec(t),e.stopPropagation()})),P.Sb(),P.Sb()}}function rt(t,e){if(1&t){const t=P.Ub();P.Tb(0,"td",101),P.Tb(1,"mat-checkbox",100),P.bc("click",(function(e){return P.Ec(t),e.stopPropagation()})),P.Sb(),P.Sb()}}function ct(t,e){1&t&&P.Ob(0,"th",102)}function lt(t,e){if(1&t&&(P.Tb(0,"td",103),P.Ob(1,"img",104),P.Sb()),2&t){const t=e.$implicit;P.Cb(1),P.oc("src","http://i.pravatar.cc/30?u=",t.name,"",P.Gc)}}function dt(t,e){1&t&&(P.Tb(0,"td",101),P.Tb(1,"mat-icon"),P.Rc(2,"more_horiz"),P.Sb(),P.Sb())}function bt(t,e){if(1&t&&(P.Tb(0,"th",108),P.Rc(1),P.Sb()),2&t){const t=P.fc(2).$implicit;P.Cb(1),P.Tc(" ",t.name,"")}}function mt(t,e){if(1&t&&(P.Tb(0,"td",109),P.Rc(1),P.Sb()),2&t){const t=e.$implicit,s=P.fc(2).$implicit;P.Cb(1),P.Tc(" ",t[s.property]," ")}}function ut(t,e){if(1&t&&(P.Rb(0,106),P.Pc(1,bt,2,1,"th",107),P.Pc(2,mt,2,1,"td",83),P.Qb()),2&t){const t=P.fc().$implicit;P.mc("matColumnDef",t.property)}}function pt(t,e){if(1&t&&(P.Rb(0),P.Pc(1,ut,3,1,"ng-container",105),P.Qb()),2&t){const t=e.$implicit;P.Cb(1),P.mc("ngIf",t.isModelProperty)}}function ht(t,e){1&t&&(P.Tb(0,"th",110),P.Rc(1,"File Name"),P.Sb())}function ft(t,e){if(1&t){const t=P.Ub();P.Tb(0,"td",109),P.Tb(1,"span",111),P.bc("click",(function(){P.Ec(t);const s=e.$implicit;return P.fc().downloadDocument(s)})),P.Rc(2),P.Sb(),P.Sb()}if(2&t){const t=e.$implicit;P.Cb(2),P.Sc(t.document)}}function gt(t,e){1&t&&(P.Tb(0,"th",99),P.Rc(1,"Action"),P.Sb())}function Tt(t,e){if(1&t){const t=P.Ub();P.Tb(0,"td",112),P.bc("click",(function(){P.Ec(t);const s=e.$implicit;return P.fc().deleteDocument(s)})),P.Tb(1,"mat-icon",113),P.Rc(2,"delete"),P.Sb(),P.Sb()}}function St(t,e){1&t&&P.Ob(0,"tr",114)}function yt(t,e){1&t&&P.Ob(0,"tr",115)}function Ct(t,e){if(1&t&&(P.Tb(0,"mat-option",97),P.Rc(1),P.Sb()),2&t){const t=e.$implicit;P.mc("value",t.description),P.Cb(1),P.Tc("",t.description," ")}}function wt(t,e){if(1&t){const t=P.Ub();P.Tb(0,"th",99),P.Tb(1,"mat-checkbox",100),P.bc("click",(function(e){return P.Ec(t),e.stopPropagation()})),P.Sb(),P.Sb()}}function vt(t,e){if(1&t){const t=P.Ub();P.Tb(0,"td",101),P.Tb(1,"mat-checkbox",100),P.bc("click",(function(e){return P.Ec(t),e.stopPropagation()})),P.Sb(),P.Sb()}}function Nt(t,e){1&t&&P.Ob(0,"th",102)}function Ot(t,e){if(1&t&&(P.Tb(0,"td",103),P.Ob(1,"img",104),P.Sb()),2&t){const t=e.$implicit;P.Cb(1),P.oc("src","http://i.pravatar.cc/30?u=",t.name,"",P.Gc)}}function Dt(t,e){1&t&&(P.Tb(0,"td",101),P.Tb(1,"mat-icon"),P.Rc(2,"more_horiz"),P.Sb(),P.Sb())}function xt(t,e){if(1&t&&(P.Tb(0,"th",108),P.Rc(1),P.Sb()),2&t){const t=P.fc(2).$implicit;P.Cb(1),P.Tc(" ",t.name,"")}}function kt(t,e){if(1&t&&(P.Tb(0,"td",109),P.Rc(1),P.Sb()),2&t){const t=e.$implicit,s=P.fc(2).$implicit;P.Cb(1),P.Tc(" ",t[s.property]," ")}}function Rt(t,e){if(1&t&&(P.Rb(0,106),P.Pc(1,xt,2,1,"th",107),P.Pc(2,kt,2,1,"td",83),P.Qb()),2&t){const t=P.fc().$implicit;P.mc("matColumnDef",t.property)}}function It(t,e){if(1&t&&(P.Rb(0),P.Pc(1,Rt,3,1,"ng-container",105),P.Qb()),2&t){const t=e.$implicit;P.Cb(1),P.mc("ngIf",t.isModelProperty)}}function Pt(t,e){1&t&&(P.Tb(0,"th",99),P.Rc(1,"Modify"),P.Sb())}function At(t,e){if(1&t){const t=P.Ub();P.Tb(0,"td",112),P.bc("click",(function(){P.Ec(t);const s=e.$implicit;return P.fc(2).deleteOwnership(s)})),P.Tb(1,"mat-icon",113),P.Rc(2,"delete"),P.Sb(),P.Sb()}}function Mt(t,e){1&t&&P.Ob(0,"tr",114)}function Ut(t,e){1&t&&P.Ob(0,"tr",115)}function Et(t,e){if(1&t){const t=P.Ub();P.Tb(0,"mat-tab",116),P.Tb(1,"fury-card-content",14),P.Tb(2,"div",39),P.Tb(3,"div",6),P.Tb(4,"div",28),P.Tb(5,"mat-form-field",29),P.Tb(6,"mat-label"),P.Rc(7,"Unit"),P.Sb(),P.Ob(8,"input",117),P.Tb(9,"mat-autocomplete",17,118),P.bc("optionSelected",(function(e){return P.Ec(t),P.fc().selectUnit(e)})),P.Pc(11,Ct,2,2,"mat-option",19),P.Sb(),P.Ob(12,"app-show-errors",20),P.Sb(),P.Tb(13,"mat-form-field",29),P.Tb(14,"mat-label"),P.Rc(15,"Start Date"),P.Sb(),P.Ob(16,"input",119),P.Ob(17,"app-show-errors",20),P.Sb(),P.Tb(18,"button",120),P.bc("click",(function(){return P.Ec(t),P.fc().saveOwnership()})),P.Rc(19,"CREATE OWNERSHIP"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(20,"table",72),P.Rc(21," --\x3e "),P.Rb(22,73),P.Pc(23,wt,2,0,"th",74),P.Pc(24,vt,2,0,"td",75),P.Qb(),P.Rb(25,76),P.Pc(26,Nt,1,0,"th",77),P.Pc(27,Ot,2,1,"td",78),P.Qb(),P.Rb(28,79),P.Tb(29,"th"),P.Rc(30,"Action"),P.Sb(),P.Pc(31,Dt,3,0,"td",75),P.Qb(),P.Pc(32,It,2,1,"ng-container",80),P.Rb(33,84),P.Pc(34,Pt,2,0,"th",74),P.Pc(35,At,3,0,"td",85),P.Qb(),P.Pc(36,Mt,1,0,"tr",86),P.Pc(37,Ut,1,0,"tr",87),P.Sb(),P.Tb(38,"div"),P.Rc(39),P.Sb(),P.Sb(),P.Sb()}if(2&t){const t=P.Ac(10),e=P.fc();P.Cb(2),P.mc("formGroup",e.form.controls.ownerships),P.Cb(6),P.mc("matAutocomplete",t),P.Cb(3),P.mc("ngForOf",e.filteredUnits),P.Cb(1),P.mc("ctrl",e.form.controls.ownerships.get("unitId")),P.Cb(5),P.mc("ctrl",e.form.controls.ownerships.get("startDate")),P.Cb(1),P.mc("disabled",""===e.form.controls.ownerships.get("unit").value||null===e.form.controls.ownerships.get("unitId").value||""===e.form.controls.ownerships.get("startDate").value),P.Cb(2),P.mc("dataSource",e.ownershipdataSource),P.Cb(12),P.mc("ngForOf",e.ownershipcolumns),P.Cb(4),P.mc("matHeaderRowDef",e.ownershipVisibleColumns),P.Cb(1),P.mc("matRowDefColumns",e.ownershipVisibleColumns),P.Cb(2),P.Tc(" ",e.length,"")}}let $t=(()=>{class t{constructor(t,e,s,a,i,o,n,r,c,l,d,b,u,p){this.defaults=t,this.dialog=e,this.snackbar=s,this.ownerService=a,this.date=i,this.dialogRef=o,this.fb=n,this.metadataService=r,this.fv=c,this.constantsService=l,this.fileService=d,this.masterService=b,this.cookieService=u,this.envService=p,this.baseUrl="",this.fileSize=0,this.mode="create",this.dateFormat="",this.isCancel=!1,this.myDate=new Date,this.addressTypeId=30,this.documentName="",this.duplicateTRN="",this.documents=[],this.downloadVar="",this.isUploadSuccess=!0,this.errorMessage="",this.isDocumentUploadSuccess=!0,this.subject$=new m.a(1),this.data$=this.subject$.asObservable(),this.ownershipsubject$=new m.a(1),this.ownershipdata$=this.ownershipsubject$.asObservable(),this.columns=[{name:"Document Type",property:"documentType",visible:!0,isModelProperty:!0},{name:"Path",property:"documentPath",visible:!1},{name:"File Name",property:"document",visible:!0},{name:"Action",property:"actions",visible:!0}],this.pageSize=10,this.ownershipcolumns=[{name:"Unit",property:"unit",visible:!0,isModelProperty:!0},{name:"Start Date",property:"startDateLocal",visible:!0,isModelProperty:!0},{name:"Modify",property:"actions",visible:!0}],this.ownershippageSize=10,this.baseUrl=p.backendForFiles,this.fileSize=Math.floor(p.MaxBytes/1e6),this.dateFormat=p.dateFormat,o.disableClose=!0}set content(t){this.sort=t,this.sort&&(this.dataSource.sort=this.sort)}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}get ownershipVisibleColumns(){return this.ownershipcolumns.filter(t=>t.visible).map(t=>t.property)}ngOnInit(){this.clientId=parseInt(this.cookieService.get("globalClientId")),this.address=this.defaults.addresses[0]||new f.a({}),this.bankDetails=this.defaults.bankDetails[0]||new T.a({}),this.ownership=this.defaults.ownerships[0]||new N.a({}),this.masterService.getSystemMasterdata(15,0).subscribe(t=>{this.metadataCountries=t,this.filteredCountries=t}),this.getDocumentTypes(),this.masterService.getSystemMasterdata(26,0).subscribe(t=>{this.metadataTitles=t,this.filteredTitles=t}),this.masterService.getSystemMasterdata(22,0).subscribe(t=>{this.metadataAddressTypes=t,this.filteredAddressTypes=t,this.metadataAddressTypes&&this.metadataAddressTypes.forEach(t=>{t.id===this.addressTypeId&&(this.addressType=t.description,this.address.addressType=t.description)})}),this.ownerService.getUnits(this.clientId).subscribe(t=>{this.metadataUnits=t,this.filteredUnits=t}),this.image=this.baseUrl+"/uploads/"+this.defaults.photo,""==this.defaults.photo&&(this.image="assets/img/avatars/two.png"),this.response=this.defaults.photo,this.isOwner="Owner"==this.defaults.entityType,this.form=this.fb.group({id:[this.defaults.id||0],clientId:[this.defaults.clientId],trn:[this.defaults.trn||""],title:[this.defaults.title||""],titleId:[this.defaults.titleId||""],firstName:[this.defaults.firstName||"",this.fv.nameValidators],lastName:[this.defaults.lastName||"",this.fv.nameValidators],mobile:[this.defaults.mobile||"",this.fv.mobileNumberValidators],email:[this.defaults.email||"",this.fv.emailValidators],dob:[this.defaults.dob&&new Date(this.defaults.dob).toISOString().substr(0,10)||""],accountNumber:["",this.fv.requiredAlphanumericNoSpaces],photo:[this.defaults.photo||""],isCompanySelected:[this.defaults.isCompany||!1],ownerName:[this.defaults.ownerName||""],entityType:[this.defaults.entityType],isLoginEnabled:[this.defaults.userDetails.isLoginEnabled],isOwner:this.isOwner,addressType:this.addressTypeId,address:this.fb.group({city:[this.address.city||""],zipPostalCode:[this.address.zipPostalCode||""],address1:[this.address.address1||""],address2:[this.address.address2||""],country:[this.address.country||""],countryId:[this.address.countryId||0],addressType:[this.address.addressType||""],addressTypeId:[this.address.addressTypeId||""],email:[this.address.email||""],phoneNumber:[this.address.phoneNumber||""]}),bank:this.fb.group({accountName:[this.bankDetails.accountName||""],accountNo:[this.bankDetails.accountNo||""],bankName:[this.bankDetails.bankName||""],bankAddress:[this.bankDetails.bankAddress||""],swiftCode:[this.bankDetails.swiftCode||""],ibanNumber:[this.bankDetails.ibanNumber||""]}),documentType:"",documentTypeId:0,ownerships:this.fb.group({id:0,unitId:0,unit:"",startDate:""})}),this.documents=this.defaults.documents||[],this.documents.forEach(t=>{let e=t.documentPath.indexOf(",");e>0&&(t.document=t.documentPath.substr(e+1,t.documentPath.length),t.documentPath=t.documentPath.substr(0,e))}),this.subject$.next(this.documents),this.dataSource=new b.k,this.data$.pipe(Object(u.a)(t=>!!t)).subscribe(t=>{this.documents=t,this.dataSource.data=t}),this.ownerships=this.defaults.ownerships||[],this.bindOwnershipDetails(),this.isLoginEnabled=""!==(this.defaults.userDetails.isLoginEnabled||""),this.isCompanySelected=this.defaults.isCompany,this.form.controls.title.valueChanges.subscribe(t=>{this.filteredTitles=this.filterTitle(t)}),this.form.controls.address.get("addressType").valueChanges.subscribe(t=>{this.filteredAddressTypes=this.filterAddressType(t)}),this.form.controls.address.get("country").valueChanges.subscribe(t=>{this.filteredCountries=this.filterCountry(t)}),this.form.controls.documentType.valueChanges.subscribe(t=>{this.filteredDocumentTypes=this.filterDocumentType(t)}),this.form.controls.ownerships.get("unit").valueChanges.subscribe(t=>{this.filteredUnits=this.filterUnits(t)})}getDocumentTypes(){this.masterService.getUserMasterdata(20,0).subscribe(t=>{this.metadataDocumentTypes=t,this.filteredDocumentTypes=t})}getFilteredCountry(){this.filteredCountries=this.filterCountry(this.form.controls.address.get("country").value)}filterTitle(t){if(""!=t)return this.metadataTitles.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}filterAddressType(t){return this.metadataAddressTypes.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}filterCountry(t){return this.metadataCountries.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}filterDocumentType(t){return this.metadataDocumentTypes.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}filterUnits(t){return this.metadataUnits.filter(e=>0===e.description.toLowerCase().indexOf(t.toLowerCase()))}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}bindOwnershipDetails(){this.ownerships.forEach(t=>{t.startDateLocal=this.date.transform(t.startDate.toString(),this.dateFormat.toString())}),this.ownershipsubject$.next(this.ownerships),this.ownershipdataSource=new b.k(this.ownerships),this.ownershipdata$.pipe(Object(u.a)(t=>!!t)).subscribe(t=>{this.ownerships=t,this.ownershipdataSource.data=t}),null==this.ownerships&&null==this.ownerships||(length=this.ownerships.length)}save(){this.isCancel?(this.isCancel=!1,this.dialog.open(k.a,{data:{label:"Are you sure you want to Cancel?",selected:!1}}).afterClosed().subscribe(t=>{t&&this.dialogRef.close()})):(this.updateAddress(),this.updateBankDetails(),this.documents.forEach(t=>{t.documentPath=t.documentPath+","+t.document}),this.defaults.documents=this.documents,this.updateOwner())}createUserDetails(){return{username:this.defaults.accountNumber,email:this.defaults.email,password:this.getRandomString(15),role:"External",designation:"External",image:this.defaults.photo}}saveOwnership(){if(this.form.controls.ownerships.valid){let t=this.form.controls.ownerships.get("unitId").value;this.ownerships.findIndex(e=>e.unitId===t)&&(this.ownerships.push({id:0,unitId:this.form.controls.ownerships.get("unitId").value,unit:this.form.controls.ownerships.get("unit").value,startDate:this.form.controls.ownerships.get("startDate").value}),this.bindOwnershipDetails(),this.form.controls.ownerships.reset())}}deleteOwnership(t){this.ownerships.splice(this.ownerships.findIndex(e=>e.id===t.id),1),this.bindOwnershipDetails()}getRandomString(t){return("P@Qr$#S"+v.Guid.create().toString()).substring(0,t-1)}updateOwner(){Object.assign(this.defaults,this.form.value),this.defaults.trn=this.form.controls.trn.value.toString(),this.defaults.isCompany=this.isCompanySelected,void 0!==this.response&&(this.defaults.photo=this.response),this.defaults.userDetails=this.createUserDetails(),this.isLoginEnabled&&(this.defaults.userDetails.isLoginEnabled=!0,this.defaults.userDetails.isLoginActivated=!0),this.defaults.dob=""==this.form.controls.dob.value?null:this.form.controls.dob.value,this.defaults.titleId=""==this.form.controls.titleId.value?0:this.form.controls.titleId.value,this.defaults.ownerName=this.defaults.ownerName,this.defaults.ownerships=this.ownerships,this.dialogRef.close(new h.a(this.defaults))}isUpdateMode(){return"update"===this.mode}changeAddressType(t){this.addressType=t.option.value,this.metadataAddressTypes.forEach(t=>{this.addressType===t.description&&(this.addressTypeId=t.id)}),this.address=this.defaults.addresses.filter(t=>t.addressTypeId===this.addressTypeId)[0]||new f.a({}),this.form.controls.address=this.fb.group({city:[this.address.city||""],zipPostalCode:[this.address.zipPostalCode||""],address1:[this.address.address1||""],address2:[this.address.address2||""],country:[this.address.country||""],countryId:[this.address.countryId||0],addressType:[this.address.addressType||""],addressTypeId:[this.address.addressTypeId||""],email:[this.address.email||""],phoneNumber:[this.address.phoneNumber||""]})}updateAddress(){if(this.form.controls.address.valid){let t=!1;if(this.defaults.addresses.forEach(e=>{e.addressTypeId===this.addressTypeId&&(t=!0,Object.assign(e,this.form.controls.address.value),e.addressType=this.addressType)}),!t){let t={addressTypeId:this.addressTypeId};Object.assign(t,this.form.controls.address.value),Object.assign(t,{addresstype:this.addressType}),this.defaults.addresses.push(new f.a(t))}}}updateBankDetails(){this.form.controls.bank.valid&&(this.defaults.bankDetails[0]?Object.assign(this.defaults.bankDetails[0],this.form.controls.bank.value):this.defaults.bankDetails.push(new T.a(this.form.controls.bank.value)))}uploadPhoto(t){this.image="assets/img/avatars/two.png",this.errorMessage="",this.fileService.upload(t.target.files[0],"image").subscribe({next:t=>{this.response=t,this.image=this.baseUrl+"/uploads/"+t,this.isUploadSuccess=!0},error:t=>{this.isUploadSuccess=!1,this.errorMessage=null==t.error.message?t.error.Message:t.error.message,"Request body too large."==this.errorMessage&&(this.errorMessage="Max. allowed File size is "+this.fileSize+"MB. Please upload file with smaller size.")}})}notificationMessage(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:[e]})}selectDocument(t){this.selectedDocument=null,this.fileService.upload(t.target.files[0]).subscribe({next:e=>{this.documentResponse=e,this.selectedDocument=t.target.files[0],this.isDocumentUploadSuccess=!0},error:t=>{this.isDocumentUploadSuccess=!1,this.errorMessage=null==t.error.message?t.error.Message:t.error.message,"Request body too large."==this.errorMessage&&(this.errorMessage="Max. allowed File size is "+this.fileSize+"MB. Please upload file with smaller size.")}})}uploadDocument(){this.form.controls.documentType.value&&""!==this.form.controls.documentType.value&&this.selectedDocument&&(this.documents.push({documentTypeId:this.form.controls.documentTypeId.value,documentType:this.form.controls.documentType.value,documentPath:this.documentResponse,document:this.selectedDocument.name}),this.subject$.next(this.documents),this.form.controls.documentType.setValue(""),this.form.controls.documentTypeId.setValue(0),this.fileInputDocument.nativeElement.value="",this.selectedDocument=void 0)}deleteDocument(t){this.dialog.open(x.a).afterClosed().subscribe(e=>{if(e){let e=this.documents.findIndex(e=>e.documentType===t.documentType);e>=0&&this.documents.splice(e,1),this.subject$.next(this.documents)}})}toggleOwner(t){this.form.controls.entityType.setValue(!0===this.form.controls.isOwner.value?"owner":"tenant")}toggleCompany(t){this.isCompanySelected=t.checked||!1,this.form.controls.ownerName.setValue(!1===this.isCompanySelected?this.defaults.firstName+" "+this.defaults.lastName:"")}toggleLoginEnabled(t){this.isLoginEnabled=t.checked||!1}enbaleAddressValidators(){let t;const e=this.form.controls.address;this.metadataCountries.forEach(s=>{s.description==e.value.country&&(t=s.id)}),this.form.controls.address=this.fb.group(""!==e.value.address1||""!==e.value.address2||""!==e.value.city||""!==e.value.zipPostalCode||""!==e.value.country?{city:[e.value.city||"",this.fv.addressValidators],zipPostalCode:[e.value.zipPostalCode||"",this.fv.postalCodeValidators],address1:[e.value.address1||"",this.fv.addressValidators],address2:[e.value.address2||"",this.fv.optionsAddressValidators],country:[e.value.country||"",i.y.required],countryId:[t||0],addressType:[e.value.addressType||"",i.y.required],addressTypeId:[this.addressTypeId||0],email:[this.address.email||""],phoneNumber:[this.address.phoneNumber||""]}:{city:[e.value.city||""],zipPostalCode:[e.value.zipPostalCode||""],address1:[e.value.address1||""],address2:[e.value.address2||""],country:[e.value.country||""],countryId:[t||0],addressType:[e.value.addressType||""],addressTypeId:[this.addressTypeId||0],email:[this.address.email||""],phoneNumber:[this.address.phoneNumber||""]})}enabledBankValidators(){const t=this.form.controls.bank;this.form.controls.bank=this.fb.group(""!==t.value.accountName||""!==t.value.accountNo||""!==t.value.bankName||""!==t.value.bankAddress||""!==t.value.swiftCode||""!==t.value.ibanNumber?{accountName:[t.value.accountName||"",this.fv.nameValidators],accountNo:[t.value.accountNo||"",this.fv.requiredAlphanumericNoSpaces],bankName:[t.value.bankName||"",this.fv.nameValidators],bankAddress:[t.value.bankAddress||"",this.fv.optionsAddressValidators],swiftCode:[t.value.swiftCode||"",this.fv.requiredAlphanumericNoSpaces],ibanNumber:[t.value.ibanNumber||"",this.fv.requiredAlphanumericNoSpaces]}:{accountName:[t.value.accountName||""],accountNo:[t.value.accountNo||""],bankName:[t.value.bankName||""],bankAddress:[t.value.bankAddress||""],swiftCode:[t.value.swiftCode||""],ibanNumber:[t.value.ibanNumber||""]})}enabledOwnershipValidators(){const t=this.form.controls.ownerships;this.form.controls.ownerships=this.fb.group(""!==t.value.unit||""!==t.value.startDate?{unitId:[t.value.unitId||0],unit:[t.value.unit||""],startDate:[t.value.startDate||"",i.y.required]}:{unitId:[t.value.unitId||0],unit:[t.value.unit||""],startDate:[t.value.startDate||""]})}selectTitle(t){this.metadataTitles.forEach(e=>{t.option.value==e.description&&this.form.controls.titleId.setValue(e.id)})}selectDocumentType(t){this.documentName="",this.documents.find(e=>{e.documentType!=t.option.value||(this.documentName=t.option.value+" already uploaded")}),this.metadataDocumentTypes.forEach(e=>{t.option.value==e.description&&this.form.controls.documentTypeId.setValue(e.id)})}selectUnit(t){this.metadataUnits.forEach(e=>{t.option.value==e.description&&this.form.controls.ownerships.get("unitId").setValue(e.id)})}downloadDocument(t){let e="",s=t.documentPath.indexOf(",");e=s>0?t.documentPath.substr(0,s):t.documentPath,this.downloadVar=this.baseUrl+"/uploads/"+e,O.saveAs(this.downloadVar,e)}addAddress(){const t={};if(Object.assign(t,this.form.controls.address.value),this.defaults.addresses&&this.defaults.addresses.length){const e=this.defaults.addresses.findIndex(e=>e.addressTypeId==t.addressTypeId);e>-1&&this.defaults.addresses.splice(e,1)}this.defaults.addresses.push(t)}checkTRNDuplication(){this.duplicateTRN="";let t=this.form.controls.trn.value;""==t&&null==t||this.ownerService.checkTRNDuplication(1,t,this.defaults.id).subscribe(t=>{t&&t>0&&(this.duplicateTRN="TRN already exists.")})}close(){this.dialogRef.close()}closeDialog(){this.isCancel=!0}createDocumentType(){this.dialog.open(R.a,{data:[0,20]}).afterClosed().subscribe(t=>{t&&"Success"==t&&this.getDocumentTypes()})}}return t.id=100,t.\u0275fac=function(e){return new(e||t)(P.Nb(p.a),P.Nb(p.b),P.Nb(A.b),P.Nb(C.a),P.Nb(a.f),P.Nb(p.h),P.Nb(i.f),P.Nb(g.a),P.Nb(S.a),P.Nb(y.a),P.Nb(w.a),P.Nb(D.a),P.Nb(M.a),P.Nb(I.a))},t.\u0275cmp=P.Hb({type:t,selectors:[["fury-owner-registered-create-update"]],viewQuery:function(t,e){var s;1&t&&(P.Vc(X,!0),P.Vc(Y,!0),P.Jc(l.a,!0),P.Vc(d.a,!0)),2&t&&(P.zc(s=P.cc())&&(e.fileInput=s.first),P.zc(s=P.cc())&&(e.fileInputDocument=s.first),P.zc(s=P.cc())&&(e.paginator=s.first),P.zc(s=P.cc())&&(e.content=s.first))},inputs:{columns:"columns"},decls:239,vars:50,consts:[["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"fx-spacer"],["mat-icon-button","",3,"click"],["title","Close","mat-list-icon",""],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"person"],["fxLayout","column","fxLayout.gt-sm","row"],["formControlName","isCompanySelected",3,"checked","change"],["formControlName","isOwner",1,"togglebutton",3,"checked","change"],[3,"checked","change"],["fxFlex","","class","companyName",4,"ngIf"],["fxFlex","40%","class","companyName",4,"ngIf"],["label","General"],[1,"padding-top"],["fxFlex","",1,"titleSelector"],["matInput","","formControlName","title",3,"matAutocomplete"],[3,"optionSelected"],["title","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"ctrl"],[1,"profile"],["fxLayout","column"],[1,"profileImage",2,"width","100px","height","100px","border-radius","50%",3,"src"],["type","file","accept","image/*",1,"profileButton",3,"change"],["fileInput",""],["class","errorMessage",4,"ngIf"],[1,"person","padding-top"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","48px"],["fxFlex",""],["type","text","formControlName","firstName","maxlength","65","matInput",""],["type","text","formControlName","lastName","maxlength","65","matInput",""],["type","text","formControlName","mobile","matInput",""],["type","text","formControlName","email","maxlength","100","matInput",""],["formControlName","dob","matInput","",3,"max","matDatepicker","click","focus"],["matSuffix","",3,"for"],["formDatepickerRef",""],["type","text","formControlName","accountNumber","maxlength","50","matInput",""],["label","Address Details"],[3,"formGroup"],["type","button","mat-mini-fab","","color","primary",1,"create","right","margin",3,"click"],["matInput","","formControlName","addressType",3,"matAutocomplete"],["addressTypes","matAutocomplete"],["type","text","formControlName","city","matInput",""],["type","text","formControlName","address1","matInput",""],["type","text","formControlName","zipPostalCode","matInput",""],["type","text","formControlName","address2","matInput",""],["matInput","","formControlName","country",3,"matAutocomplete","keyup"],["country","matAutocomplete"],["type","text","formControlName","email","maxlength","200","matInput",""],["type","text","formControlName","phoneNumber","maxlength","200","matInput",""],["label","Bank Details"],["type","text","formControlName","accountName","matInput",""],["type","text","formControlName","accountNo","matInput",""],["type","text","formControlName","bankName","matInput",""],["type","text","formControlName","bankAddress","matInput",""],["type","text","formControlName","swiftCode","matInput",""],["type","text","formControlName","ibanNumber","matInput",""],["label","Document Details"],[1,"person",2,"width","700px"],["fxLayout","column","fxLayout.gt-sm","row",2,"margin-right","0px","width","100%"],["fxFlex","40%"],[1,"titleSelector",2,"width","85%","margin-right","0px"],["matInput","","formControlName","documentType",3,"matAutocomplete"],["documentTypes","matAutocomplete"],[1,"duplicateMessage"],["type","button","mat-mini-fab","","color","primary",1,"create",2,"height","30px","width","30px","margin-right","0px","margin-left","5px","padding-top","-5px",3,"click"],[2,"height","10px","width","10px","padding-top","-5px","margin-top","-25px","margin-left","-13px"],[1,"document",2,"width","60%","padding-left","50px"],["type","file",1,"selectDocument",3,"change"],["fileInputDocument",""],[3,"ngClass","click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],["matColumnDef","delete"],[4,"ngFor","ngForOf"],["matColumnDef","document"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["class","actions-cell","mat-cell","",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],["label","Ownerships",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-button","",3,"click"],["mat-button","",3,"disabled"],["fxFlex","",1,"companyName"],["type","text","formControlName","ownerName","maxlength","100","matInput",""],["fxFlex","40%",1,"companyName"],["type","number","formControlName","trn","matInput","","maxlength","15","oninput","javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);if(this.value <= 0) this.value = ''",3,"change","keyup"],[1,"duplicate"],[3,"value"],[1,"errorMessage"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"under-line",3,"click"],["mat-cell","",1,"actions-cell",3,"click"],[1,"deleteIcon"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"],["label","Ownerships"],["matInput","","formControlName","unit",3,"matAutocomplete"],["unitId","matAutocomplete"],["type","date","formControlName","startDate","matInput",""],["mat-button","",3,"disabled","click"]],template:function(t,e){if(1&t){const t=P.Ub();P.Tb(0,"div",0),P.Tb(1,"mat-toolbar",1),P.Tb(2,"span"),P.Rc(3,"Newly Registered User"),P.Sb(),P.Ob(4,"span",2),P.Tb(5,"button",3),P.bc("click",(function(){return e.close()})),P.Tb(6,"mat-icon",4),P.Rc(7,"close"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(8,"form",5),P.bc("ngSubmit",(function(){return e.save()})),P.Tb(9,"mat-dialog-content"),P.Tb(10,"fury-card"),P.Tb(11,"div",6),P.Tb(12,"div",7),P.Tb(13,"mat-slide-toggle",8),P.bc("change",(function(t){return e.toggleCompany(t)})),P.Rc(14,"Company"),P.Sb(),P.Tb(15,"mat-slide-toggle",9),P.bc("change",(function(t){return e.toggleOwner(t)})),P.Rc(16,"Owner"),P.Sb(),P.Tb(17,"mat-slide-toggle",10),P.bc("change",(function(t){return e.toggleLoginEnabled(t)})),P.Rc(18,"Login Enabled "),P.Sb(),P.Sb(),P.Sb(),P.Tb(19,"div",6),P.Tb(20,"div",7),P.Pc(21,W,6,0,"mat-form-field",11),P.Pc(22,Z,6,1,"mat-form-field",12),P.Sb(),P.Sb(),P.Tb(23,"mat-tab-group"),P.Tb(24,"mat-tab",13),P.Tb(25,"fury-card-content",14),P.Tb(26,"div",6),P.Tb(27,"div",7),P.Tb(28,"mat-form-field",15),P.Tb(29,"mat-label"),P.Rc(30,"Title"),P.Sb(),P.Ob(31,"input",16),P.Tb(32,"mat-autocomplete",17,18),P.bc("optionSelected",(function(t){return e.selectTitle(t)})),P.Pc(34,tt,2,2,"mat-option",19),P.Sb(),P.Ob(35,"app-show-errors",20),P.Sb(),P.Tb(36,"div",21),P.Tb(37,"div",22),P.Tb(38,"div",7),P.Ob(39,"img",23),P.Tb(40,"input",24,25),P.bc("change",(function(t){return e.uploadPhoto(t)})),P.Sb(),P.Sb(),P.Pc(42,et,2,1,"mat-hint",26),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(43,"div",27),P.Tb(44,"div",28),P.Tb(45,"mat-form-field",29),P.Tb(46,"mat-label"),P.Rc(47,"First Name"),P.Sb(),P.Ob(48,"input",30),P.Ob(49,"app-show-errors",20),P.Tb(50,"mat-hint"),P.Rc(51,"First Name cannot be Greater than 65"),P.Sb(),P.Sb(),P.Tb(52,"mat-form-field",29),P.Tb(53,"mat-label"),P.Rc(54,"Last Name"),P.Sb(),P.Ob(55,"input",31),P.Ob(56,"app-show-errors",20),P.Tb(57,"mat-hint"),P.Rc(58,"Last Name cannot be Greater than 65"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(59,"div",6),P.Tb(60,"div",28),P.Tb(61,"mat-form-field",29),P.Tb(62,"mat-label"),P.Rc(63,"Mobile"),P.Sb(),P.Ob(64,"input",32),P.Ob(65,"app-show-errors",20),P.Tb(66,"mat-hint"),P.Rc(67,"Mobile Number cannot be Greater than 10 Characters"),P.Sb(),P.Sb(),P.Tb(68,"mat-form-field",29),P.Tb(69,"mat-label"),P.Rc(70,"Email"),P.Sb(),P.Ob(71,"input",33),P.Ob(72,"app-show-errors",20),P.Tb(73,"mat-hint"),P.Rc(74,"Email cannot be Greater than 100"),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(75,"div",6),P.Tb(76,"div",28),P.Tb(77,"mat-form-field",29),P.Tb(78,"mat-label"),P.Rc(79,"DOB"),P.Sb(),P.Tb(80,"input",34),P.bc("click",(function(){return P.Ec(t),P.Ac(83).open()}))("focus",(function(){return P.Ec(t),P.Ac(83).open()})),P.Sb(),P.Ob(81,"mat-datepicker-toggle",35),P.Ob(82,"mat-datepicker",null,36),P.Sb(),P.Tb(84,"mat-form-field",29),P.Tb(85,"mat-label"),P.Rc(86,"Account Number"),P.Sb(),P.Ob(87,"input",37),P.Ob(88,"app-show-errors",20),P.Tb(89,"mat-hint"),P.Rc(90,"Please enter alphanumeric characters only."),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(91,"mat-tab",38),P.Tb(92,"fury-card-content",14),P.Tb(93,"div",39),P.Tb(94,"div",6),P.Tb(95,"button",40),P.bc("click",(function(){return e.addAddress()})),P.Tb(96,"mat-icon"),P.Rc(97,"add"),P.Sb(),P.Sb(),P.Tb(98,"div",28),P.Tb(99,"mat-form-field",29),P.Tb(100,"mat-label"),P.Rc(101,"Address Type"),P.Sb(),P.Ob(102,"input",41),P.Tb(103,"mat-autocomplete",17,42),P.bc("optionSelected",(function(t){return e.changeAddressType(t)})),P.Pc(105,st,2,2,"mat-option",19),P.Sb(),P.Ob(106,"app-show-errors",20),P.Sb(),P.Tb(107,"mat-form-field",29),P.Tb(108,"mat-label"),P.Rc(109,"City"),P.Sb(),P.Ob(110,"input",43),P.Ob(111,"app-show-errors",20),P.Sb(),P.Sb(),P.Sb(),P.Tb(112,"div",6),P.Tb(113,"div",28),P.Tb(114,"mat-form-field",29),P.Tb(115,"mat-label"),P.Rc(116,"Address 1"),P.Sb(),P.Ob(117,"input",44),P.Ob(118,"app-show-errors",20),P.Sb(),P.Tb(119,"mat-form-field",29),P.Tb(120,"mat-label"),P.Rc(121,"Postal Code"),P.Sb(),P.Ob(122,"input",45),P.Ob(123,"app-show-errors",20),P.Sb(),P.Sb(),P.Sb(),P.Tb(124,"div",6),P.Tb(125,"div",28),P.Tb(126,"mat-form-field",29),P.Tb(127,"mat-label"),P.Rc(128,"Address 2"),P.Sb(),P.Ob(129,"input",46),P.Ob(130,"app-show-errors",20),P.Sb(),P.Tb(131,"mat-form-field",29),P.Tb(132,"mat-label"),P.Rc(133,"Country"),P.Sb(),P.Tb(134,"input",47),P.bc("keyup",(function(){return e.getFilteredCountry()})),P.Sb(),P.Tb(135,"mat-autocomplete",17,48),P.bc("optionSelected",(function(){return e.enbaleAddressValidators()})),P.Pc(137,at,2,2,"mat-option",19),P.Sb(),P.Ob(138,"app-show-errors",20),P.Sb(),P.Sb(),P.Sb(),P.Tb(139,"div",6),P.Tb(140,"div",28),P.Tb(141,"mat-form-field",29),P.Tb(142,"mat-label"),P.Rc(143,"Secondary Email"),P.Sb(),P.Ob(144,"input",49),P.Ob(145,"app-show-errors",20),P.Sb(),P.Tb(146,"mat-form-field",29),P.Tb(147,"mat-label"),P.Rc(148,"Secondary Phone No"),P.Sb(),P.Ob(149,"input",50),P.Ob(150,"app-show-errors",20),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(151,"mat-tab",51),P.Tb(152,"fury-card-content",14),P.Tb(153,"div",39),P.Tb(154,"div",6),P.Tb(155,"div",28),P.Tb(156,"mat-form-field",29),P.Tb(157,"mat-label"),P.Rc(158,"Account Name"),P.Sb(),P.Ob(159,"input",52),P.Ob(160,"app-show-errors",20),P.Sb(),P.Tb(161,"mat-form-field",29),P.Tb(162,"mat-label"),P.Rc(163,"Bank Account Number"),P.Sb(),P.Ob(164,"input",53),P.Ob(165,"app-show-errors",20),P.Sb(),P.Sb(),P.Sb(),P.Tb(166,"div",6),P.Tb(167,"div",28),P.Tb(168,"mat-form-field",29),P.Tb(169,"mat-label"),P.Rc(170,"Bank Name"),P.Sb(),P.Ob(171,"input",54),P.Ob(172,"app-show-errors",20),P.Sb(),P.Tb(173,"mat-form-field",29),P.Tb(174,"mat-label"),P.Rc(175,"Bank Branch"),P.Sb(),P.Ob(176,"input",55),P.Ob(177,"app-show-errors",20),P.Sb(),P.Sb(),P.Sb(),P.Tb(178,"div",6),P.Tb(179,"div",28),P.Tb(180,"mat-form-field",29),P.Tb(181,"mat-label"),P.Rc(182,"Swift Code"),P.Sb(),P.Ob(183,"input",56),P.Ob(184,"app-show-errors",20),P.Sb(),P.Tb(185,"mat-form-field",29),P.Tb(186,"mat-label"),P.Rc(187,"IBAN"),P.Sb(),P.Ob(188,"input",57),P.Ob(189,"app-show-errors",20),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(190,"mat-tab",58),P.Tb(191,"fury-card-content",14),P.Tb(192,"div",59),P.Tb(193,"div",60),P.Tb(194,"div",61),P.Tb(195,"mat-form-field",62),P.Tb(196,"mat-label"),P.Rc(197,"Document Type"),P.Sb(),P.Ob(198,"input",63),P.Tb(199,"mat-autocomplete",17,64),P.bc("optionSelected",(function(t){return e.selectDocumentType(t)})),P.Pc(201,it,2,2,"mat-option",19),P.Sb(),P.Tb(202,"mat-hint",65),P.Rc(203),P.Sb(),P.Sb(),P.Tb(204,"button",66),P.bc("click",(function(){return e.createDocumentType()})),P.Tb(205,"mat-icon",67),P.Rc(206,"add"),P.Sb(),P.Sb(),P.Sb(),P.Tb(207,"div",68),P.Tb(208,"input",69,70),P.bc("change",(function(t){return e.selectDocument(t)})),P.Sb(),P.Tb(210,"span",71),P.bc("click",(function(){return e.uploadDocument()})),P.Rc(211,"UPLOAD"),P.Sb(),P.Sb(),P.Sb(),P.Pc(212,ot,2,1,"mat-hint",26),P.Sb(),P.Tb(213,"table",72),P.Rb(214,73),P.Pc(215,nt,2,0,"th",74),P.Pc(216,rt,2,0,"td",75),P.Qb(),P.Rb(217,76),P.Pc(218,ct,1,0,"th",77),P.Pc(219,lt,2,1,"td",78),P.Qb(),P.Rb(220,79),P.Tb(221,"th"),P.Rc(222,"Action"),P.Sb(),P.Pc(223,dt,3,0,"td",75),P.Qb(),P.Pc(224,pt,2,1,"ng-container",80),P.Rb(225,81),P.Pc(226,ht,2,0,"th",82),P.Pc(227,ft,3,1,"td",83),P.Qb(),P.Rb(228,84),P.Pc(229,gt,2,0,"th",74),P.Pc(230,Tt,3,0,"td",85),P.Qb(),P.Pc(231,St,1,0,"tr",86),P.Pc(232,yt,1,0,"tr",87),P.Sb(),P.Sb(),P.Sb(),P.Pc(233,Et,40,11,"mat-tab",88),P.Sb(),P.Sb(),P.Sb(),P.Tb(234,"mat-dialog-actions",89),P.Tb(235,"button",90),P.bc("click",(function(){return e.closeDialog()})),P.Rc(236,"CANCEL"),P.Sb(),P.Tb(237,"button",91),P.Rc(238,"UPDATE OWNER/TENANT"),P.Sb(),P.Sb(),P.Sb()}if(2&t){const t=P.Ac(33),s=P.Ac(83),a=P.Ac(104),i=P.Ac(136),o=P.Ac(200);P.Cb(8),P.mc("formGroup",e.form),P.Cb(5),P.mc("checked",e.isCompanySelected),P.Cb(2),P.mc("checked",e.isOwner),P.Cb(2),P.mc("checked",e.isLoginEnabled),P.Cb(4),P.mc("ngIf",e.isCompanySelected),P.Cb(1),P.mc("ngIf",e.isCompanySelected),P.Cb(9),P.mc("matAutocomplete",t),P.Cb(3),P.mc("ngForOf",e.filteredTitles),P.Cb(1),P.mc("ctrl",null==e.form?null:e.form.get("title")),P.Cb(4),P.nc("src",e.image,P.Gc),P.Cb(3),P.mc("ngIf",0==e.isUploadSuccess),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.get("firstName")),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.get("lastName")),P.Cb(9),P.mc("ctrl",null==e.form?null:e.form.get("mobile")),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.get("email")),P.Cb(8),P.mc("max",e.myDate)("matDatepicker",s),P.Cb(1),P.mc("for",s),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.get("accountNumber")),P.Cb(5),P.mc("formGroup",null==e.form?null:e.form.controls.address),P.Cb(9),P.mc("matAutocomplete",a),P.Cb(3),P.mc("ngForOf",e.filteredAddressTypes),P.Cb(1),P.mc("ctrl",null==e.form?null:e.form.controls.address.get("addressType")),P.Cb(5),P.mc("ctrl",null==e.form?null:e.form.controls.address.get("city")),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.controls.address.get("address1")),P.Cb(5),P.mc("ctrl",null==e.form?null:e.form.controls.address.get("zipPostalCode")),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.controls.address.get("address2")),P.Cb(4),P.mc("matAutocomplete",i),P.Cb(3),P.mc("ngForOf",e.filteredCountries),P.Cb(1),P.mc("ctrl",null==e.form?null:e.form.controls.address.get("country")),P.Cb(7),P.mc("ctrl",e.form.controls.address.get("email")),P.Cb(5),P.mc("ctrl",e.form.controls.address.get("phoneNumber")),P.Cb(3),P.mc("formGroup",null==e.form?null:e.form.controls.bank),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.controls.bank.get("accountName")),P.Cb(5),P.mc("ctrl",null==e.form?null:e.form.controls.bank.get("accountNo")),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.controls.bank.get("bankName")),P.Cb(5),P.mc("ctrl",null==e.form?null:e.form.controls.bank.get("bankAddress")),P.Cb(7),P.mc("ctrl",null==e.form?null:e.form.controls.bank.get("swiftCode")),P.Cb(5),P.mc("ctrl",null==e.form?null:e.form.controls.bank.get("ibanNumber")),P.Cb(9),P.mc("matAutocomplete",o),P.Cb(3),P.mc("ngForOf",e.filteredDocumentTypes),P.Cb(2),P.Sc(e.documentName),P.Cb(7),P.mc("ngClass",""!==e.form.controls.documentType.value&&""==e.documentName&&e.selectedDocument?"uploadButton":"uploadButtonDisabled"),P.Cb(2),P.mc("ngIf",0==e.isDocumentUploadSuccess),P.Cb(1),P.mc("dataSource",e.dataSource),P.Cb(11),P.mc("ngForOf",e.columns),P.Cb(7),P.mc("matHeaderRowDef",e.visibleColumns),P.Cb(1),P.mc("matRowDefColumns",e.visibleColumns),P.Cb(1),P.mc("ngIf",!1),P.Cb(4),P.mc("disabled",!e.form.valid||""!=e.duplicateTRN)}},directives:[p.i,U.a,E.a,$.a,z.c,i.z,i.r,i.k,p.f,L.a,F.d,V.a,i.q,i.i,a.o,j.b,j.a,L.c,B.d,F.b,B.h,G.b,i.c,Q.c,Q.a,a.n,H.a,F.e,i.m,B.g,_.b,_.d,B.j,_.a,a.m,q.a,b.j,d.a,b.c,b.e,b.b,b.g,b.i,p.c,F.c,i.u,K.n,b.d,J.a,b.a,d.b,b.f,b.h],styles:[".companyName[_ngcontent-%COMP%]{margin-top:10px;margin-right:24px}.document[_ngcontent-%COMP%]{width:50%;display:flex}.titleSelector[_ngcontent-%COMP%]{margin-top:auto;margin-right:24px}.selectDocument[_ngcontent-%COMP%]{width:inherit;margin-right:30px;align-self:center;padding:3px 15px;overflow:hidden}.errorMessage[_ngcontent-%COMP%]{color:red;font-size:smaller;width:330px;margin-left:24px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.uploadButton[_ngcontent-%COMP%]{align-self:center;padding:5px 15px;border:1px solid grey;border-radius:3px;box-shadow:1px 1px 1px grey;cursor:pointer}.uploadButtonDisabled[_ngcontent-%COMP%]{align-self:center;padding:5px 15px;border:1px solid rgba(0,0,0,.26);border-radius:3px;box-shadow:1px 1px 1px rgba(0,0,0,.26);color:rgba(0,0,0,.26)}mat-slide-toggle[_ngcontent-%COMP%]{padding-right:10px}.profile[_ngcontent-%COMP%]{width:50%;display:flex}.profileImage[_ngcontent-%COMP%]{height:100px;margin-left:24px;margin-right:10px;padding:10px}.profileButton[_ngcontent-%COMP%]{align-self:center;padding:3px 15px}.under-line[_ngcontent-%COMP%]{text-decoration:underline}.deleteIcon[_ngcontent-%COMP%], .under-line[_ngcontent-%COMP%]{cursor:pointer}.duplicateMessage[_ngcontent-%COMP%]{color:red;font-size:small}.duplicate[_ngcontent-%COMP%]{color:red}.task-header[_ngcontent-%COMP%]{background-color:transparent;padding:0 5px;height:20px}.fx-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t})();var zt=s("Ku73"),Lt=s("nStZ"),Ft=s("+Kgr"),Vt=s("a8hA"),jt=s("xBcV"),Bt=s("Hbgg"),Gt=s("rnAf"),Qt=s("rvYj"),Ht=s("a+RD"),_t=s("STbY");function qt(t,e){if(1&t){const t=P.Ub();P.Tb(0,"th",16),P.Tb(1,"mat-checkbox",17),P.bc("click",(function(e){return P.Ec(t),e.stopPropagation()})),P.Sb(),P.Sb()}}function Kt(t,e){if(1&t){const t=P.Ub();P.Tb(0,"td",18),P.Tb(1,"mat-checkbox",17),P.bc("click",(function(e){return P.Ec(t),e.stopPropagation()})),P.Sb(),P.Sb()}}function Jt(t,e){1&t&&P.Ob(0,"th",19)}function Xt(t,e){if(1&t&&(P.Tb(0,"td",20),P.Ob(1,"img",21),P.Sb()),2&t){const t=e.$implicit;P.Cb(1),P.oc("src","http://i.pravatar.cc/30?u=",t.name,"",P.Gc)}}function Yt(t,e){if(1&t&&(P.Tb(0,"th",26),P.Rc(1),P.Sb()),2&t){const t=P.fc(2).$implicit;P.Cb(1),P.Tc(" ",t.name,"")}}function Wt(t,e){if(1&t&&(P.Tb(0,"td",27),P.Rc(1),P.Sb()),2&t){const t=e.$implicit,s=P.fc(2).$implicit;P.Cb(1),P.Tc(" ",t[s.property]," ")}}function Zt(t,e){if(1&t&&(P.Rb(0,23),P.Pc(1,Yt,2,1,"th",24),P.Pc(2,Wt,2,1,"td",25),P.Qb()),2&t){const t=P.fc().$implicit;P.mc("matColumnDef",t.property)}}function te(t,e){if(1&t&&(P.Rb(0),P.Pc(1,Zt,3,1,"ng-container",22),P.Qb()),2&t){const t=e.$implicit;P.Cb(1),P.mc("ngIf",t.isModelProperty)}}function ee(t,e){1&t&&P.Ob(0,"th",28)}function se(t,e){if(1&t){const t=P.Ub();P.Tb(0,"td",18),P.Tb(1,"button",29),P.bc("click",(function(e){return P.Ec(t),e.stopPropagation()})),P.Tb(2,"mat-icon"),P.Rc(3,"more_horiz"),P.Sb(),P.Sb(),P.Tb(4,"mat-menu",30,31),P.Tb(6,"button",32),P.bc("click",(function(){P.Ec(t);const s=e.$implicit;return P.fc().updateOwner(s)})),P.Tb(7,"span"),P.Rc(8,"Modify"),P.Sb(),P.Sb(),P.Tb(9,"button",32),P.bc("click",(function(){P.Ec(t);const s=e.$implicit;return P.fc().deleteOwner(s)})),P.Tb(10,"span"),P.Rc(11,"Delete"),P.Sb(),P.Sb(),P.Sb(),P.Sb()}if(2&t){const t=P.Ac(5);P.Cb(1),P.mc("matMenuTriggerFor",t)}}function ae(t,e){1&t&&P.Ob(0,"tr",33)}function ie(t,e){if(1&t){const t=P.Ub();P.Tb(0,"tr",34),P.bc("click",(function(){P.Ec(t);const s=e.$implicit;return P.fc().updateOwner(s)})),P.Sb()}}const oe=function(){return[]},ne=[{path:"",component:(()=>{class t{constructor(t,e,s,a,i,o,n){this.dialog=t,this.ownerService=e,this.snackbar=s,this.router=a,this.authenticationService=i,this.clientSelectionService=o,this.cookieService=n,this.subject$=new m.a(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Owner Name",property:"ownerName",visible:!0,isModelProperty:!0},{name:"Mobile",property:"mobile",visible:!0,isModelProperty:!0},{name:"Email",property:"email",visible:!0,isModelProperty:!0},{name:"Tenant/Owner",property:"entityType",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=8}set content(t){this.sort=t,this.sort&&(this.dataSource.sort=this.sort)}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}ngOnInit(){this.clientSelectionService.setIsClientVisible(!0),this.getAllOwners()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}updateOwner(t){this.dialog.open($t,{data:t}).afterClosed().subscribe(t=>{t&&(!t.userId&&t.userDetails?this.authenticationService.register(t.userDetails,t.clientId).subscribe(e=>{e&&(t.userId=e.id,this.updateOwnerDetails(t))}):this.updateOwnerDetails(t))}),this.getAllOwners()}updateOwnerDetails(t){this.ownerService.updateOwnerById(t.id,t).subscribe({next:t=>{this.snackbar.open("Successfully moved to Owner-Tenant",null,{duration:5e3,verticalPosition:"top",horizontalPosition:"center",panelClass:["green-snackbar"]}),this.getAllOwners()},error:t=>{this.notificationMessage("Newly Registered Owner/Tenant updation failed","red-snackbar")}})}deleteOwner(t){this.dialog.open(x.a).afterClosed().subscribe(e=>{e&&this.ownerService.deleteOwnerById(t.id).subscribe({next:()=>{this.getAllOwners()},error:t=>{this.notificationMessage("Newly Registered Owner/Tenant deletion failed","red-snackbar")}})})}onFilterChange(t){this.dataSource&&(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}notificationMessage(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}getAllOwners(){this.clientId=parseInt(this.cookieService.get("globalClientId")),this.ownerService.getNewlyRegisteredUsers(this.clientId).subscribe({next:t=>{t=t.map(t=>new h.a(t)),this.subject$.next(t)},error:t=>{this.notificationMessage("Newly Registered Owner/Tenant Not Found.","green-snackbar")}}),this.dataSource=new b.k,this.data$.pipe(Object(u.a)(t=>!!t)).subscribe(t=>{this.owners=t,this.dataSource.data=t}),this.ngAfterViewInit()}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(P.Nb(p.b),P.Nb(C.a),P.Nb(A.b),P.Nb(c.f),P.Nb(Ft.a),P.Nb(Vt.a),P.Nb(M.a))},t.\u0275cmp=P.Hb({type:t,selectors:[["fury-create-owner-registered"]],viewQuery:function(t,e){var s;1&t&&(P.Jc(l.a,!0),P.Vc(d.a,!0)),2&t&&(P.zc(s=P.cc())&&(e.paginator=s.first),P.zc(s=P.cc())&&(e.content=s.first))},inputs:{columns:"columns"},decls:19,vars:10,consts:[["mode","card"],["current","Newly Registered Users",3,"crumbs"],["name","Newly Registered Users",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["matColumnDef","image"],["class","image-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","image-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],["mat-header-cell","",1,"image-cell"],["mat-cell","",1,"image-cell"],[3,"src"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(t,e){1&t&&(P.Tb(0,"fury-page-layout",0),P.Tb(1,"fury-page-layout-header"),P.Ob(2,"fury-breadcrumbs",1),P.Sb(),P.Tb(3,"fury-page-layout-content"),P.Tb(4,"fury-list",2),P.bc("filterChange",(function(t){return e.onFilterChange(t)})),P.Tb(5,"table",3),P.Rb(6,4),P.Pc(7,qt,2,0,"th",5),P.Pc(8,Kt,2,0,"td",6),P.Qb(),P.Rb(9,7),P.Pc(10,Jt,1,0,"th",8),P.Pc(11,Xt,2,1,"td",9),P.Qb(),P.Pc(12,te,2,1,"ng-container",10),P.Rb(13,11),P.Pc(14,ee,1,0,"th",12),P.Pc(15,se,12,1,"td",6),P.Qb(),P.Pc(16,ae,1,0,"tr",13),P.Pc(17,ie,1,0,"tr",14),P.Sb(),P.Ob(18,"mat-paginator",15),P.Sb(),P.Sb(),P.Sb()),2&t&&(P.Cb(2),P.mc("@fadeInRight",void 0)("crumbs",P.qc(9,oe)),P.Cb(1),P.mc("@fadeInUp",void 0),P.Cb(1),P.mc("columns",e.columns),P.Cb(1),P.mc("dataSource",e.dataSource),P.Cb(7),P.mc("ngForOf",e.columns),P.Cb(4),P.mc("matHeaderRowDef",e.visibleColumns),P.Cb(1),P.mc("matRowDefColumns",e.visibleColumns),P.Cb(1),P.mc("pageSize",e.pageSize))},directives:[jt.a,Bt.a,Gt.a,Qt.a,Ht.a,b.j,d.a,b.c,b.e,b.b,a.n,b.g,b.i,l.a,b.d,J.a,b.a,a.o,d.b,E.a,_t.d,$.a,_t.e,_t.b,b.f,b.h],styles:[""],data:{animation:[zt.a,Lt.a]}}),t})()}];let re=(()=>{class t{}return t.\u0275mod=P.Lb({type:t}),t.\u0275inj=P.Kb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(ne)],c.j]}),t})();var ce=s("YUcS"),le=s("VE2z"),de=s("QibW"),be=s("d3UM"),me=s("GiUZ"),ue=s("VY/7"),pe=s("WCGO"),he=s("2+hO"),fe=s("jJIU");let ge=(()=>{class t{}return t.\u0275mod=P.Lb({type:t}),t.\u0275inj=P.Kb({factory:function(e){return new(e||t)},imports:[[a.c,i.l,le.a,pe.a,n.a,i.w,ce.a,r.a,p.g,G.c,E.b,$.b,de.c,be.b,j.c,me.a,ue.a,he.a,fe.a]]}),t})(),Te=(()=>{class t{}return t.\u0275mod=P.Lb({type:t}),t.\u0275inj=P.Kb({factory:function(e){return new(e||t)},imports:[[a.c,re,i.l,i.w,r.a,pe.a,n.a,ge,o.a]]}),t})()}}]);