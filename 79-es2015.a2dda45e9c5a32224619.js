(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"22jQ":function(t,e,o){var s,i,n;n=function(t){function e(t,e,o,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,o))}e(t=t?t._modules:{},"Series/SolidGaugeSeries.js",[t["Core/Series/Series.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Mixins/LegendSymbol.js"],t["Core/Utilities.js"]],(function(t,e,o,s,i){var n,a=e.parse,r=i.clamp,c=i.extend,l=i.isNumber,h=i.merge,p=i.pick,u=i.pInt;return(e=i.wrap)(o.Renderer.prototype.symbols,"arc",(function(t,e,o,s,i,n){return t=t(e,o,s,i,n),n.rounded&&(s=((n.r||s)-(n.innerR||0))/2,n=t[2],"M"===(e=t[0])[0]&&"L"===n[0]&&(e=["A",s,s,0,1,1,e[1],e[2]],t[2]=["A",s,s,0,1,1,n[1],n[2]],t[4]=e)),t})),function(t){var e={initDataClasses:function(t){var e,o=this.chart,s=0,i=this.options;this.dataClasses=e=[],t.dataClasses.forEach((function(n,r){n=h(n),e.push(n),n.color||("category"===i.dataClassColor?(n.color=(r=o.options.colors)[s++],s===r.length&&(s=0)):n.color=a(i.minColor).tweenTo(a(i.maxColor),r/(t.dataClasses.length-1)))}))},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],this.stops.forEach((function(t){t.color=a(t[1])}))},toColor:function(t,e){var o,s=this.stops,i=this.dataClasses;if(i)for(o=i.length;o--;){var n=i[o],a=n.from;if(s=n.to,(void 0===a||t>=a)&&(void 0===s||t<=s)){var r=n.color;e&&(e.dataClass=o);break}}else{for(this.logarithmic&&(t=this.val2lin(t)),t=1-(this.max-t)/(this.max-this.min),o=s.length;o--&&!(t>s[o][0]););r=(a=s[o]||s[o+1]).color.tweenTo((s=s[o+1]||a).color,t=1-(s[0]-t)/(s[0]-a[0]||1))}return r}};t.init=function(t){c(t,e)}}(n||(n={})),t.seriesType("solidgauge","gauge",{colorByPoint:!0,dataLabels:{y:0}},{drawLegendSymbol:s.drawRectangle,translate:function(){var t=this.yAxis;n.init(t),!t.dataClasses&&t.options.dataClasses&&t.initDataClasses(t.options),t.initStops(t.options),o.seriesTypes.gauge.prototype.translate.call(this)},drawPoints:function(){var t,e=this,o=e.yAxis,s=o.center,i=e.options,n=e.chart.renderer,a=i.overshoot,h=l(a)?a/180*Math.PI:0;l(i.threshold)&&(t=o.startAngleRad+o.translate(i.threshold,null,null,null,!0)),this.thresholdAngleRad=p(t,o.startAngleRad),e.points.forEach((function(t){if(!t.isNull){var a=t.graphic,l=o.startAngleRad+o.translate(t.y,null,null,null,!0),d=u(p(t.options.radius,i.radius,100))*s[2]/200,g=u(p(t.options.innerRadius,i.innerRadius,60))*s[2]/200,C=o.toColor(t.y,t),m=Math.min(o.startAngleRad,o.endAngleRad),b=Math.max(o.startAngleRad,o.endAngleRad);"none"===C&&(C=t.color||e.color||"none"),"none"!==C&&(t.color=C),l=r(l,m-h,b+h),!1===i.wrap&&(l=r(l,m,b)),m=Math.min(l,e.thresholdAngleRad),(l=Math.max(l,e.thresholdAngleRad))-m>2*Math.PI&&(l=m+2*Math.PI),t.shapeArgs=g={x:s[0],y:s[1],r:d,innerR:g,start:m,end:l,rounded:i.rounded},t.startR=d,a?(d=g.d,a.animate(c({fill:C},g)),d&&(g.d=d)):t.graphic=a=n.arc(g).attr({fill:C,"sweep-flag":0}).add(e.group),e.chart.styledMode||("square"!==i.linecap&&a.attr({"stroke-linecap":"round","stroke-linejoin":"round"}),a.attr({stroke:i.borderColor||"none","stroke-width":i.borderWidth||0})),a&&a.addClass(t.getClassName(),!0)}}))},animate:function(t){t||(this.startAngleRad=this.thresholdAngleRad,o.seriesTypes.pie.prototype.animate.call(this,t))}}),n})),e(t,"masters/modules/solid-gauge.src.js",[],(function(){}))},t.exports?(n.default=n,t.exports=n):(s=[o("6n/F"),o("M8aS")],void 0===(i=(function(t){return n(t),n.Highcharts=t,n}).apply(e,s))||(t.exports=i))},zRPS:function(t,e,o){"use strict";o.r(e),o.d(e,"EmsDashboardModule",(function(){return wt}));var s=o("ofXK"),i=o("3Pt+"),n=o("tyNb"),a=o("Ku73"),r=o("nStZ"),c=o("JX19"),l=o("6n/F"),h=o("rjUY"),p=o.n(h),u=o("22jQ"),d=o.n(u),g=o("Z9Wc"),C=o.n(g),m=o("jtHE"),b=o("1Z3b"),f=o("cFdI"),y=o("+0xr"),x=o("Dh3D"),w=o("pLZG"),v=o("KHMF"),S=o("sXtk"),T=o("fXoL"),P=o("dNgK"),O=o("Nm8O"),M=o("b6Qw"),L=o("xBcV"),E=o("rvYj"),_=o("XiUz"),k=o("jaxi"),D=o("Wp6s"),R=o("NFeN"),F=o("Qu3c");function G(t,e){if(1&t&&(T.Tb(0,"mat-button-toggle",38),T.Rc(1),T.Sb()),2&t){const t=e.$implicit,o=e.index;T.nc("id",t),T.nc("value",t),T.mc("checked",0===o),T.Cb(1),T.Sc(t)}}function I(t,e){if(1&t&&(T.Tb(0,"span",39),T.Rc(1),T.Sb()),2&t){const t=T.fc();T.Cb(1),T.Tc(" ",t.currentCostGain,"% ")}}function W(t,e){if(1&t&&(T.Tb(0,"span",40),T.Rc(1),T.Sb()),2&t){const t=T.fc();T.Cb(1),T.Tc(" ",t.currentCostGain,"% ")}}function j(t,e){if(1&t&&(T.Tb(0,"mat-icon",41),T.Rc(1,"arrow_upward"),T.Sb()),2&t){const t=T.fc();T.nc("matTooltip",t.toolTip)}}function z(t,e){if(1&t&&(T.Tb(0,"mat-icon",42),T.Rc(1,"arrow_downward"),T.Sb()),2&t){const t=T.fc();T.nc("matTooltip",t.toolTip)}}function N(t,e){if(1&t&&(T.Tb(0,"span",39),T.Rc(1),T.Sb()),2&t){const t=T.fc();T.Cb(1),T.Tc(" ",t.previousCostGain,"% ")}}function A(t,e){if(1&t&&(T.Tb(0,"span",40),T.Rc(1),T.Sb()),2&t){const t=T.fc();T.Cb(1),T.Tc(" ",t.previousCostGain,"% ")}}function V(t,e){if(1&t&&(T.Tb(0,"mat-icon",41),T.Rc(1,"arrow_upward"),T.Sb()),2&t){const t=T.fc();T.nc("matTooltip",t.toolTip)}}function Y(t,e){if(1&t&&(T.Tb(0,"mat-icon",42),T.Rc(1,"arrow_downward"),T.Sb()),2&t){const t=T.fc();T.nc("matTooltip",t.toolTip)}}function H(t,e){if(1&t&&(T.Tb(0,"span",39),T.Rc(1),T.Sb()),2&t){const t=T.fc();T.Cb(1),T.Tc(" ",t.forecastCostGain,"% ")}}function B(t,e){if(1&t&&(T.Tb(0,"span",40),T.Rc(1),T.Sb()),2&t){const t=T.fc();T.Cb(1),T.Tc(" ",t.forecastCostGain,"% ")}}function $(t,e){1&t&&(T.Tb(0,"mat-icon",43),T.Rc(1,"arrow_upward"),T.Sb())}function Q(t,e){1&t&&(T.Tb(0,"mat-icon",44),T.Rc(1,"arrow_downward"),T.Sb())}function U(t,e){if(1&t&&(T.Tb(0,"th",49),T.Rc(1),T.Sb()),2&t){const t=T.fc(2).$implicit;T.Cb(1),T.Tc(" ",t.name,"")}}function K(t,e){if(1&t&&(T.Tb(0,"td",50),T.Rc(1),T.Sb()),2&t){const t=e.$implicit,o=T.fc(2).$implicit;T.Cb(1),T.Tc(" ",t[o.property]," ")}}function q(t,e){if(1&t&&(T.Rb(0,46),T.Pc(1,U,2,1,"th",47),T.Pc(2,K,2,1,"td",48),T.Qb()),2&t){const t=T.fc().$implicit;T.mc("matColumnDef",t.property)}}function J(t,e){if(1&t&&(T.Rb(0),T.Pc(1,q,3,1,"ng-container",45),T.Qb()),2&t){const t=e.$implicit;T.Cb(1),T.mc("ngIf",t.isModelProperty)}}function X(t,e){1&t&&(T.Tb(0,"th",51),T.Rc(1,"Consumption"),T.Sb())}function Z(t,e){if(1&t&&(T.Tb(0,"td",52),T.Rc(1),T.Sb()),2&t){const t=e.$implicit;T.Cb(1),T.Tc(" ",t.currentConsumption," ")}}function tt(t,e){1&t&&(T.Tb(0,"th",51),T.Rc(1,"Difference"),T.Sb())}function et(t,e){if(1&t&&(T.Tb(0,"td",52),T.Rc(1),T.Sb()),2&t){const t=e.$implicit;T.Cb(1),T.Tc(" ",t.consumptionDifference,"% ")}}function ot(t,e){1&t&&T.Ob(0,"th",51)}function st(t,e){1&t&&(T.Tb(0,"mat-icon",39),T.Rc(1,"arrow_upward"),T.Sb())}function it(t,e){1&t&&(T.Tb(0,"mat-icon",40),T.Rc(1,"arrow_downward"),T.Sb())}function nt(t,e){if(1&t&&(T.Tb(0,"td",52),T.Pc(1,st,2,0,"mat-icon",12),T.Pc(2,it,2,0,"mat-icon",13),T.Sb()),2&t){const t=e.$implicit;T.Cb(1),T.mc("ngIf",1==t.status),T.Cb(1),T.mc("ngIf",0==t.status)}}function at(t,e){1&t&&T.Ob(0,"tr",53)}function rt(t,e){1&t&&T.Ob(0,"tr",54)}C()(l),p()(l),d()(l),o("Tos5")(l);const ct=[{path:"",component:(()=>{class t{constructor(t,e,o,s,i,n,a){var r;this.emsDashboardService=t,this.snackbar=e,this.generalDashBoardService=o,this.dashBoardService=s,this.jwtHelperService=i,this.cookieService=n,this.envService=a,this.subject$=new m.a(1),this.data$=this.subject$.asObservable(),this.displayedColumns=[{name:"Group Name",property:"groupName",visible:!0,isModelProperty:!0},{name:"Consumption",property:"currentConsumption",visible:!0,isModelProperty:!1},{name:"Difference",property:"consumptionDifference ",visible:!0,isModelProperty:!1},{name:" ",property:"status",visible:!0,isModelProperty:!1}],this.pageSize=8,this.columnsProps=this.displayedColumns.map(t=>t.property),this.showSpinner=!1,this.role="",this.energyCostComparison=[],this.costComparisonChart=[],this.currentEnergyCost=0,this.previousEnergyCost=0,this.forecastEnergyCost=0,this.lastPreviousTotalCost=0,this.previousforecastTotalCost=0,this.consumptionData=[],this.consumptionChartData=[],this.consumptionSeriesData=[],this.lineChartOptions={},this.btuConsumptionData=[],this.electricityConsumptionData=[],this.waterConsumptionData=[],this.gasConsumptionData=[],this.frequency=["Daily","Weekly","Monthly","Yearly"],this.meterTypes=[],this.costLabelComparison="",this.previousCostLabelComparison="",this.forecastCostLabelComparison="",this.isPreviousCostGain=!1,this.isCurrentCostGain=!1,this.isForecastCostGain=!1,this.currentCostGain=0,this.previousCostGain=0,this.forecastCostGain=0,this.noStackData=!0,this._gap=16,this.gap=this._gap+"px",this.col2=`1 1 calc(50% - ${this._gap/2}px)`,this.col3=`1 1 calc(33.3333% - ${this._gap/1.5}px)`,this.gaugeChartOptions={},this.solidgaugeChartoptions={},this.data=[80],this.clientId="0",this.pieChartOptions={},this.utilityTypeDatas=[],this.electricityConsumption="",this.btuConsumption="",this.waterConsumption="",this.gasConsumption="",this.electricityYesterdayConsumption="",this.btuYesterdayConsumption="",this.waterYesterdayConsumption="",this.gasYesterdayConsumption="",this.electricityForecastConsumption="",this.btuForecastConsumption="",this.waterForecastConsumption="",this.gasForecastConsumption="",this.electricityCost="",this.btuCost="",this.waterCost="",this.gasCost="",this.electricityYesterdayCost="",this.btuYesterdayCost="",this.waterYesterdayCost="",this.gasYesterdayCost="",this.electricityForecastCost="",this.btuForecastCost="",this.waterForecastCost="",this.gasForecastCost="",this.electricityMeterCount="",this.btuMeterCount="",this.waterMeterCount="",this.gasMeterCount="",this.consumptionLabel="",this.previousConsumptionLabel="",this.forecastConsumptionLabel="",this.costLabel="",this.previousCostLabel="",this.forecastCostLabel="",this.currency="",this.estidamaChart={},this.countStats=[],this.currentChartFileName="",this.previousChartFileName="",this.forecastChartFileName="",this.currency=null!==(r=Object(v.e)("Currency"))&&void 0!==r?r:a.currencyFormat}get visibleColumns(){return this.displayedColumns.filter(t=>t.visible).map(t=>t.property)}set content(t){this.sort=t,this.sort&&this.dataSource&&(this.dataSource.sort=this.sort)}ngOnInit(){this.cookieService.set("ownerId","0"),this.getClientId(),this.currentChartFileName="assets/img/Green.png",this.previousChartFileName="assets/img/Yellow.png",this.forecastChartFileName="assets/img/Blue.png",this.getUtilities(),this.selectedValue="Daily",this.setConsumptionLables()}getClientId(){let t=this.cookieService.get("access_token");const e=this.jwtHelperService.decodeToken(t);if(e&&(this.role=e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]),this.role&&"ems"==this.role.toLowerCase()){const t=this.cookieService.get("filterData");if(t){let e=JSON.parse(t);this.clientId=""==e.strClientId?"0":e.strClientId}}else this.clientId=this.cookieService.get("globalClientId")}getEnergyCost(){this.showSpinner=!1;let t={chartName:"",chartValues:[],percentage:[]};this.energyCostComparison=[],this.costComparisonChart=[];let e=[];this.currentEnergyCost=0,this.previousEnergyCost=0,this.forecastEnergyCost=0,this.lastPreviousTotalCost=0,this.currentCostGain=0,this.previousCostGain=0,this.forecastCostGain=0,this.isCurrentCostGain=!1,this.isPreviousCostGain=!1,this.isForecastCostGain=!1,this.pieChartOptions=this.setPieChart(t);let o=document.getElementById("gdcontainer3");o&&l.chart("gdcontainer3",this.pieChartOptions),this.stackedBarChartOptions=this.setStackedCostComparisonChart(this.energyCostComparison,this.costComparisonChart);let s=document.getElementById("gdcontainer5");if(s&&l.chart("gdcontainer5",this.stackedBarChartOptions),this.meterTypes&&this.meterTypes.length>0){let i=this.meterTypes.join(",");this.emsDashboardService.getGroupWiseEnergyCost(this.clientId,i,this.selectedValue).subscribe({next:i=>{i?(this.groupWiseEnergyCost=i,this.showSpinner=!1,this.currentEnergyCost=this.groupWiseEnergyCost.currentTotalCost,this.previousEnergyCost=this.groupWiseEnergyCost.previousTotalCost,this.forecastEnergyCost=this.groupWiseEnergyCost.forecastTotalCost,this.lastPreviousTotalCost=this.groupWiseEnergyCost.lastPreviousTotalCost,this.currentCostGain=this.groupWiseEnergyCost.currentCostGain,this.previousCostGain=this.groupWiseEnergyCost.previousCostGain,this.forecastCostGain=this.groupWiseEnergyCost.forecastCostGain,this.isCurrentCostGain=this.currentCostGain>0,this.isPreviousCostGain=this.previousCostGain>0,this.isForecastCostGain=this.forecastCostGain>0,t.chartValues=[],this.groupWiseEnergyCost.currentEnergyCost.forEach(e=>{t.chartValues.push([e.utilityType,e.currentConsumption])}),this.pieChartOptions=this.setPieChart(t),o=document.getElementById("gdcontainer3"),o&&l.chart("gdcontainer3",this.pieChartOptions),this.groupWiseEnergyCost=this.groupWiseEnergyCost.groupWiseEnergyCost,this.groupWiseEnergyCost.forEach(t=>{t.currentConsumption=t.currentConsumption+t.unit,t.costDifference=null==t.costDifference?"0":t.costDifference}),this.dataSource=new y.k(this.groupWiseEnergyCost),this.subject$.next(this.groupWiseEnergyCost),this.dataSource=new y.k(this.groupWiseEnergyCost),this.data$.pipe(Object(w.a)(t=>!!t)).subscribe(t=>{this.groupWiseEnergyCost=t,this.dataSource.data=t}),this.energyCostComparison.push(i.previousEnergyCost),this.energyCostComparison.push(i.currentEnergyCost),this.costComparisonChart=[],this.meterTypes.forEach(t=>{this.energyCostComparison.forEach(e=>{e.forEach(e=>{e.utilityType==t&&this.costComparisonChart.push(e.currentConsumption)})}),e.push({name:t,data:this.costComparisonChart}),this.costComparisonChart=[]}),this.stackedBarChartOptions=this.setStackedCostComparisonChart(this.energyCostComparison,e),s=document.getElementById("gdcontainer5"),s&&l.chart("gdcontainer5",this.stackedBarChartOptions)):this.showSpinner=!1},error:t=>{this.showSpinner=!1}}),this.ngAfterViewInit()}else this.showSpinner=!1}getUtilities(){this.generalDashBoardService.getUtilities(this.clientId).subscribe(t=>{t&&(this.meterTypes=[],t.forEach(t=>{this.meterTypes.push(t.description),this.meterTypes.sort((t,e)=>e.localeCompare(t)).reverse()}),this.getConsumptionData(),this.getEnergyCost())})}notificationMessage(t,e){this.snackbar.open(t,null,{duration:5e3,verticalPosition:"top",horizontalPosition:"end",panelClass:[e]})}getGroupWiseEnergyCost(){this.groupWiseEnergyCost=[];let t=this.meterTypes.join(",");this.emsDashboardService.getGroupWiseEnergyCost(this.clientId,t,this.selectedValue).subscribe({next:t=>{this.groupWiseEnergyCost=t.GroupWiseEnergyCost,this.groupWiseEnergyCost.forEach(t=>{t.currentCost=this.currency+" "+t.currentCost,t.costDifference=null==t.costDifference?"0%":t.costDifference}),this.dataSource=new y.k(this.groupWiseEnergyCost),this.subject$.next(this.groupWiseEnergyCost)},error:t=>{this.notificationMessage("Group-Wise Energy Cost Not Found.","red-snackbar")}}),this.dataSource=new y.k(this.groupWiseEnergyCost),this.data$.pipe(Object(w.a)(t=>!!t)).subscribe(t=>{this.groupWiseEnergyCost=t,this.dataSource.data=t}),this.ngAfterViewInit()}ngAfterViewInit(){null!=this.dataSource&&(this.dataSource.sort=this.sort)}getConsumptionData(){this.showSpinner=!1,this.consumptionData=[];let t=[],e=0;this.consumptionChartData=[],this.consumptionSeriesData=[],this.lineChartOptions=this.setLineChart(t,this.consumptionChartData,this.consumptionSeriesData);let o=document.getElementById("gdcontainer2");o&&l.chart("gdcontainer2",this.lineChartOptions);let s=this.meterTypes.join(","),i=["#1fd286","#1e5eff","#ffda44","#d80027","#808080","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"];this.meterTypes&&this.meterTypes.length>0?this.emsDashboardService.getConsumptionData(this.clientId,s,this.selectedValue).subscribe({next:s=>{if(s){this.showSpinner=!1;let n=s;this.consumptionData=n.consumptionData,this.consumptionData.forEach(t=>{this.consumptionChartData.push({labels:{format:"{value}"+t.unit,style:{color:i[e]}},title:{text:t.utilityType,style:{color:i[e]}},opposite:e%2!=0}),this.consumptionSeriesData.push({name:t.utilityType,type:"spline",yAxis:e,data:t.data,marker:{enabled:!1},title:{text:t.utilityType,style:{color:i[e]}},opposite:e%2!=0}),e++}),t=n.consumptionData[0]&&null!=n.consumptionData[0].label?n.consumptionData[0].label:[],this.lineChartOptions=this.setLineChart(t,this.consumptionChartData,this.consumptionSeriesData),o=document.getElementById("gdcontainer2"),o&&l.chart("gdcontainer2",this.lineChartOptions),this.showSpinner=!1}else this.showSpinner=!1},error:t=>{this.showSpinner=!1}}):this.showSpinner=!1}setStackedCostComparisonChart(t=null,e){let o="",s="",i=new Date,n=new Date;return"Monthly"==this.selectedValue?(n.setDate(1),n.setMonth(n.getMonth()-1),o=i.toLocaleString("en-us",{month:"long"}),s=n.toLocaleString("en-us",{month:"long"})):"Daily"==this.selectedValue?(o="Today",s="Yesterday"):"Weekly"==this.selectedValue?(o="This Week",s="Last Week"):"Yearly"==this.selectedValue&&(o=i.getFullYear().toString(),n.setFullYear(n.getFullYear()-1),s=n.getFullYear().toString()),{chart:{type:"column",marginLeft:130},title:{text:"Energy Cost Comparison",style:{fontWeight:"bolder",fontFamily:"Roboto"}},credits:{enabled:!1},colors:["#1fd286","#1e5eff","#ffda44","#d80027","#808080","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],xAxis:{categories:[s,o],visible:!0},yAxis:{title:{text:"Total Cost"}},legend:{align:"center",x:30,verticalAlign:"bottom",y:20,floating:!1,backgroundColor:l.defaultOptions.legend.backgroundColor||"white",shadow:!1},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: "+this.currency+" {point.y}<br/>Total: "+this.currency+" {point.stackTotal}"},plotOptions:{series:{pointWidth:50},column:{pointWidth:50,stacking:"normal",dataLabels:{enabled:!1}}},series:e}}setPieChart(t){let e={chart:{height:390,type:"pie",options3d:{enabled:!1,alpha:45}},title:{text:this.selectedValue+" Energy Cost",align:"left",style:{fontFamily:"Roboto",fontWeight:"bolder"}},credits:{enabled:!1},exporting:{enabled:!1},noData:{style:{fontWeight:"bold",fontSize:"15px"}},legend:{floating:!1,align:"left",verticalAlign:"bottom",layout:"horizontal",fontFamily:"Roboto"},plotOptions:{series:{shadow:!1},pointPadding:.25,pie:{innerSize:150,depth:25,colors:["#1fd286","#1e5eff","#ffda44","#d80027","#808080","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]}},series:[{name:"Amount in "+this.currency,type:"pie",allowPointSelect:!0,dataLabels:{enabled:!1},keys:["name","y","selected","sliced"],data:t.chartValues,showInLegend:!0}]},o=e.series[0].data;return o.forEach(t=>{t[0]=t[0]+":  "+this.currency+" "+t[1]}),e.series[0].data=o,e}onValChange(t){null!=t&&(this.selectedValue=t.value),this.setConsumptionLables(t.value),this.getConsumptionData(),this.getEnergyCost()}selectButton(){let t="";t=null==this.selectedValue?"Daily":this.selectedValue;let e=document.getElementById(t);this.frequency.forEach(t=>{document.getElementById(t).className="inactive"}),e.className="active"}setConsumptionLables(t="Daily"){this.consumptionLabel="",this.previousConsumptionLabel="",this.forecastConsumptionLabel="",this.costLabel="",this.previousCostLabel="",this.forecastCostLabel="","Daily"===t?(this.costLabel="Today's Energy Cost",this.previousCostLabel="Yesterday's Energy Cost",this.forecastCostLabel="Forecast Energy Cost",this.costLabelComparison=" than yesterday",this.previousCostLabelComparison=" than day before yesterday",this.forecastCostLabelComparison=" than today"):"Weekly"===t?(this.costLabel="Current Week Energy Cost",this.previousCostLabel="Last Week Energy Cost",this.forecastCostLabel="Forecast Energy Cost",this.costLabelComparison=" than last week",this.previousCostLabelComparison=" than last week",this.forecastCostLabelComparison=" than current week"):"Monthly"===t?(this.costLabel="Current Month Energy Cost",this.previousCostLabel="Last Month Energy Cost",this.forecastCostLabel="Forecast Energy Cost",this.costLabelComparison=" than last month",this.previousCostLabelComparison=" than last month",this.forecastCostLabelComparison=" than current month"):(this.costLabel="Current Year Energy Cost",this.previousCostLabel="Last Year Energy Cost",this.forecastCostLabel="Forecast Energy Cost",this.costLabelComparison=" than last year",this.previousCostLabelComparison=" than last year",this.forecastCostLabelComparison=" than current year")}reset(){this.electricityConsumption="",this.electricityYesterdayConsumption="",this.electricityForecastConsumption="",this.btuConsumption="",this.btuYesterdayConsumption="",this.btuForecastConsumption="",this.waterConsumption="",this.waterYesterdayConsumption="",this.waterForecastConsumption="",this.gasConsumption="",this.gasYesterdayConsumption="",this.gasForecastConsumption="",this.electricityCost="",this.btuCost="",this.waterCost="",this.gasCost="",this.electricityYesterdayCost="",this.btuYesterdayCost="",this.waterYesterdayCost="",this.gasYesterdayCost="",this.electricityForecastCost="",this.btuForecastCost="",this.waterForecastCost="",this.gasForecastCost=""}setLineChart(t=[],e=[],o=[]){return{chart:{zoomType:"xy"},colors:["#1fd286","#1e5eff","#ffda44","#d80027","#808080","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],credits:{enabled:!1},title:{text:this.selectedValue+" Consumption",align:"left",style:{fontWeight:"bold",fontFamily:"Roboto"}},xAxis:[{categories:0==isNaN(null==t?void 0:t[0])?this.formatLabel(t):t,crosshair:!0}],yAxis:e,tooltip:{shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"top",floating:!0,backgroundColor:l.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.25)"},series:o,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{floating:!1,layout:"horizontal",align:"center",verticalAlign:"bottom",x:0,y:0},yAxis:[{labels:{align:"right",x:0,y:-6},showLastLabel:!1},{labels:{align:"left",x:0,y:-6},showLastLabel:!1},{visible:!1}]}}]}}}formatLabel(t){return null!=t&&(t=t.map(t=>(t.length>3&&"Monthly"==this.selectedValue&&(t=t.slice(0,3)),t))),t}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(c.a),T.Nb(P.b),T.Nb(f.a),T.Nb(b.a),T.Nb(O.a),T.Nb(M.a),T.Nb(S.a))},t.\u0275cmp=T.Hb({type:t,selectors:[["fury-ems-general-dashboard"]],viewQuery:function(t,e){var o;1&t&&T.Vc(x.a,!0),2&t&&T.zc(o=T.cc())&&(e.content=o.first)},inputs:{displayedColumns:"displayedColumns"},decls:84,vars:33,consts:[["mode","card"],["fxLayout","column",1,"content"],[1,"toolBar"],[1,"example-spacer"],["name","fontStyle","aria-label","Font Style",1,"buttons",2,"font-size","small","float","right",3,"value","change"],["style","padding: 0px;",3,"id","checked","value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutGap","10px",1,"content",2,"padding","0% 0% 1% 0%"],["fxFlex","",1,"mat-elevation-z4"],["fxFlex","60%"],[1,"topPadding"],[1,"tileHeading"],[1,"energyCost"],["class","gain",4,"ngIf"],["class","loss",4,"ngIf"],["class","gain",3,"matTooltip",4,"ngIf"],["class","loss",3,"matTooltip",4,"ngIf"],[2,"font-size","small"],["fxFlex","40%"],["width","100%","height","40%",2,"padding-top","70px",3,"src"],["class","gain","style","padding-top: 10px;",4,"ngIf"],["class","loss","style","padding-top: 10px;",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column",1,"content",2,"padding","0% 0% 0.25% 0.20%"],["id","gdcontainer2"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutGap","1%",1,"content",2,"padding","0% 0.25% 1% 0.25%","width","100%"],["fxFlex","33%",1,"mat-elevation-z4"],["id","gdcontainer3"],[2,"font-size","large","margin-top","5px","font-weight","bolder"],[2,"width","100%","height","340px","float","left","overflow","auto","overflow-x","visible"],["mat-table","","matSort","",1,"table-sparkline",2,"width","100%",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","currentConsumption"],["mat-header-cell","","class","header-align-right",4,"matHeaderCellDef"],["mat-cell","","class","header-align-right",4,"matCellDef"],["matColumnDef","consumptionDifference "],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],["id","gdcontainer5"],[2,"padding","0px",3,"id","checked","value"],[1,"gain"],[1,"loss"],[1,"gain",3,"matTooltip"],[1,"loss",3,"matTooltip"],[1,"gain",2,"padding-top","10px"],[1,"loss",2,"padding-top","10px"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"header-align-right"],["mat-cell","",1,"header-align-right"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(t,e){1&t&&(T.Tb(0,"fury-page-layout",0),T.Tb(1,"fury-page-layout-content",1),T.Tb(2,"div"),T.Tb(3,"span",2),T.Rc(4,"Dashboard"),T.Sb(),T.Ob(5,"span",3),T.Tb(6,"mat-button-toggle-group",4),T.bc("change",(function(t){return e.onValChange(t)})),T.Pc(7,G,2,4,"mat-button-toggle",5),T.Sb(),T.Sb(),T.Tb(8,"div",6),T.Tb(9,"mat-card",7),T.Tb(10,"div",8),T.Ob(11,"span",9),T.Tb(12,"span",10),T.Rc(13),T.Sb(),T.Tb(14,"p",11),T.Rc(15),T.Sb(),T.Pc(16,I,2,1,"span",12),T.Pc(17,W,2,1,"span",13),T.Tb(18,"span"),T.Pc(19,j,2,1,"mat-icon",14),T.Pc(20,z,2,1,"mat-icon",15),T.Sb(),T.Tb(21,"span",16),T.Rc(22),T.Sb(),T.Sb(),T.Tb(23,"div",17),T.Ob(24,"img",18),T.Sb(),T.Sb(),T.Tb(25,"mat-card",7),T.Tb(26,"div",8),T.Ob(27,"span",9),T.Tb(28,"span",10),T.Rc(29),T.Sb(),T.Ob(30,"span",9),T.Tb(31,"p",11),T.Rc(32),T.Sb(),T.Pc(33,N,2,1,"span",12),T.Pc(34,A,2,1,"span",13),T.Tb(35,"span"),T.Pc(36,V,2,1,"mat-icon",14),T.Pc(37,Y,2,1,"mat-icon",15),T.Sb(),T.Tb(38,"span",16),T.Rc(39),T.Sb(),T.Sb(),T.Tb(40,"div",17),T.Ob(41,"img",18),T.Sb(),T.Sb(),T.Tb(42,"mat-card",7),T.Tb(43,"div",8),T.Ob(44,"span",9),T.Tb(45,"span",10),T.Rc(46),T.Sb(),T.Ob(47,"span",9),T.Tb(48,"p",11),T.Rc(49),T.Sb(),T.Pc(50,H,2,1,"span",12),T.Pc(51,B,2,1,"span",13),T.Tb(52,"span"),T.Pc(53,$,2,0,"mat-icon",19),T.Pc(54,Q,2,0,"mat-icon",20),T.Sb(),T.Tb(55,"span",16),T.Rc(56),T.Sb(),T.Sb(),T.Tb(57,"div",17),T.Ob(58,"img",18),T.Sb(),T.Sb(),T.Sb(),T.Tb(59,"div",21),T.Tb(60,"mat-card",7),T.Ob(61,"div",22),T.Sb(),T.Sb(),T.Tb(62,"div",23),T.Tb(63,"mat-card",24),T.Ob(64,"div",25),T.Sb(),T.Tb(65,"mat-card",24),T.Tb(66,"p",26),T.Rc(67,"Group-wise Energy Consumption"),T.Sb(),T.Tb(68,"div",27),T.Tb(69,"table",28),T.Pc(70,J,2,1,"ng-container",29),T.Rb(71,30),T.Pc(72,X,2,0,"th",31),T.Pc(73,Z,2,1,"td",32),T.Qb(),T.Rb(74,33),T.Pc(75,tt,2,0,"th",31),T.Pc(76,et,2,1,"td",32),T.Qb(),T.Rb(77,34),T.Pc(78,ot,1,0,"th",31),T.Pc(79,nt,3,2,"td",32),T.Qb(),T.Pc(80,at,1,0,"tr",35),T.Pc(81,rt,1,0,"tr",36),T.Sb(),T.Sb(),T.Sb(),T.Tb(82,"mat-card",24),T.Ob(83,"div",37),T.Sb(),T.Sb(),T.Sb(),T.Sb()),2&t&&(T.Cb(6),T.mc("value",e.selectedValue),T.Cb(1),T.mc("ngForOf",e.frequency),T.Cb(6),T.Sc(e.costLabel),T.Cb(2),T.Uc("",e.currency," ",e.currentEnergyCost," "),T.Cb(1),T.mc("ngIf",1==e.isCurrentCostGain),T.Cb(1),T.mc("ngIf",0==e.isCurrentCostGain),T.Cb(2),T.mc("ngIf",1==e.isCurrentCostGain),T.Cb(1),T.mc("ngIf",0==e.isCurrentCostGain),T.Cb(2),T.Tc(" ",e.costLabelComparison," "),T.Cb(2),T.nc("src",e.currentChartFileName,T.Gc),T.Cb(5),T.Sc(e.previousCostLabel),T.Cb(3),T.Uc("",e.currency," ",e.previousEnergyCost," "),T.Cb(1),T.mc("ngIf",1==e.isPreviousCostGain),T.Cb(1),T.mc("ngIf",0==e.isPreviousCostGain),T.Cb(2),T.mc("ngIf",1==e.isPreviousCostGain),T.Cb(1),T.mc("ngIf",0==e.isPreviousCostGain),T.Cb(2),T.Tc(" ",e.previousCostLabelComparison," "),T.Cb(2),T.nc("src",e.previousChartFileName,T.Gc),T.Cb(5),T.Sc(e.forecastCostLabel),T.Cb(3),T.Uc("",e.currency," ",e.forecastEnergyCost," "),T.Cb(1),T.mc("ngIf",1==e.isForecastCostGain),T.Cb(1),T.mc("ngIf",0==e.isForecastCostGain),T.Cb(2),T.mc("ngIf",1==e.isForecastCostGain),T.Cb(1),T.mc("ngIf",0==e.isForecastCostGain),T.Cb(2),T.Tc(" ",e.forecastCostLabelComparison," "),T.Cb(2),T.nc("src",e.forecastChartFileName,T.Gc),T.Cb(11),T.mc("dataSource",e.dataSource),T.Cb(1),T.mc("ngForOf",e.displayedColumns),T.Cb(10),T.mc("matHeaderRowDef",e.visibleColumns),T.Cb(1),T.mc("matRowDefColumns",e.visibleColumns))},directives:[L.a,E.a,_.d,k.b,s.n,_.e,D.a,_.b,s.o,y.j,x.a,y.c,y.e,y.b,y.g,y.i,k.a,R.a,F.a,y.d,x.b,y.a,y.f,y.h],styles:['.padding[_ngcontent-%COMP%]{padding:0 0 24px}.content[_ngcontent-%COMP%]{margin-top:1%}ul[_ngcontent-%COMP%]{margin:20px}.label-color[_ngcontent-%COMP%]{position:relative}.label-color[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:20px}.label-color[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{width:10px;height:10px;display:inline-block;background-color:#ccc;position:absolute;left:5px;top:5px}.heading[_ngcontent-%COMP%]{background:#1976d2;font-size:17px;height:0}.img-style[_ngcontent-%COMP%]{width:32px}.common-buttons[_ngcontent-%COMP%]{height:50%}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#0051b4;color:#fff!important}.mat-card[class*=mat-elevation-z].consumption[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px #ff4500,0 1px 1px 0 #ff4500,0 1px 3px 0 #ff4500}.mat-card[class*=mat-elevation-z].average[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px #2bbb18,0 1px 1px 0 #2bbb18,0 1px 3px 0 #2bbb18}.mat-card[class*=mat-elevation-z].peak[_ngcontent-%COMP%]{box-shadow:0 2px 1px -1px red,0 1px 1px 0 red,0 1px 3px 0 red}.card-height[_ngcontent-%COMP%]{min-width:26%}.consumption-icon[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff}.average-icon[_ngcontent-%COMP%]{background-color:#2bbb18;color:#fff}.peak-icon[_ngcontent-%COMP%]{background-color:red;color:#fff}.myInput[_ngcontent-%COMP%]{height:50px!important;padding:10px!important}.electricityReminder[_ngcontent-%COMP%]{background:#d32e44;color:#fff;max-width:100%}.waterReminder[_ngcontent-%COMP%]{background:#72a81b;color:#fff;max-width:100%}.btuReminder[_ngcontent-%COMP%]{background:#03a9f4;color:#fff;max-width:100%}.gasReminder[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;max-width:100%}.datacounter[_ngcontent-%COMP%]{margin:0;padding-left:10%}.datacounter[_ngcontent-%COMP%], .fontSize[_ngcontent-%COMP%]{font-size:large;vertical-align:middle;font-weight:700}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.customRowFlexContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.customColumnFlexContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;padding:5px;justify-content:space-evenly}.customCardHeader[_ngcontent-%COMP%]{font-size:small}.customCardHeader[_ngcontent-%COMP%], .customCardHighHeader[_ngcontent-%COMP%]{flex-direction:row;flex:auto;justify-content:flex-end;align-items:flex-end;color:#636e72}.customCardHighHeader[_ngcontent-%COMP%]{font-size:medium;font-size:small}.customCardHeaderValue[_ngcontent-%COMP%]{font-size:medium;color:#094b97}.customCardHeaderValue[_ngcontent-%COMP%], .customCardHighHeaderValue[_ngcontent-%COMP%]{flex-direction:row;flex:auto;justify-content:flex-end;align-items:flex-end;font-weight:700;padding:5px;min-width:1fr}.customCardHighHeaderValue[_ngcontent-%COMP%]{font-size:large;color:#fd7272;font-size:25px}.customUtilityType[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin:10px}.position-fixed[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:5}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.toolBar[_ngcontent-%COMP%]{font-size:x-large;font-weight:700;line-height:50px}.customMatToolbar[_ngcontent-%COMP%]{font-weight:35px;font-size:larger;margin-left:20px;margin-bottom:-20px}h6[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#40407a!important}.energyCost[_ngcontent-%COMP%]{font-size:x-large;vertical-align:middle;margin:0;padding:25px 0 10px;font-weight:700}.gain[_ngcontent-%COMP%]{color:#5cb85c}.gain[_ngcontent-%COMP%], .loss[_ngcontent-%COMP%]{padding:0 10px;font-weight:bolder;font-size:large}.loss[_ngcontent-%COMP%]{color:#d9534f}.alignRight[_ngcontent-%COMP%]{float:right}.topPadding[_ngcontent-%COMP%]{padding-top:20px}.tileHeading[_ngcontent-%COMP%]{font-weight:700}#result[_ngcontent-%COMP%]{text-align:right;color:grey;min-height:2em}.table-sparkline[_ngcontent-%COMP%]{margin:0 auto;border-collapse:collapse}.mat-cell[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid silver;height:20px}.mat-header-cell[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%]{padding:15px;height:20px;font-weight:bolder;text-align:left;border-top:2px solid grey;border-bottom:2px solid grey;color:#000}.highcharts-tooltip[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background:#fff;border:1px solid silver;border-radius:3px;box-shadow:1px 1px 2px #888;padding:8px}.header-align-right[_ngcontent-%COMP%]{text-align:right}.loading-indicator[_ngcontent-%COMP%]{position:fixed;z-index:999;height:2em;width:2em;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0}.loading-indicator[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3)}'],data:{animation:[r.a,a.a]}}),t})()}];let lt=(()=>{class t{}return t.\u0275mod=T.Lb({type:t}),t.\u0275inj=T.Kb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(ct)],n.j]}),t})();var ht=o("qFsG"),pt=o("/t3+"),ut=o("kmnG"),dt=o("VE2z"),gt=o("KthW"),Ct=o("WCGO"),mt=o("QMK6"),bt=o("q8Jb"),ft=o("0jmt"),yt=o("0IaG"),xt=o("STbY");let wt=(()=>{class t{}return t.\u0275mod=T.Lb({type:t}),t.\u0275inj=T.Kb({factory:function(e){return new(e||t)},providers:[s.f,s.g],imports:[[s.c,lt,i.l,gt.a,Ct.a,i.w,mt.a,dt.a,ft.a,bt.a,ut.f,ht.c,k.c,R.b,xt.c,pt.b,F.b,yt.g]]}),t})()}}]);